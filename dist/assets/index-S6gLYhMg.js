function Vw(e,t){for(var s=0;s<t.length;s++){const u=t[s];if(typeof u!="string"&&!Array.isArray(u)){for(const d in u)if(d!=="default"&&!(d in e)){const g=Object.getOwnPropertyDescriptor(u,d);g&&Object.defineProperty(e,d,g.get?g:{enumerable:!0,get:()=>u[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function s(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(d){if(d.ep)return;d.ep=!0;const g=s(d);fetch(d.href,g)}})();var JA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jw={exports:{}},Qf={},Zw={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=Symbol.for("react.element"),QA=Symbol.for("react.portal"),eC=Symbol.for("react.fragment"),tC=Symbol.for("react.strict_mode"),rC=Symbol.for("react.profiler"),nC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),sC=Symbol.for("react.suspense"),oC=Symbol.for("react.memo"),lC=Symbol.for("react.lazy"),Hx=Symbol.iterator;function uC(e){return e===null||typeof e!="object"?null:(e=Hx&&e[Hx]||e["@@iterator"],typeof e=="function"?e:null)}var Hw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gw=Object.assign,qw={};function _u(e,t,s){this.props=e,this.context=t,this.refs=qw,this.updater=s||Hw}_u.prototype.isReactComponent={};_u.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_u.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ww(){}Ww.prototype=_u.prototype;function o0(e,t,s){this.props=e,this.context=t,this.refs=qw,this.updater=s||Hw}var l0=o0.prototype=new Ww;l0.constructor=o0;Gw(l0,_u.prototype);l0.isPureReactComponent=!0;var Gx=Array.isArray,Kw=Object.prototype.hasOwnProperty,u0={current:null},Yw={key:!0,ref:!0,__self:!0,__source:!0};function Xw(e,t,s){var u,d={},g=null,p=null;if(t!=null)for(u in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(g=""+t.key),t)Kw.call(t,u)&&!Yw.hasOwnProperty(u)&&(d[u]=t[u]);var c=arguments.length-2;if(c===1)d.children=s;else if(1<c){for(var S=Array(c),I=0;I<c;I++)S[I]=arguments[I+2];d.children=S}if(e&&e.defaultProps)for(u in c=e.defaultProps,c)d[u]===void 0&&(d[u]=c[u]);return{$$typeof:gh,type:e,key:g,ref:p,props:d,_owner:u0.current}}function cC(e,t){return{$$typeof:gh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c0(e){return typeof e=="object"&&e!==null&&e.$$typeof===gh}function hC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var qx=/\/+/g;function Im(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hC(""+e.key):t.toString(36)}function sf(e,t,s,u,d){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(g){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case gh:case QA:p=!0}}if(p)return p=e,d=d(p),e=u===""?"."+Im(p,0):u,Gx(d)?(s="",e!=null&&(s=e.replace(qx,"$&/")+"/"),sf(d,t,s,"",function(I){return I})):d!=null&&(c0(d)&&(d=cC(d,s+(!d.key||p&&p.key===d.key?"":(""+d.key).replace(qx,"$&/")+"/")+e)),t.push(d)),1;if(p=0,u=u===""?".":u+":",Gx(e))for(var c=0;c<e.length;c++){g=e[c];var S=u+Im(g,c);p+=sf(g,t,s,S,d)}else if(S=uC(e),typeof S=="function")for(e=S.call(e),c=0;!(g=e.next()).done;)g=g.value,S=u+Im(g,c++),p+=sf(g,t,s,S,d);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Nd(e,t,s){if(e==null)return e;var u=[],d=0;return sf(e,u,"","",function(g){return t.call(s,g,d++)}),u}function dC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fi={current:null},of={transition:null},fC={ReactCurrentDispatcher:fi,ReactCurrentBatchConfig:of,ReactCurrentOwner:u0};Kt.Children={map:Nd,forEach:function(e,t,s){Nd(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Nd(e,function(){t++}),t},toArray:function(e){return Nd(e,function(t){return t})||[]},only:function(e){if(!c0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kt.Component=_u;Kt.Fragment=eC;Kt.Profiler=rC;Kt.PureComponent=o0;Kt.StrictMode=tC;Kt.Suspense=sC;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fC;Kt.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=Gw({},e.props),d=e.key,g=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,p=u0.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(S in t)Kw.call(t,S)&&!Yw.hasOwnProperty(S)&&(u[S]=t[S]===void 0&&c!==void 0?c[S]:t[S])}var S=arguments.length-2;if(S===1)u.children=s;else if(1<S){c=Array(S);for(var I=0;I<S;I++)c[I]=arguments[I+2];u.children=c}return{$$typeof:gh,type:e.type,key:d,ref:g,props:u,_owner:p}};Kt.createContext=function(e){return e={$$typeof:iC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nC,_context:e},e.Consumer=e};Kt.createElement=Xw;Kt.createFactory=function(e){var t=Xw.bind(null,e);return t.type=e,t};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(e){return{$$typeof:aC,render:e}};Kt.isValidElement=c0;Kt.lazy=function(e){return{$$typeof:lC,_payload:{_status:-1,_result:e},_init:dC}};Kt.memo=function(e,t){return{$$typeof:oC,type:e,compare:t===void 0?null:t}};Kt.startTransition=function(e){var t=of.transition;of.transition={};try{e()}finally{of.transition=t}};Kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Kt.useCallback=function(e,t){return fi.current.useCallback(e,t)};Kt.useContext=function(e){return fi.current.useContext(e)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(e){return fi.current.useDeferredValue(e)};Kt.useEffect=function(e,t){return fi.current.useEffect(e,t)};Kt.useId=function(){return fi.current.useId()};Kt.useImperativeHandle=function(e,t,s){return fi.current.useImperativeHandle(e,t,s)};Kt.useInsertionEffect=function(e,t){return fi.current.useInsertionEffect(e,t)};Kt.useLayoutEffect=function(e,t){return fi.current.useLayoutEffect(e,t)};Kt.useMemo=function(e,t){return fi.current.useMemo(e,t)};Kt.useReducer=function(e,t,s){return fi.current.useReducer(e,t,s)};Kt.useRef=function(e){return fi.current.useRef(e)};Kt.useState=function(e){return fi.current.useState(e)};Kt.useSyncExternalStore=function(e,t,s){return fi.current.useSyncExternalStore(e,t,s)};Kt.useTransition=function(){return fi.current.useTransition()};Kt.version="18.2.0";Zw.exports=Kt;var Ae=Zw.exports;const js=s0(Ae),pC=Vw({__proto__:null,default:js},[Ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=Ae,gC=Symbol.for("react.element"),yC=Symbol.for("react.fragment"),_C=Object.prototype.hasOwnProperty,vC=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xC={key:!0,ref:!0,__self:!0,__source:!0};function Jw(e,t,s){var u,d={},g=null,p=null;s!==void 0&&(g=""+s),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(p=t.ref);for(u in t)_C.call(t,u)&&!xC.hasOwnProperty(u)&&(d[u]=t[u]);if(e&&e.defaultProps)for(u in t=e.defaultProps,t)d[u]===void 0&&(d[u]=t[u]);return{$$typeof:gC,type:e,key:g,ref:p,props:d,_owner:vC.current}}Qf.Fragment=yC;Qf.jsx=Jw;Qf.jsxs=Jw;jw.exports=Qf;var Y=jw.exports,Qw={exports:{}},Hi={},eb={exports:{}},tb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(et,bt){var wt=et.length;et.push(bt);e:for(;0<wt;){var Lt=wt-1>>>1,jt=et[Lt];if(0<d(jt,bt))et[Lt]=bt,et[wt]=jt,wt=Lt;else break e}}function s(et){return et.length===0?null:et[0]}function u(et){if(et.length===0)return null;var bt=et[0],wt=et.pop();if(wt!==bt){et[0]=wt;e:for(var Lt=0,jt=et.length,Pt=jt>>>1;Lt<Pt;){var Nt=2*(Lt+1)-1,Pn=et[Nt],Rr=Nt+1,Wr=et[Rr];if(0>d(Pn,wt))Rr<jt&&0>d(Wr,Pn)?(et[Lt]=Wr,et[Rr]=wt,Lt=Rr):(et[Lt]=Pn,et[Nt]=wt,Lt=Nt);else if(Rr<jt&&0>d(Wr,wt))et[Lt]=Wr,et[Rr]=wt,Lt=Rr;else break e}}return bt}function d(et,bt){var wt=et.sortIndex-bt.sortIndex;return wt!==0?wt:et.id-bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var p=Date,c=p.now();e.unstable_now=function(){return p.now()-c}}var S=[],I=[],k=1,R=null,z=3,ue=!1,ie=!1,q=!1,ae=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(et){for(var bt=s(I);bt!==null;){if(bt.callback===null)u(I);else if(bt.startTime<=et)u(I),bt.sortIndex=bt.expirationTime,t(S,bt);else break;bt=s(I)}}function re(et){if(q=!1,H(et),!ie)if(s(S)!==null)ie=!0,ir(be);else{var bt=s(I);bt!==null&&xn(re,bt.startTime-et)}}function be(et,bt){ie=!1,q&&(q=!1,G(Oe),Oe=-1),ue=!0;var wt=z;try{for(H(bt),R=s(S);R!==null&&(!(R.expirationTime>bt)||et&&!Et());){var Lt=R.callback;if(typeof Lt=="function"){R.callback=null,z=R.priorityLevel;var jt=Lt(R.expirationTime<=bt);bt=e.unstable_now(),typeof jt=="function"?R.callback=jt:R===s(S)&&u(S),H(bt)}else u(S);R=s(S)}if(R!==null)var Pt=!0;else{var Nt=s(I);Nt!==null&&xn(re,Nt.startTime-bt),Pt=!1}return Pt}finally{R=null,z=wt,ue=!1}}var Pe=!1,Te=null,Oe=-1,at=5,rt=-1;function Et(){return!(e.unstable_now()-rt<at)}function Dt(){if(Te!==null){var et=e.unstable_now();rt=et;var bt=!0;try{bt=Te(!0,et)}finally{bt?Gt():(Pe=!1,Te=null)}}else Pe=!1}var Gt;if(typeof N=="function")Gt=function(){N(Dt)};else if(typeof MessageChannel<"u"){var nr=new MessageChannel,or=nr.port2;nr.port1.onmessage=Dt,Gt=function(){or.postMessage(null)}}else Gt=function(){ae(Dt,0)};function ir(et){Te=et,Pe||(Pe=!0,Gt())}function xn(et,bt){Oe=ae(function(){et(e.unstable_now())},bt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(et){et.callback=null},e.unstable_continueExecution=function(){ie||ue||(ie=!0,ir(be))},e.unstable_forceFrameRate=function(et){0>et||125<et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<et?Math.floor(1e3/et):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return s(S)},e.unstable_next=function(et){switch(z){case 1:case 2:case 3:var bt=3;break;default:bt=z}var wt=z;z=bt;try{return et()}finally{z=wt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(et,bt){switch(et){case 1:case 2:case 3:case 4:case 5:break;default:et=3}var wt=z;z=et;try{return bt()}finally{z=wt}},e.unstable_scheduleCallback=function(et,bt,wt){var Lt=e.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?Lt+wt:Lt):wt=Lt,et){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=wt+jt,et={id:k++,callback:bt,priorityLevel:et,startTime:wt,expirationTime:jt,sortIndex:-1},wt>Lt?(et.sortIndex=wt,t(I,et),s(S)===null&&et===s(I)&&(q?(G(Oe),Oe=-1):q=!0,xn(re,wt-Lt))):(et.sortIndex=jt,t(S,et),ie||ue||(ie=!0,ir(be))),et},e.unstable_shouldYield=Et,e.unstable_wrapCallback=function(et){var bt=z;return function(){var wt=z;z=bt;try{return et.apply(this,arguments)}finally{z=wt}}}})(tb);eb.exports=tb;var wC=eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=Ae,Zi=wC;function Ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nb=new Set,Yc={};function jo(e,t){cu(e,t),cu(e+"Capture",t)}function cu(e,t){for(Yc[e]=t,e=0;e<t.length;e++)nb.add(t[e])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pg=Object.prototype.hasOwnProperty,bC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wx={},Kx={};function SC(e){return pg.call(Kx,e)?!0:pg.call(Wx,e)?!1:bC.test(e)?Kx[e]=!0:(Wx[e]=!0,!1)}function EC(e,t,s,u){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AC(e,t,s,u){if(t===null||typeof t>"u"||EC(e,t,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pi(e,t,s,u,d,g,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=p}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jn[e]=new pi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jn[t]=new pi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jn[e]=new pi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jn[e]=new pi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jn[e]=new pi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jn[e]=new pi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jn[e]=new pi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jn[e]=new pi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jn[e]=new pi(e,5,!1,e.toLowerCase(),null,!1,!1)});var h0=/[\-:]([a-z])/g;function d0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(h0,d0);jn[t]=new pi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(h0,d0);jn[t]=new pi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(h0,d0);jn[t]=new pi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jn[e]=new pi(e,1,!1,e.toLowerCase(),null,!1,!1)});jn.xlinkHref=new pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jn[e]=new pi(e,1,!1,e.toLowerCase(),null,!0,!0)});function f0(e,t,s,u){var d=jn.hasOwnProperty(t)?jn[t]:null;(d!==null?d.type!==0:u||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AC(t,s,d,u)&&(s=null),u||d===null?SC(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):d.mustUseProperty?e[d.propertyName]=s===null?d.type===3?!1:"":s:(t=d.attributeName,u=d.attributeNamespace,s===null?e.removeAttribute(t):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,u?e.setAttributeNS(u,t,s):e.setAttribute(t,s))))}var ps=rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$d=Symbol.for("react.element"),Gl=Symbol.for("react.portal"),ql=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),mg=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),ab=Symbol.for("react.context"),m0=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),yg=Symbol.for("react.suspense_list"),g0=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),sb=Symbol.for("react.offscreen"),Yx=Symbol.iterator;function Ic(e){return e===null||typeof e!="object"?null:(e=Yx&&e[Yx]||e["@@iterator"],typeof e=="function"?e:null)}var qr=Object.assign,Pm;function Bc(e){if(Pm===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Pm=t&&t[1]||""}return`
`+Pm+e}var Mm=!1;function km(e,t){if(!e||Mm)return"";Mm=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var u=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){u=I}e.call(t.prototype)}else{try{throw Error()}catch(I){u=I}e()}}catch(I){if(I&&u&&typeof I.stack=="string"){for(var d=I.stack.split(`
`),g=u.stack.split(`
`),p=d.length-1,c=g.length-1;1<=p&&0<=c&&d[p]!==g[c];)c--;for(;1<=p&&0<=c;p--,c--)if(d[p]!==g[c]){if(p!==1||c!==1)do if(p--,c--,0>c||d[p]!==g[c]){var S=`
`+d[p].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=p&&0<=c);break}}}finally{Mm=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Bc(e):""}function CC(e){switch(e.tag){case 5:return Bc(e.type);case 16:return Bc("Lazy");case 13:return Bc("Suspense");case 19:return Bc("SuspenseList");case 0:case 2:case 15:return e=km(e.type,!1),e;case 11:return e=km(e.type.render,!1),e;case 1:return e=km(e.type,!0),e;default:return""}}function _g(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ql:return"Fragment";case Gl:return"Portal";case mg:return"Profiler";case p0:return"StrictMode";case gg:return"Suspense";case yg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ab:return(e.displayName||"Context")+".Consumer";case ib:return(e._context.displayName||"Context")+".Provider";case m0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g0:return t=e.displayName||null,t!==null?t:_g(e.type)||"Memo";case Fs:t=e._payload,e=e._init;try{return _g(e(t))}catch{}}return null}function TC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _g(t);case 8:return t===p0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ob(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IC(e){var t=ob(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,g=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(p){u=""+p,g.call(this,p)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(p){u=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ud(e){e._valueTracker||(e._valueTracker=IC(e))}function lb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),u="";return e&&(u=ob(e)?e.checked?"true":"false":e.value),e=u,e!==s?(t.setValue(e),!0):!1}function wf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vg(e,t){var s=t.checked;return qr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Xx(e,t){var s=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;s=Qs(t.value!=null?t.value:s),e._wrapperState={initialChecked:u,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ub(e,t){t=t.checked,t!=null&&f0(e,"checked",t,!1)}function xg(e,t){ub(e,t);var s=Qs(t.value),u=t.type;if(s!=null)u==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wg(e,t.type,s):t.hasOwnProperty("defaultValue")&&wg(e,t.type,Qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jx(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function wg(e,t,s){(t!=="number"||wf(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Oc=Array.isArray;function iu(e,t,s,u){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&u&&(e[s].defaultSelected=!0)}else{for(s=""+Qs(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,u&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function bg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return qr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qx(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Ke(92));if(Oc(s)){if(1<s.length)throw Error(Ke(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Qs(s)}}function cb(e,t){var s=Qs(t.value),u=Qs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),u!=null&&(e.defaultValue=""+u)}function e1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vd,db=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,u,d){MSApp.execUnsafeLocalFunction(function(){return e(t,s,u,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vd=Vd||document.createElement("div"),Vd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xc(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PC=["Webkit","ms","Moz","O"];Object.keys(Uc).forEach(function(e){PC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uc[t]=Uc[e]})});function fb(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Uc.hasOwnProperty(e)&&Uc[e]?(""+t).trim():t+"px"}function pb(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var u=s.indexOf("--")===0,d=fb(s,t[s],u);s==="float"&&(s="cssFloat"),u?e.setProperty(s,d):e[s]=d}}var MC=qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eg(e,t){if(t){if(MC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ke(62))}}function Ag(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cg=null;function y0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tg=null,au=null,su=null;function t1(e){if(e=vh(e)){if(typeof Tg!="function")throw Error(Ke(280));var t=e.stateNode;t&&(t=ip(t),Tg(e.stateNode,e.type,t))}}function mb(e){au?su?su.push(e):su=[e]:au=e}function gb(){if(au){var e=au,t=su;if(su=au=null,t1(e),t)for(e=0;e<t.length;e++)t1(t[e])}}function yb(e,t){return e(t)}function _b(){}var Rm=!1;function vb(e,t,s){if(Rm)return e(t,s);Rm=!0;try{return yb(e,t,s)}finally{Rm=!1,(au!==null||su!==null)&&(_b(),gb())}}function Jc(e,t){var s=e.stateNode;if(s===null)return null;var u=ip(s);if(u===null)return null;s=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Ke(231,t,typeof s));return s}var Ig=!1;if(cs)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){Ig=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{Ig=!1}function kC(e,t,s,u,d,g,p,c,S){var I=Array.prototype.slice.call(arguments,3);try{t.apply(s,I)}catch(k){this.onError(k)}}var Vc=!1,bf=null,Sf=!1,Pg=null,RC={onError:function(e){Vc=!0,bf=e}};function DC(e,t,s,u,d,g,p,c,S){Vc=!1,bf=null,kC.apply(RC,arguments)}function LC(e,t,s,u,d,g,p,c,S){if(DC.apply(this,arguments),Vc){if(Vc){var I=bf;Vc=!1,bf=null}else throw Error(Ke(198));Sf||(Sf=!0,Pg=I)}}function Zo(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function xb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function r1(e){if(Zo(e)!==e)throw Error(Ke(188))}function zC(e){var t=e.alternate;if(!t){if(t=Zo(e),t===null)throw Error(Ke(188));return t!==e?null:e}for(var s=e,u=t;;){var d=s.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===s)return r1(d),e;if(g===u)return r1(d),t;g=g.sibling}throw Error(Ke(188))}if(s.return!==u.return)s=d,u=g;else{for(var p=!1,c=d.child;c;){if(c===s){p=!0,s=d,u=g;break}if(c===u){p=!0,u=d,s=g;break}c=c.sibling}if(!p){for(c=g.child;c;){if(c===s){p=!0,s=g,u=d;break}if(c===u){p=!0,u=g,s=d;break}c=c.sibling}if(!p)throw Error(Ke(189))}}if(s.alternate!==u)throw Error(Ke(190))}if(s.tag!==3)throw Error(Ke(188));return s.stateNode.current===s?e:t}function wb(e){return e=zC(e),e!==null?bb(e):null}function bb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bb(e);if(t!==null)return t;e=e.sibling}return null}var Sb=Zi.unstable_scheduleCallback,n1=Zi.unstable_cancelCallback,FC=Zi.unstable_shouldYield,BC=Zi.unstable_requestPaint,un=Zi.unstable_now,OC=Zi.unstable_getCurrentPriorityLevel,_0=Zi.unstable_ImmediatePriority,Eb=Zi.unstable_UserBlockingPriority,Ef=Zi.unstable_NormalPriority,NC=Zi.unstable_LowPriority,Ab=Zi.unstable_IdlePriority,ep=null,Na=null;function $C(e){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(ep,e,void 0,(e.current.flags&128)===128)}catch{}}var xa=Math.clz32?Math.clz32:jC,UC=Math.log,VC=Math.LN2;function jC(e){return e>>>=0,e===0?32:31-(UC(e)/VC|0)|0}var jd=64,Zd=4194304;function Nc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Af(e,t){var s=e.pendingLanes;if(s===0)return 0;var u=0,d=e.suspendedLanes,g=e.pingedLanes,p=s&268435455;if(p!==0){var c=p&~d;c!==0?u=Nc(c):(g&=p,g!==0&&(u=Nc(g)))}else p=s&~d,p!==0?u=Nc(p):g!==0&&(u=Nc(g));if(u===0)return 0;if(t!==0&&t!==u&&!(t&d)&&(d=u&-u,g=t&-t,d>=g||d===16&&(g&4194240)!==0))return t;if(u&4&&(u|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)s=31-xa(t),d=1<<s,u|=e[s],t&=~d;return u}function ZC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HC(e,t){for(var s=e.suspendedLanes,u=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes;0<g;){var p=31-xa(g),c=1<<p,S=d[p];S===-1?(!(c&s)||c&u)&&(d[p]=ZC(c,t)):S<=t&&(e.expiredLanes|=c),g&=~c}}function Mg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cb(){var e=jd;return jd<<=1,!(jd&4194240)&&(jd=64),e}function Dm(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function yh(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xa(t),e[t]=s}function GC(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<s;){var d=31-xa(s),g=1<<d;t[d]=0,u[d]=-1,e[d]=-1,s&=~g}}function v0(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var u=31-xa(s),d=1<<u;d&t|e[u]&t&&(e[u]|=t),s&=~d}}var sr=0;function Tb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ib,x0,Pb,Mb,kb,kg=!1,Hd=[],Zs=null,Hs=null,Gs=null,Qc=new Map,eh=new Map,Os=[],qC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i1(e,t){switch(e){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eh.delete(t.pointerId)}}function Mc(e,t,s,u,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},t!==null&&(t=vh(t),t!==null&&x0(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function WC(e,t,s,u,d){switch(t){case"focusin":return Zs=Mc(Zs,e,t,s,u,d),!0;case"dragenter":return Hs=Mc(Hs,e,t,s,u,d),!0;case"mouseover":return Gs=Mc(Gs,e,t,s,u,d),!0;case"pointerover":var g=d.pointerId;return Qc.set(g,Mc(Qc.get(g)||null,e,t,s,u,d)),!0;case"gotpointercapture":return g=d.pointerId,eh.set(g,Mc(eh.get(g)||null,e,t,s,u,d)),!0}return!1}function Rb(e){var t=Ro(e.target);if(t!==null){var s=Zo(t);if(s!==null){if(t=s.tag,t===13){if(t=xb(s),t!==null){e.blockedOn=t,kb(e.priority,function(){Pb(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Rg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var u=new s.constructor(s.type,s);Cg=u,s.target.dispatchEvent(u),Cg=null}else return t=vh(s),t!==null&&x0(t),e.blockedOn=s,!1;t.shift()}return!0}function a1(e,t,s){lf(e)&&s.delete(t)}function KC(){kg=!1,Zs!==null&&lf(Zs)&&(Zs=null),Hs!==null&&lf(Hs)&&(Hs=null),Gs!==null&&lf(Gs)&&(Gs=null),Qc.forEach(a1),eh.forEach(a1)}function kc(e,t){e.blockedOn===t&&(e.blockedOn=null,kg||(kg=!0,Zi.unstable_scheduleCallback(Zi.unstable_NormalPriority,KC)))}function th(e){function t(d){return kc(d,e)}if(0<Hd.length){kc(Hd[0],e);for(var s=1;s<Hd.length;s++){var u=Hd[s];u.blockedOn===e&&(u.blockedOn=null)}}for(Zs!==null&&kc(Zs,e),Hs!==null&&kc(Hs,e),Gs!==null&&kc(Gs,e),Qc.forEach(t),eh.forEach(t),s=0;s<Os.length;s++)u=Os[s],u.blockedOn===e&&(u.blockedOn=null);for(;0<Os.length&&(s=Os[0],s.blockedOn===null);)Rb(s),s.blockedOn===null&&Os.shift()}var ou=ps.ReactCurrentBatchConfig,Cf=!0;function YC(e,t,s,u){var d=sr,g=ou.transition;ou.transition=null;try{sr=1,w0(e,t,s,u)}finally{sr=d,ou.transition=g}}function XC(e,t,s,u){var d=sr,g=ou.transition;ou.transition=null;try{sr=4,w0(e,t,s,u)}finally{sr=d,ou.transition=g}}function w0(e,t,s,u){if(Cf){var d=Rg(e,t,s,u);if(d===null)jm(e,t,u,Tf,s),i1(e,u);else if(WC(d,e,t,s,u))u.stopPropagation();else if(i1(e,u),t&4&&-1<qC.indexOf(e)){for(;d!==null;){var g=vh(d);if(g!==null&&Ib(g),g=Rg(e,t,s,u),g===null&&jm(e,t,u,Tf,s),g===d)break;d=g}d!==null&&u.stopPropagation()}else jm(e,t,u,null,s)}}var Tf=null;function Rg(e,t,s,u){if(Tf=null,e=y0(u),e=Ro(e),e!==null)if(t=Zo(e),t===null)e=null;else if(s=t.tag,s===13){if(e=xb(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tf=e,null}function Db(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OC()){case _0:return 1;case Eb:return 4;case Ef:case NC:return 16;case Ab:return 536870912;default:return 16}default:return 16}}var $s=null,b0=null,uf=null;function Lb(){if(uf)return uf;var e,t=b0,s=t.length,u,d="value"in $s?$s.value:$s.textContent,g=d.length;for(e=0;e<s&&t[e]===d[e];e++);var p=s-e;for(u=1;u<=p&&t[s-u]===d[g-u];u++);return uf=d.slice(e,1<u?1-u:void 0)}function cf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gd(){return!0}function s1(){return!1}function Gi(e){function t(s,u,d,g,p){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=p,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(g):g[c]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Gd:s1,this.isPropagationStopped=s1,this}return qr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Gd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Gd)},persist:function(){},isPersistent:Gd}),t}var vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S0=Gi(vu),_h=qr({},vu,{view:0,detail:0}),JC=Gi(_h),Lm,zm,Rc,tp=qr({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rc&&(Rc&&e.type==="mousemove"?(Lm=e.screenX-Rc.screenX,zm=e.screenY-Rc.screenY):zm=Lm=0,Rc=e),Lm)},movementY:function(e){return"movementY"in e?e.movementY:zm}}),o1=Gi(tp),QC=qr({},tp,{dataTransfer:0}),eT=Gi(QC),tT=qr({},_h,{relatedTarget:0}),Fm=Gi(tT),rT=qr({},vu,{animationName:0,elapsedTime:0,pseudoElement:0}),nT=Gi(rT),iT=qr({},vu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aT=Gi(iT),sT=qr({},vu,{data:0}),l1=Gi(sT),oT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uT[e])?!!t[e]:!1}function E0(){return cT}var hT=qr({},_h,{key:function(e){if(e.key){var t=oT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E0,charCode:function(e){return e.type==="keypress"?cf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dT=Gi(hT),fT=qr({},tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u1=Gi(fT),pT=qr({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E0}),mT=Gi(pT),gT=qr({},vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),yT=Gi(gT),_T=qr({},tp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vT=Gi(_T),xT=[9,13,27,32],A0=cs&&"CompositionEvent"in window,jc=null;cs&&"documentMode"in document&&(jc=document.documentMode);var wT=cs&&"TextEvent"in window&&!jc,zb=cs&&(!A0||jc&&8<jc&&11>=jc),c1=" ",h1=!1;function Fb(e,t){switch(e){case"keyup":return xT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wl=!1;function bT(e,t){switch(e){case"compositionend":return Bb(t);case"keypress":return t.which!==32?null:(h1=!0,c1);case"textInput":return e=t.data,e===c1&&h1?null:e;default:return null}}function ST(e,t){if(Wl)return e==="compositionend"||!A0&&Fb(e,t)?(e=Lb(),uf=b0=$s=null,Wl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zb&&t.locale!=="ko"?null:t.data;default:return null}}var ET={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ET[e.type]:t==="textarea"}function Ob(e,t,s,u){mb(u),t=If(t,"onChange"),0<t.length&&(s=new S0("onChange","change",null,s,u),e.push({event:s,listeners:t}))}var Zc=null,rh=null;function AT(e){Kb(e,0)}function rp(e){var t=Xl(e);if(lb(t))return e}function CT(e,t){if(e==="change")return t}var Nb=!1;if(cs){var Bm;if(cs){var Om="oninput"in document;if(!Om){var f1=document.createElement("div");f1.setAttribute("oninput","return;"),Om=typeof f1.oninput=="function"}Bm=Om}else Bm=!1;Nb=Bm&&(!document.documentMode||9<document.documentMode)}function p1(){Zc&&(Zc.detachEvent("onpropertychange",$b),rh=Zc=null)}function $b(e){if(e.propertyName==="value"&&rp(rh)){var t=[];Ob(t,rh,e,y0(e)),vb(AT,t)}}function TT(e,t,s){e==="focusin"?(p1(),Zc=t,rh=s,Zc.attachEvent("onpropertychange",$b)):e==="focusout"&&p1()}function IT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rp(rh)}function PT(e,t){if(e==="click")return rp(t)}function MT(e,t){if(e==="input"||e==="change")return rp(t)}function kT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ea=typeof Object.is=="function"?Object.is:kT;function nh(e,t){if(Ea(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),u=Object.keys(t);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!pg.call(t,d)||!Ea(e[d],t[d]))return!1}return!0}function m1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function g1(e,t){var s=m1(e);e=0;for(var u;s;){if(s.nodeType===3){if(u=e+s.textContent.length,e<=t&&u>=t)return{node:s,offset:t-e};e=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=m1(s)}}function Ub(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ub(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vb(){for(var e=window,t=wf();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=wf(e.document)}return t}function C0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RT(e){var t=Vb(),s=e.focusedElem,u=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Ub(s.ownerDocument.documentElement,s)){if(u!==null&&C0(s)){if(t=u.start,e=u.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=s.textContent.length,g=Math.min(u.start,d);u=u.end===void 0?g:Math.min(u.end,d),!e.extend&&g>u&&(d=u,u=g,g=d),d=g1(s,g);var p=g1(s,u);d&&p&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),g>u?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var DT=cs&&"documentMode"in document&&11>=document.documentMode,Kl=null,Dg=null,Hc=null,Lg=!1;function y1(e,t,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Lg||Kl==null||Kl!==wf(u)||(u=Kl,"selectionStart"in u&&C0(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Hc&&nh(Hc,u)||(Hc=u,u=If(Dg,"onSelect"),0<u.length&&(t=new S0("onSelect","select",null,t,s),e.push({event:t,listeners:u}),t.target=Kl)))}function qd(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Yl={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},Nm={},jb={};cs&&(jb=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function np(e){if(Nm[e])return Nm[e];if(!Yl[e])return e;var t=Yl[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in jb)return Nm[e]=t[s];return e}var Zb=np("animationend"),Hb=np("animationiteration"),Gb=np("animationstart"),qb=np("transitionend"),Wb=new Map,_1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(e,t){Wb.set(e,t),jo(t,[e])}for(var $m=0;$m<_1.length;$m++){var Um=_1[$m],LT=Um.toLowerCase(),zT=Um[0].toUpperCase()+Um.slice(1);to(LT,"on"+zT)}to(Zb,"onAnimationEnd");to(Hb,"onAnimationIteration");to(Gb,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(qb,"onTransitionEnd");cu("onMouseEnter",["mouseout","mouseover"]);cu("onMouseLeave",["mouseout","mouseover"]);cu("onPointerEnter",["pointerout","pointerover"]);cu("onPointerLeave",["pointerout","pointerover"]);jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function v1(e,t,s){var u=e.type||"unknown-event";e.currentTarget=s,LC(u,t,void 0,e),e.currentTarget=null}function Kb(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var u=e[s],d=u.event;u=u.listeners;e:{var g=void 0;if(t)for(var p=u.length-1;0<=p;p--){var c=u[p],S=c.instance,I=c.currentTarget;if(c=c.listener,S!==g&&d.isPropagationStopped())break e;v1(d,c,I),g=S}else for(p=0;p<u.length;p++){if(c=u[p],S=c.instance,I=c.currentTarget,c=c.listener,S!==g&&d.isPropagationStopped())break e;v1(d,c,I),g=S}}}if(Sf)throw e=Pg,Sf=!1,Pg=null,e}function Er(e,t){var s=t[Ng];s===void 0&&(s=t[Ng]=new Set);var u=e+"__bubble";s.has(u)||(Yb(t,e,2,!1),s.add(u))}function Vm(e,t,s){var u=0;t&&(u|=4),Yb(s,e,u,t)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function ih(e){if(!e[Wd]){e[Wd]=!0,nb.forEach(function(s){s!=="selectionchange"&&(FT.has(s)||Vm(s,!1,e),Vm(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wd]||(t[Wd]=!0,Vm("selectionchange",!1,t))}}function Yb(e,t,s,u){switch(Db(t)){case 1:var d=YC;break;case 4:d=XC;break;default:d=w0}s=d.bind(null,t,s,e),d=void 0,!Ig||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),u?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function jm(e,t,s,u,d){var g=u;if(!(t&1)&&!(t&2)&&u!==null)e:for(;;){if(u===null)return;var p=u.tag;if(p===3||p===4){var c=u.stateNode.containerInfo;if(c===d||c.nodeType===8&&c.parentNode===d)break;if(p===4)for(p=u.return;p!==null;){var S=p.tag;if((S===3||S===4)&&(S=p.stateNode.containerInfo,S===d||S.nodeType===8&&S.parentNode===d))return;p=p.return}for(;c!==null;){if(p=Ro(c),p===null)return;if(S=p.tag,S===5||S===6){u=g=p;continue e}c=c.parentNode}}u=u.return}vb(function(){var I=g,k=y0(s),R=[];e:{var z=Wb.get(e);if(z!==void 0){var ue=S0,ie=e;switch(e){case"keypress":if(cf(s)===0)break e;case"keydown":case"keyup":ue=dT;break;case"focusin":ie="focus",ue=Fm;break;case"focusout":ie="blur",ue=Fm;break;case"beforeblur":case"afterblur":ue=Fm;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=o1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=eT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=mT;break;case Zb:case Hb:case Gb:ue=nT;break;case qb:ue=yT;break;case"scroll":ue=JC;break;case"wheel":ue=vT;break;case"copy":case"cut":case"paste":ue=aT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=u1}var q=(t&4)!==0,ae=!q&&e==="scroll",G=q?z!==null?z+"Capture":null:z;q=[];for(var N=I,H;N!==null;){H=N;var re=H.stateNode;if(H.tag===5&&re!==null&&(H=re,G!==null&&(re=Jc(N,G),re!=null&&q.push(ah(N,re,H)))),ae)break;N=N.return}0<q.length&&(z=new ue(z,ie,null,s,k),R.push({event:z,listeners:q}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",z&&s!==Cg&&(ie=s.relatedTarget||s.fromElement)&&(Ro(ie)||ie[hs]))break e;if((ue||z)&&(z=k.window===k?k:(z=k.ownerDocument)?z.defaultView||z.parentWindow:window,ue?(ie=s.relatedTarget||s.toElement,ue=I,ie=ie?Ro(ie):null,ie!==null&&(ae=Zo(ie),ie!==ae||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(ue=null,ie=I),ue!==ie)){if(q=o1,re="onMouseLeave",G="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(q=u1,re="onPointerLeave",G="onPointerEnter",N="pointer"),ae=ue==null?z:Xl(ue),H=ie==null?z:Xl(ie),z=new q(re,N+"leave",ue,s,k),z.target=ae,z.relatedTarget=H,re=null,Ro(k)===I&&(q=new q(G,N+"enter",ie,s,k),q.target=H,q.relatedTarget=ae,re=q),ae=re,ue&&ie)t:{for(q=ue,G=ie,N=0,H=q;H;H=Zl(H))N++;for(H=0,re=G;re;re=Zl(re))H++;for(;0<N-H;)q=Zl(q),N--;for(;0<H-N;)G=Zl(G),H--;for(;N--;){if(q===G||G!==null&&q===G.alternate)break t;q=Zl(q),G=Zl(G)}q=null}else q=null;ue!==null&&x1(R,z,ue,q,!1),ie!==null&&ae!==null&&x1(R,ae,ie,q,!0)}}e:{if(z=I?Xl(I):window,ue=z.nodeName&&z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&z.type==="file")var be=CT;else if(d1(z))if(Nb)be=MT;else{be=IT;var Pe=TT}else(ue=z.nodeName)&&ue.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(be=PT);if(be&&(be=be(e,I))){Ob(R,be,s,k);break e}Pe&&Pe(e,z,I),e==="focusout"&&(Pe=z._wrapperState)&&Pe.controlled&&z.type==="number"&&wg(z,"number",z.value)}switch(Pe=I?Xl(I):window,e){case"focusin":(d1(Pe)||Pe.contentEditable==="true")&&(Kl=Pe,Dg=I,Hc=null);break;case"focusout":Hc=Dg=Kl=null;break;case"mousedown":Lg=!0;break;case"contextmenu":case"mouseup":case"dragend":Lg=!1,y1(R,s,k);break;case"selectionchange":if(DT)break;case"keydown":case"keyup":y1(R,s,k)}var Te;if(A0)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Wl?Fb(e,s)&&(Oe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Oe="onCompositionStart");Oe&&(zb&&s.locale!=="ko"&&(Wl||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Wl&&(Te=Lb()):($s=k,b0="value"in $s?$s.value:$s.textContent,Wl=!0)),Pe=If(I,Oe),0<Pe.length&&(Oe=new l1(Oe,e,null,s,k),R.push({event:Oe,listeners:Pe}),Te?Oe.data=Te:(Te=Bb(s),Te!==null&&(Oe.data=Te)))),(Te=wT?bT(e,s):ST(e,s))&&(I=If(I,"onBeforeInput"),0<I.length&&(k=new l1("onBeforeInput","beforeinput",null,s,k),R.push({event:k,listeners:I}),k.data=Te))}Kb(R,t)})}function ah(e,t,s){return{instance:e,listener:t,currentTarget:s}}function If(e,t){for(var s=t+"Capture",u=[];e!==null;){var d=e,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=Jc(e,s),g!=null&&u.unshift(ah(e,g,d)),g=Jc(e,t),g!=null&&u.push(ah(e,g,d))),e=e.return}return u}function Zl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function x1(e,t,s,u,d){for(var g=t._reactName,p=[];s!==null&&s!==u;){var c=s,S=c.alternate,I=c.stateNode;if(S!==null&&S===u)break;c.tag===5&&I!==null&&(c=I,d?(S=Jc(s,g),S!=null&&p.unshift(ah(s,S,c))):d||(S=Jc(s,g),S!=null&&p.push(ah(s,S,c)))),s=s.return}p.length!==0&&e.push({event:t,listeners:p})}var BT=/\r\n?/g,OT=/\u0000|\uFFFD/g;function w1(e){return(typeof e=="string"?e:""+e).replace(BT,`
`).replace(OT,"")}function Kd(e,t,s){if(t=w1(t),w1(e)!==t&&s)throw Error(Ke(425))}function Pf(){}var zg=null,Fg=null;function Bg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,NT=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,$T=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(e){return b1.resolve(null).then(e).catch(UT)}:Og;function UT(e){setTimeout(function(){throw e})}function Zm(e,t){var s=t,u=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(u===0){e.removeChild(d),th(t);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=d}while(s);th(t)}function qs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function S1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var xu=Math.random().toString(36).slice(2),Oa="__reactFiber$"+xu,sh="__reactProps$"+xu,hs="__reactContainer$"+xu,Ng="__reactEvents$"+xu,VT="__reactListeners$"+xu,jT="__reactHandles$"+xu;function Ro(e){var t=e[Oa];if(t)return t;for(var s=e.parentNode;s;){if(t=s[hs]||s[Oa]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=S1(e);e!==null;){if(s=e[Oa])return s;e=S1(e)}return t}e=s,s=e.parentNode}return null}function vh(e){return e=e[Oa]||e[hs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ke(33))}function ip(e){return e[sh]||null}var $g=[],Jl=-1;function ro(e){return{current:e}}function Ar(e){0>Jl||(e.current=$g[Jl],$g[Jl]=null,Jl--)}function vr(e,t){Jl++,$g[Jl]=e.current,e.current=t}var eo={},ti=ro(eo),Ci=ro(!1),Bo=eo;function hu(e,t){var s=e.type.contextTypes;if(!s)return eo;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in s)d[g]=t[g];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function Ti(e){return e=e.childContextTypes,e!=null}function Mf(){Ar(Ci),Ar(ti)}function E1(e,t,s){if(ti.current!==eo)throw Error(Ke(168));vr(ti,t),vr(Ci,s)}function Xb(e,t,s){var u=e.stateNode;if(t=t.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in t))throw Error(Ke(108,TC(e)||"Unknown",d));return qr({},s,u)}function kf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||eo,Bo=ti.current,vr(ti,e),vr(Ci,Ci.current),!0}function A1(e,t,s){var u=e.stateNode;if(!u)throw Error(Ke(169));s?(e=Xb(e,t,Bo),u.__reactInternalMemoizedMergedChildContext=e,Ar(Ci),Ar(ti),vr(ti,e)):Ar(Ci),vr(Ci,s)}var as=null,ap=!1,Hm=!1;function Jb(e){as===null?as=[e]:as.push(e)}function ZT(e){ap=!0,Jb(e)}function no(){if(!Hm&&as!==null){Hm=!0;var e=0,t=sr;try{var s=as;for(sr=1;e<s.length;e++){var u=s[e];do u=u(!0);while(u!==null)}as=null,ap=!1}catch(d){throw as!==null&&(as=as.slice(e+1)),Sb(_0,no),d}finally{sr=t,Hm=!1}}return null}var Ql=[],eu=0,Rf=null,Df=0,ta=[],ra=0,Oo=null,os=1,ls="";function Mo(e,t){Ql[eu++]=Df,Ql[eu++]=Rf,Rf=e,Df=t}function Qb(e,t,s){ta[ra++]=os,ta[ra++]=ls,ta[ra++]=Oo,Oo=e;var u=os;e=ls;var d=32-xa(u)-1;u&=~(1<<d),s+=1;var g=32-xa(t)+d;if(30<g){var p=d-d%5;g=(u&(1<<p)-1).toString(32),u>>=p,d-=p,os=1<<32-xa(t)+d|s<<d|u,ls=g+e}else os=1<<g|s<<d|u,ls=e}function T0(e){e.return!==null&&(Mo(e,1),Qb(e,1,0))}function I0(e){for(;e===Rf;)Rf=Ql[--eu],Ql[eu]=null,Df=Ql[--eu],Ql[eu]=null;for(;e===Oo;)Oo=ta[--ra],ta[ra]=null,ls=ta[--ra],ta[ra]=null,os=ta[--ra],ta[ra]=null}var ji=null,Vi=null,kr=!1,va=null;function e2(e,t){var s=na(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function C1(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ji=e,Vi=qs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ji=e,Vi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Oo!==null?{id:os,overflow:ls}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=na(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ji=e,Vi=null,!0):!1;default:return!1}}function Ug(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vg(e){if(kr){var t=Vi;if(t){var s=t;if(!C1(e,t)){if(Ug(e))throw Error(Ke(418));t=qs(s.nextSibling);var u=ji;t&&C1(e,t)?e2(u,s):(e.flags=e.flags&-4097|2,kr=!1,ji=e)}}else{if(Ug(e))throw Error(Ke(418));e.flags=e.flags&-4097|2,kr=!1,ji=e}}}function T1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ji=e}function Yd(e){if(e!==ji)return!1;if(!kr)return T1(e),kr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bg(e.type,e.memoizedProps)),t&&(t=Vi)){if(Ug(e))throw t2(),Error(Ke(418));for(;t;)e2(e,t),t=qs(t.nextSibling)}if(T1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Vi=qs(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Vi=null}}else Vi=ji?qs(e.stateNode.nextSibling):null;return!0}function t2(){for(var e=Vi;e;)e=qs(e.nextSibling)}function du(){Vi=ji=null,kr=!1}function P0(e){va===null?va=[e]:va.push(e)}var HT=ps.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){t=qr({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}var Lf=ro(null),zf=null,tu=null,M0=null;function k0(){M0=tu=zf=null}function R0(e){var t=Lf.current;Ar(Lf),e._currentValue=t}function jg(e,t,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===s)break;e=e.return}}function lu(e,t){zf=e,M0=tu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ai=!0),e.firstContext=null)}function sa(e){var t=e._currentValue;if(M0!==e)if(e={context:e,memoizedValue:t,next:null},tu===null){if(zf===null)throw Error(Ke(308));tu=e,zf.dependencies={lanes:0,firstContext:e}}else tu=tu.next=e;return t}var Do=null;function D0(e){Do===null?Do=[e]:Do.push(e)}function r2(e,t,s,u){var d=t.interleaved;return d===null?(s.next=s,D0(t)):(s.next=d.next,d.next=s),t.interleaved=s,ds(e,u)}function ds(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Bs=!1;function L0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ws(e,t,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,Xt&2){var d=u.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),u.pending=t,ds(e,s)}return d=u.interleaved,d===null?(t.next=t,D0(u)):(t.next=d.next,d.next=t),u.interleaved=t,ds(e,s)}function hf(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var u=t.lanes;u&=e.pendingLanes,s|=u,t.lanes=s,v0(e,s)}}function I1(e,t){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var p={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?d=g=p:g=g.next=p,s=s.next}while(s!==null);g===null?d=g=t:g=g.next=t}else d=g=t;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,effects:u.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ff(e,t,s,u){var d=e.updateQueue;Bs=!1;var g=d.firstBaseUpdate,p=d.lastBaseUpdate,c=d.shared.pending;if(c!==null){d.shared.pending=null;var S=c,I=S.next;S.next=null,p===null?g=I:p.next=I,p=S;var k=e.alternate;k!==null&&(k=k.updateQueue,c=k.lastBaseUpdate,c!==p&&(c===null?k.firstBaseUpdate=I:c.next=I,k.lastBaseUpdate=S))}if(g!==null){var R=d.baseState;p=0,k=I=S=null,c=g;do{var z=c.lane,ue=c.eventTime;if((u&z)===z){k!==null&&(k=k.next={eventTime:ue,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var ie=e,q=c;switch(z=t,ue=s,q.tag){case 1:if(ie=q.payload,typeof ie=="function"){R=ie.call(ue,R,z);break e}R=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=q.payload,z=typeof ie=="function"?ie.call(ue,R,z):ie,z==null)break e;R=qr({},R,z);break e;case 2:Bs=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,z=d.effects,z===null?d.effects=[c]:z.push(c))}else ue={eventTime:ue,lane:z,tag:c.tag,payload:c.payload,callback:c.callback,next:null},k===null?(I=k=ue,S=R):k=k.next=ue,p|=z;if(c=c.next,c===null){if(c=d.shared.pending,c===null)break;z=c,c=z.next,z.next=null,d.lastBaseUpdate=z,d.shared.pending=null}}while(!0);if(k===null&&(S=R),d.baseState=S,d.firstBaseUpdate=I,d.lastBaseUpdate=k,t=d.shared.interleaved,t!==null){d=t;do p|=d.lane,d=d.next;while(d!==t)}else g===null&&(d.shared.lanes=0);$o|=p,e.lanes=p,e.memoizedState=R}}function P1(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(Ke(191,d));d.call(u)}}}var i2=new rb.Component().refs;function Zg(e,t,s,u){t=e.memoizedState,s=s(u,t),s=s==null?t:qr({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var sp={isMounted:function(e){return(e=e._reactInternals)?Zo(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var u=hi(),d=Ys(e),g=us(u,d);g.payload=t,s!=null&&(g.callback=s),t=Ws(e,g,d),t!==null&&(wa(t,e,d,u),hf(t,e,d))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var u=hi(),d=Ys(e),g=us(u,d);g.tag=1,g.payload=t,s!=null&&(g.callback=s),t=Ws(e,g,d),t!==null&&(wa(t,e,d,u),hf(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=hi(),u=Ys(e),d=us(s,u);d.tag=2,t!=null&&(d.callback=t),t=Ws(e,d,u),t!==null&&(wa(t,e,u,s),hf(t,e,u))}};function M1(e,t,s,u,d,g,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,g,p):t.prototype&&t.prototype.isPureReactComponent?!nh(s,u)||!nh(d,g):!0}function a2(e,t,s){var u=!1,d=eo,g=t.contextType;return typeof g=="object"&&g!==null?g=sa(g):(d=Ti(t)?Bo:ti.current,u=t.contextTypes,g=(u=u!=null)?hu(e,d):eo),t=new t(s,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sp,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=g),t}function k1(e,t,s,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,u),t.state!==e&&sp.enqueueReplaceState(t,t.state,null)}function Hg(e,t,s,u){var d=e.stateNode;d.props=s,d.state=e.memoizedState,d.refs=i2,L0(e);var g=t.contextType;typeof g=="object"&&g!==null?d.context=sa(g):(g=Ti(t)?Bo:ti.current,d.context=hu(e,g)),d.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(Zg(e,t,g,s),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&sp.enqueueReplaceState(d,d.state,null),Ff(e,s,d,u),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Dc(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Ke(309));var u=s.stateNode}if(!u)throw Error(Ke(147,e));var d=u,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(p){var c=d.refs;c===i2&&(c=d.refs={}),p===null?delete c[g]:c[g]=p},t._stringRef=g,t)}if(typeof e!="string")throw Error(Ke(284));if(!s._owner)throw Error(Ke(290,e))}return e}function Xd(e,t){throw e=Object.prototype.toString.call(t),Error(Ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function R1(e){var t=e._init;return t(e._payload)}function s2(e){function t(G,N){if(e){var H=G.deletions;H===null?(G.deletions=[N],G.flags|=16):H.push(N)}}function s(G,N){if(!e)return null;for(;N!==null;)t(G,N),N=N.sibling;return null}function u(G,N){for(G=new Map;N!==null;)N.key!==null?G.set(N.key,N):G.set(N.index,N),N=N.sibling;return G}function d(G,N){return G=Xs(G,N),G.index=0,G.sibling=null,G}function g(G,N,H){return G.index=H,e?(H=G.alternate,H!==null?(H=H.index,H<N?(G.flags|=2,N):H):(G.flags|=2,N)):(G.flags|=1048576,N)}function p(G){return e&&G.alternate===null&&(G.flags|=2),G}function c(G,N,H,re){return N===null||N.tag!==6?(N=Jm(H,G.mode,re),N.return=G,N):(N=d(N,H),N.return=G,N)}function S(G,N,H,re){var be=H.type;return be===ql?k(G,N,H.props.children,re,H.key):N!==null&&(N.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Fs&&R1(be)===N.type)?(re=d(N,H.props),re.ref=Dc(G,N,H),re.return=G,re):(re=yf(H.type,H.key,H.props,null,G.mode,re),re.ref=Dc(G,N,H),re.return=G,re)}function I(G,N,H,re){return N===null||N.tag!==4||N.stateNode.containerInfo!==H.containerInfo||N.stateNode.implementation!==H.implementation?(N=Qm(H,G.mode,re),N.return=G,N):(N=d(N,H.children||[]),N.return=G,N)}function k(G,N,H,re,be){return N===null||N.tag!==7?(N=Fo(H,G.mode,re,be),N.return=G,N):(N=d(N,H),N.return=G,N)}function R(G,N,H){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Jm(""+N,G.mode,H),N.return=G,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $d:return H=yf(N.type,N.key,N.props,null,G.mode,H),H.ref=Dc(G,null,N),H.return=G,H;case Gl:return N=Qm(N,G.mode,H),N.return=G,N;case Fs:var re=N._init;return R(G,re(N._payload),H)}if(Oc(N)||Ic(N))return N=Fo(N,G.mode,H,null),N.return=G,N;Xd(G,N)}return null}function z(G,N,H,re){var be=N!==null?N.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return be!==null?null:c(G,N,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case $d:return H.key===be?S(G,N,H,re):null;case Gl:return H.key===be?I(G,N,H,re):null;case Fs:return be=H._init,z(G,N,be(H._payload),re)}if(Oc(H)||Ic(H))return be!==null?null:k(G,N,H,re,null);Xd(G,H)}return null}function ue(G,N,H,re,be){if(typeof re=="string"&&re!==""||typeof re=="number")return G=G.get(H)||null,c(N,G,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case $d:return G=G.get(re.key===null?H:re.key)||null,S(N,G,re,be);case Gl:return G=G.get(re.key===null?H:re.key)||null,I(N,G,re,be);case Fs:var Pe=re._init;return ue(G,N,H,Pe(re._payload),be)}if(Oc(re)||Ic(re))return G=G.get(H)||null,k(N,G,re,be,null);Xd(N,re)}return null}function ie(G,N,H,re){for(var be=null,Pe=null,Te=N,Oe=N=0,at=null;Te!==null&&Oe<H.length;Oe++){Te.index>Oe?(at=Te,Te=null):at=Te.sibling;var rt=z(G,Te,H[Oe],re);if(rt===null){Te===null&&(Te=at);break}e&&Te&&rt.alternate===null&&t(G,Te),N=g(rt,N,Oe),Pe===null?be=rt:Pe.sibling=rt,Pe=rt,Te=at}if(Oe===H.length)return s(G,Te),kr&&Mo(G,Oe),be;if(Te===null){for(;Oe<H.length;Oe++)Te=R(G,H[Oe],re),Te!==null&&(N=g(Te,N,Oe),Pe===null?be=Te:Pe.sibling=Te,Pe=Te);return kr&&Mo(G,Oe),be}for(Te=u(G,Te);Oe<H.length;Oe++)at=ue(Te,G,Oe,H[Oe],re),at!==null&&(e&&at.alternate!==null&&Te.delete(at.key===null?Oe:at.key),N=g(at,N,Oe),Pe===null?be=at:Pe.sibling=at,Pe=at);return e&&Te.forEach(function(Et){return t(G,Et)}),kr&&Mo(G,Oe),be}function q(G,N,H,re){var be=Ic(H);if(typeof be!="function")throw Error(Ke(150));if(H=be.call(H),H==null)throw Error(Ke(151));for(var Pe=be=null,Te=N,Oe=N=0,at=null,rt=H.next();Te!==null&&!rt.done;Oe++,rt=H.next()){Te.index>Oe?(at=Te,Te=null):at=Te.sibling;var Et=z(G,Te,rt.value,re);if(Et===null){Te===null&&(Te=at);break}e&&Te&&Et.alternate===null&&t(G,Te),N=g(Et,N,Oe),Pe===null?be=Et:Pe.sibling=Et,Pe=Et,Te=at}if(rt.done)return s(G,Te),kr&&Mo(G,Oe),be;if(Te===null){for(;!rt.done;Oe++,rt=H.next())rt=R(G,rt.value,re),rt!==null&&(N=g(rt,N,Oe),Pe===null?be=rt:Pe.sibling=rt,Pe=rt);return kr&&Mo(G,Oe),be}for(Te=u(G,Te);!rt.done;Oe++,rt=H.next())rt=ue(Te,G,Oe,rt.value,re),rt!==null&&(e&&rt.alternate!==null&&Te.delete(rt.key===null?Oe:rt.key),N=g(rt,N,Oe),Pe===null?be=rt:Pe.sibling=rt,Pe=rt);return e&&Te.forEach(function(Dt){return t(G,Dt)}),kr&&Mo(G,Oe),be}function ae(G,N,H,re){if(typeof H=="object"&&H!==null&&H.type===ql&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case $d:e:{for(var be=H.key,Pe=N;Pe!==null;){if(Pe.key===be){if(be=H.type,be===ql){if(Pe.tag===7){s(G,Pe.sibling),N=d(Pe,H.props.children),N.return=G,G=N;break e}}else if(Pe.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Fs&&R1(be)===Pe.type){s(G,Pe.sibling),N=d(Pe,H.props),N.ref=Dc(G,Pe,H),N.return=G,G=N;break e}s(G,Pe);break}else t(G,Pe);Pe=Pe.sibling}H.type===ql?(N=Fo(H.props.children,G.mode,re,H.key),N.return=G,G=N):(re=yf(H.type,H.key,H.props,null,G.mode,re),re.ref=Dc(G,N,H),re.return=G,G=re)}return p(G);case Gl:e:{for(Pe=H.key;N!==null;){if(N.key===Pe)if(N.tag===4&&N.stateNode.containerInfo===H.containerInfo&&N.stateNode.implementation===H.implementation){s(G,N.sibling),N=d(N,H.children||[]),N.return=G,G=N;break e}else{s(G,N);break}else t(G,N);N=N.sibling}N=Qm(H,G.mode,re),N.return=G,G=N}return p(G);case Fs:return Pe=H._init,ae(G,N,Pe(H._payload),re)}if(Oc(H))return ie(G,N,H,re);if(Ic(H))return q(G,N,H,re);Xd(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,N!==null&&N.tag===6?(s(G,N.sibling),N=d(N,H),N.return=G,G=N):(s(G,N),N=Jm(H,G.mode,re),N.return=G,G=N),p(G)):s(G,N)}return ae}var fu=s2(!0),o2=s2(!1),xh={},$a=ro(xh),oh=ro(xh),lh=ro(xh);function Lo(e){if(e===xh)throw Error(Ke(174));return e}function z0(e,t){switch(vr(lh,t),vr(oh,e),vr($a,xh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sg(t,e)}Ar($a),vr($a,t)}function pu(){Ar($a),Ar(oh),Ar(lh)}function l2(e){Lo(lh.current);var t=Lo($a.current),s=Sg(t,e.type);t!==s&&(vr(oh,e),vr($a,s))}function F0(e){oh.current===e&&(Ar($a),Ar(oh))}var Hr=ro(0);function Bf(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gm=[];function B0(){for(var e=0;e<Gm.length;e++)Gm[e]._workInProgressVersionPrimary=null;Gm.length=0}var df=ps.ReactCurrentDispatcher,qm=ps.ReactCurrentBatchConfig,No=0,Gr=null,_n=null,Tn=null,Of=!1,Gc=!1,uh=0,GT=0;function Jn(){throw Error(Ke(321))}function O0(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ea(e[s],t[s]))return!1;return!0}function N0(e,t,s,u,d,g){if(No=g,Gr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,df.current=e===null||e.memoizedState===null?YT:XT,e=s(u,d),Gc){g=0;do{if(Gc=!1,uh=0,25<=g)throw Error(Ke(301));g+=1,Tn=_n=null,t.updateQueue=null,df.current=JT,e=s(u,d)}while(Gc)}if(df.current=Nf,t=_n!==null&&_n.next!==null,No=0,Tn=_n=Gr=null,Of=!1,t)throw Error(Ke(300));return e}function $0(){var e=uh!==0;return uh=0,e}function Ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Gr.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function oa(){if(_n===null){var e=Gr.alternate;e=e!==null?e.memoizedState:null}else e=_n.next;var t=Tn===null?Gr.memoizedState:Tn.next;if(t!==null)Tn=t,_n=e;else{if(e===null)throw Error(Ke(310));_n=e,e={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},Tn===null?Gr.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function ch(e,t){return typeof t=="function"?t(e):t}function Wm(e){var t=oa(),s=t.queue;if(s===null)throw Error(Ke(311));s.lastRenderedReducer=e;var u=_n,d=u.baseQueue,g=s.pending;if(g!==null){if(d!==null){var p=d.next;d.next=g.next,g.next=p}u.baseQueue=d=g,s.pending=null}if(d!==null){g=d.next,u=u.baseState;var c=p=null,S=null,I=g;do{var k=I.lane;if((No&k)===k)S!==null&&(S=S.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),u=I.hasEagerState?I.eagerState:e(u,I.action);else{var R={lane:k,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};S===null?(c=S=R,p=u):S=S.next=R,Gr.lanes|=k,$o|=k}I=I.next}while(I!==null&&I!==g);S===null?p=u:S.next=c,Ea(u,t.memoizedState)||(Ai=!0),t.memoizedState=u,t.baseState=p,t.baseQueue=S,s.lastRenderedState=u}if(e=s.interleaved,e!==null){d=e;do g=d.lane,Gr.lanes|=g,$o|=g,d=d.next;while(d!==e)}else d===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Km(e){var t=oa(),s=t.queue;if(s===null)throw Error(Ke(311));s.lastRenderedReducer=e;var u=s.dispatch,d=s.pending,g=t.memoizedState;if(d!==null){s.pending=null;var p=d=d.next;do g=e(g,p.action),p=p.next;while(p!==d);Ea(g,t.memoizedState)||(Ai=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),s.lastRenderedState=g}return[g,u]}function u2(){}function c2(e,t){var s=Gr,u=oa(),d=t(),g=!Ea(u.memoizedState,d);if(g&&(u.memoizedState=d,Ai=!0),u=u.queue,U0(f2.bind(null,s,u,e),[e]),u.getSnapshot!==t||g||Tn!==null&&Tn.memoizedState.tag&1){if(s.flags|=2048,hh(9,d2.bind(null,s,u,d,t),void 0,null),In===null)throw Error(Ke(349));No&30||h2(s,t,d)}return d}function h2(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Gr.updateQueue,t===null?(t={lastEffect:null,stores:null},Gr.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function d2(e,t,s,u){t.value=s,t.getSnapshot=u,p2(t)&&m2(e)}function f2(e,t,s){return s(function(){p2(t)&&m2(e)})}function p2(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ea(e,s)}catch{return!0}}function m2(e){var t=ds(e,1);t!==null&&wa(t,e,1,-1)}function D1(e){var t=Ba();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ch,lastRenderedState:e},t.queue=e,e=e.dispatch=KT.bind(null,Gr,e),[t.memoizedState,e]}function hh(e,t,s,u){return e={tag:e,create:t,destroy:s,deps:u,next:null},t=Gr.updateQueue,t===null?(t={lastEffect:null,stores:null},Gr.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,t.lastEffect=e)),e}function g2(){return oa().memoizedState}function ff(e,t,s,u){var d=Ba();Gr.flags|=e,d.memoizedState=hh(1|t,s,void 0,u===void 0?null:u)}function op(e,t,s,u){var d=oa();u=u===void 0?null:u;var g=void 0;if(_n!==null){var p=_n.memoizedState;if(g=p.destroy,u!==null&&O0(u,p.deps)){d.memoizedState=hh(t,s,g,u);return}}Gr.flags|=e,d.memoizedState=hh(1|t,s,g,u)}function L1(e,t){return ff(8390656,8,e,t)}function U0(e,t){return op(2048,8,e,t)}function y2(e,t){return op(4,2,e,t)}function _2(e,t){return op(4,4,e,t)}function v2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function x2(e,t,s){return s=s!=null?s.concat([e]):null,op(4,4,v2.bind(null,t,e),s)}function V0(){}function w2(e,t){var s=oa();t=t===void 0?null:t;var u=s.memoizedState;return u!==null&&t!==null&&O0(t,u[1])?u[0]:(s.memoizedState=[e,t],e)}function b2(e,t){var s=oa();t=t===void 0?null:t;var u=s.memoizedState;return u!==null&&t!==null&&O0(t,u[1])?u[0]:(e=e(),s.memoizedState=[e,t],e)}function S2(e,t,s){return No&21?(Ea(s,t)||(s=Cb(),Gr.lanes|=s,$o|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ai=!0),e.memoizedState=s)}function qT(e,t){var s=sr;sr=s!==0&&4>s?s:4,e(!0);var u=qm.transition;qm.transition={};try{e(!1),t()}finally{sr=s,qm.transition=u}}function E2(){return oa().memoizedState}function WT(e,t,s){var u=Ys(e);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},A2(e))C2(t,s);else if(s=r2(e,t,s,u),s!==null){var d=hi();wa(s,e,u,d),T2(s,t,u)}}function KT(e,t,s){var u=Ys(e),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(A2(e))C2(t,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var p=t.lastRenderedState,c=g(p,s);if(d.hasEagerState=!0,d.eagerState=c,Ea(c,p)){var S=t.interleaved;S===null?(d.next=d,D0(t)):(d.next=S.next,S.next=d),t.interleaved=d;return}}catch{}finally{}s=r2(e,t,d,u),s!==null&&(d=hi(),wa(s,e,u,d),T2(s,t,u))}}function A2(e){var t=e.alternate;return e===Gr||t!==null&&t===Gr}function C2(e,t){Gc=Of=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function T2(e,t,s){if(s&4194240){var u=t.lanes;u&=e.pendingLanes,s|=u,t.lanes=s,v0(e,s)}}var Nf={readContext:sa,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},YT={readContext:sa,useCallback:function(e,t){return Ba().memoizedState=[e,t===void 0?null:t],e},useContext:sa,useEffect:L1,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ff(4194308,4,v2.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ff(4194308,4,e,t)},useInsertionEffect:function(e,t){return ff(4,2,e,t)},useMemo:function(e,t){var s=Ba();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var u=Ba();return t=s!==void 0?s(t):t,u.memoizedState=u.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},u.queue=e,e=e.dispatch=WT.bind(null,Gr,e),[u.memoizedState,e]},useRef:function(e){var t=Ba();return e={current:e},t.memoizedState=e},useState:D1,useDebugValue:V0,useDeferredValue:function(e){return Ba().memoizedState=e},useTransition:function(){var e=D1(!1),t=e[0];return e=qT.bind(null,e[1]),Ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var u=Gr,d=Ba();if(kr){if(s===void 0)throw Error(Ke(407));s=s()}else{if(s=t(),In===null)throw Error(Ke(349));No&30||h2(u,t,s)}d.memoizedState=s;var g={value:s,getSnapshot:t};return d.queue=g,L1(f2.bind(null,u,g,e),[e]),u.flags|=2048,hh(9,d2.bind(null,u,g,s,t),void 0,null),s},useId:function(){var e=Ba(),t=In.identifierPrefix;if(kr){var s=ls,u=os;s=(u&~(1<<32-xa(u)-1)).toString(32)+s,t=":"+t+"R"+s,s=uh++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=GT++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XT={readContext:sa,useCallback:w2,useContext:sa,useEffect:U0,useImperativeHandle:x2,useInsertionEffect:y2,useLayoutEffect:_2,useMemo:b2,useReducer:Wm,useRef:g2,useState:function(){return Wm(ch)},useDebugValue:V0,useDeferredValue:function(e){var t=oa();return S2(t,_n.memoizedState,e)},useTransition:function(){var e=Wm(ch)[0],t=oa().memoizedState;return[e,t]},useMutableSource:u2,useSyncExternalStore:c2,useId:E2,unstable_isNewReconciler:!1},JT={readContext:sa,useCallback:w2,useContext:sa,useEffect:U0,useImperativeHandle:x2,useInsertionEffect:y2,useLayoutEffect:_2,useMemo:b2,useReducer:Km,useRef:g2,useState:function(){return Km(ch)},useDebugValue:V0,useDeferredValue:function(e){var t=oa();return _n===null?t.memoizedState=e:S2(t,_n.memoizedState,e)},useTransition:function(){var e=Km(ch)[0],t=oa().memoizedState;return[e,t]},useMutableSource:u2,useSyncExternalStore:c2,useId:E2,unstable_isNewReconciler:!1};function mu(e,t){try{var s="",u=t;do s+=CC(u),u=u.return;while(u);var d=s}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:d,digest:null}}function Ym(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Gg(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var QT=typeof WeakMap=="function"?WeakMap:Map;function I2(e,t,s){s=us(-1,s),s.tag=3,s.payload={element:null};var u=t.value;return s.callback=function(){Uf||(Uf=!0,ry=u),Gg(e,t)},s}function P2(e,t,s){s=us(-1,s),s.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var d=t.value;s.payload=function(){return u(d)},s.callback=function(){Gg(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){Gg(e,t),typeof u!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),s}function z1(e,t,s){var u=e.pingCache;if(u===null){u=e.pingCache=new QT;var d=new Set;u.set(t,d)}else d=u.get(t),d===void 0&&(d=new Set,u.set(t,d));d.has(s)||(d.add(s),e=fI.bind(null,e,t,s),t.then(e,e))}function F1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function B1(e,t,s,u,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=us(-1,1),t.tag=2,Ws(s,t,1))),s.lanes|=1),e)}var eI=ps.ReactCurrentOwner,Ai=!1;function ci(e,t,s,u){t.child=e===null?o2(t,null,s,u):fu(t,e.child,s,u)}function O1(e,t,s,u,d){s=s.render;var g=t.ref;return lu(t,d),u=N0(e,t,s,u,g,d),s=$0(),e!==null&&!Ai?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,fs(e,t,d)):(kr&&s&&T0(t),t.flags|=1,ci(e,t,u,d),t.child)}function N1(e,t,s,u,d){if(e===null){var g=s.type;return typeof g=="function"&&!Y0(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=g,M2(e,t,g,u,d)):(e=yf(s.type,null,u,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&d)){var p=g.memoizedProps;if(s=s.compare,s=s!==null?s:nh,s(p,u)&&e.ref===t.ref)return fs(e,t,d)}return t.flags|=1,e=Xs(g,u),e.ref=t.ref,e.return=t,t.child=e}function M2(e,t,s,u,d){if(e!==null){var g=e.memoizedProps;if(nh(g,u)&&e.ref===t.ref)if(Ai=!1,t.pendingProps=u=g,(e.lanes&d)!==0)e.flags&131072&&(Ai=!0);else return t.lanes=e.lanes,fs(e,t,d)}return qg(e,t,s,u,d)}function k2(e,t,s){var u=t.pendingProps,d=u.children,g=e!==null?e.memoizedState:null;if(u.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(nu,Ui),Ui|=s;else{if(!(s&1073741824))return e=g!==null?g.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vr(nu,Ui),Ui|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,vr(nu,Ui),Ui|=u}else g!==null?(u=g.baseLanes|s,t.memoizedState=null):u=s,vr(nu,Ui),Ui|=u;return ci(e,t,d,s),t.child}function R2(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function qg(e,t,s,u,d){var g=Ti(s)?Bo:ti.current;return g=hu(t,g),lu(t,d),s=N0(e,t,s,u,g,d),u=$0(),e!==null&&!Ai?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,fs(e,t,d)):(kr&&u&&T0(t),t.flags|=1,ci(e,t,s,d),t.child)}function $1(e,t,s,u,d){if(Ti(s)){var g=!0;kf(t)}else g=!1;if(lu(t,d),t.stateNode===null)pf(e,t),a2(t,s,u),Hg(t,s,u,d),u=!0;else if(e===null){var p=t.stateNode,c=t.memoizedProps;p.props=c;var S=p.context,I=s.contextType;typeof I=="object"&&I!==null?I=sa(I):(I=Ti(s)?Bo:ti.current,I=hu(t,I));var k=s.getDerivedStateFromProps,R=typeof k=="function"||typeof p.getSnapshotBeforeUpdate=="function";R||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==u||S!==I)&&k1(t,p,u,I),Bs=!1;var z=t.memoizedState;p.state=z,Ff(t,u,p,d),S=t.memoizedState,c!==u||z!==S||Ci.current||Bs?(typeof k=="function"&&(Zg(t,s,k,u),S=t.memoizedState),(c=Bs||M1(t,s,c,u,z,S,I))?(R||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=S),p.props=u,p.state=S,p.context=I,u=c):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{p=t.stateNode,n2(e,t),c=t.memoizedProps,I=t.type===t.elementType?c:ya(t.type,c),p.props=I,R=t.pendingProps,z=p.context,S=s.contextType,typeof S=="object"&&S!==null?S=sa(S):(S=Ti(s)?Bo:ti.current,S=hu(t,S));var ue=s.getDerivedStateFromProps;(k=typeof ue=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==R||z!==S)&&k1(t,p,u,S),Bs=!1,z=t.memoizedState,p.state=z,Ff(t,u,p,d);var ie=t.memoizedState;c!==R||z!==ie||Ci.current||Bs?(typeof ue=="function"&&(Zg(t,s,ue,u),ie=t.memoizedState),(I=Bs||M1(t,s,I,u,z,ie,S)||!1)?(k||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ie,S),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ie,S)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=ie),p.props=u,p.state=ie,p.context=S,u=I):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),u=!1)}return Wg(e,t,s,u,g,d)}function Wg(e,t,s,u,d,g){R2(e,t);var p=(t.flags&128)!==0;if(!u&&!p)return d&&A1(t,s,!1),fs(e,t,g);u=t.stateNode,eI.current=t;var c=p&&typeof s.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&p?(t.child=fu(t,e.child,null,g),t.child=fu(t,null,c,g)):ci(e,t,c,g),t.memoizedState=u.state,d&&A1(t,s,!0),t.child}function D2(e){var t=e.stateNode;t.pendingContext?E1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&E1(e,t.context,!1),z0(e,t.containerInfo)}function U1(e,t,s,u,d){return du(),P0(d),t.flags|=256,ci(e,t,s,u),t.child}var Kg={dehydrated:null,treeContext:null,retryLane:0};function Yg(e){return{baseLanes:e,cachePool:null,transitions:null}}function L2(e,t,s){var u=t.pendingProps,d=Hr.current,g=!1,p=(t.flags&128)!==0,c;if((c=p)||(c=e!==null&&e.memoizedState===null?!1:(d&2)!==0),c?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),vr(Hr,d&1),e===null)return Vg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=u.children,e=u.fallback,g?(u=t.mode,g=t.child,p={mode:"hidden",children:p},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=p):g=cp(p,u,0,null),e=Fo(e,u,s,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=Yg(s),t.memoizedState=Kg,e):j0(t,p));if(d=e.memoizedState,d!==null&&(c=d.dehydrated,c!==null))return tI(e,t,p,u,c,d,s);if(g){g=u.fallback,p=t.mode,d=e.child,c=d.sibling;var S={mode:"hidden",children:u.children};return!(p&1)&&t.child!==d?(u=t.child,u.childLanes=0,u.pendingProps=S,t.deletions=null):(u=Xs(d,S),u.subtreeFlags=d.subtreeFlags&14680064),c!==null?g=Xs(c,g):(g=Fo(g,p,s,null),g.flags|=2),g.return=t,u.return=t,u.sibling=g,t.child=u,u=g,g=t.child,p=e.child.memoizedState,p=p===null?Yg(s):{baseLanes:p.baseLanes|s,cachePool:null,transitions:p.transitions},g.memoizedState=p,g.childLanes=e.childLanes&~s,t.memoizedState=Kg,u}return g=e.child,e=g.sibling,u=Xs(g,{mode:"visible",children:u.children}),!(t.mode&1)&&(u.lanes=s),u.return=t,u.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=u,t.memoizedState=null,u}function j0(e,t){return t=cp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jd(e,t,s,u){return u!==null&&P0(u),fu(t,e.child,null,s),e=j0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tI(e,t,s,u,d,g,p){if(s)return t.flags&256?(t.flags&=-257,u=Ym(Error(Ke(422))),Jd(e,t,p,u)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=u.fallback,d=t.mode,u=cp({mode:"visible",children:u.children},d,0,null),g=Fo(g,d,p,null),g.flags|=2,u.return=t,g.return=t,u.sibling=g,t.child=u,t.mode&1&&fu(t,e.child,null,p),t.child.memoizedState=Yg(p),t.memoizedState=Kg,g);if(!(t.mode&1))return Jd(e,t,p,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var c=u.dgst;return u=c,g=Error(Ke(419)),u=Ym(g,u,void 0),Jd(e,t,p,u)}if(c=(p&e.childLanes)!==0,Ai||c){if(u=In,u!==null){switch(p&-p){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|p)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,ds(e,d),wa(u,e,d,-1))}return K0(),u=Ym(Error(Ke(421))),Jd(e,t,p,u)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=pI.bind(null,e),d._reactRetry=t,null):(e=g.treeContext,Vi=qs(d.nextSibling),ji=t,kr=!0,va=null,e!==null&&(ta[ra++]=os,ta[ra++]=ls,ta[ra++]=Oo,os=e.id,ls=e.overflow,Oo=t),t=j0(t,u.children),t.flags|=4096,t)}function V1(e,t,s){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),jg(e.return,t,s)}function Xm(e,t,s,u,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=d)}function z2(e,t,s){var u=t.pendingProps,d=u.revealOrder,g=u.tail;if(ci(e,t,u.children,s),u=Hr.current,u&2)u=u&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&V1(e,s,t);else if(e.tag===19)V1(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(vr(Hr,u),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&Bf(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Xm(t,!1,d,s,g);break;case"backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Bf(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}Xm(t,!0,s,null,g);break;case"together":Xm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),$o|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ke(153));if(t.child!==null){for(e=t.child,s=Xs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Xs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function rI(e,t,s){switch(t.tag){case 3:D2(t),du();break;case 5:l2(t);break;case 1:Ti(t.type)&&kf(t);break;case 4:z0(t,t.stateNode.containerInfo);break;case 10:var u=t.type._context,d=t.memoizedProps.value;vr(Lf,u._currentValue),u._currentValue=d;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(vr(Hr,Hr.current&1),t.flags|=128,null):s&t.child.childLanes?L2(e,t,s):(vr(Hr,Hr.current&1),e=fs(e,t,s),e!==null?e.sibling:null);vr(Hr,Hr.current&1);break;case 19:if(u=(s&t.childLanes)!==0,e.flags&128){if(u)return z2(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),vr(Hr,Hr.current),u)break;return null;case 22:case 23:return t.lanes=0,k2(e,t,s)}return fs(e,t,s)}var F2,Xg,B2,O2;F2=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Xg=function(){};B2=function(e,t,s,u){var d=e.memoizedProps;if(d!==u){e=t.stateNode,Lo($a.current);var g=null;switch(s){case"input":d=vg(e,d),u=vg(e,u),g=[];break;case"select":d=qr({},d,{value:void 0}),u=qr({},u,{value:void 0}),g=[];break;case"textarea":d=bg(e,d),u=bg(e,u),g=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Pf)}Eg(s,u);var p;s=null;for(I in d)if(!u.hasOwnProperty(I)&&d.hasOwnProperty(I)&&d[I]!=null)if(I==="style"){var c=d[I];for(p in c)c.hasOwnProperty(p)&&(s||(s={}),s[p]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(Yc.hasOwnProperty(I)?g||(g=[]):(g=g||[]).push(I,null));for(I in u){var S=u[I];if(c=d!=null?d[I]:void 0,u.hasOwnProperty(I)&&S!==c&&(S!=null||c!=null))if(I==="style")if(c){for(p in c)!c.hasOwnProperty(p)||S&&S.hasOwnProperty(p)||(s||(s={}),s[p]="");for(p in S)S.hasOwnProperty(p)&&c[p]!==S[p]&&(s||(s={}),s[p]=S[p])}else s||(g||(g=[]),g.push(I,s)),s=S;else I==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,c=c?c.__html:void 0,S!=null&&c!==S&&(g=g||[]).push(I,S)):I==="children"?typeof S!="string"&&typeof S!="number"||(g=g||[]).push(I,""+S):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(I)?(S!=null&&I==="onScroll"&&Er("scroll",e),g||c===S||(g=[])):(g=g||[]).push(I,S))}s&&(g=g||[]).push("style",s);var I=g;(t.updateQueue=I)&&(t.flags|=4)}};O2=function(e,t,s,u){s!==u&&(t.flags|=4)};function Lc(e,t){if(!kr)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=u,e.childLanes=s,t}function nI(e,t,s){var u=t.pendingProps;switch(I0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(t),null;case 1:return Ti(t.type)&&Mf(),Qn(t),null;case 3:return u=t.stateNode,pu(),Ar(Ci),Ar(ti),B0(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Yd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,va!==null&&(ay(va),va=null))),Xg(e,t),Qn(t),null;case 5:F0(t);var d=Lo(lh.current);if(s=t.type,e!==null&&t.stateNode!=null)B2(e,t,s,u,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!u){if(t.stateNode===null)throw Error(Ke(166));return Qn(t),null}if(e=Lo($a.current),Yd(t)){u=t.stateNode,s=t.type;var g=t.memoizedProps;switch(u[Oa]=t,u[sh]=g,e=(t.mode&1)!==0,s){case"dialog":Er("cancel",u),Er("close",u);break;case"iframe":case"object":case"embed":Er("load",u);break;case"video":case"audio":for(d=0;d<$c.length;d++)Er($c[d],u);break;case"source":Er("error",u);break;case"img":case"image":case"link":Er("error",u),Er("load",u);break;case"details":Er("toggle",u);break;case"input":Xx(u,g),Er("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},Er("invalid",u);break;case"textarea":Qx(u,g),Er("invalid",u)}Eg(s,g),d=null;for(var p in g)if(g.hasOwnProperty(p)){var c=g[p];p==="children"?typeof c=="string"?u.textContent!==c&&(g.suppressHydrationWarning!==!0&&Kd(u.textContent,c,e),d=["children",c]):typeof c=="number"&&u.textContent!==""+c&&(g.suppressHydrationWarning!==!0&&Kd(u.textContent,c,e),d=["children",""+c]):Yc.hasOwnProperty(p)&&c!=null&&p==="onScroll"&&Er("scroll",u)}switch(s){case"input":Ud(u),Jx(u,g,!0);break;case"textarea":Ud(u),e1(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=Pf)}u=d,t.updateQueue=u,u!==null&&(t.flags|=4)}else{p=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hb(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=p.createElement(s,{is:u.is}):(e=p.createElement(s),s==="select"&&(p=e,u.multiple?p.multiple=!0:u.size&&(p.size=u.size))):e=p.createElementNS(e,s),e[Oa]=t,e[sh]=u,F2(e,t,!1,!1),t.stateNode=e;e:{switch(p=Ag(s,u),s){case"dialog":Er("cancel",e),Er("close",e),d=u;break;case"iframe":case"object":case"embed":Er("load",e),d=u;break;case"video":case"audio":for(d=0;d<$c.length;d++)Er($c[d],e);d=u;break;case"source":Er("error",e),d=u;break;case"img":case"image":case"link":Er("error",e),Er("load",e),d=u;break;case"details":Er("toggle",e),d=u;break;case"input":Xx(e,u),d=vg(e,u),Er("invalid",e);break;case"option":d=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},d=qr({},u,{value:void 0}),Er("invalid",e);break;case"textarea":Qx(e,u),d=bg(e,u),Er("invalid",e);break;default:d=u}Eg(s,d),c=d;for(g in c)if(c.hasOwnProperty(g)){var S=c[g];g==="style"?pb(e,S):g==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&db(e,S)):g==="children"?typeof S=="string"?(s!=="textarea"||S!=="")&&Xc(e,S):typeof S=="number"&&Xc(e,""+S):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Yc.hasOwnProperty(g)?S!=null&&g==="onScroll"&&Er("scroll",e):S!=null&&f0(e,g,S,p))}switch(s){case"input":Ud(e),Jx(e,u,!1);break;case"textarea":Ud(e),e1(e);break;case"option":u.value!=null&&e.setAttribute("value",""+Qs(u.value));break;case"select":e.multiple=!!u.multiple,g=u.value,g!=null?iu(e,!!u.multiple,g,!1):u.defaultValue!=null&&iu(e,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Pf)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qn(t),null;case 6:if(e&&t.stateNode!=null)O2(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Ke(166));if(s=Lo(lh.current),Lo($a.current),Yd(t)){if(u=t.stateNode,s=t.memoizedProps,u[Oa]=t,(g=u.nodeValue!==s)&&(e=ji,e!==null))switch(e.tag){case 3:Kd(u.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kd(u.nodeValue,s,(e.mode&1)!==0)}g&&(t.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[Oa]=t,t.stateNode=u}return Qn(t),null;case 13:if(Ar(Hr),u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kr&&Vi!==null&&t.mode&1&&!(t.flags&128))t2(),du(),t.flags|=98560,g=!1;else if(g=Yd(t),u!==null&&u.dehydrated!==null){if(e===null){if(!g)throw Error(Ke(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(Ke(317));g[Oa]=t}else du(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qn(t),g=!1}else va!==null&&(ay(va),va=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?vn===0&&(vn=3):K0())),t.updateQueue!==null&&(t.flags|=4),Qn(t),null);case 4:return pu(),Xg(e,t),e===null&&ih(t.stateNode.containerInfo),Qn(t),null;case 10:return R0(t.type._context),Qn(t),null;case 17:return Ti(t.type)&&Mf(),Qn(t),null;case 19:if(Ar(Hr),g=t.memoizedState,g===null)return Qn(t),null;if(u=(t.flags&128)!==0,p=g.rendering,p===null)if(u)Lc(g,!1);else{if(vn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=Bf(e),p!==null){for(t.flags|=128,Lc(g,!1),u=p.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),t.subtreeFlags=0,u=s,s=t.child;s!==null;)g=s,e=u,g.flags&=14680066,p=g.alternate,p===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=p.childLanes,g.lanes=p.lanes,g.child=p.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=p.memoizedProps,g.memoizedState=p.memoizedState,g.updateQueue=p.updateQueue,g.type=p.type,e=p.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return vr(Hr,Hr.current&1|2),t.child}e=e.sibling}g.tail!==null&&un()>gu&&(t.flags|=128,u=!0,Lc(g,!1),t.lanes=4194304)}else{if(!u)if(e=Bf(p),e!==null){if(t.flags|=128,u=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Lc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!kr)return Qn(t),null}else 2*un()-g.renderingStartTime>gu&&s!==1073741824&&(t.flags|=128,u=!0,Lc(g,!1),t.lanes=4194304);g.isBackwards?(p.sibling=t.child,t.child=p):(s=g.last,s!==null?s.sibling=p:t.child=p,g.last=p)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=un(),t.sibling=null,s=Hr.current,vr(Hr,u?s&1|2:s&1),t):(Qn(t),null);case 22:case 23:return W0(),u=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(t.flags|=8192),u&&t.mode&1?Ui&1073741824&&(Qn(t),t.subtreeFlags&6&&(t.flags|=8192)):Qn(t),null;case 24:return null;case 25:return null}throw Error(Ke(156,t.tag))}function iI(e,t){switch(I0(t),t.tag){case 1:return Ti(t.type)&&Mf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pu(),Ar(Ci),Ar(ti),B0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return F0(t),null;case 13:if(Ar(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ke(340));du()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ar(Hr),null;case 4:return pu(),null;case 10:return R0(t.type._context),null;case 22:case 23:return W0(),null;case 24:return null;default:return null}}var Qd=!1,ei=!1,aI=typeof WeakSet=="function"?WeakSet:Set,pt=null;function ru(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){Xr(e,t,u)}else s.current=null}function Jg(e,t,s){try{s()}catch(u){Xr(e,t,u)}}var j1=!1;function sI(e,t){if(zg=Cf,e=Vb(),C0(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var p=0,c=-1,S=-1,I=0,k=0,R=e,z=null;t:for(;;){for(var ue;R!==s||d!==0&&R.nodeType!==3||(c=p+d),R!==g||u!==0&&R.nodeType!==3||(S=p+u),R.nodeType===3&&(p+=R.nodeValue.length),(ue=R.firstChild)!==null;)z=R,R=ue;for(;;){if(R===e)break t;if(z===s&&++I===d&&(c=p),z===g&&++k===u&&(S=p),(ue=R.nextSibling)!==null)break;R=z,z=R.parentNode}R=ue}s=c===-1||S===-1?null:{start:c,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(Fg={focusedElem:e,selectionRange:s},Cf=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){t=pt;try{var ie=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var q=ie.memoizedProps,ae=ie.memoizedState,G=t.stateNode,N=G.getSnapshotBeforeUpdate(t.elementType===t.type?q:ya(t.type,q),ae);G.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(re){Xr(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}return ie=j1,j1=!1,ie}function qc(e,t,s){var u=t.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&e)===e){var g=d.destroy;d.destroy=void 0,g!==void 0&&Jg(t,s,g)}d=d.next}while(d!==u)}}function lp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var u=s.create;s.destroy=u()}s=s.next}while(s!==t)}}function Qg(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function N2(e){var t=e.alternate;t!==null&&(e.alternate=null,N2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Oa],delete t[sh],delete t[Ng],delete t[VT],delete t[jT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $2(e){return e.tag===5||e.tag===3||e.tag===4}function Z1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ey(e,t,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Pf));else if(u!==4&&(e=e.child,e!==null))for(ey(e,t,s),e=e.sibling;e!==null;)ey(e,t,s),e=e.sibling}function ty(e,t,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(ty(e,t,s),e=e.sibling;e!==null;)ty(e,t,s),e=e.sibling}var Un=null,_a=!1;function Ls(e,t,s){for(s=s.child;s!==null;)U2(e,t,s),s=s.sibling}function U2(e,t,s){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(ep,s)}catch{}switch(s.tag){case 5:ei||ru(s,t);case 6:var u=Un,d=_a;Un=null,Ls(e,t,s),Un=u,_a=d,Un!==null&&(_a?(e=Un,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Un.removeChild(s.stateNode));break;case 18:Un!==null&&(_a?(e=Un,s=s.stateNode,e.nodeType===8?Zm(e.parentNode,s):e.nodeType===1&&Zm(e,s),th(e)):Zm(Un,s.stateNode));break;case 4:u=Un,d=_a,Un=s.stateNode.containerInfo,_a=!0,Ls(e,t,s),Un=u,_a=d;break;case 0:case 11:case 14:case 15:if(!ei&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var g=d,p=g.destroy;g=g.tag,p!==void 0&&(g&2||g&4)&&Jg(s,t,p),d=d.next}while(d!==u)}Ls(e,t,s);break;case 1:if(!ei&&(ru(s,t),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(c){Xr(s,t,c)}Ls(e,t,s);break;case 21:Ls(e,t,s);break;case 22:s.mode&1?(ei=(u=ei)||s.memoizedState!==null,Ls(e,t,s),ei=u):Ls(e,t,s);break;default:Ls(e,t,s)}}function H1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new aI),t.forEach(function(u){var d=mI.bind(null,e,u);s.has(u)||(s.add(u),u.then(d,d))})}}function ga(e,t){var s=t.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var g=e,p=t,c=p;e:for(;c!==null;){switch(c.tag){case 5:Un=c.stateNode,_a=!1;break e;case 3:Un=c.stateNode.containerInfo,_a=!0;break e;case 4:Un=c.stateNode.containerInfo,_a=!0;break e}c=c.return}if(Un===null)throw Error(Ke(160));U2(g,p,d),Un=null,_a=!1;var S=d.alternate;S!==null&&(S.return=null),d.return=null}catch(I){Xr(d,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)V2(t,e),t=t.sibling}function V2(e,t){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ga(t,e),Fa(e),u&4){try{qc(3,e,e.return),lp(3,e)}catch(q){Xr(e,e.return,q)}try{qc(5,e,e.return)}catch(q){Xr(e,e.return,q)}}break;case 1:ga(t,e),Fa(e),u&512&&s!==null&&ru(s,s.return);break;case 5:if(ga(t,e),Fa(e),u&512&&s!==null&&ru(s,s.return),e.flags&32){var d=e.stateNode;try{Xc(d,"")}catch(q){Xr(e,e.return,q)}}if(u&4&&(d=e.stateNode,d!=null)){var g=e.memoizedProps,p=s!==null?s.memoizedProps:g,c=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{c==="input"&&g.type==="radio"&&g.name!=null&&ub(d,g),Ag(c,p);var I=Ag(c,g);for(p=0;p<S.length;p+=2){var k=S[p],R=S[p+1];k==="style"?pb(d,R):k==="dangerouslySetInnerHTML"?db(d,R):k==="children"?Xc(d,R):f0(d,k,R,I)}switch(c){case"input":xg(d,g);break;case"textarea":cb(d,g);break;case"select":var z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?iu(d,!!g.multiple,ue,!1):z!==!!g.multiple&&(g.defaultValue!=null?iu(d,!!g.multiple,g.defaultValue,!0):iu(d,!!g.multiple,g.multiple?[]:"",!1))}d[sh]=g}catch(q){Xr(e,e.return,q)}}break;case 6:if(ga(t,e),Fa(e),u&4){if(e.stateNode===null)throw Error(Ke(162));d=e.stateNode,g=e.memoizedProps;try{d.nodeValue=g}catch(q){Xr(e,e.return,q)}}break;case 3:if(ga(t,e),Fa(e),u&4&&s!==null&&s.memoizedState.isDehydrated)try{th(t.containerInfo)}catch(q){Xr(e,e.return,q)}break;case 4:ga(t,e),Fa(e);break;case 13:ga(t,e),Fa(e),d=e.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(G0=un())),u&4&&H1(e);break;case 22:if(k=s!==null&&s.memoizedState!==null,e.mode&1?(ei=(I=ei)||k,ga(t,e),ei=I):ga(t,e),Fa(e),u&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!k&&e.mode&1)for(pt=e,k=e.child;k!==null;){for(R=pt=k;pt!==null;){switch(z=pt,ue=z.child,z.tag){case 0:case 11:case 14:case 15:qc(4,z,z.return);break;case 1:ru(z,z.return);var ie=z.stateNode;if(typeof ie.componentWillUnmount=="function"){u=z,s=z.return;try{t=u,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(q){Xr(u,s,q)}}break;case 5:ru(z,z.return);break;case 22:if(z.memoizedState!==null){q1(R);continue}}ue!==null?(ue.return=z,pt=ue):q1(R)}k=k.sibling}e:for(k=null,R=e;;){if(R.tag===5){if(k===null){k=R;try{d=R.stateNode,I?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(c=R.stateNode,S=R.memoizedProps.style,p=S!=null&&S.hasOwnProperty("display")?S.display:null,c.style.display=fb("display",p))}catch(q){Xr(e,e.return,q)}}}else if(R.tag===6){if(k===null)try{R.stateNode.nodeValue=I?"":R.memoizedProps}catch(q){Xr(e,e.return,q)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===e)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===e)break e;for(;R.sibling===null;){if(R.return===null||R.return===e)break e;k===R&&(k=null),R=R.return}k===R&&(k=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:ga(t,e),Fa(e),u&4&&H1(e);break;case 21:break;default:ga(t,e),Fa(e)}}function Fa(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if($2(s)){var u=s;break e}s=s.return}throw Error(Ke(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Xc(d,""),u.flags&=-33);var g=Z1(e);ty(e,g,d);break;case 3:case 4:var p=u.stateNode.containerInfo,c=Z1(e);ey(e,c,p);break;default:throw Error(Ke(161))}}catch(S){Xr(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oI(e,t,s){pt=e,j2(e)}function j2(e,t,s){for(var u=(e.mode&1)!==0;pt!==null;){var d=pt,g=d.child;if(d.tag===22&&u){var p=d.memoizedState!==null||Qd;if(!p){var c=d.alternate,S=c!==null&&c.memoizedState!==null||ei;c=Qd;var I=ei;if(Qd=p,(ei=S)&&!I)for(pt=d;pt!==null;)p=pt,S=p.child,p.tag===22&&p.memoizedState!==null?W1(d):S!==null?(S.return=p,pt=S):W1(d);for(;g!==null;)pt=g,j2(g),g=g.sibling;pt=d,Qd=c,ei=I}G1(e)}else d.subtreeFlags&8772&&g!==null?(g.return=d,pt=g):G1(e)}}function G1(e){for(;pt!==null;){var t=pt;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ei||lp(5,t);break;case 1:var u=t.stateNode;if(t.flags&4&&!ei)if(s===null)u.componentDidMount();else{var d=t.elementType===t.type?s.memoizedProps:ya(t.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&P1(t,g,u);break;case 3:var p=t.updateQueue;if(p!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}P1(t,p,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&s.focus();break;case"img":S.src&&(s.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var k=I.memoizedState;if(k!==null){var R=k.dehydrated;R!==null&&th(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}ei||t.flags&512&&Qg(t)}catch(z){Xr(t,t.return,z)}}if(t===e){pt=null;break}if(s=t.sibling,s!==null){s.return=t.return,pt=s;break}pt=t.return}}function q1(e){for(;pt!==null;){var t=pt;if(t===e){pt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,pt=s;break}pt=t.return}}function W1(e){for(;pt!==null;){var t=pt;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{lp(4,t)}catch(S){Xr(t,s,S)}break;case 1:var u=t.stateNode;if(typeof u.componentDidMount=="function"){var d=t.return;try{u.componentDidMount()}catch(S){Xr(t,d,S)}}var g=t.return;try{Qg(t)}catch(S){Xr(t,g,S)}break;case 5:var p=t.return;try{Qg(t)}catch(S){Xr(t,p,S)}}}catch(S){Xr(t,t.return,S)}if(t===e){pt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,pt=c;break}pt=t.return}}var lI=Math.ceil,$f=ps.ReactCurrentDispatcher,Z0=ps.ReactCurrentOwner,ia=ps.ReactCurrentBatchConfig,Xt=0,In=null,pn=null,Vn=0,Ui=0,nu=ro(0),vn=0,dh=null,$o=0,up=0,H0=0,Wc=null,Ei=null,G0=0,gu=1/0,is=null,Uf=!1,ry=null,Ks=null,ef=!1,Us=null,Vf=0,Kc=0,ny=null,mf=-1,gf=0;function hi(){return Xt&6?un():mf!==-1?mf:mf=un()}function Ys(e){return e.mode&1?Xt&2&&Vn!==0?Vn&-Vn:HT.transition!==null?(gf===0&&(gf=Cb()),gf):(e=sr,e!==0||(e=window.event,e=e===void 0?16:Db(e.type)),e):1}function wa(e,t,s,u){if(50<Kc)throw Kc=0,ny=null,Error(Ke(185));yh(e,s,u),(!(Xt&2)||e!==In)&&(e===In&&(!(Xt&2)&&(up|=s),vn===4&&Ns(e,Vn)),Ii(e,u),s===1&&Xt===0&&!(t.mode&1)&&(gu=un()+500,ap&&no()))}function Ii(e,t){var s=e.callbackNode;HC(e,t);var u=Af(e,e===In?Vn:0);if(u===0)s!==null&&n1(s),e.callbackNode=null,e.callbackPriority=0;else if(t=u&-u,e.callbackPriority!==t){if(s!=null&&n1(s),t===1)e.tag===0?ZT(K1.bind(null,e)):Jb(K1.bind(null,e)),$T(function(){!(Xt&6)&&no()}),s=null;else{switch(Tb(u)){case 1:s=_0;break;case 4:s=Eb;break;case 16:s=Ef;break;case 536870912:s=Ab;break;default:s=Ef}s=X2(s,Z2.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Z2(e,t){if(mf=-1,gf=0,Xt&6)throw Error(Ke(327));var s=e.callbackNode;if(uu()&&e.callbackNode!==s)return null;var u=Af(e,e===In?Vn:0);if(u===0)return null;if(u&30||u&e.expiredLanes||t)t=jf(e,u);else{t=u;var d=Xt;Xt|=2;var g=G2();(In!==e||Vn!==t)&&(is=null,gu=un()+500,zo(e,t));do try{hI();break}catch(c){H2(e,c)}while(!0);k0(),$f.current=g,Xt=d,pn!==null?t=0:(In=null,Vn=0,t=vn)}if(t!==0){if(t===2&&(d=Mg(e),d!==0&&(u=d,t=iy(e,d))),t===1)throw s=dh,zo(e,0),Ns(e,u),Ii(e,un()),s;if(t===6)Ns(e,u);else{if(d=e.current.alternate,!(u&30)&&!uI(d)&&(t=jf(e,u),t===2&&(g=Mg(e),g!==0&&(u=g,t=iy(e,g))),t===1))throw s=dh,zo(e,0),Ns(e,u),Ii(e,un()),s;switch(e.finishedWork=d,e.finishedLanes=u,t){case 0:case 1:throw Error(Ke(345));case 2:ko(e,Ei,is);break;case 3:if(Ns(e,u),(u&130023424)===u&&(t=G0+500-un(),10<t)){if(Af(e,0)!==0)break;if(d=e.suspendedLanes,(d&u)!==u){hi(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Og(ko.bind(null,e,Ei,is),t);break}ko(e,Ei,is);break;case 4:if(Ns(e,u),(u&4194240)===u)break;for(t=e.eventTimes,d=-1;0<u;){var p=31-xa(u);g=1<<p,p=t[p],p>d&&(d=p),u&=~g}if(u=d,u=un()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*lI(u/1960))-u,10<u){e.timeoutHandle=Og(ko.bind(null,e,Ei,is),u);break}ko(e,Ei,is);break;case 5:ko(e,Ei,is);break;default:throw Error(Ke(329))}}}return Ii(e,un()),e.callbackNode===s?Z2.bind(null,e):null}function iy(e,t){var s=Wc;return e.current.memoizedState.isDehydrated&&(zo(e,t).flags|=256),e=jf(e,t),e!==2&&(t=Ei,Ei=s,t!==null&&ay(t)),e}function ay(e){Ei===null?Ei=e:Ei.push.apply(Ei,e)}function uI(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],g=d.getSnapshot;d=d.value;try{if(!Ea(g(),d))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ns(e,t){for(t&=~H0,t&=~up,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-xa(t),u=1<<s;e[s]=-1,t&=~u}}function K1(e){if(Xt&6)throw Error(Ke(327));uu();var t=Af(e,0);if(!(t&1))return Ii(e,un()),null;var s=jf(e,t);if(e.tag!==0&&s===2){var u=Mg(e);u!==0&&(t=u,s=iy(e,u))}if(s===1)throw s=dh,zo(e,0),Ns(e,t),Ii(e,un()),s;if(s===6)throw Error(Ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ko(e,Ei,is),Ii(e,un()),null}function q0(e,t){var s=Xt;Xt|=1;try{return e(t)}finally{Xt=s,Xt===0&&(gu=un()+500,ap&&no())}}function Uo(e){Us!==null&&Us.tag===0&&!(Xt&6)&&uu();var t=Xt;Xt|=1;var s=ia.transition,u=sr;try{if(ia.transition=null,sr=1,e)return e()}finally{sr=u,ia.transition=s,Xt=t,!(Xt&6)&&no()}}function W0(){Ui=nu.current,Ar(nu)}function zo(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,NT(s)),pn!==null)for(s=pn.return;s!==null;){var u=s;switch(I0(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Mf();break;case 3:pu(),Ar(Ci),Ar(ti),B0();break;case 5:F0(u);break;case 4:pu();break;case 13:Ar(Hr);break;case 19:Ar(Hr);break;case 10:R0(u.type._context);break;case 22:case 23:W0()}s=s.return}if(In=e,pn=e=Xs(e.current,null),Vn=Ui=t,vn=0,dh=null,H0=up=$o=0,Ei=Wc=null,Do!==null){for(t=0;t<Do.length;t++)if(s=Do[t],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,g=s.pending;if(g!==null){var p=g.next;g.next=d,u.next=p}s.pending=u}Do=null}return e}function H2(e,t){do{var s=pn;try{if(k0(),df.current=Nf,Of){for(var u=Gr.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Of=!1}if(No=0,Tn=_n=Gr=null,Gc=!1,uh=0,Z0.current=null,s===null||s.return===null){vn=1,dh=t,pn=null;break}e:{var g=e,p=s.return,c=s,S=t;if(t=Vn,c.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var I=S,k=c,R=k.tag;if(!(k.mode&1)&&(R===0||R===11||R===15)){var z=k.alternate;z?(k.updateQueue=z.updateQueue,k.memoizedState=z.memoizedState,k.lanes=z.lanes):(k.updateQueue=null,k.memoizedState=null)}var ue=F1(p);if(ue!==null){ue.flags&=-257,B1(ue,p,c,g,t),ue.mode&1&&z1(g,I,t),t=ue,S=I;var ie=t.updateQueue;if(ie===null){var q=new Set;q.add(S),t.updateQueue=q}else ie.add(S);break e}else{if(!(t&1)){z1(g,I,t),K0();break e}S=Error(Ke(426))}}else if(kr&&c.mode&1){var ae=F1(p);if(ae!==null){!(ae.flags&65536)&&(ae.flags|=256),B1(ae,p,c,g,t),P0(mu(S,c));break e}}g=S=mu(S,c),vn!==4&&(vn=2),Wc===null?Wc=[g]:Wc.push(g),g=p;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var G=I2(g,S,t);I1(g,G);break e;case 1:c=S;var N=g.type,H=g.stateNode;if(!(g.flags&128)&&(typeof N.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ks===null||!Ks.has(H)))){g.flags|=65536,t&=-t,g.lanes|=t;var re=P2(g,c,t);I1(g,re);break e}}g=g.return}while(g!==null)}W2(s)}catch(be){t=be,pn===s&&s!==null&&(pn=s=s.return);continue}break}while(!0)}function G2(){var e=$f.current;return $f.current=Nf,e===null?Nf:e}function K0(){(vn===0||vn===3||vn===2)&&(vn=4),In===null||!($o&268435455)&&!(up&268435455)||Ns(In,Vn)}function jf(e,t){var s=Xt;Xt|=2;var u=G2();(In!==e||Vn!==t)&&(is=null,zo(e,t));do try{cI();break}catch(d){H2(e,d)}while(!0);if(k0(),Xt=s,$f.current=u,pn!==null)throw Error(Ke(261));return In=null,Vn=0,vn}function cI(){for(;pn!==null;)q2(pn)}function hI(){for(;pn!==null&&!FC();)q2(pn)}function q2(e){var t=Y2(e.alternate,e,Ui);e.memoizedProps=e.pendingProps,t===null?W2(e):pn=t,Z0.current=null}function W2(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=iI(s,t),s!==null){s.flags&=32767,pn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vn=6,pn=null;return}}else if(s=nI(s,t,Ui),s!==null){pn=s;return}if(t=t.sibling,t!==null){pn=t;return}pn=t=e}while(t!==null);vn===0&&(vn=5)}function ko(e,t,s){var u=sr,d=ia.transition;try{ia.transition=null,sr=1,dI(e,t,s,u)}finally{ia.transition=d,sr=u}return null}function dI(e,t,s,u){do uu();while(Us!==null);if(Xt&6)throw Error(Ke(327));s=e.finishedWork;var d=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Ke(177));e.callbackNode=null,e.callbackPriority=0;var g=s.lanes|s.childLanes;if(GC(e,g),e===In&&(pn=In=null,Vn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ef||(ef=!0,X2(Ef,function(){return uu(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=ia.transition,ia.transition=null;var p=sr;sr=1;var c=Xt;Xt|=4,Z0.current=null,sI(e,s),V2(s,e),RT(Fg),Cf=!!zg,Fg=zg=null,e.current=s,oI(s),BC(),Xt=c,sr=p,ia.transition=g}else e.current=s;if(ef&&(ef=!1,Us=e,Vf=d),g=e.pendingLanes,g===0&&(Ks=null),$C(s.stateNode),Ii(e,un()),t!==null)for(u=e.onRecoverableError,s=0;s<t.length;s++)d=t[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Uf)throw Uf=!1,e=ry,ry=null,e;return Vf&1&&e.tag!==0&&uu(),g=e.pendingLanes,g&1?e===ny?Kc++:(Kc=0,ny=e):Kc=0,no(),null}function uu(){if(Us!==null){var e=Tb(Vf),t=ia.transition,s=sr;try{if(ia.transition=null,sr=16>e?16:e,Us===null)var u=!1;else{if(e=Us,Us=null,Vf=0,Xt&6)throw Error(Ke(331));var d=Xt;for(Xt|=4,pt=e.current;pt!==null;){var g=pt,p=g.child;if(pt.flags&16){var c=g.deletions;if(c!==null){for(var S=0;S<c.length;S++){var I=c[S];for(pt=I;pt!==null;){var k=pt;switch(k.tag){case 0:case 11:case 15:qc(8,k,g)}var R=k.child;if(R!==null)R.return=k,pt=R;else for(;pt!==null;){k=pt;var z=k.sibling,ue=k.return;if(N2(k),k===I){pt=null;break}if(z!==null){z.return=ue,pt=z;break}pt=ue}}}var ie=g.alternate;if(ie!==null){var q=ie.child;if(q!==null){ie.child=null;do{var ae=q.sibling;q.sibling=null,q=ae}while(q!==null)}}pt=g}}if(g.subtreeFlags&2064&&p!==null)p.return=g,pt=p;else e:for(;pt!==null;){if(g=pt,g.flags&2048)switch(g.tag){case 0:case 11:case 15:qc(9,g,g.return)}var G=g.sibling;if(G!==null){G.return=g.return,pt=G;break e}pt=g.return}}var N=e.current;for(pt=N;pt!==null;){p=pt;var H=p.child;if(p.subtreeFlags&2064&&H!==null)H.return=p,pt=H;else e:for(p=N;pt!==null;){if(c=pt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:lp(9,c)}}catch(be){Xr(c,c.return,be)}if(c===p){pt=null;break e}var re=c.sibling;if(re!==null){re.return=c.return,pt=re;break e}pt=c.return}}if(Xt=d,no(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(ep,e)}catch{}u=!0}return u}finally{sr=s,ia.transition=t}}return!1}function Y1(e,t,s){t=mu(s,t),t=I2(e,t,1),e=Ws(e,t,1),t=hi(),e!==null&&(yh(e,1,t),Ii(e,t))}function Xr(e,t,s){if(e.tag===3)Y1(e,e,s);else for(;t!==null;){if(t.tag===3){Y1(t,e,s);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ks===null||!Ks.has(u))){e=mu(s,e),e=P2(t,e,1),t=Ws(t,e,1),e=hi(),t!==null&&(yh(t,1,e),Ii(t,e));break}}t=t.return}}function fI(e,t,s){var u=e.pingCache;u!==null&&u.delete(t),t=hi(),e.pingedLanes|=e.suspendedLanes&s,In===e&&(Vn&s)===s&&(vn===4||vn===3&&(Vn&130023424)===Vn&&500>un()-G0?zo(e,0):H0|=s),Ii(e,t)}function K2(e,t){t===0&&(e.mode&1?(t=Zd,Zd<<=1,!(Zd&130023424)&&(Zd=4194304)):t=1);var s=hi();e=ds(e,t),e!==null&&(yh(e,t,s),Ii(e,s))}function pI(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),K2(e,s)}function mI(e,t){var s=0;switch(e.tag){case 13:var u=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(Ke(314))}u!==null&&u.delete(t),K2(e,s)}var Y2;Y2=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ci.current)Ai=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ai=!1,rI(e,t,s);Ai=!!(e.flags&131072)}else Ai=!1,kr&&t.flags&1048576&&Qb(t,Df,t.index);switch(t.lanes=0,t.tag){case 2:var u=t.type;pf(e,t),e=t.pendingProps;var d=hu(t,ti.current);lu(t,s),d=N0(null,t,u,e,d,s);var g=$0();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(u)?(g=!0,kf(t)):g=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,L0(t),d.updater=sp,t.stateNode=d,d._reactInternals=t,Hg(t,u,e,s),t=Wg(null,t,u,!0,g,s)):(t.tag=0,kr&&g&&T0(t),ci(null,t,d,s),t=t.child),t;case 16:u=t.elementType;e:{switch(pf(e,t),e=t.pendingProps,d=u._init,u=d(u._payload),t.type=u,d=t.tag=yI(u),e=ya(u,e),d){case 0:t=qg(null,t,u,e,s);break e;case 1:t=$1(null,t,u,e,s);break e;case 11:t=O1(null,t,u,e,s);break e;case 14:t=N1(null,t,u,ya(u.type,e),s);break e}throw Error(Ke(306,u,""))}return t;case 0:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:ya(u,d),qg(e,t,u,d,s);case 1:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:ya(u,d),$1(e,t,u,d,s);case 3:e:{if(D2(t),e===null)throw Error(Ke(387));u=t.pendingProps,g=t.memoizedState,d=g.element,n2(e,t),Ff(t,u,null,s);var p=t.memoizedState;if(u=p.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){d=mu(Error(Ke(423)),t),t=U1(e,t,u,s,d);break e}else if(u!==d){d=mu(Error(Ke(424)),t),t=U1(e,t,u,s,d);break e}else for(Vi=qs(t.stateNode.containerInfo.firstChild),ji=t,kr=!0,va=null,s=o2(t,null,u,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(du(),u===d){t=fs(e,t,s);break e}ci(e,t,u,s)}t=t.child}return t;case 5:return l2(t),e===null&&Vg(t),u=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,p=d.children,Bg(u,d)?p=null:g!==null&&Bg(u,g)&&(t.flags|=32),R2(e,t),ci(e,t,p,s),t.child;case 6:return e===null&&Vg(t),null;case 13:return L2(e,t,s);case 4:return z0(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=fu(t,null,u,s):ci(e,t,u,s),t.child;case 11:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:ya(u,d),O1(e,t,u,d,s);case 7:return ci(e,t,t.pendingProps,s),t.child;case 8:return ci(e,t,t.pendingProps.children,s),t.child;case 12:return ci(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(u=t.type._context,d=t.pendingProps,g=t.memoizedProps,p=d.value,vr(Lf,u._currentValue),u._currentValue=p,g!==null)if(Ea(g.value,p)){if(g.children===d.children&&!Ci.current){t=fs(e,t,s);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var c=g.dependencies;if(c!==null){p=g.child;for(var S=c.firstContext;S!==null;){if(S.context===u){if(g.tag===1){S=us(-1,s&-s),S.tag=2;var I=g.updateQueue;if(I!==null){I=I.shared;var k=I.pending;k===null?S.next=S:(S.next=k.next,k.next=S),I.pending=S}}g.lanes|=s,S=g.alternate,S!==null&&(S.lanes|=s),jg(g.return,s,t),c.lanes|=s;break}S=S.next}}else if(g.tag===10)p=g.type===t.type?null:g.child;else if(g.tag===18){if(p=g.return,p===null)throw Error(Ke(341));p.lanes|=s,c=p.alternate,c!==null&&(c.lanes|=s),jg(p,s,t),p=g.sibling}else p=g.child;if(p!==null)p.return=g;else for(p=g;p!==null;){if(p===t){p=null;break}if(g=p.sibling,g!==null){g.return=p.return,p=g;break}p=p.return}g=p}ci(e,t,d.children,s),t=t.child}return t;case 9:return d=t.type,u=t.pendingProps.children,lu(t,s),d=sa(d),u=u(d),t.flags|=1,ci(e,t,u,s),t.child;case 14:return u=t.type,d=ya(u,t.pendingProps),d=ya(u.type,d),N1(e,t,u,d,s);case 15:return M2(e,t,t.type,t.pendingProps,s);case 17:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:ya(u,d),pf(e,t),t.tag=1,Ti(u)?(e=!0,kf(t)):e=!1,lu(t,s),a2(t,u,d),Hg(t,u,d,s),Wg(null,t,u,!0,e,s);case 19:return z2(e,t,s);case 22:return k2(e,t,s)}throw Error(Ke(156,t.tag))};function X2(e,t){return Sb(e,t)}function gI(e,t,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,s,u){return new gI(e,t,s,u)}function Y0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yI(e){if(typeof e=="function")return Y0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===m0)return 11;if(e===g0)return 14}return 2}function Xs(e,t){var s=e.alternate;return s===null?(s=na(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function yf(e,t,s,u,d,g){var p=2;if(u=e,typeof e=="function")Y0(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case ql:return Fo(s.children,d,g,t);case p0:p=8,d|=8;break;case mg:return e=na(12,s,t,d|2),e.elementType=mg,e.lanes=g,e;case gg:return e=na(13,s,t,d),e.elementType=gg,e.lanes=g,e;case yg:return e=na(19,s,t,d),e.elementType=yg,e.lanes=g,e;case sb:return cp(s,d,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ib:p=10;break e;case ab:p=9;break e;case m0:p=11;break e;case g0:p=14;break e;case Fs:p=16,u=null;break e}throw Error(Ke(130,e==null?e:typeof e,""))}return t=na(p,s,t,d),t.elementType=e,t.type=u,t.lanes=g,t}function Fo(e,t,s,u){return e=na(7,e,u,t),e.lanes=s,e}function cp(e,t,s,u){return e=na(22,e,u,t),e.elementType=sb,e.lanes=s,e.stateNode={isHidden:!1},e}function Jm(e,t,s){return e=na(6,e,null,t),e.lanes=s,e}function Qm(e,t,s){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _I(e,t,s,u,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dm(0),this.expirationTimes=Dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dm(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function X0(e,t,s,u,d,g,p,c,S){return e=new _I(e,t,s,c,S),t===1?(t=1,g===!0&&(t|=8)):t=0,g=na(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},L0(g),e}function vI(e,t,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gl,key:u==null?null:""+u,children:e,containerInfo:t,implementation:s}}function J2(e){if(!e)return eo;e=e._reactInternals;e:{if(Zo(e)!==e||e.tag!==1)throw Error(Ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ke(171))}if(e.tag===1){var s=e.type;if(Ti(s))return Xb(e,s,t)}return t}function Q2(e,t,s,u,d,g,p,c,S){return e=X0(s,u,!0,e,d,g,p,c,S),e.context=J2(null),s=e.current,u=hi(),d=Ys(s),g=us(u,d),g.callback=t??null,Ws(s,g,d),e.current.lanes=d,yh(e,d,u),Ii(e,u),e}function hp(e,t,s,u){var d=t.current,g=hi(),p=Ys(d);return s=J2(s),t.context===null?t.context=s:t.pendingContext=s,t=us(g,p),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),e=Ws(d,t,p),e!==null&&(wa(e,d,p,g),hf(e,d,p)),p}function Zf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function X1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function J0(e,t){X1(e,t),(e=e.alternate)&&X1(e,t)}function xI(){return null}var eS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Q0(e){this._internalRoot=e}dp.prototype.render=Q0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ke(409));hp(e,t,null,null)};dp.prototype.unmount=Q0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Uo(function(){hp(null,e,null,null)}),t[hs]=null}};function dp(e){this._internalRoot=e}dp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mb();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Os.length&&t!==0&&t<Os[s].priority;s++);Os.splice(s,0,e),s===0&&Rb(e)}};function ev(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function J1(){}function wI(e,t,s,u,d){if(d){if(typeof u=="function"){var g=u;u=function(){var I=Zf(p);g.call(I)}}var p=Q2(t,u,e,0,null,!1,!1,"",J1);return e._reactRootContainer=p,e[hs]=p.current,ih(e.nodeType===8?e.parentNode:e),Uo(),p}for(;d=e.lastChild;)e.removeChild(d);if(typeof u=="function"){var c=u;u=function(){var I=Zf(S);c.call(I)}}var S=X0(e,0,!1,null,null,!1,!1,"",J1);return e._reactRootContainer=S,e[hs]=S.current,ih(e.nodeType===8?e.parentNode:e),Uo(function(){hp(t,S,s,u)}),S}function pp(e,t,s,u,d){var g=s._reactRootContainer;if(g){var p=g;if(typeof d=="function"){var c=d;d=function(){var S=Zf(p);c.call(S)}}hp(t,p,e,d)}else p=wI(s,t,e,d,u);return Zf(p)}Ib=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Nc(t.pendingLanes);s!==0&&(v0(t,s|1),Ii(t,un()),!(Xt&6)&&(gu=un()+500,no()))}break;case 13:Uo(function(){var u=ds(e,1);if(u!==null){var d=hi();wa(u,e,1,d)}}),J0(e,1)}};x0=function(e){if(e.tag===13){var t=ds(e,134217728);if(t!==null){var s=hi();wa(t,e,134217728,s)}J0(e,134217728)}};Pb=function(e){if(e.tag===13){var t=Ys(e),s=ds(e,t);if(s!==null){var u=hi();wa(s,e,t,u)}J0(e,t)}};Mb=function(){return sr};kb=function(e,t){var s=sr;try{return sr=e,t()}finally{sr=s}};Tg=function(e,t,s){switch(t){case"input":if(xg(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var u=s[t];if(u!==e&&u.form===e.form){var d=ip(u);if(!d)throw Error(Ke(90));lb(u),xg(u,d)}}}break;case"textarea":cb(e,s);break;case"select":t=s.value,t!=null&&iu(e,!!s.multiple,t,!1)}};yb=q0;_b=Uo;var bI={usingClientEntryPoint:!1,Events:[vh,Xl,ip,mb,gb,q0]},zc={findFiberByHostInstance:Ro,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},SI={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wb(e),e===null?null:e.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{ep=tf.inject(SI),Na=tf}catch{}}Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;Hi.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ev(t))throw Error(Ke(200));return vI(e,t,null,s)};Hi.createRoot=function(e,t){if(!ev(e))throw Error(Ke(299));var s=!1,u="",d=eS;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=X0(e,1,!1,null,null,s,!1,u,d),e[hs]=t.current,ih(e.nodeType===8?e.parentNode:e),new Q0(t)};Hi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ke(188)):(e=Object.keys(e).join(","),Error(Ke(268,e)));return e=wb(t),e=e===null?null:e.stateNode,e};Hi.flushSync=function(e){return Uo(e)};Hi.hydrate=function(e,t,s){if(!fp(t))throw Error(Ke(200));return pp(null,e,t,!0,s)};Hi.hydrateRoot=function(e,t,s){if(!ev(e))throw Error(Ke(405));var u=s!=null&&s.hydratedSources||null,d=!1,g="",p=eS;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),t=Q2(t,null,e,1,s??null,d,!1,g,p),e[hs]=t.current,ih(e),u)for(e=0;e<u.length;e++)s=u[e],d=s._getVersion,d=d(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,d]:t.mutableSourceEagerHydrationData.push(s,d);return new dp(t)};Hi.render=function(e,t,s){if(!fp(t))throw Error(Ke(200));return pp(null,e,t,!1,s)};Hi.unmountComponentAtNode=function(e){if(!fp(e))throw Error(Ke(40));return e._reactRootContainer?(Uo(function(){pp(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0):!1};Hi.unstable_batchedUpdates=q0;Hi.unstable_renderSubtreeIntoContainer=function(e,t,s,u){if(!fp(s))throw Error(Ke(200));if(e==null||e._reactInternals===void 0)throw Error(Ke(38));return pp(e,t,s,!1,u)};Hi.version="18.2.0-next-9e3b772b8-20220608";function tS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tS)}catch(e){console.error(e)}}tS(),Qw.exports=Hi;var tv=Qw.exports;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},fh.apply(this,arguments)}var Vs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vs||(Vs={}));const Q1="popstate";function EI(e){e===void 0&&(e={});function t(u,d){let{pathname:g,search:p,hash:c}=u.location;return sy("",{pathname:g,search:p,hash:c},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function s(u,d){return typeof d=="string"?d:Hf(d)}return CI(t,s,null,e)}function mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AI(){return Math.random().toString(36).substr(2,8)}function ew(e,t){return{usr:e.state,key:e.key,idx:t}}function sy(e,t,s,u){return s===void 0&&(s=null),fh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wu(t):t,{state:s,key:t&&t.key||u||AI()})}function Hf(e){let{pathname:t="/",search:s="",hash:u=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),u&&u!=="#"&&(t+=u.charAt(0)==="#"?u:"#"+u),t}function wu(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let u=e.indexOf("?");u>=0&&(t.search=e.substr(u),e=e.substr(0,u)),e&&(t.pathname=e)}return t}function CI(e,t,s,u){u===void 0&&(u={});let{window:d=document.defaultView,v5Compat:g=!1}=u,p=d.history,c=Vs.Pop,S=null,I=k();I==null&&(I=0,p.replaceState(fh({},p.state,{idx:I}),""));function k(){return(p.state||{idx:null}).idx}function R(){c=Vs.Pop;let ae=k(),G=ae==null?null:ae-I;I=ae,S&&S({action:c,location:q.location,delta:G})}function z(ae,G){c=Vs.Push;let N=sy(q.location,ae,G);s&&s(N,ae),I=k()+1;let H=ew(N,I),re=q.createHref(N);try{p.pushState(H,"",re)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;d.location.assign(re)}g&&S&&S({action:c,location:q.location,delta:1})}function ue(ae,G){c=Vs.Replace;let N=sy(q.location,ae,G);s&&s(N,ae),I=k();let H=ew(N,I),re=q.createHref(N);p.replaceState(H,"",re),g&&S&&S({action:c,location:q.location,delta:0})}function ie(ae){let G=d.location.origin!=="null"?d.location.origin:d.location.href,N=typeof ae=="string"?ae:Hf(ae);return mn(G,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,G)}let q={get action(){return c},get location(){return e(d,p)},listen(ae){if(S)throw new Error("A history only accepts one active listener");return d.addEventListener(Q1,R),S=ae,()=>{d.removeEventListener(Q1,R),S=null}},createHref(ae){return t(d,ae)},createURL:ie,encodeLocation(ae){let G=ie(ae);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:z,replace:ue,go(ae){return p.go(ae)}};return q}var tw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(tw||(tw={}));function TI(e,t,s){s===void 0&&(s="/");let u=typeof t=="string"?wu(t):t,d=nv(u.pathname||"/",s);if(d==null)return null;let g=rS(e);II(g);let p=null;for(let c=0;p==null&&c<g.length;++c)p=BI(g[c],$I(d));return p}function rS(e,t,s,u){t===void 0&&(t=[]),s===void 0&&(s=[]),u===void 0&&(u="");let d=(g,p,c)=>{let S={relativePath:c===void 0?g.path||"":c,caseSensitive:g.caseSensitive===!0,childrenIndex:p,route:g};S.relativePath.startsWith("/")&&(mn(S.relativePath.startsWith(u),'Absolute route path "'+S.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),S.relativePath=S.relativePath.slice(u.length));let I=Js([u,S.relativePath]),k=s.concat(S);g.children&&g.children.length>0&&(mn(g.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+I+'".')),rS(g.children,t,k,I)),!(g.path==null&&!g.index)&&t.push({path:I,score:zI(I,g.index),routesMeta:k})};return e.forEach((g,p)=>{var c;if(g.path===""||!((c=g.path)!=null&&c.includes("?")))d(g,p);else for(let S of nS(g.path))d(g,p,S)}),t}function nS(e){let t=e.split("/");if(t.length===0)return[];let[s,...u]=t,d=s.endsWith("?"),g=s.replace(/\?$/,"");if(u.length===0)return d?[g,""]:[g];let p=nS(u.join("/")),c=[];return c.push(...p.map(S=>S===""?g:[g,S].join("/"))),d&&c.push(...p),c.map(S=>e.startsWith("/")&&S===""?"/":S)}function II(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:FI(t.routesMeta.map(u=>u.childrenIndex),s.routesMeta.map(u=>u.childrenIndex)))}const PI=/^:[\w-]+$/,MI=3,kI=2,RI=1,DI=10,LI=-2,rw=e=>e==="*";function zI(e,t){let s=e.split("/"),u=s.length;return s.some(rw)&&(u+=LI),t&&(u+=kI),s.filter(d=>!rw(d)).reduce((d,g)=>d+(PI.test(g)?MI:g===""?RI:DI),u)}function FI(e,t){return e.length===t.length&&e.slice(0,-1).every((u,d)=>u===t[d])?e[e.length-1]-t[t.length-1]:0}function BI(e,t){let{routesMeta:s}=e,u={},d="/",g=[];for(let p=0;p<s.length;++p){let c=s[p],S=p===s.length-1,I=d==="/"?t:t.slice(d.length)||"/",k=OI({path:c.relativePath,caseSensitive:c.caseSensitive,end:S},I);if(!k)return null;Object.assign(u,k.params);let R=c.route;g.push({params:u,pathname:Js([d,k.pathname]),pathnameBase:HI(Js([d,k.pathnameBase])),route:R}),k.pathnameBase!=="/"&&(d=Js([d,k.pathnameBase]))}return g}function OI(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,u]=NI(e.path,e.caseSensitive,e.end),d=t.match(s);if(!d)return null;let g=d[0],p=g.replace(/(.)\/+$/,"$1"),c=d.slice(1);return{params:u.reduce((I,k,R)=>{let{paramName:z,isOptional:ue}=k;if(z==="*"){let q=c[R]||"";p=g.slice(0,g.length-q.length).replace(/(.)\/+$/,"$1")}const ie=c[R];return ue&&!ie?I[z]=void 0:I[z]=UI(ie||"",z),I},{}),pathname:g,pathnameBase:p,pattern:e}}function NI(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),rv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let u=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,c,S)=>(u.push({paramName:c,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(u.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,t?void 0:"i"),u]}function $I(e){try{return decodeURI(e)}catch(t){return rv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function UI(e,t){try{return decodeURIComponent(e)}catch(s){return rv(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),e}}function nv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,u=e.charAt(s);return u&&u!=="/"?null:e.slice(s)||"/"}function VI(e,t){t===void 0&&(t="/");let{pathname:s,search:u="",hash:d=""}=typeof e=="string"?wu(e):e;return{pathname:s?s.startsWith("/")?s:jI(s,t):t,search:GI(u),hash:qI(d)}}function jI(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?s.length>1&&s.pop():d!=="."&&s.push(d)}),s.length>1?s.join("/"):"/"}function eg(e,t,s,u){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZI(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function iS(e,t){let s=ZI(e);return t?s.map((u,d)=>d===e.length-1?u.pathname:u.pathnameBase):s.map(u=>u.pathnameBase)}function aS(e,t,s,u){u===void 0&&(u=!1);let d;typeof e=="string"?d=wu(e):(d=fh({},e),mn(!d.pathname||!d.pathname.includes("?"),eg("?","pathname","search",d)),mn(!d.pathname||!d.pathname.includes("#"),eg("#","pathname","hash",d)),mn(!d.search||!d.search.includes("#"),eg("#","search","hash",d)));let g=e===""||d.pathname==="",p=g?"/":d.pathname,c;if(p==null)c=s;else{let R=t.length-1;if(!u&&p.startsWith("..")){let z=p.split("/");for(;z[0]==="..";)z.shift(),R-=1;d.pathname=z.join("/")}c=R>=0?t[R]:"/"}let S=VI(d,c),I=p&&p!=="/"&&p.endsWith("/"),k=(g||p===".")&&s.endsWith("/");return!S.pathname.endsWith("/")&&(I||k)&&(S.pathname+="/"),S}const Js=e=>e.join("/").replace(/\/\/+/g,"/"),HI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sS=["post","put","patch","delete"];new Set(sS);const KI=["get",...sS];new Set(KI);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},ph.apply(this,arguments)}const iv=Ae.createContext(null),YI=Ae.createContext(null),Ho=Ae.createContext(null),mp=Ae.createContext(null),Go=Ae.createContext({outlet:null,matches:[],isDataRoute:!1}),oS=Ae.createContext(null);function XI(e,t){let{relative:s}=t===void 0?{}:t;wh()||mn(!1);let{basename:u,navigator:d}=Ae.useContext(Ho),{hash:g,pathname:p,search:c}=uS(e,{relative:s}),S=p;return u!=="/"&&(S=p==="/"?u:Js([u,p])),d.createHref({pathname:S,search:c,hash:g})}function wh(){return Ae.useContext(mp)!=null}function bh(){return wh()||mn(!1),Ae.useContext(mp).location}function lS(e){Ae.useContext(Ho).static||Ae.useLayoutEffect(e)}function bu(){let{isDataRoute:e}=Ae.useContext(Go);return e?cP():JI()}function JI(){wh()||mn(!1);let e=Ae.useContext(iv),{basename:t,future:s,navigator:u}=Ae.useContext(Ho),{matches:d}=Ae.useContext(Go),{pathname:g}=bh(),p=JSON.stringify(iS(d,s.v7_relativeSplatPath)),c=Ae.useRef(!1);return lS(()=>{c.current=!0}),Ae.useCallback(function(I,k){if(k===void 0&&(k={}),!c.current)return;if(typeof I=="number"){u.go(I);return}let R=aS(I,JSON.parse(p),g,k.relative==="path");e==null&&t!=="/"&&(R.pathname=R.pathname==="/"?t:Js([t,R.pathname])),(k.replace?u.replace:u.push)(R,k.state,k)},[t,u,p,g,e])}function uS(e,t){let{relative:s}=t===void 0?{}:t,{future:u}=Ae.useContext(Ho),{matches:d}=Ae.useContext(Go),{pathname:g}=bh(),p=JSON.stringify(iS(d,u.v7_relativeSplatPath));return Ae.useMemo(()=>aS(e,JSON.parse(p),g,s==="path"),[e,p,g,s])}function QI(e,t){return eP(e,t)}function eP(e,t,s,u){wh()||mn(!1);let{navigator:d}=Ae.useContext(Ho),{matches:g}=Ae.useContext(Go),p=g[g.length-1],c=p?p.params:{};p&&p.pathname;let S=p?p.pathnameBase:"/";p&&p.route;let I=bh(),k;if(t){var R;let ae=typeof t=="string"?wu(t):t;S==="/"||(R=ae.pathname)!=null&&R.startsWith(S)||mn(!1),k=ae}else k=I;let z=k.pathname||"/",ue=S==="/"?z:z.slice(S.length)||"/",ie=TI(e,{pathname:ue}),q=aP(ie&&ie.map(ae=>Object.assign({},ae,{params:Object.assign({},c,ae.params),pathname:Js([S,d.encodeLocation?d.encodeLocation(ae.pathname).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?S:Js([S,d.encodeLocation?d.encodeLocation(ae.pathnameBase).pathname:ae.pathnameBase])})),g,s,u);return t&&q?Ae.createElement(mp.Provider,{value:{location:ph({pathname:"/",search:"",hash:"",state:null,key:"default"},k),navigationType:Vs.Pop}},q):q}function tP(){let e=uP(),t=WI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ae.createElement(Ae.Fragment,null,Ae.createElement("h2",null,"Unexpected Application Error!"),Ae.createElement("h3",{style:{fontStyle:"italic"}},t),s?Ae.createElement("pre",{style:d},s):null,null)}const rP=Ae.createElement(tP,null);class nP extends Ae.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?Ae.createElement(Go.Provider,{value:this.props.routeContext},Ae.createElement(oS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iP(e){let{routeContext:t,match:s,children:u}=e,d=Ae.useContext(iv);return d&&d.static&&d.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=s.route.id),Ae.createElement(Go.Provider,{value:t},u)}function aP(e,t,s,u){var d;if(t===void 0&&(t=[]),s===void 0&&(s=null),u===void 0&&(u=null),e==null){var g;if((g=s)!=null&&g.errors)e=s.matches;else return null}let p=e,c=(d=s)==null?void 0:d.errors;if(c!=null){let k=p.findIndex(R=>R.route.id&&(c==null?void 0:c[R.route.id]));k>=0||mn(!1),p=p.slice(0,Math.min(p.length,k+1))}let S=!1,I=-1;if(s&&u&&u.v7_partialHydration)for(let k=0;k<p.length;k++){let R=p[k];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(I=k),R.route.id){let{loaderData:z,errors:ue}=s,ie=R.route.loader&&z[R.route.id]===void 0&&(!ue||ue[R.route.id]===void 0);if(R.route.lazy||ie){S=!0,I>=0?p=p.slice(0,I+1):p=[p[0]];break}}}return p.reduceRight((k,R,z)=>{let ue,ie=!1,q=null,ae=null;s&&(ue=c&&R.route.id?c[R.route.id]:void 0,q=R.route.errorElement||rP,S&&(I<0&&z===0?(hP("route-fallback",!1),ie=!0,ae=null):I===z&&(ie=!0,ae=R.route.hydrateFallbackElement||null)));let G=t.concat(p.slice(0,z+1)),N=()=>{let H;return ue?H=q:ie?H=ae:R.route.Component?H=Ae.createElement(R.route.Component,null):R.route.element?H=R.route.element:H=k,Ae.createElement(iP,{match:R,routeContext:{outlet:k,matches:G,isDataRoute:s!=null},children:H})};return s&&(R.route.ErrorBoundary||R.route.errorElement||z===0)?Ae.createElement(nP,{location:s.location,revalidation:s.revalidation,component:q,error:ue,children:N(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):N()},null)}var cS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cS||{}),Gf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Gf||{});function sP(e){let t=Ae.useContext(iv);return t||mn(!1),t}function oP(e){let t=Ae.useContext(YI);return t||mn(!1),t}function lP(e){let t=Ae.useContext(Go);return t||mn(!1),t}function hS(e){let t=lP(),s=t.matches[t.matches.length-1];return s.route.id||mn(!1),s.route.id}function uP(){var e;let t=Ae.useContext(oS),s=oP(Gf.UseRouteError),u=hS(Gf.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[u]}function cP(){let{router:e}=sP(cS.UseNavigateStable),t=hS(Gf.UseNavigateStable),s=Ae.useRef(!1);return lS(()=>{s.current=!0}),Ae.useCallback(function(d,g){g===void 0&&(g={}),s.current&&(typeof d=="number"?e.navigate(d):e.navigate(d,ph({fromRouteId:t},g)))},[e,t])}const nw={};function hP(e,t,s){!t&&!nw[e]&&(nw[e]=!0)}function ea(e){mn(!1)}function dP(e){let{basename:t="/",children:s=null,location:u,navigationType:d=Vs.Pop,navigator:g,static:p=!1,future:c}=e;wh()&&mn(!1);let S=t.replace(/^\/*/,"/"),I=Ae.useMemo(()=>({basename:S,navigator:g,static:p,future:ph({v7_relativeSplatPath:!1},c)}),[S,c,g,p]);typeof u=="string"&&(u=wu(u));let{pathname:k="/",search:R="",hash:z="",state:ue=null,key:ie="default"}=u,q=Ae.useMemo(()=>{let ae=nv(k,S);return ae==null?null:{location:{pathname:ae,search:R,hash:z,state:ue,key:ie},navigationType:d}},[S,k,R,z,ue,ie,d]);return q==null?null:Ae.createElement(Ho.Provider,{value:I},Ae.createElement(mp.Provider,{children:s,value:q}))}function av(e){let{children:t,location:s}=e;return QI(oy(t),s)}new Promise(()=>{});function oy(e,t){t===void 0&&(t=[]);let s=[];return Ae.Children.forEach(e,(u,d)=>{if(!Ae.isValidElement(u))return;let g=[...t,d];if(u.type===Ae.Fragment){s.push.apply(s,oy(u.props.children,g));return}u.type!==ea&&mn(!1),!u.props.index||!u.props.children||mn(!1);let p={id:u.props.id||g.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(p.children=oy(u.props.children,g)),s.push(p)}),s}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},ly.apply(this,arguments)}function fP(e,t){if(e==null)return{};var s={},u=Object.keys(e),d,g;for(g=0;g<u.length;g++)d=u[g],!(t.indexOf(d)>=0)&&(s[d]=e[d]);return s}function pP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mP(e,t){return e.button===0&&(!t||t==="_self")&&!pP(e)}const gP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],yP="6";try{window.__reactRouterVersion=yP}catch{}const _P="startTransition",iw=pC[_P];function vP(e){let{basename:t,children:s,future:u,window:d}=e,g=Ae.useRef();g.current==null&&(g.current=EI({window:d,v5Compat:!0}));let p=g.current,[c,S]=Ae.useState({action:p.action,location:p.location}),{v7_startTransition:I}=u||{},k=Ae.useCallback(R=>{I&&iw?iw(()=>S(R)):S(R)},[S,I]);return Ae.useLayoutEffect(()=>p.listen(k),[p,k]),Ae.createElement(dP,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:p,future:u})}const xP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bP=Ae.forwardRef(function(t,s){let{onClick:u,relative:d,reloadDocument:g,replace:p,state:c,target:S,to:I,preventScrollReset:k,unstable_viewTransition:R}=t,z=fP(t,gP),{basename:ue}=Ae.useContext(Ho),ie,q=!1;if(typeof I=="string"&&wP.test(I)&&(ie=I,xP))try{let H=new URL(window.location.href),re=I.startsWith("//")?new URL(H.protocol+I):new URL(I),be=nv(re.pathname,ue);re.origin===H.origin&&be!=null?I=be+re.search+re.hash:q=!0}catch{}let ae=XI(I,{relative:d}),G=SP(I,{replace:p,state:c,target:S,preventScrollReset:k,relative:d,unstable_viewTransition:R});function N(H){u&&u(H),H.defaultPrevented||G(H)}return Ae.createElement("a",ly({},z,{href:ie||ae,onClick:q||g?u:N,ref:s,target:S}))});var aw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(aw||(aw={}));var sw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sw||(sw={}));function SP(e,t){let{target:s,replace:u,state:d,preventScrollReset:g,relative:p,unstable_viewTransition:c}=t===void 0?{}:t,S=bu(),I=bh(),k=uS(e,{relative:p});return Ae.useCallback(R=>{if(mP(R,s)){R.preventDefault();let z=u!==void 0?u:Hf(I)===Hf(k);S(e,{replace:z,state:d,preventScrollReset:g,relative:p,unstable_viewTransition:c})}},[I,S,k,u,d,s,e,g,p,c])}function dS(e,t){return function(){return e.apply(t,arguments)}}const{toString:EP}=Object.prototype,{getPrototypeOf:sv}=Object,gp=(e=>t=>{const s=EP.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Aa=e=>(e=e.toLowerCase(),t=>gp(t)===e),yp=e=>t=>typeof t===e,{isArray:Su}=Array,mh=yp("undefined");function AP(e){return e!==null&&!mh(e)&&e.constructor!==null&&!mh(e.constructor)&&aa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const fS=Aa("ArrayBuffer");function CP(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&fS(e.buffer),t}const TP=yp("string"),aa=yp("function"),pS=yp("number"),_p=e=>e!==null&&typeof e=="object",IP=e=>e===!0||e===!1,_f=e=>{if(gp(e)!=="object")return!1;const t=sv(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},PP=Aa("Date"),MP=Aa("File"),kP=Aa("Blob"),RP=Aa("FileList"),DP=e=>_p(e)&&aa(e.pipe),LP=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||aa(e.append)&&((t=gp(e))==="formdata"||t==="object"&&aa(e.toString)&&e.toString()==="[object FormData]"))},zP=Aa("URLSearchParams"),[FP,BP,OP,NP]=["ReadableStream","Request","Response","Headers"].map(Aa),$P=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sh(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let u,d;if(typeof e!="object"&&(e=[e]),Su(e))for(u=0,d=e.length;u<d;u++)t.call(null,e[u],u,e);else{const g=s?Object.getOwnPropertyNames(e):Object.keys(e),p=g.length;let c;for(u=0;u<p;u++)c=g[u],t.call(null,e[c],c,e)}}function mS(e,t){t=t.toLowerCase();const s=Object.keys(e);let u=s.length,d;for(;u-- >0;)if(d=s[u],t===d.toLowerCase())return d;return null}const gS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yS=e=>!mh(e)&&e!==gS;function uy(){const{caseless:e}=yS(this)&&this||{},t={},s=(u,d)=>{const g=e&&mS(t,d)||d;_f(t[g])&&_f(u)?t[g]=uy(t[g],u):_f(u)?t[g]=uy({},u):Su(u)?t[g]=u.slice():t[g]=u};for(let u=0,d=arguments.length;u<d;u++)arguments[u]&&Sh(arguments[u],s);return t}const UP=(e,t,s,{allOwnKeys:u}={})=>(Sh(t,(d,g)=>{s&&aa(d)?e[g]=dS(d,s):e[g]=d},{allOwnKeys:u}),e),VP=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jP=(e,t,s,u)=>{e.prototype=Object.create(t.prototype,u),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},ZP=(e,t,s,u)=>{let d,g,p;const c={};if(t=t||{},e==null)return t;do{for(d=Object.getOwnPropertyNames(e),g=d.length;g-- >0;)p=d[g],(!u||u(p,e,t))&&!c[p]&&(t[p]=e[p],c[p]=!0);e=s!==!1&&sv(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},HP=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const u=e.indexOf(t,s);return u!==-1&&u===s},GP=e=>{if(!e)return null;if(Su(e))return e;let t=e.length;if(!pS(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},qP=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&sv(Uint8Array)),WP=(e,t)=>{const u=(e&&e[Symbol.iterator]).call(e);let d;for(;(d=u.next())&&!d.done;){const g=d.value;t.call(e,g[0],g[1])}},KP=(e,t)=>{let s;const u=[];for(;(s=e.exec(t))!==null;)u.push(s);return u},YP=Aa("HTMLFormElement"),XP=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,u,d){return u.toUpperCase()+d}),ow=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),JP=Aa("RegExp"),_S=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),u={};Sh(s,(d,g)=>{let p;(p=t(d,g,e))!==!1&&(u[g]=p||d)}),Object.defineProperties(e,u)},QP=e=>{_S(e,(t,s)=>{if(aa(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const u=e[s];if(aa(u)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},eM=(e,t)=>{const s={},u=d=>{d.forEach(g=>{s[g]=!0})};return Su(e)?u(e):u(String(e).split(t)),s},tM=()=>{},rM=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,tg="abcdefghijklmnopqrstuvwxyz",lw="0123456789",vS={DIGIT:lw,ALPHA:tg,ALPHA_DIGIT:tg+tg.toUpperCase()+lw},nM=(e=16,t=vS.ALPHA_DIGIT)=>{let s="";const{length:u}=t;for(;e--;)s+=t[Math.random()*u|0];return s};function iM(e){return!!(e&&aa(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const aM=e=>{const t=new Array(10),s=(u,d)=>{if(_p(u)){if(t.indexOf(u)>=0)return;if(!("toJSON"in u)){t[d]=u;const g=Su(u)?[]:{};return Sh(u,(p,c)=>{const S=s(p,d+1);!mh(S)&&(g[c]=S)}),t[d]=void 0,g}}return u};return s(e,0)},sM=Aa("AsyncFunction"),oM=e=>e&&(_p(e)||aa(e))&&aa(e.then)&&aa(e.catch),Le={isArray:Su,isArrayBuffer:fS,isBuffer:AP,isFormData:LP,isArrayBufferView:CP,isString:TP,isNumber:pS,isBoolean:IP,isObject:_p,isPlainObject:_f,isReadableStream:FP,isRequest:BP,isResponse:OP,isHeaders:NP,isUndefined:mh,isDate:PP,isFile:MP,isBlob:kP,isRegExp:JP,isFunction:aa,isStream:DP,isURLSearchParams:zP,isTypedArray:qP,isFileList:RP,forEach:Sh,merge:uy,extend:UP,trim:$P,stripBOM:VP,inherits:jP,toFlatObject:ZP,kindOf:gp,kindOfTest:Aa,endsWith:HP,toArray:GP,forEachEntry:WP,matchAll:KP,isHTMLForm:YP,hasOwnProperty:ow,hasOwnProp:ow,reduceDescriptors:_S,freezeMethods:QP,toObjectSet:eM,toCamelCase:XP,noop:tM,toFiniteNumber:rM,findKey:mS,global:gS,isContextDefined:yS,ALPHABET:vS,generateString:nM,isSpecCompliantForm:iM,toJSONObject:aM,isAsyncFn:sM,isThenable:oM};function Vt(e,t,s,u,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),u&&(this.request=u),d&&(this.response=d)}Le.inherits(Vt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xS=Vt.prototype,wS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wS[e]={value:e}});Object.defineProperties(Vt,wS);Object.defineProperty(xS,"isAxiosError",{value:!0});Vt.from=(e,t,s,u,d,g)=>{const p=Object.create(xS);return Le.toFlatObject(e,p,function(S){return S!==Error.prototype},c=>c!=="isAxiosError"),Vt.call(p,e.message,t,s,u,d),p.cause=e,p.name=e.name,g&&Object.assign(p,g),p};const lM=null;function cy(e){return Le.isPlainObject(e)||Le.isArray(e)}function bS(e){return Le.endsWith(e,"[]")?e.slice(0,-2):e}function uw(e,t,s){return e?e.concat(t).map(function(d,g){return d=bS(d),!s&&g?"["+d+"]":d}).join(s?".":""):t}function uM(e){return Le.isArray(e)&&!e.some(cy)}const cM=Le.toFlatObject(Le,{},null,function(t){return/^is[A-Z]/.test(t)});function vp(e,t,s){if(!Le.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=Le.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,ae){return!Le.isUndefined(ae[q])});const u=s.metaTokens,d=s.visitor||k,g=s.dots,p=s.indexes,S=(s.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(t);if(!Le.isFunction(d))throw new TypeError("visitor must be a function");function I(ie){if(ie===null)return"";if(Le.isDate(ie))return ie.toISOString();if(!S&&Le.isBlob(ie))throw new Vt("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(ie)||Le.isTypedArray(ie)?S&&typeof Blob=="function"?new Blob([ie]):Buffer.from(ie):ie}function k(ie,q,ae){let G=ie;if(ie&&!ae&&typeof ie=="object"){if(Le.endsWith(q,"{}"))q=u?q:q.slice(0,-2),ie=JSON.stringify(ie);else if(Le.isArray(ie)&&uM(ie)||(Le.isFileList(ie)||Le.endsWith(q,"[]"))&&(G=Le.toArray(ie)))return q=bS(q),G.forEach(function(H,re){!(Le.isUndefined(H)||H===null)&&t.append(p===!0?uw([q],re,g):p===null?q:q+"[]",I(H))}),!1}return cy(ie)?!0:(t.append(uw(ae,q,g),I(ie)),!1)}const R=[],z=Object.assign(cM,{defaultVisitor:k,convertValue:I,isVisitable:cy});function ue(ie,q){if(!Le.isUndefined(ie)){if(R.indexOf(ie)!==-1)throw Error("Circular reference detected in "+q.join("."));R.push(ie),Le.forEach(ie,function(G,N){(!(Le.isUndefined(G)||G===null)&&d.call(t,G,Le.isString(N)?N.trim():N,q,z))===!0&&ue(G,q?q.concat(N):[N])}),R.pop()}}if(!Le.isObject(e))throw new TypeError("data must be an object");return ue(e),t}function cw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(u){return t[u]})}function ov(e,t){this._pairs=[],e&&vp(e,this,t)}const SS=ov.prototype;SS.append=function(t,s){this._pairs.push([t,s])};SS.toString=function(t){const s=t?function(u){return t.call(this,u,cw)}:cw;return this._pairs.map(function(d){return s(d[0])+"="+s(d[1])},"").join("&")};function hM(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ES(e,t,s){if(!t)return e;const u=s&&s.encode||hM,d=s&&s.serialize;let g;if(d?g=d(t,s):g=Le.isURLSearchParams(t)?t.toString():new ov(t,s).toString(u),g){const p=e.indexOf("#");p!==-1&&(e=e.slice(0,p)),e+=(e.indexOf("?")===-1?"?":"&")+g}return e}class hw{constructor(){this.handlers=[]}use(t,s,u){return this.handlers.push({fulfilled:t,rejected:s,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Le.forEach(this.handlers,function(u){u!==null&&t(u)})}}const AS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dM=typeof URLSearchParams<"u"?URLSearchParams:ov,fM=typeof FormData<"u"?FormData:null,pM=typeof Blob<"u"?Blob:null,mM={isBrowser:!0,classes:{URLSearchParams:dM,FormData:fM,Blob:pM},protocols:["http","https","file","blob","url","data"]},lv=typeof window<"u"&&typeof document<"u",gM=(e=>lv&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),yM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_M=lv&&window.location.href||"http://localhost",vM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lv,hasStandardBrowserEnv:gM,hasStandardBrowserWebWorkerEnv:yM,origin:_M},Symbol.toStringTag,{value:"Module"})),ba={...vM,...mM};function xM(e,t){return vp(e,new ba.classes.URLSearchParams,Object.assign({visitor:function(s,u,d,g){return ba.isNode&&Le.isBuffer(s)?(this.append(u,s.toString("base64")),!1):g.defaultVisitor.apply(this,arguments)}},t))}function wM(e){return Le.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bM(e){const t={},s=Object.keys(e);let u;const d=s.length;let g;for(u=0;u<d;u++)g=s[u],t[g]=e[g];return t}function CS(e){function t(s,u,d,g){let p=s[g++];if(p==="__proto__")return!0;const c=Number.isFinite(+p),S=g>=s.length;return p=!p&&Le.isArray(d)?d.length:p,S?(Le.hasOwnProp(d,p)?d[p]=[d[p],u]:d[p]=u,!c):((!d[p]||!Le.isObject(d[p]))&&(d[p]=[]),t(s,u,d[p],g)&&Le.isArray(d[p])&&(d[p]=bM(d[p])),!c)}if(Le.isFormData(e)&&Le.isFunction(e.entries)){const s={};return Le.forEachEntry(e,(u,d)=>{t(wM(u),d,s,0)}),s}return null}function SM(e,t,s){if(Le.isString(e))try{return(t||JSON.parse)(e),Le.trim(e)}catch(u){if(u.name!=="SyntaxError")throw u}return(s||JSON.stringify)(e)}const uv={transitional:AS,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const u=s.getContentType()||"",d=u.indexOf("application/json")>-1,g=Le.isObject(t);if(g&&Le.isHTMLForm(t)&&(t=new FormData(t)),Le.isFormData(t))return d?JSON.stringify(CS(t)):t;if(Le.isArrayBuffer(t)||Le.isBuffer(t)||Le.isStream(t)||Le.isFile(t)||Le.isBlob(t)||Le.isReadableStream(t))return t;if(Le.isArrayBufferView(t))return t.buffer;if(Le.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(g){if(u.indexOf("application/x-www-form-urlencoded")>-1)return xM(t,this.formSerializer).toString();if((c=Le.isFileList(t))||u.indexOf("multipart/form-data")>-1){const S=this.env&&this.env.FormData;return vp(c?{"files[]":t}:t,S&&new S,this.formSerializer)}}return g||d?(s.setContentType("application/json",!1),SM(t)):t}],transformResponse:[function(t){const s=this.transitional||uv.transitional,u=s&&s.forcedJSONParsing,d=this.responseType==="json";if(Le.isResponse(t)||Le.isReadableStream(t))return t;if(t&&Le.isString(t)&&(u&&!this.responseType||d)){const p=!(s&&s.silentJSONParsing)&&d;try{return JSON.parse(t)}catch(c){if(p)throw c.name==="SyntaxError"?Vt.from(c,Vt.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ba.classes.FormData,Blob:ba.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],e=>{uv.headers[e]={}});const cv=uv,EM=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AM=e=>{const t={};let s,u,d;return e&&e.split(`
`).forEach(function(p){d=p.indexOf(":"),s=p.substring(0,d).trim().toLowerCase(),u=p.substring(d+1).trim(),!(!s||t[s]&&EM[s])&&(s==="set-cookie"?t[s]?t[s].push(u):t[s]=[u]:t[s]=t[s]?t[s]+", "+u:u)}),t},dw=Symbol("internals");function Fc(e){return e&&String(e).trim().toLowerCase()}function vf(e){return e===!1||e==null?e:Le.isArray(e)?e.map(vf):String(e)}function CM(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let u;for(;u=s.exec(e);)t[u[1]]=u[2];return t}const TM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rg(e,t,s,u,d){if(Le.isFunction(u))return u.call(this,t,s);if(d&&(t=s),!!Le.isString(t)){if(Le.isString(u))return t.indexOf(u)!==-1;if(Le.isRegExp(u))return u.test(t)}}function IM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,u)=>s.toUpperCase()+u)}function PM(e,t){const s=Le.toCamelCase(" "+t);["get","set","has"].forEach(u=>{Object.defineProperty(e,u+s,{value:function(d,g,p){return this[u].call(this,t,d,g,p)},configurable:!0})})}class xp{constructor(t){t&&this.set(t)}set(t,s,u){const d=this;function g(c,S,I){const k=Fc(S);if(!k)throw new Error("header name must be a non-empty string");const R=Le.findKey(d,k);(!R||d[R]===void 0||I===!0||I===void 0&&d[R]!==!1)&&(d[R||S]=vf(c))}const p=(c,S)=>Le.forEach(c,(I,k)=>g(I,k,S));if(Le.isPlainObject(t)||t instanceof this.constructor)p(t,s);else if(Le.isString(t)&&(t=t.trim())&&!TM(t))p(AM(t),s);else if(Le.isHeaders(t))for(const[c,S]of t.entries())g(S,c,u);else t!=null&&g(s,t,u);return this}get(t,s){if(t=Fc(t),t){const u=Le.findKey(this,t);if(u){const d=this[u];if(!s)return d;if(s===!0)return CM(d);if(Le.isFunction(s))return s.call(this,d,u);if(Le.isRegExp(s))return s.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Fc(t),t){const u=Le.findKey(this,t);return!!(u&&this[u]!==void 0&&(!s||rg(this,this[u],u,s)))}return!1}delete(t,s){const u=this;let d=!1;function g(p){if(p=Fc(p),p){const c=Le.findKey(u,p);c&&(!s||rg(u,u[c],c,s))&&(delete u[c],d=!0)}}return Le.isArray(t)?t.forEach(g):g(t),d}clear(t){const s=Object.keys(this);let u=s.length,d=!1;for(;u--;){const g=s[u];(!t||rg(this,this[g],g,t,!0))&&(delete this[g],d=!0)}return d}normalize(t){const s=this,u={};return Le.forEach(this,(d,g)=>{const p=Le.findKey(u,g);if(p){s[p]=vf(d),delete s[g];return}const c=t?IM(g):String(g).trim();c!==g&&delete s[g],s[c]=vf(d),u[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return Le.forEach(this,(u,d)=>{u!=null&&u!==!1&&(s[d]=t&&Le.isArray(u)?u.join(", "):u)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const u=new this(t);return s.forEach(d=>u.set(d)),u}static accessor(t){const u=(this[dw]=this[dw]={accessors:{}}).accessors,d=this.prototype;function g(p){const c=Fc(p);u[c]||(PM(d,p),u[c]=!0)}return Le.isArray(t)?t.forEach(g):g(t),this}}xp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(xp.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(u){this[s]=u}}});Le.freezeMethods(xp);const Sa=xp;function ng(e,t){const s=this||cv,u=t||s,d=Sa.from(u.headers);let g=u.data;return Le.forEach(e,function(c){g=c.call(s,g,d.normalize(),t?t.status:void 0)}),d.normalize(),g}function TS(e){return!!(e&&e.__CANCEL__)}function Eu(e,t,s){Vt.call(this,e??"canceled",Vt.ERR_CANCELED,t,s),this.name="CanceledError"}Le.inherits(Eu,Vt,{__CANCEL__:!0});function IS(e,t,s){const u=s.config.validateStatus;!s.status||!u||u(s.status)?e(s):t(new Vt("Request failed with status code "+s.status,[Vt.ERR_BAD_REQUEST,Vt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function MM(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function kM(e,t){e=e||10;const s=new Array(e),u=new Array(e);let d=0,g=0,p;return t=t!==void 0?t:1e3,function(S){const I=Date.now(),k=u[g];p||(p=I),s[d]=S,u[d]=I;let R=g,z=0;for(;R!==d;)z+=s[R++],R=R%e;if(d=(d+1)%e,d===g&&(g=(g+1)%e),I-p<t)return;const ue=k&&I-k;return ue?Math.round(z*1e3/ue):void 0}}function RM(e,t){let s=0;const u=1e3/t;let d=null;return function(){const p=this===!0,c=Date.now();if(p||c-s>u)return d&&(clearTimeout(d),d=null),s=c,e.apply(null,arguments);d||(d=setTimeout(()=>(d=null,s=Date.now(),e.apply(null,arguments)),u-(c-s)))}}const qf=(e,t,s=3)=>{let u=0;const d=kM(50,250);return RM(g=>{const p=g.loaded,c=g.lengthComputable?g.total:void 0,S=p-u,I=d(S),k=p<=c;u=p;const R={loaded:p,total:c,progress:c?p/c:void 0,bytes:S,rate:I||void 0,estimated:I&&c&&k?(c-p)/I:void 0,event:g,lengthComputable:c!=null};R[t?"download":"upload"]=!0,e(R)},s)},DM=ba.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");let u;function d(g){let p=g;return t&&(s.setAttribute("href",p),p=s.href),s.setAttribute("href",p),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return u=d(window.location.href),function(p){const c=Le.isString(p)?d(p):p;return c.protocol===u.protocol&&c.host===u.host}}():function(){return function(){return!0}}(),LM=ba.hasStandardBrowserEnv?{write(e,t,s,u,d,g){const p=[e+"="+encodeURIComponent(t)];Le.isNumber(s)&&p.push("expires="+new Date(s).toGMTString()),Le.isString(u)&&p.push("path="+u),Le.isString(d)&&p.push("domain="+d),g===!0&&p.push("secure"),document.cookie=p.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function FM(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function PS(e,t){return e&&!zM(t)?FM(e,t):t}const fw=e=>e instanceof Sa?{...e}:e;function Vo(e,t){t=t||{};const s={};function u(I,k,R){return Le.isPlainObject(I)&&Le.isPlainObject(k)?Le.merge.call({caseless:R},I,k):Le.isPlainObject(k)?Le.merge({},k):Le.isArray(k)?k.slice():k}function d(I,k,R){if(Le.isUndefined(k)){if(!Le.isUndefined(I))return u(void 0,I,R)}else return u(I,k,R)}function g(I,k){if(!Le.isUndefined(k))return u(void 0,k)}function p(I,k){if(Le.isUndefined(k)){if(!Le.isUndefined(I))return u(void 0,I)}else return u(void 0,k)}function c(I,k,R){if(R in t)return u(I,k);if(R in e)return u(void 0,I)}const S={url:g,method:g,data:g,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:c,headers:(I,k)=>d(fw(I),fw(k),!0)};return Le.forEach(Object.keys(Object.assign({},e,t)),function(k){const R=S[k]||d,z=R(e[k],t[k],k);Le.isUndefined(z)&&R!==c||(s[k]=z)}),s}const MS=e=>{const t=Vo({},e);let{data:s,withXSRFToken:u,xsrfHeaderName:d,xsrfCookieName:g,headers:p,auth:c}=t;t.headers=p=Sa.from(p),t.url=ES(PS(t.baseURL,t.url),e.params,e.paramsSerializer),c&&p.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let S;if(Le.isFormData(s)){if(ba.hasStandardBrowserEnv||ba.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if((S=p.getContentType())!==!1){const[I,...k]=S?S.split(";").map(R=>R.trim()).filter(Boolean):[];p.setContentType([I||"multipart/form-data",...k].join("; "))}}if(ba.hasStandardBrowserEnv&&(u&&Le.isFunction(u)&&(u=u(t)),u||u!==!1&&DM(t.url))){const I=d&&g&&LM.read(g);I&&p.set(d,I)}return t},BM=typeof XMLHttpRequest<"u",OM=BM&&function(e){return new Promise(function(s,u){const d=MS(e);let g=d.data;const p=Sa.from(d.headers).normalize();let{responseType:c}=d,S;function I(){d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}let k=new XMLHttpRequest;k.open(d.method.toUpperCase(),d.url,!0),k.timeout=d.timeout;function R(){if(!k)return;const ue=Sa.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),q={data:!c||c==="text"||c==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:ue,config:e,request:k};IS(function(G){s(G),I()},function(G){u(G),I()},q),k=null}"onloadend"in k?k.onloadend=R:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(R)},k.onabort=function(){k&&(u(new Vt("Request aborted",Vt.ECONNABORTED,d,k)),k=null)},k.onerror=function(){u(new Vt("Network Error",Vt.ERR_NETWORK,d,k)),k=null},k.ontimeout=function(){let ie=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const q=d.transitional||AS;d.timeoutErrorMessage&&(ie=d.timeoutErrorMessage),u(new Vt(ie,q.clarifyTimeoutError?Vt.ETIMEDOUT:Vt.ECONNABORTED,d,k)),k=null},g===void 0&&p.setContentType(null),"setRequestHeader"in k&&Le.forEach(p.toJSON(),function(ie,q){k.setRequestHeader(q,ie)}),Le.isUndefined(d.withCredentials)||(k.withCredentials=!!d.withCredentials),c&&c!=="json"&&(k.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&k.addEventListener("progress",qf(d.onDownloadProgress,!0)),typeof d.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",qf(d.onUploadProgress)),(d.cancelToken||d.signal)&&(S=ue=>{k&&(u(!ue||ue.type?new Eu(null,e,k):ue),k.abort(),k=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S)));const z=MM(d.url);if(z&&ba.protocols.indexOf(z)===-1){u(new Vt("Unsupported protocol "+z+":",Vt.ERR_BAD_REQUEST,e));return}k.send(g||null)})},NM=(e,t)=>{let s=new AbortController,u;const d=function(S){if(!u){u=!0,p();const I=S instanceof Error?S:this.reason;s.abort(I instanceof Vt?I:new Eu(I instanceof Error?I.message:I))}};let g=t&&setTimeout(()=>{d(new Vt(`timeout ${t} of ms exceeded`,Vt.ETIMEDOUT))},t);const p=()=>{e&&(g&&clearTimeout(g),g=null,e.forEach(S=>{S&&(S.removeEventListener?S.removeEventListener("abort",d):S.unsubscribe(d))}),e=null)};e.forEach(S=>S&&S.addEventListener&&S.addEventListener("abort",d));const{signal:c}=s;return c.unsubscribe=p,[c,()=>{g&&clearTimeout(g),g=null}]},$M=function*(e,t){let s=e.byteLength;if(!t||s<t){yield e;return}let u=0,d;for(;u<s;)d=u+t,yield e.slice(u,d),u=d},UM=async function*(e,t,s){for await(const u of e)yield*$M(ArrayBuffer.isView(u)?u:await s(String(u)),t)},pw=(e,t,s,u,d)=>{const g=UM(e,t,d);let p=0;return new ReadableStream({type:"bytes",async pull(c){const{done:S,value:I}=await g.next();if(S){c.close(),u();return}let k=I.byteLength;s&&s(p+=k),c.enqueue(new Uint8Array(I))},cancel(c){return u(c),g.return()}},{highWaterMark:2})},mw=(e,t)=>{const s=e!=null;return u=>setTimeout(()=>t({lengthComputable:s,total:e,loaded:u}))},wp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",kS=wp&&typeof ReadableStream=="function",hy=wp&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),VM=kS&&(()=>{let e=!1;const t=new Request(ba.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),gw=64*1024,dy=kS&&!!(()=>{try{return Le.isReadableStream(new Response("").body)}catch{}})(),Wf={stream:dy&&(e=>e.body)};wp&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Wf[t]&&(Wf[t]=Le.isFunction(e[t])?s=>s[t]():(s,u)=>{throw new Vt(`Response type '${t}' is not supported`,Vt.ERR_NOT_SUPPORT,u)})})})(new Response);const jM=async e=>{if(e==null)return 0;if(Le.isBlob(e))return e.size;if(Le.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(Le.isArrayBufferView(e))return e.byteLength;if(Le.isURLSearchParams(e)&&(e=e+""),Le.isString(e))return(await hy(e)).byteLength},ZM=async(e,t)=>{const s=Le.toFiniteNumber(e.getContentLength());return s??jM(t)},HM=wp&&(async e=>{let{url:t,method:s,data:u,signal:d,cancelToken:g,timeout:p,onDownloadProgress:c,onUploadProgress:S,responseType:I,headers:k,withCredentials:R="same-origin",fetchOptions:z}=MS(e);I=I?(I+"").toLowerCase():"text";let[ue,ie]=d||g||p?NM([d,g],p):[],q,ae;const G=()=>{!q&&setTimeout(()=>{ue&&ue.unsubscribe()}),q=!0};let N;try{if(S&&VM&&s!=="get"&&s!=="head"&&(N=await ZM(k,u))!==0){let Pe=new Request(t,{method:"POST",body:u,duplex:"half"}),Te;Le.isFormData(u)&&(Te=Pe.headers.get("content-type"))&&k.setContentType(Te),Pe.body&&(u=pw(Pe.body,gw,mw(N,qf(S)),null,hy))}Le.isString(R)||(R=R?"cors":"omit"),ae=new Request(t,{...z,signal:ue,method:s.toUpperCase(),headers:k.normalize().toJSON(),body:u,duplex:"half",withCredentials:R});let H=await fetch(ae);const re=dy&&(I==="stream"||I==="response");if(dy&&(c||re)){const Pe={};["status","statusText","headers"].forEach(Oe=>{Pe[Oe]=H[Oe]});const Te=Le.toFiniteNumber(H.headers.get("content-length"));H=new Response(pw(H.body,gw,c&&mw(Te,qf(c,!0)),re&&G,hy),Pe)}I=I||"text";let be=await Wf[Le.findKey(Wf,I)||"text"](H,e);return!re&&G(),ie&&ie(),await new Promise((Pe,Te)=>{IS(Pe,Te,{data:be,headers:Sa.from(H.headers),status:H.status,statusText:H.statusText,config:e,request:ae})})}catch(H){throw G(),H&&H.name==="TypeError"&&/fetch/i.test(H.message)?Object.assign(new Vt("Network Error",Vt.ERR_NETWORK,e,ae),{cause:H.cause||H}):Vt.from(H,H&&H.code,e,ae)}}),fy={http:lM,xhr:OM,fetch:HM};Le.forEach(fy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yw=e=>`- ${e}`,GM=e=>Le.isFunction(e)||e===null||e===!1,RS={getAdapter:e=>{e=Le.isArray(e)?e:[e];const{length:t}=e;let s,u;const d={};for(let g=0;g<t;g++){s=e[g];let p;if(u=s,!GM(s)&&(u=fy[(p=String(s)).toLowerCase()],u===void 0))throw new Vt(`Unknown adapter '${p}'`);if(u)break;d[p||"#"+g]=u}if(!u){const g=Object.entries(d).map(([c,S])=>`adapter ${c} `+(S===!1?"is not supported by the environment":"is not available in the build"));let p=t?g.length>1?`since :
`+g.map(yw).join(`
`):" "+yw(g[0]):"as no adapter specified";throw new Vt("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return u},adapters:fy};function ig(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Eu(null,e)}function _w(e){return ig(e),e.headers=Sa.from(e.headers),e.data=ng.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),RS.getAdapter(e.adapter||cv.adapter)(e).then(function(u){return ig(e),u.data=ng.call(e,e.transformResponse,u),u.headers=Sa.from(u.headers),u},function(u){return TS(u)||(ig(e),u&&u.response&&(u.response.data=ng.call(e,e.transformResponse,u.response),u.response.headers=Sa.from(u.response.headers))),Promise.reject(u)})}const DS="1.7.2",hv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{hv[e]=function(u){return typeof u===e||"a"+(t<1?"n ":" ")+e}});const vw={};hv.transitional=function(t,s,u){function d(g,p){return"[Axios v"+DS+"] Transitional option '"+g+"'"+p+(u?". "+u:"")}return(g,p,c)=>{if(t===!1)throw new Vt(d(p," has been removed"+(s?" in "+s:"")),Vt.ERR_DEPRECATED);return s&&!vw[p]&&(vw[p]=!0,console.warn(d(p," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(g,p,c):!0}};function qM(e,t,s){if(typeof e!="object")throw new Vt("options must be an object",Vt.ERR_BAD_OPTION_VALUE);const u=Object.keys(e);let d=u.length;for(;d-- >0;){const g=u[d],p=t[g];if(p){const c=e[g],S=c===void 0||p(c,g,e);if(S!==!0)throw new Vt("option "+g+" must be "+S,Vt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Vt("Unknown option "+g,Vt.ERR_BAD_OPTION)}}const py={assertOptions:qM,validators:hv},zs=py.validators;class Kf{constructor(t){this.defaults=t,this.interceptors={request:new hw,response:new hw}}async request(t,s){try{return await this._request(t,s)}catch(u){if(u instanceof Error){let d;Error.captureStackTrace?Error.captureStackTrace(d={}):d=new Error;const g=d.stack?d.stack.replace(/^.+\n/,""):"";try{u.stack?g&&!String(u.stack).endsWith(g.replace(/^.+\n.+\n/,""))&&(u.stack+=`
`+g):u.stack=g}catch{}}throw u}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Vo(this.defaults,s);const{transitional:u,paramsSerializer:d,headers:g}=s;u!==void 0&&py.assertOptions(u,{silentJSONParsing:zs.transitional(zs.boolean),forcedJSONParsing:zs.transitional(zs.boolean),clarifyTimeoutError:zs.transitional(zs.boolean)},!1),d!=null&&(Le.isFunction(d)?s.paramsSerializer={serialize:d}:py.assertOptions(d,{encode:zs.function,serialize:zs.function},!0)),s.method=(s.method||this.defaults.method||"get").toLowerCase();let p=g&&Le.merge(g.common,g[s.method]);g&&Le.forEach(["delete","get","head","post","put","patch","common"],ie=>{delete g[ie]}),s.headers=Sa.concat(p,g);const c=[];let S=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(s)===!1||(S=S&&q.synchronous,c.unshift(q.fulfilled,q.rejected))});const I=[];this.interceptors.response.forEach(function(q){I.push(q.fulfilled,q.rejected)});let k,R=0,z;if(!S){const ie=[_w.bind(this),void 0];for(ie.unshift.apply(ie,c),ie.push.apply(ie,I),z=ie.length,k=Promise.resolve(s);R<z;)k=k.then(ie[R++],ie[R++]);return k}z=c.length;let ue=s;for(R=0;R<z;){const ie=c[R++],q=c[R++];try{ue=ie(ue)}catch(ae){q.call(this,ae);break}}try{k=_w.call(this,ue)}catch(ie){return Promise.reject(ie)}for(R=0,z=I.length;R<z;)k=k.then(I[R++],I[R++]);return k}getUri(t){t=Vo(this.defaults,t);const s=PS(t.baseURL,t.url);return ES(s,t.params,t.paramsSerializer)}}Le.forEach(["delete","get","head","options"],function(t){Kf.prototype[t]=function(s,u){return this.request(Vo(u||{},{method:t,url:s,data:(u||{}).data}))}});Le.forEach(["post","put","patch"],function(t){function s(u){return function(g,p,c){return this.request(Vo(c||{},{method:t,headers:u?{"Content-Type":"multipart/form-data"}:{},url:g,data:p}))}}Kf.prototype[t]=s(),Kf.prototype[t+"Form"]=s(!0)});const xf=Kf;class dv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(g){s=g});const u=this;this.promise.then(d=>{if(!u._listeners)return;let g=u._listeners.length;for(;g-- >0;)u._listeners[g](d);u._listeners=null}),this.promise.then=d=>{let g;const p=new Promise(c=>{u.subscribe(c),g=c}).then(d);return p.cancel=function(){u.unsubscribe(g)},p},t(function(g,p,c){u.reason||(u.reason=new Eu(g,p,c),s(u.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}static source(){let t;return{token:new dv(function(d){t=d}),cancel:t}}}const WM=dv;function KM(e){return function(s){return e.apply(null,s)}}function YM(e){return Le.isObject(e)&&e.isAxiosError===!0}const my={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(my).forEach(([e,t])=>{my[t]=e});const XM=my;function LS(e){const t=new xf(e),s=dS(xf.prototype.request,t);return Le.extend(s,xf.prototype,t,{allOwnKeys:!0}),Le.extend(s,t,null,{allOwnKeys:!0}),s.create=function(d){return LS(Vo(e,d))},s}const cn=LS(cv);cn.Axios=xf;cn.CanceledError=Eu;cn.CancelToken=WM;cn.isCancel=TS;cn.VERSION=DS;cn.toFormData=vp;cn.AxiosError=Vt;cn.Cancel=cn.CanceledError;cn.all=function(t){return Promise.all(t)};cn.spread=KM;cn.isAxiosError=YM;cn.mergeConfig=Vo;cn.AxiosHeaders=Sa;cn.formToJSON=e=>CS(Le.isHTMLForm(e)?new FormData(e):e);cn.getAdapter=RS.getAdapter;cn.HttpStatusCode=XM;cn.default=cn;function Eh(){const e=bh(),t=[{path:"/home",content:"Obstacles View",icon:"/icons/obstacles.png"},{path:"/user-tracking",content:"User Tracking",icon:"/icons/user_tracking.png"},{path:"/admin-management",content:"Admin Management",icon:"/icons/admin.png"},{path:"/add-obstacle",content:"Add Obstacle",icon:"/icons/add_obstacle.png"},{path:"/add-new-member",content:"add new member",icon:"/icons/add_new-member.png"}];return Y.jsxs("div",{className:"bg-[#101A33] w-[20%] relative",children:[Y.jsx("div",{className:"bg-[#1A2342] text-center select-none py-3",children:Y.jsx("img",{src:"/logo.png",alt:"AROS Logo",className:"w-28 h-auto mx-auto"})}),Y.jsx("div",{className:"flex flex-col font-Sansation_Light_Italic text-white py-3 text-sm",children:t.map((s,u)=>Y.jsx(JM,{path:s.path,content:s.content,icon:s.icon,isActive:e.pathname===s.path},u))}),Y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 px-4 py-6 mt-auto flex items-center",children:[Y.jsx("img",{src:"/Bichoy.png",alt:"User Avatar",className:"w-14 h-14 rounded-full mr-2"}),Y.jsxs("div",{className:"flex flex-col",children:[Y.jsx("span",{className:"text-s text-white font-Sansation_Light_Italic",children:"Bichoy Atef"}),Y.jsx("span",{className:"text-s text-white font-Sansation_Light_Italic",children:"Admin"})]})]})]})}function JM({path:e,content:t,icon:s,isActive:u}){return Y.jsxs(bP,{to:e,className:`h-10 flex justify-start items-center space-x-3 pl-[10%] transition duration-300 ease-in-out ${u?"bg-[#1A2342] text-white shadow-md":"hover:bg-[#1A2342] hover:text-white hover:shadow-md"}`,children:[Y.jsx("img",{className:"w-6 h-6",src:s,alt:t}),Y.jsx("span",{className:`text-white font-Sansation_Light_Italic ${u?"font-bold":""}`,children:t})]})}const QM="modulepreload",ek=function(e){return"/"+e},xw={},zS=function(t,s,u){let d=Promise.resolve();if(s&&s.length>0){const g=document.getElementsByTagName("link");d=Promise.all(s.map(p=>{if(p=ek(p),p in xw)return;xw[p]=!0;const c=p.endsWith(".css"),S=c?'[rel="stylesheet"]':"";if(!!u)for(let R=g.length-1;R>=0;R--){const z=g[R];if(z.href===p&&(!c||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${S}`))return;const k=document.createElement("link");if(k.rel=c?"stylesheet":QM,c||(k.as="script",k.crossOrigin=""),k.href=p,document.head.appendChild(k),c)return new Promise((R,z)=>{k.addEventListener("load",R),k.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${p}`)))})}))}return d.then(()=>t()).catch(g=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g})},tk=Ae.createContext(null);function rk(e,t){const s=Array.isArray(e)?e[0]:e?e.x:0,u=Array.isArray(e)?e[1]:e?e.y:0,d=Array.isArray(t)?t[0]:t?t.x:0,g=Array.isArray(t)?t[1]:t?t.y:0;return s===d&&u===g}function ss(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!ss(e[s],t[s]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const s=Object.keys(e),u=Object.keys(t);if(s.length!==u.length)return!1;for(const d of s)if(!t.hasOwnProperty(d)||!ss(e[d],t[d]))return!1;return!0}return!1}function nk(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function ww(e,t){if(!e.getProjection)return;const s=e.getProjection(),u=t.getProjection();ss(s,u)||t.setProjection(s)}function bw(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Sw(e,t){const s=t.viewState||t;let u=!1;if("longitude"in s&&"latitude"in s){const d=e.center;e.center=new d.constructor(s.longitude,s.latitude),u=u||d!==e.center}if("zoom"in s){const d=e.zoom;e.zoom=s.zoom,u=u||d!==e.zoom}if("bearing"in s){const d=e.bearing;e.bearing=s.bearing,u=u||d!==e.bearing}if("pitch"in s){const d=e.pitch;e.pitch=s.pitch,u=u||d!==e.pitch}return s.padding&&!e.isPaddingEqual(s.padding)&&(u=!0,e.padding=s.padding),u}const ik=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ew(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const u of e.layers)t[u.id]=u;const s=e.layers.map(u=>{let d=null;"interactive"in u&&(d=Object.assign({},u),delete d.interactive);const g=t[u.ref];if(g){d=d||Object.assign({},u),delete d.ref;for(const p of ik)p in g&&(d[p]=g[p])}return d||u});return{...e,layers:s}}var Aw={};const Cw={version:8,sources:{},layers:[]},Tw={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},ag={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Iw={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ak=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],sk=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class yu{constructor(t,s,u){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=d=>{const g=this.props[Iw[d.type]];g?g(d):d.type==="error"&&console.error(d.error)},this._onPointerEvent=d=>{(d.type==="mousemove"||d.type==="mouseout")&&this._updateHover(d);const g=this.props[Tw[d.type]];g&&(this.props.interactiveLayerIds&&d.type!=="mouseover"&&d.type!=="mouseout"&&(d.features=this._hoveredFeatures||this._queryRenderedFeatures(d.point)),g(d),delete d.features)},this._onCameraEvent=d=>{if(!this._internalUpdate){const g=this.props[ag[d.type]];g&&g(d)}d.type in this._deferredEvents&&(this._deferredEvents[d.type]=!1)},this._MapClass=t,this.props=s,this._initialize(u)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const s=this.props;this.props=t;const u=this._updateSettings(t,s);u&&this._createShadowTransform(this._map);const d=this._updateSize(t),g=this._updateViewState(t,!0);this._updateStyle(t,s),this._updateStyleComponents(t,s),this._updateHandlers(t,s),(u||d||g&&!this._map.isMoving())&&this.redraw()}static reuse(t,s){const u=yu.savedMaps.pop();if(!u)return null;const d=u.map,g=d.getContainer();for(s.className=g.className;g.childNodes.length>0;)s.appendChild(g.childNodes[0]);d._container=s;const p=d._resizeObserver;p&&(p.disconnect(),p.observe(s)),u.setProps({...t,styleDiffing:!1}),d.resize();const{initialViewState:c}=t;return c&&(c.bounds?d.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):u._updateViewState(c,!1)),d.isStyleLoaded()?d.fire("load"):d.once("styledata",()=>d.fire("load")),d._update(),u}_initialize(t){const{props:s}=this,{mapStyle:u=Cw}=s,d={...s,...s.initialViewState,accessToken:s.mapboxAccessToken||ok()||null,container:t,style:Ew(u)},g=d.initialViewState||d.viewState||d;if(Object.assign(d,{center:[g.longitude||0,g.latitude||0],zoom:g.zoom||0,pitch:g.pitch||0,bearing:g.bearing||0}),s.gl){const k=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=k,s.gl)}const p=new this._MapClass(d);g.padding&&p.setPadding(g.padding),s.cursor&&(p.getCanvas().style.cursor=s.cursor),this._createShadowTransform(p);const c=p._render;p._render=k=>{this._inRender=!0,c.call(p,k),this._inRender=!1};const S=p._renderTaskQueue.run;p._renderTaskQueue.run=k=>{S.call(p._renderTaskQueue,k),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const I=p.fire;p.fire=this._fireEvent.bind(this,I),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),ww(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const k in Tw)p.on(k,this._onPointerEvent);for(const k in ag)p.on(k,this._onCameraEvent);for(const k in Iw)p.on(k,this._onEvent);this._map=p}recycle(){const s=this.map.getContainer().querySelector("[mapboxgl-children]");s==null||s.remove(),yu.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const s=nk(t.transform);t.painter.transform=s,this._renderTransform=s}_updateSize(t){const{viewState:s}=t;if(s){const u=this._map;if(s.width!==u.transform.width||s.height!==u.transform.height)return u.resize(),!0}return!1}_updateViewState(t,s){if(this._internalUpdate)return!1;const u=this._map,d=this._renderTransform,{zoom:g,pitch:p,bearing:c}=d,S=u.isMoving();S&&(d.cameraElevationReference="sea");const I=Sw(d,{...bw(u.transform),...t});if(S&&(d.cameraElevationReference="ground"),I&&s){const k=this._deferredEvents;k.move=!0,k.zoom||(k.zoom=g!==d.zoom),k.rotate||(k.rotate=c!==d.bearing),k.pitch||(k.pitch=p!==d.pitch)}return S||Sw(u.transform,t),I}_updateSettings(t,s){const u=this._map;let d=!1;for(const g of ak)if(g in t&&!ss(t[g],s[g])){d=!0;const p=u[`set${g[0].toUpperCase()}${g.slice(1)}`];p==null||p.call(u,t[g])}return d}_updateStyle(t,s){if(t.cursor!==s.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==s.mapStyle){const{mapStyle:u=Cw,styleDiffing:d=!0}=t,g={diff:d};return"localIdeographFontFamily"in t&&(g.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Ew(u),g),!0}return!1}_updateStyleComponents(t,s){const u=this._map;let d=!1;return u.isStyleLoaded()&&("light"in t&&u.setLight&&!ss(t.light,s.light)&&(d=!0,u.setLight(t.light)),"fog"in t&&u.setFog&&!ss(t.fog,s.fog)&&(d=!0,u.setFog(t.fog)),"terrain"in t&&u.setTerrain&&!ss(t.terrain,s.terrain)&&(!t.terrain||u.getSource(t.terrain.source))&&(d=!0,u.setTerrain(t.terrain))),d}_updateHandlers(t,s){var u,d;const g=this._map;let p=!1;for(const c of sk){const S=(u=t[c])!==null&&u!==void 0?u:!0,I=(d=s[c])!==null&&d!==void 0?d:!0;ss(S,I)||(p=!0,S?g[c].enable(S):g[c].disable())}return p}_queryRenderedFeatures(t){const s=this._map,u=s.transform,{interactiveLayerIds:d=[]}=this.props;try{return s.transform=this._renderTransform,s.queryRenderedFeatures(t,{layers:d.filter(s.getLayer.bind(s))})}catch{return[]}finally{s.transform=u}}_updateHover(t){var s;const{props:u}=this;if(u.interactiveLayerIds&&(u.onMouseMove||u.onMouseEnter||u.onMouseLeave)){const g=t.type,p=((s=this._hoveredFeatures)===null||s===void 0?void 0:s.length)>0,c=this._queryRenderedFeatures(t.point),S=c.length>0;!S&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,S&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=g}else this._hoveredFeatures=null}_fireEvent(t,s,u){const d=this._map,g=d.transform,p=typeof s=="string"?s:s.type;return p==="move"&&this._updateViewState(this.props,!1),p in ag&&(typeof s=="object"&&(s.viewState=bw(g)),this._map.isMoving())?(d.transform=this._renderTransform,t.call(d,s,u),d.transform=g,d):(t.call(d,s,u),d)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const u in this._deferredEvents)this._deferredEvents[u]&&t.fire(u);this._internalUpdate=!1;const s=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{ww(this._renderTransform,s),t.transform=s}}}yu.savedMaps=[];function ok(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Aw.MapboxAccessToken}catch{}try{e=e||Aw.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const lk=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function uk(e){if(!e)return null;const t=e.map,s={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:u=>{const d=t.transform;t.transform=e.transform;const g=t.project(u);return t.transform=d,g},unproject:u=>{const d=t.transform;t.transform=e.transform;const g=t.unproject(u);return t.transform=d,g},queryTerrainElevation:(u,d)=>{const g=t.transform;t.transform=e.transform;const p=t.queryTerrainElevation(u,d);return t.transform=g,p},queryRenderedFeatures:(u,d)=>{const g=t.transform;t.transform=e.transform;const p=t.queryRenderedFeatures(u,d);return t.transform=g,p}};for(const u of ck(t))!(u in s)&&!lk.includes(u)&&(s[u]=t[u].bind(t));return s}function ck(e){const t=new Set;let s=e;for(;s;){for(const u of Object.getOwnPropertyNames(s))u[0]!=="_"&&typeof e[u]=="function"&&u!=="fire"&&u!=="setEventedParent"&&t.add(u);s=Object.getPrototypeOf(s)}return Array.from(t)}const hk=typeof document<"u"?Ae.useLayoutEffect:Ae.useEffect,dk=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function fk(e,t){for(const u of dk)u in t&&(e[u]=t[u]);const{RTLTextPlugin:s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;s&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(s,u=>{u&&console.error(u)},!0)}const bp=Ae.createContext(null);function FS(e,t,s){const u=Ae.useContext(tk),[d,g]=Ae.useState(null),p=Ae.useRef(),{current:c}=Ae.useRef({mapLib:null,map:null});Ae.useEffect(()=>{const k=e.mapLib;let R=!0,z;return Promise.resolve(k||s).then(ue=>{if(!R)return;if(!ue)throw new Error("Invalid mapLib");const ie="Map"in ue?ue:ue.default;if(!ie.Map)throw new Error("Invalid mapLib");if(fk(ie,e),!ie.supported||ie.supported(e))e.reuseMaps&&(z=yu.reuse(e,p.current)),z||(z=new yu(ie.Map,e,p.current)),c.map=uk(z),c.mapLib=ie,g(z),u==null||u.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(ue=>{const{onError:ie}=e;ie?ie({type:"error",target:null,originalEvent:null,error:ue}):console.error(ue)}),()=>{R=!1,z&&(u==null||u.onMapUnmount(e.id),e.reuseMaps?z.recycle():z.destroy())}},[]),hk(()=>{d&&d.setProps(e)}),Ae.useImperativeHandle(t,()=>c.map,[d]);const S=Ae.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),I={height:"100%"};return Ae.createElement("div",{id:e.id,ref:p,style:S},d&&Ae.createElement(bp.Provider,{value:c},Ae.createElement("div",{"mapboxgl-children":"",style:I},e.children)))}const pk=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function qo(e,t){if(!e||!t)return;const s=e.style;for(const u in t){const d=t[u];Number.isFinite(d)&&!pk.test(u)?s[u]=`${d}px`:s[u]=d}}function mk(e,t){const{map:s,mapLib:u}=Ae.useContext(bp),d=Ae.useRef({props:e});d.current.props=e;const g=Ae.useMemo(()=>{let q=!1;Ae.Children.forEach(e.children,N=>{N&&(q=!0)});const ae={...e,element:q?document.createElement("div"):null},G=new u.Marker(ae);return G.setLngLat([e.longitude,e.latitude]),G.getElement().addEventListener("click",N=>{var H,re;(re=(H=d.current.props).onClick)===null||re===void 0||re.call(H,{type:"click",target:G,originalEvent:N})}),G.on("dragstart",N=>{var H,re;const be=N;be.lngLat=g.getLngLat(),(re=(H=d.current.props).onDragStart)===null||re===void 0||re.call(H,be)}),G.on("drag",N=>{var H,re;const be=N;be.lngLat=g.getLngLat(),(re=(H=d.current.props).onDrag)===null||re===void 0||re.call(H,be)}),G.on("dragend",N=>{var H,re;const be=N;be.lngLat=g.getLngLat(),(re=(H=d.current.props).onDragEnd)===null||re===void 0||re.call(H,be)}),G},[]);Ae.useEffect(()=>(g.addTo(s.getMap()),()=>{g.remove()}),[]);const{longitude:p,latitude:c,offset:S,style:I,draggable:k=!1,popup:R=null,rotation:z=0,rotationAlignment:ue="auto",pitchAlignment:ie="auto"}=e;return Ae.useEffect(()=>{qo(g.getElement(),I)},[I]),Ae.useImperativeHandle(t,()=>g,[]),(g.getLngLat().lng!==p||g.getLngLat().lat!==c)&&g.setLngLat([p,c]),S&&!rk(g.getOffset(),S)&&g.setOffset(S),g.isDraggable()!==k&&g.setDraggable(k),g.getRotation()!==z&&g.setRotation(z),g.getRotationAlignment()!==ue&&g.setRotationAlignment(ue),g.getPitchAlignment()!==ie&&g.setPitchAlignment(ie),g.getPopup()!==R&&g.setPopup(R),tv.createPortal(e.children,g.getElement())}const BS=Ae.memo(Ae.forwardRef(mk));function Pw(e){return new Set(e?e.trim().split(/\s+/):[])}function gk(e,t){const{map:s,mapLib:u}=Ae.useContext(bp),d=Ae.useMemo(()=>document.createElement("div"),[]),g=Ae.useRef({props:e});g.current.props=e;const p=Ae.useMemo(()=>{const c={...e},S=new u.Popup(c);return S.setLngLat([e.longitude,e.latitude]),S.once("open",I=>{var k,R;(R=(k=g.current.props).onOpen)===null||R===void 0||R.call(k,I)}),S},[]);if(Ae.useEffect(()=>{const c=S=>{var I,k;(k=(I=g.current.props).onClose)===null||k===void 0||k.call(I,S)};return p.on("close",c),p.setDOMContent(d).addTo(s.getMap()),()=>{p.off("close",c),p.isOpen()&&p.remove()}},[]),Ae.useEffect(()=>{qo(p.getElement(),e.style)},[e.style]),Ae.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!ss(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const c=Pw(p.options.className),S=Pw(e.className);for(const I of c)S.has(I)||p.removeClassName(I);for(const I of S)c.has(I)||p.addClassName(I);p.options.className=e.className}return tv.createPortal(e.children,d)}const yk=Ae.memo(Ae.forwardRef(gk));function Ah(e,t,s,u){const d=Ae.useContext(bp),g=Ae.useMemo(()=>e(d),[]);return Ae.useEffect(()=>{const p=u||s||t,c=typeof t=="function"&&typeof s=="function"?t:null,S=typeof s=="function"?s:typeof t=="function"?t:null,{map:I}=d;return I.hasControl(g)||(I.addControl(g,p==null?void 0:p.position),c&&c(d)),()=>{S&&S(d),I.hasControl(g)&&I.removeControl(g)}},[]),g}function _k(e){const t=Ah(({mapLib:s})=>new s.AttributionControl(e),{position:e.position});return Ae.useEffect(()=>{qo(t._container,e.style)},[e.style]),null}Ae.memo(_k);function vk(e){const t=Ah(({mapLib:s})=>new s.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return Ae.useEffect(()=>{qo(t._controlContainer,e.style)},[e.style]),null}Ae.memo(vk);function xk(e,t){const s=Ae.useRef({props:e}),u=Ah(({mapLib:d})=>{const g=new d.GeolocateControl(e),p=g._setupUI;return g._setupUI=c=>{g._container.hasChildNodes()||p(c)},g.on("geolocate",c=>{var S,I;(I=(S=s.current.props).onGeolocate)===null||I===void 0||I.call(S,c)}),g.on("error",c=>{var S,I;(I=(S=s.current.props).onError)===null||I===void 0||I.call(S,c)}),g.on("outofmaxbounds",c=>{var S,I;(I=(S=s.current.props).onOutOfMaxBounds)===null||I===void 0||I.call(S,c)}),g.on("trackuserlocationstart",c=>{var S,I;(I=(S=s.current.props).onTrackUserLocationStart)===null||I===void 0||I.call(S,c)}),g.on("trackuserlocationend",c=>{var S,I;(I=(S=s.current.props).onTrackUserLocationEnd)===null||I===void 0||I.call(S,c)}),g},{position:e.position});return s.current.props=e,Ae.useImperativeHandle(t,()=>u,[]),Ae.useEffect(()=>{qo(u._container,e.style)},[e.style]),null}Ae.memo(Ae.forwardRef(xk));function wk(e){const t=Ah(({mapLib:s})=>new s.NavigationControl(e),{position:e.position});return Ae.useEffect(()=>{qo(t._container,e.style)},[e.style]),null}Ae.memo(wk);function bk(e){const t=Ah(({mapLib:g})=>new g.ScaleControl(e),{position:e.position}),s=Ae.useRef(e),u=s.current;s.current=e;const{style:d}=e;return e.maxWidth!==void 0&&e.maxWidth!==u.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==u.unit&&t.setUnit(e.unit),Ae.useEffect(()=>{qo(t._container,d)},[d]),null}Ae.memo(bk);const Sk=zS(()=>Promise.resolve().then(()=>Zk),void 0),Ek=Ae.forwardRef(function(t,s){return FS(t,s,Sk)}),Ak=BS,Ck=yk,Tk="https://api.maptiler.com/maps/streets/style.json?key=ZFtcxc8UpIJArb56xQlZ";function gy({obstacles:e,setPopupInfo:t,popupInfo:s}){const[u,d]=Ae.useState(null);return Ae.useEffect(()=>{if(u)try{u.on("load",function(){u.addSource("egypt_cities",{type:"geojson",data:"../../public/metadata-egy_admbnda_adm1_capmas_20170421-zip.geojson"}),u.addLayer({id:"egypt_cities",type:"fill",source:"egypt_cities",layout:{},paint:{"fill-color":"#088","fill-opacity":.8}}),u.addLayer({id:"outline",type:"line",source:"egypt_cities",layout:{},paint:{"line-color":"#888","line-width":1}})})}catch(g){console.error("Error loading GeoJSON data:",g)}},[u]),Y.jsxs(Ek,{width:"100%",height:"100%",initialViewState:{latitude:26.9,longitude:30.4,zoom:5.5},mapStyle:Tk,attributionControl:!1,onViewportChange:g=>d(g),children:[e.map((g,p)=>Y.jsx(Ak,{latitude:g.lat,longitude:g.lng,children:Y.jsx("img",{src:"Road icons/accident.png",alt:g.type,className:"w-6 h-6 rounded-full",onMouseEnter:()=>t(g),onMouseLeave:()=>t(null)})},p)),s&&Y.jsx(Ck,{latitude:s.lat,longitude:s.lng,onClose:()=>t(null),children:Y.jsxs("div",{children:[Y.jsx("h3",{children:s.type}),Y.jsx("img",{src:s.imageUrl,alt:s.type,className:"w-32 h-auto"})]})})]})}const Ik=({obstacles:e})=>{const t=bu();async function s(u){await fetch("https://aros-server-new.onrender.com/obstacle/"+u.id+"/fix",{method:"POST"}),t(0)}return Y.jsx("div",{className:"overflow-x-auto",children:Y.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[Y.jsx("thead",{className:"bg-gray-50",children:Y.jsxs("tr",{children:[Y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),Y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Region"}),Y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),Y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),Y.jsx("tbody",{className:"bg-white divide-y divide-gray-300",children:e.map((u,d)=>Y.jsxs("tr",{children:[Y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.type}),Y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:"HELWAN"}),Y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.lat,", ",u.lng]}),Y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.status=="FIXED"?Y.jsx("div",{children:Y.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-4 m-2 rounded",onClick:()=>s(u),children:"Solved"})}):Y.jsx("div",{children:Y.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-4 m-2 rounded",onClick:()=>s(u),children:"Solve"})})})]},d))})]})})};function Pk(){const[e,t]=Ae.useState(null),[s,u]=Ae.useState("map"),[d,g]=Ae.useState("latest"),p=bu();Ae.useEffect(()=>{localStorage.getItem("token")?cn.get("https://aros-server-new.onrender.com/obstacle").then(q=>{console.log(q),S(q.data.data)}).catch(q=>{console.error("Error fetching obstacle data:",q)}):p("/")},[]);const[c,S]=Ae.useState([]),I=()=>{u("map")},k=()=>{u("list")},R=()=>{g("latest")},z=()=>{g("reports")},ue=()=>d==="latest"?[...c].sort((ie,q)=>new Date(q.time)-new Date(ie.time)):d==="reports"?[...c].sort((ie,q)=>q.reports-ie.reports):c;return Y.jsxs("div",{className:"flex h-full w-full",children:[Y.jsx(Eh,{}),Y.jsxs("div",{className:"flex flex-col w-full pb-2 pr-2 ml-5",children:[Y.jsxs("div",{className:"w-full h-[10%] flex justify-stretch items-stretch space-x-2 text-white",children:[Y.jsx("button",{className:`w-full mt-2 rounded-t-md flex justify-center items-center ${s==="map"?"bg-[#1A2342] border border-[#101A33]":"bg-[#223066] border border-[#101A33]"}`,onClick:I,children:"Map View"}),Y.jsx("button",{className:`w-full mt-2 rounded-t-md flex justify-center items-center ${s==="list"?"bg-[#1A2342] border border-[#101A33]":"bg-[#223066] border border-[#101A33]"}`,onClick:k,children:"List View"})]}),Y.jsx("div",{className:"w-full h-full border rounded-md border-[#101A33] bg-[#1A2342] p-2 border-t-0 rounded-t-none",children:s==="map"?Y.jsxs(av,{children:[Y.jsx(ea,{index:!0,element:Y.jsx(gy,{obstacles:c,setPopupInfo:t,popupInfo:e})}),Y.jsx(ea,{path:"/heat-map",element:Y.jsx(gy,{obstacles:c,setPopupInfo:t,popupInfo:e})})]}):Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:"flex justify-between p-4 space-x-4",children:[Y.jsx("button",{className:`py-2 px-4 w-full rounded font-bold text-white ${d==="latest"?"bg-green-700":"bg-green-500 hover:bg-green-700"}`,onClick:R,children:"Sort Obstacles by Latest Time"}),Y.jsx("button",{className:`py-2 px-4 w-full rounded font-bold text-white ${d==="reports"?"bg-yellow-700":"bg-yellow-500 hover:bg-yellow-700"}`,onClick:z,children:"Sort Obstacles by Number of Reports"})]}),Y.jsx(Ik,{obstacles:ue()})]})})]})]})}function Mk(){return Y.jsx("div",{children:"Heat Map Page"})}function kk(){const e=bu();Ae.useEffect(()=>{localStorage.getItem("token")||e("/")},[e]);const t=[{lat:26.9,lon:30.4,type:"userCar"},{lat:27.9,lon:31.4,type:"userCar"},{lat:27.9,lon:31.4,type:"userCar"}];return Y.jsxs("div",{className:"flex h-full w-full",children:[Y.jsx(Eh,{}),Y.jsx("div",{className:"flex flex-col w-full pb-2 pr-2",children:Y.jsx("div",{className:"w-full h-full bg-[#1A2342] p-2",children:Y.jsx(av,{children:Y.jsx(ea,{index:!0,element:Y.jsx(gy,{obstacles:t})})})})})]})}var OS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Mw=js.createContext&&js.createContext(OS),Rk=["attr","size","title"];function Dk(e,t){if(e==null)return{};var s=Lk(e,t),u,d;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)u=g[d],!(t.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(s[u]=e[u])}return s}function Lk(e,t){if(e==null)return{};var s={};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){if(t.indexOf(u)>=0)continue;s[u]=e[u]}return s}function Yf(){return Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Yf.apply(this,arguments)}function kw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),s.push.apply(s,u)}return s}function Xf(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?kw(Object(s),!0).forEach(function(u){zk(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kw(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function zk(e,t,s){return t=Fk(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Fk(e){var t=Bk(e,"string");return typeof t=="symbol"?t:t+""}function Bk(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var u=s.call(e,t||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NS(e){return e&&e.map((t,s)=>js.createElement(t.tag,Xf({key:s},t.attr),NS(t.child)))}function Ok(e){return t=>js.createElement(Nk,Yf({attr:Xf({},e.attr)},t),NS(e.child))}function Nk(e){var t=s=>{var{attr:u,size:d,title:g}=e,p=Dk(e,Rk),c=d||s.size||"1em",S;return s.className&&(S=s.className),e.className&&(S=(S?S+" ":"")+e.className),js.createElement("svg",Yf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,u,p,{className:S,style:Xf(Xf({color:e.color||s.color},s.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),g&&js.createElement("title",null,g),e.children)};return Mw!==void 0?js.createElement(Mw.Consumer,null,s=>t(s)):t(OS)}function $k(e){return Ok({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}const Uk=zS(()=>import("./__vite-optional-peer-dep_mapbox-gl_react-map-gl-XPXQPciS.js"),__vite__mapDeps([])),Vk=Ae.forwardRef(function(t,s){return FS(t,s,Uk)}),jk=BS;var $S={exports:{}};(function(e,t){(function(s,u){e.exports=u()})(JA,function(){var s={},u={};function d(p,c,S){if(u[p]=S,p==="index"){var I="var sharedModule = {}; ("+u.shared+")(sharedModule); ("+u.worker+")(sharedModule);",k={};return u.shared(k),u.index(s,k),typeof window<"u"&&s.setWorkerUrl(window.URL.createObjectURL(new Blob([I],{type:"text/javascript"}))),s}}d("shared",["exports"],function(p){function c(i,r,a,l){return new(a||(a=Promise))(function(f,v){function x(T){try{E(l.next(T))}catch(M){v(M)}}function w(T){try{E(l.throw(T))}catch(M){v(M)}}function E(T){var M;T.done?f(T.value):(M=T.value,M instanceof a?M:new a(function(D){D(M)})).then(x,w)}E((l=l.apply(i,r||[])).next())})}function S(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var I=k;function k(i,r){this.x=i,this.y=r}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,r){return this.clone()._rotateAround(i,r)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var r=i.x-this.x,a=i.y-this.y;return r*r+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,r){return Math.atan2(this.x*r-this.y*i,this.x*i+this.y*r)},_matMult:function(i){var r=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=r,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var r=Math.cos(i),a=Math.sin(i),l=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=l,this},_rotateAround:function(i,r){var a=Math.cos(i),l=Math.sin(i),f=r.y+l*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-l*(this.y-r.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(i){return i instanceof k?i:Array.isArray(i)?new k(i[0],i[1]):i};var R=S(I),z=ue;function ue(i,r,a,l){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(l-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=r,this.p2x=a,this.p2y=l}ue.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,r){if(r===void 0&&(r=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,l=0;l<8;l++){var f=this.sampleCurveX(a)-i;if(Math.abs(f)<r)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=f/v}var x=0,w=1;for(a=i,l=0;l<20&&(f=this.sampleCurveX(a),!(Math.abs(f-i)<r));l++)i>f?x=a:w=a,a=.5*(w-x)+x;return a},solve:function(i,r){return this.sampleCurveY(this.solveCurveX(i,r))}};var ie=S(z);let q,ae;function G(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function N(){if(ae==null&&(ae=!1,G())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let l=0;l<5*5;l++){const f=4*l;r.fillStyle=`rgb(${f},${f+1},${f+2})`,r.fillRect(l%5,Math.floor(l/5),1,1)}const a=r.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&a[l]!==l){ae=!0;break}}}return ae||!1}function H(i,r,a,l){const f=new ie(i,r,a,l);return function(v){return f.solve(v)}}const re=H(.25,.1,.25,1);function be(i,r,a){return Math.min(a,Math.max(r,i))}function Pe(i,r,a){const l=a-r,f=((i-r)%l+l)%l+r;return f===r?a:f}function Te(i,...r){for(const a of r)for(const l in a)i[l]=a[l];return i}let Oe=1;function at(i,r,a){const l={};for(const f in i)l[f]=r.call(a||this,i[f],f,i);return l}function rt(i,r,a){const l={};for(const f in i)r.call(a||this,i[f],f,i)&&(l[f]=i[f]);return l}function Et(i){return Array.isArray(i)?i.map(Et):typeof i=="object"&&i?at(i,Et):i}const Dt={};function Gt(i){Dt[i]||(typeof console<"u"&&console.warn(i),Dt[i]=!0)}function nr(i,r,a){return(a.y-i.y)*(r.x-i.x)>(r.y-i.y)*(a.x-i.x)}function or(i){let r=0;for(let a,l,f=0,v=i.length,x=v-1;f<v;x=f++)a=i[f],l=i[x],r+=(l.x-a.x)*(a.y+l.y);return r}function ir(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let xn=null;function et(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function wt(i,r,a,l,f){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),E=new Uint8ClampedArray(l*f*4);if(yield v.copyTo(E,function(T,M,D,O,U){const j=4*Math.max(-M,0),W=(Math.max(0,D)-D)*O*4+j,ee=4*O,le=Math.max(0,M),xe=Math.max(0,D);return{rect:{x:le,y:xe,width:Math.min(T.width,M+O)-le,height:Math.min(T.height,D+U)-xe},layout:[{offset:W,stride:ee}]}}(i,r,a,l,f)),w)for(let T=0;T<E.length;T+=4){const M=E[T];E[T]=E[T+2],E[T+2]=M}return E}finally{v.close()}})}let Lt,jt;const Pt="AbortError";function Nt(){return new Error(Pt)}const Pn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Rr(i){return Pn.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Wr="global-dispatcher";class Mn extends Error{constructor(r,a,l,f){super(`AJAXError: ${a} (${r}): ${l}`),this.status=r,this.statusText=a,this.url=l,this.body=f}}const qi=()=>ir(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ri=function(i,r){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const l=Rr(i.url);if(l)return l(i,r);if(ir(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:i,targetMapId:Wr},r)}if(!(/^file:/.test(a=i.url)||/^file:/.test(qi())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,f){return c(this,void 0,void 0,function*(){const v=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:qi(),signal:f.signal});l.type==="json"&&v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const T=yield x.blob();throw new Mn(x.status,x.statusText,l.url,T)}const w=l.type==="arrayBuffer"||l.type==="image"?x.arrayBuffer():l.type==="json"?x.json():x.text(),E=yield w;if(f.signal.aborted)throw Nt();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(i,r);if(ir(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:i,mustQueue:!0,targetMapId:Wr},r)}var a;return function(l,f){return new Promise((v,x)=>{const w=new XMLHttpRequest;w.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(w.responseType="arraybuffer");for(const E in l.headers)w.setRequestHeader(E,l.headers[E]);l.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=l.credentials==="include",w.onerror=()=>{x(new Error(w.statusText))},w.onload=()=>{if(!f.signal.aborted)if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let E=w.response;if(l.type==="json")try{E=JSON.parse(w.response)}catch(T){return void x(T)}v({data:E,cacheControl:w.getResponseHeader("Cache-Control"),expires:w.getResponseHeader("Expires")})}else{const E=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});x(new Mn(w.status,w.statusText,l.url,E))}},f.signal.addEventListener("abort",()=>{w.abort(),x(Nt())}),w.send(l.body)})}(i,r)};function Ca(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const r=new URL(i),a=window.location;return r.protocol===a.protocol&&r.host===a.host}function gi(i,r,a){a[i]&&a[i].indexOf(r)!==-1||(a[i]=a[i]||[],a[i].push(r))}function Dr(i,r,a){if(a&&a[i]){const l=a[i].indexOf(r);l!==-1&&a[i].splice(l,1)}}class Lr{constructor(r,a={}){Te(this,a),this.type=r}}class gr extends Lr{constructor(r,a={}){super("error",Te({error:r},a))}}class Zn{on(r,a){return this._listeners=this._listeners||{},gi(r,a,this._listeners),this}off(r,a){return Dr(r,a,this._listeners),Dr(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},gi(r,a,this._oneTimeListeners),this):new Promise(l=>this.once(r,l))}fire(r,a){typeof r=="string"&&(r=new Lr(r,a||{}));const l=r.type;if(this.listens(l)){r.target=this;const f=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const w of f)w.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const w of v)Dr(l,w,this._oneTimeListeners),w.call(this,r);const x=this._eventedParent;x&&(Te(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof gr&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const oe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function de(i,r){const a={};for(const l in i)l!=="ref"&&(a[l]=i[l]);return oe.forEach(l=>{l in r&&(a[l]=r[l])}),a}function ve(i,r){if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(let a=0;a<i.length;a++)if(!ve(i[a],r[a]))return!1;return!0}if(typeof i=="object"&&i!==null&&r!==null){if(typeof r!="object"||Object.keys(i).length!==Object.keys(r).length)return!1;for(const a in i)if(!ve(i[a],r[a]))return!1;return!0}return i===r}function $e(i,r){i.push(r)}function Ve(i,r,a){$e(a,{command:"addSource",args:[i,r[i]]})}function qe(i,r,a){$e(r,{command:"removeSource",args:[i]}),a[i]=!0}function _t(i,r,a,l){qe(i,a,l),Ve(i,r,a)}function kt(i,r,a){let l;for(l in i[a])if(Object.prototype.hasOwnProperty.call(i[a],l)&&l!=="data"&&!ve(i[a][l],r[a][l]))return!1;for(l in r[a])if(Object.prototype.hasOwnProperty.call(r[a],l)&&l!=="data"&&!ve(i[a][l],r[a][l]))return!1;return!0}function $t(i,r,a,l,f,v){i=i||{},r=r||{};for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&(ve(i[x],r[x])||a.push({command:v,args:[l,x,r[x],f]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(i,x)&&(ve(i[x],r[x])||a.push({command:v,args:[l,x,r[x],f]}))}function Qt(i){return i.id}function kn(i,r){return i[r.id]=r,i}class je{constructor(r,a,l,f){this.message=(r?`${r}: `:"")+l,f&&(this.identifier=f),a!=null&&a.__line__&&(this.line=a.__line__)}}function zr(i,...r){for(const a of r)for(const l in a)i[l]=a[l];return i}class Jr extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}class ki{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[l,f]of a)this.bindings[l]=f}concat(r){return new ki(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const yr={kind:"null"},Ge={kind:"number"},At={kind:"string"},Ct={kind:"boolean"},Cr={kind:"color"},yi={kind:"object"},Tt={kind:"value"},la={kind:"collator"},Fr={kind:"formatted"},te={kind:"padding"},B={kind:"resolvedImage"},$={kind:"variableAnchorOffsetCollection"};function Z(i,r){return{kind:"array",itemType:i,N:r}}function X(i){if(i.kind==="array"){const r=X(i.itemType);return typeof i.N=="number"?`array<${r}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${r}>`}return i.kind}const pe=[yr,Ge,At,Ct,Cr,Fr,yi,Z(Tt),te,B,$];function me(i,r){if(r.kind==="error")return null;if(i.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!me(i.itemType,r.itemType))&&(typeof i.N!="number"||i.N===r.N))return null}else{if(i.kind===r.kind)return null;if(i.kind==="value"){for(const a of pe)if(!me(a,r))return null}}return`Expected ${X(i)} but found ${X(r)} instead.`}function _e(i,r){return r.some(a=>a.kind===i.kind)}function ce(i,r){return r.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}function we(i,r){return i.kind==="array"&&r.kind==="array"?i.itemType.kind===r.itemType.kind&&typeof i.N=="number":i.kind===r.kind}const ze=.96422,Me=.82521,Re=4/29,ft=6/29,mt=3*ft*ft,It=ft*ft*ft,St=Math.PI/180,Ut=180/Math.PI;function Yt(i){return(i%=360)<0&&(i+=360),i}function ar([i,r,a,l]){let f,v;const x=Mt((.2225045*(i=Tr(i))+.7168786*(r=Tr(r))+.0606169*(a=Tr(a)))/1);i===r&&r===a?f=v=x:(f=Mt((.4360747*i+.3850649*r+.1430804*a)/ze),v=Mt((.0139322*i+.0971045*r+.7141733*a)/Me));const w=116*x-16;return[w<0?0:w,500*(f-x),200*(x-v),l]}function Tr(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Mt(i){return i>It?Math.pow(i,1/3):i/mt+Re}function pr([i,r,a,l]){let f=(i+16)/116,v=isNaN(r)?f:f+r/500,x=isNaN(a)?f:f-a/200;return f=1*hn(f),v=ze*hn(v),x=Me*hn(x),[Br(3.1338561*v-1.6168667*f-.4906146*x),Br(-.9787684*v+1.9161415*f+.033454*x),Br(.0719453*v-.2289914*f+1.4052427*x),l]}function Br(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function hn(i){return i>ft?i*i*i:mt*(i-Re)}function Or(i){return parseInt(i.padEnd(2,i),16)/255}function Ue(i,r){return _i(r?i/100:i,0,1)}function _i(i,r,a){return Math.min(Math.max(r,i),a)}function Ko(i){return!i.some(Number.isNaN)}const lr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class zt{constructor(r,a,l,f=1,v=!0){this.r=r,this.g=a,this.b=l,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[r,a,l,f]))}static parse(r){if(r instanceof zt)return r;if(typeof r!="string")return;const a=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=lr[l];if(f){const[x,w,E]=f;return[x/255,w/255,E/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const x=l.length<6?1:2;let w=1;return[Or(l.slice(w,w+=x)),Or(l.slice(w,w+=x)),Or(l.slice(w,w+=x)),Or(l.slice(w,w+x)||"ff")]}if(l.startsWith("rgb")){const x=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,E,T,M,D,O,U,j,W,ee,le,xe]=x,he=[M||" ",U||" ",ee].join("");if(he==="  "||he==="  /"||he===",,"||he===",,,"){const ge=[T,O,W].join(""),ke=ge==="%%%"?100:ge===""?255:0;if(ke){const Fe=[_i(+E/ke,0,1),_i(+D/ke,0,1),_i(+j/ke,0,1),le?Ue(+le,xe):1];if(Ko(Fe))return Fe}}return}}const v=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,E,T,M,D,O,U,j]=v,W=[E||" ",M||" ",O].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){const ee=[+w,_i(+T,0,100),_i(+D,0,100),U?Ue(+U,j):1];if(Ko(ee))return function([le,xe,he,ge]){function ke(Fe){const it=(Fe+le/30)%12,ct=xe*Math.min(he,1-he);return he-ct*Math.max(-1,Math.min(it-3,9-it,1))}return le=Yt(le),xe/=100,he/=100,[ke(0),ke(8),ke(4),ge]}(ee)}}}(r);return a?new zt(...a,!1):void 0}get rgb(){const{r,g:a,b:l,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[r/v,a/v,l/v,f])}get hcl(){return this.overwriteGetter("hcl",function(r){const[a,l,f,v]=ar(r),x=Math.sqrt(l*l+f*f);return[Math.round(1e4*x)?Yt(Math.atan2(f,l)*Ut):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ar(this.rgb))}overwriteGetter(r,a){return Object.defineProperty(this,r,{value:a}),a}toString(){const[r,a,l,f]=this.rgb;return`rgba(${[r,a,l].map(v=>Math.round(255*v)).join(",")},${f})`}}zt.black=new zt(0,0,0,1),zt.white=new zt(1,1,1,1),zt.transparent=new zt(0,0,0,0),zt.red=new zt(1,0,0,1);class Ri{constructor(r,a,l){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Wi{constructor(r,a,l,f,v){this.text=r,this.image=a,this.scale=l,this.fontStack=f,this.textColor=v}}class gn{constructor(r){this.sections=r}static fromString(r){return new gn([new Wi(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof gn?r:gn.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Nr{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Nr)return r;if(typeof r=="number")return new Nr([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const a of r)if(typeof a!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Nr(r)}}toString(){return JSON.stringify(this.values)}}const Ki=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class vi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof vi)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let a=0;a<r.length;a+=2){const l=r[a],f=r[a+1];if(typeof l!="string"||!Ki.has(l)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new vi(r)}}toString(){return JSON.stringify(this.values)}}class xi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new xi({name:r,available:!1}):null}}function ms(i,r,a,l){return typeof i=="number"&&i>=0&&i<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,r,a,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,r,a,l]:[i,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Yo(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof zt||i instanceof Ri||i instanceof gn||i instanceof Nr||i instanceof vi||i instanceof xi)return!0;if(Array.isArray(i)){for(const r of i)if(!Yo(r))return!1;return!0}if(typeof i=="object"){for(const r in i)if(!Yo(i[r]))return!1;return!0}return!1}function Kr(i){if(i===null)return yr;if(typeof i=="string")return At;if(typeof i=="boolean")return Ct;if(typeof i=="number")return Ge;if(i instanceof zt)return Cr;if(i instanceof Ri)return la;if(i instanceof gn)return Fr;if(i instanceof Nr)return te;if(i instanceof vi)return $;if(i instanceof xi)return B;if(Array.isArray(i)){const r=i.length;let a;for(const l of i){const f=Kr(l);if(a){if(a===f)continue;a=Tt;break}a=f}return Z(a||Tt,r)}return yi}function io(i){const r=typeof i;return i===null?"":r==="string"||r==="number"||r==="boolean"?String(i):i instanceof zt||i instanceof gn||i instanceof Nr||i instanceof vi||i instanceof xi?i.toString():JSON.stringify(i)}class Ta{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Yo(r[1]))return a.error("invalid value");const l=r[1];let f=Kr(l);const v=a.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new Ta(f,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class _r{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Xo={string:At,number:Ge,boolean:Ct,object:yi};class ni{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let l,f=1;const v=r[0];if(v==="array"){let w,E;if(r.length>2){const T=r[1];if(typeof T!="string"||!(T in Xo)||T==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=Xo[T],f++}else w=Tt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);E=r[2],f++}l=Z(w,E)}else{if(!Xo[v])throw new Error(`Types doesn't contain name = ${v}`);l=Xo[v]}const x=[];for(;f<r.length;f++){const w=a.parse(r[f],f,Tt);if(!w)return null;x.push(w)}return new ni(l,x)}evaluate(r){for(let a=0;a<this.args.length;a++){const l=this.args[a].evaluate(r);if(!me(this.type,Kr(l)))return l;if(a===this.args.length-1)throw new _r(`Expected value to be of type ${X(this.type)}, but found ${X(Kr(l))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Jo={"to-boolean":Ct,"to-color":Cr,"to-number":Ge,"to-string":At};class Yi{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const l=r[0];if(!Jo[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&r.length!==2)return a.error("Expected one argument.");const f=Jo[l],v=[];for(let x=1;x<r.length;x++){const w=a.parse(r[x],x,Tt);if(!w)return null;v.push(w)}return new Yi(f,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let a,l;for(const f of this.args){if(a=f.evaluate(r),l=null,a instanceof zt)return a;if(typeof a=="string"){const v=r.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(l=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:ms(a[0],a[1],a[2],a[3]),!l))return new zt(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new _r(l||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const l of this.args){a=l.evaluate(r);const f=Nr.parse(a);if(f)return f}throw new _r(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const l of this.args){a=l.evaluate(r);const f=vi.parse(a);if(f)return f}throw new _r(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const l of this.args){if(a=l.evaluate(r),a===null)return 0;const f=Number(a);if(!isNaN(f))return f}throw new _r(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return gn.fromString(io(this.args[0].evaluate(r)));case"resolvedImage":return xi.fromString(io(this.args[0].evaluate(r)));default:return io(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const ao=["Unknown","Point","LineString","Polygon"];class Jt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ao[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let a=this._parseColorCache[r];return a||(a=this._parseColorCache[r]=zt.parse(r)),a}}class Qo{constructor(r,a,l=[],f,v=new ki,x=[]){this.registry=r,this.path=l,this.key=l.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=a}parse(r,a,l,f,v={}){return a?this.concat(a,l,f)._parse(r,v):this._parse(r,v)}_parse(r,a){function l(f,v,x){return x==="assert"?new ni(v,[f]):x==="coerce"?new Yi(v,[f]):f}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=r[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,E=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||E.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(w.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(w,E))return null}else x=l(x,w,a.typeAnnotation||"coerce");else x=l(x,w,a.typeAnnotation||"coerce");else x=l(x,w,a.typeAnnotation||"coerce");else x=l(x,w,a.typeAnnotation||"assert")}if(!(x instanceof Ta)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Jt;try{x=new Ta(x.type,x.evaluate(w))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,l){const f=typeof r=="number"?this.path.concat(r):this.path,v=l?this.scope.concat(l):this.scope;return new Qo(this.registry,this._isConstant,f,a||null,v,this.errors)}error(r,...a){const l=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new Jr(l,r))}checkSubtype(r,a){const l=me(r,a);return l&&this.error(l),l}}class gs{constructor(r,a,l){this.type=la,this.locale=l,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const l=r[1];if(typeof l!="object"||Array.isArray(l))return a.error("Collator options argument must be an object.");const f=a.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Ct);if(!f)return null;const v=a.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Ct);if(!v)return null;let x=null;return l.locale&&(x=a.parse(l.locale,1,At),!x)?null:new gs(f,v,x)}evaluate(r){return new Ri(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Ia=8192;function el(i,r){i[0]=Math.min(i[0],r[0]),i[1]=Math.min(i[1],r[1]),i[2]=Math.max(i[2],r[0]),i[3]=Math.max(i[3],r[1])}function so(i,r){return!(i[0]<=r[0]||i[2]>=r[2]||i[1]<=r[1]||i[3]>=r[3])}function Ep(i,r){const a=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,r.z);return[Math.round(a*f*Ia),Math.round(l*f*Ia)]}function Lh(i,r,a){const l=i[0]-r[0],f=i[1]-r[1],v=i[0]-a[0],x=i[1]-a[1];return l*x-v*f==0&&l*v<=0&&f*x<=0}function tl(i,r){let a=!1;for(let x=0,w=r.length;x<w;x++){const E=r[x];for(let T=0,M=E.length;T<M-1;T++){if(Lh(i,E[T],E[T+1]))return!1;(f=E[T])[1]>(l=i)[1]!=(v=E[T+1])[1]>l[1]&&l[0]<(v[0]-f[0])*(l[1]-f[1])/(v[1]-f[1])+f[0]&&(a=!a)}}var l,f,v;return a}function Ap(i,r){for(let a=0;a<r.length;a++)if(tl(i,r[a]))return!0;return!1}function zh(i,r,a,l){const f=l[0]-a[0],v=l[1]-a[1],x=(i[0]-a[0])*v-f*(i[1]-a[1]),w=(r[0]-a[0])*v-f*(r[1]-a[1]);return x>0&&w<0||x<0&&w>0}function Cp(i,r,a){for(const T of a)for(let M=0;M<T.length-1;++M)if((w=[(x=T[M+1])[0]-(v=T[M])[0],x[1]-v[1]])[0]*(E=[(f=r)[0]-(l=i)[0],f[1]-l[1]])[1]-w[1]*E[0]!=0&&zh(l,f,v,x)&&zh(v,x,l,f))return!0;var l,f,v,x,w,E;return!1}function Fh(i,r){for(let a=0;a<i.length;++a)if(!tl(i[a],r))return!1;for(let a=0;a<i.length-1;++a)if(Cp(i[a],i[a+1],r))return!1;return!0}function Bh(i,r){for(let a=0;a<r.length;a++)if(Fh(i,r[a]))return!0;return!1}function rl(i,r,a){const l=[];for(let f=0;f<i.length;f++){const v=[];for(let x=0;x<i[f].length;x++){const w=Ep(i[f][x],a);el(r,w),v.push(w)}l.push(v)}return l}function Oh(i,r,a){const l=[];for(let f=0;f<i.length;f++){const v=rl(i[f],r,a);l.push(v)}return l}function Nh(i,r,a,l){if(i[0]<a[0]||i[0]>a[2]){const f=.5*l;let v=i[0]-a[0]>f?-l:a[0]-i[0]>f?l:0;v===0&&(v=i[0]-a[2]>f?-l:a[2]-i[0]>f?l:0),i[0]+=v}el(r,i)}function nl(i,r,a,l){const f=Math.pow(2,l.z)*Ia,v=[l.x*Ia,l.y*Ia],x=[];for(const w of i)for(const E of w){const T=[E.x+v[0],E.y+v[1]];Nh(T,r,a,f),x.push(T)}return x}function $h(i,r,a,l){const f=Math.pow(2,l.z)*Ia,v=[l.x*Ia,l.y*Ia],x=[];for(const E of i){const T=[];for(const M of E){const D=[M.x+v[0],M.y+v[1]];el(r,D),T.push(D)}x.push(T)}if(r[2]-r[0]<=f/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const E of x)for(const T of E)Nh(T,r,a,f)}var w;return x}class Ua{constructor(r,a){this.type=Ct,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Yo(r[1])){const l=r[1];if(l.type==="FeatureCollection"){const f=[];for(const v of l.features){const{type:x,coordinates:w}=v.geometry;x==="Polygon"&&f.push(w),x==="MultiPolygon"&&f.push(...w)}if(f.length)return new Ua(l,{type:"MultiPolygon",coordinates:f})}else if(l.type==="Feature"){const f=l.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Ua(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Ua(l,l)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(a,l){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(l.type==="Polygon"){const w=rl(l.coordinates,v,x),E=nl(a.geometry(),f,v,x);if(!so(f,v))return!1;for(const T of E)if(!tl(T,w))return!1}if(l.type==="MultiPolygon"){const w=Oh(l.coordinates,v,x),E=nl(a.geometry(),f,v,x);if(!so(f,v))return!1;for(const T of E)if(!Ap(T,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(a,l){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(l.type==="Polygon"){const w=rl(l.coordinates,v,x),E=$h(a.geometry(),f,v,x);if(!so(f,v))return!1;for(const T of E)if(!Fh(T,w))return!1}if(l.type==="MultiPolygon"){const w=Oh(l.coordinates,v,x),E=$h(a.geometry(),f,v,x);if(!so(f,v))return!1;for(const T of E)if(!Bh(T,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class il{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const l=r[1];return a.scope.has(l)?new il(l,a.scope.get(l)):a.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class ii{constructor(r,a,l,f){this.name=r,this.type=a,this._evaluate=l,this.args=f}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,a){const l=r[0],f=ii.definitions[l];if(!f)return a.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=x.filter(([T])=>!Array.isArray(T)||T.length===r.length-1);let E=null;for(const[T,M]of w){E=new Qo(a.registry,oo,a.path,null,a.scope);const D=[];let O=!1;for(let U=1;U<r.length;U++){const j=r[U],W=Array.isArray(T)?T[U-1]:T.type,ee=E.parse(j,1+D.length,W);if(!ee){O=!0;break}D.push(ee)}if(!O)if(Array.isArray(T)&&T.length!==D.length)E.error(`Expected ${T.length} arguments, but found ${D.length} instead.`);else{for(let U=0;U<D.length;U++){const j=Array.isArray(T)?T[U]:T.type,W=D[U];E.concat(U+1).checkSubtype(j,W.type)}if(E.errors.length===0)return new ii(l,v,M,D)}}if(w.length===1)a.errors.push(...E.errors);else{const T=(w.length?w:x).map(([D])=>{return O=D,Array.isArray(O)?`(${O.map(X).join(", ")})`:`(${X(O.type)}...)`;var O}).join(" | "),M=[];for(let D=1;D<r.length;D++){const O=a.parse(r[D],1+M.length);if(!O)return null;M.push(X(O.type))}a.error(`Expected arguments of type ${T}, but found (${M.join(", ")}) instead.`)}return null}static register(r,a){ii.definitions=a;for(const l in a)r[l]=ii}}function oo(i){if(i instanceof il)return oo(i.boundExpression);if(i instanceof ii&&i.name==="error"||i instanceof gs||i instanceof Ua)return!1;const r=i instanceof Yi||i instanceof ni;let a=!0;return i.eachChild(l=>{a=r?a&&oo(l):a&&l instanceof Ta}),!!a&&al(i)&&uo(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function al(i){if(i instanceof ii&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Ua)return!1;let r=!0;return i.eachChild(a=>{r&&!al(a)&&(r=!1)}),r}function lo(i){if(i instanceof ii&&i.name==="feature-state")return!1;let r=!0;return i.eachChild(a=>{r&&!lo(a)&&(r=!1)}),r}function uo(i,r){if(i instanceof ii&&r.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(l=>{a&&!uo(l,r)&&(a=!1)}),a}function co(i,r){const a=i.length-1;let l,f,v=0,x=a,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),l=i[w],f=i[w+1],l<=r){if(w===a||r<f)return w;v=w+1}else{if(!(l>r))throw new _r("Input is not a number.");x=w-1}return 0}class ho{constructor(r,a,l){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[f,v]of l)this.labels.push(f),this.outputs.push(v)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const l=a.parse(r[1],1,Ge);if(!l)return null;const f=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<r.length;x+=2){const w=x===1?-1/0:r[x],E=r[x+1],T=x,M=x+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(f.length&&f[f.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const D=a.parse(E,M,v);if(!D)return null;v=v||D.type,f.push([w,D])}return new ho(v,l,f)}evaluate(r){const a=this.labels,l=this.outputs;if(a.length===1)return l[0].evaluate(r);const f=this.input.evaluate(r);if(f<=a[0])return l[0].evaluate(r);const v=a.length;return f>=a[v-1]?l[v-1].evaluate(r):l[co(a,f)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Tp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ip=Uh;function Uh(i,r,a,l){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(l-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=r,this.p2x=a,this.p2y=l}Uh.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,r){if(r===void 0&&(r=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,l=0;l<8;l++){var f=this.sampleCurveX(a)-i;if(Math.abs(f)<r)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=f/v}var x=0,w=1;for(a=i,l=0;l<20&&(f=this.sampleCurveX(a),!(Math.abs(f-i)<r));l++)i>f?x=a:w=a,a=.5*(w-x)+x;return a},solve:function(i,r){return this.sampleCurveY(this.solveCurveX(i,r))}};var Pp=Tp(Ip);function Va(i,r,a){return i+a*(r-i)}function sl(i,r,a){return i.map((l,f)=>Va(l,r[f],a))}const Rn={number:Va,color:function(i,r,a,l="rgb"){switch(l){case"rgb":{const[f,v,x,w]=sl(i.rgb,r.rgb,a);return new zt(f,v,x,w,!1)}case"hcl":{const[f,v,x,w]=i.hcl,[E,T,M,D]=r.hcl;let O,U;if(isNaN(f)||isNaN(E))isNaN(f)?isNaN(E)?O=NaN:(O=E,x!==1&&x!==0||(U=T)):(O=f,M!==1&&M!==0||(U=v));else{let xe=E-f;E>f&&xe>180?xe-=360:E<f&&f-E>180&&(xe+=360),O=f+a*xe}const[j,W,ee,le]=function([xe,he,ge,ke]){return xe=isNaN(xe)?0:xe*St,pr([ge,Math.cos(xe)*he,Math.sin(xe)*he,ke])}([O,U??Va(v,T,a),Va(x,M,a),Va(w,D,a)]);return new zt(j,W,ee,le,!1)}case"lab":{const[f,v,x,w]=pr(sl(i.lab,r.lab,a));return new zt(f,v,x,w,!1)}}},array:sl,padding:function(i,r,a){return new Nr(sl(i.values,r.values,a))},variableAnchorOffsetCollection:function(i,r,a){const l=i.values,f=r.values;if(l.length!==f.length)throw new _r(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<l.length;x+=2){if(l[x]!==f[x])throw new _r(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${l[x]}, to[${x}]: ${f[x]}`);v.push(l[x]);const[w,E]=l[x+1],[T,M]=f[x+1];v.push([Va(w,T,a),Va(E,M,a)])}return new vi(v)}};class wn{constructor(r,a,l,f,v){this.type=r,this.operator=a,this.interpolation=l,this.input=f,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(r,a,l,f){let v=0;if(r.name==="exponential")v=Wt(a,r.base,l,f);else if(r.name==="linear")v=Wt(a,1,l,f);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new Pp(x[0],x[1],x[2],x[3]).solve(Wt(a,1,l,f))}return v}static parse(r,a){let[l,f,v,...x]=r;if(!Array.isArray(f)||f.length===0)return a.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const T=f[1];if(typeof T!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:T}}else{if(f[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const T=f.slice(1);if(T.length!==4||T.some(M=>typeof M!="number"||M<0||M>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:T}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,Ge),!v)return null;const w=[];let E=null;l==="interpolate-hcl"||l==="interpolate-lab"?E=Cr:a.expectedType&&a.expectedType.kind!=="value"&&(E=a.expectedType);for(let T=0;T<x.length;T+=2){const M=x[T],D=x[T+1],O=T+3,U=T+4;if(typeof M!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(w.length&&w[w.length-1][0]>=M)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const j=a.parse(D,U,E);if(!j)return null;E=E||j.type,w.push([M,j])}return we(E,Ge)||we(E,Cr)||we(E,te)||we(E,$)||we(E,Z(Ge))?new wn(E,l,f,v,w):a.error(`Type ${X(E)} is not interpolatable.`)}evaluate(r){const a=this.labels,l=this.outputs;if(a.length===1)return l[0].evaluate(r);const f=this.input.evaluate(r);if(f<=a[0])return l[0].evaluate(r);const v=a.length;if(f>=a[v-1])return l[v-1].evaluate(r);const x=co(a,f),w=wn.interpolationFactor(this.interpolation,f,a[x],a[x+1]),E=l[x].evaluate(r),T=l[x+1].evaluate(r);switch(this.operator){case"interpolate":return Rn[this.type.kind](E,T,w);case"interpolate-hcl":return Rn.color(E,T,w,"hcl");case"interpolate-lab":return Rn.color(E,T,w,"lab")}}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Wt(i,r,a,l){const f=l-a,v=i-a;return f===0?0:r===1?v/f:(Math.pow(r,v)-1)/(Math.pow(r,f)-1)}class ol{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expectected at least one argument.");let l=null;const f=a.expectedType;f&&f.kind!=="value"&&(l=f);const v=[];for(const w of r.slice(1)){const E=a.parse(w,1+v.length,l,void 0,{typeAnnotation:"omit"});if(!E)return null;l=l||E.type,v.push(E)}if(!l)throw new Error("No output type");const x=f&&v.some(w=>me(f,w.type));return new ol(x?Tt:l,v)}evaluate(r){let a,l=null,f=0;for(const v of this.args)if(f++,l=v.evaluate(r),l&&l instanceof xi&&!l.available&&(a||(a=l.name),l=null,f===this.args.length&&(l=a)),l!==null)break;return l}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class ll{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const l=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=a.parse(r[v+1],v+1);if(!w)return null;l.push([x,w])}const f=a.parse(r[r.length-1],r.length-1,a.expectedType,l);return f?new ll(l,f):null}outputDefined(){return this.result.outputDefined()}}class Pu{constructor(r,a,l){this.type=r,this.index=a,this.input=l}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const l=a.parse(r[1],1,Ge),f=a.parse(r[2],2,Z(a.expectedType||Tt));return l&&f?new Pu(f.type.itemType,l,f):null}evaluate(r){const a=this.index.evaluate(r),l=this.input.evaluate(r);if(a<0)throw new _r(`Array index out of bounds: ${a} < 0.`);if(a>=l.length)throw new _r(`Array index out of bounds: ${a} > ${l.length-1}.`);if(a!==Math.floor(a))throw new _r(`Array index must be an integer, but found ${a} instead.`);return l[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Mu{constructor(r,a){this.type=Ct,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const l=a.parse(r[1],1,Tt),f=a.parse(r[2],2,Tt);return l&&f?_e(l.type,[Ct,At,Ge,yr,Tt])?new Mu(l,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${X(l.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!l)return!1;if(!ce(a,["boolean","string","number","null"]))throw new _r(`Expected first argument to be of type boolean, string, number or null, but found ${X(Kr(a))} instead.`);if(!ce(l,["string","array"]))throw new _r(`Expected second argument to be of type array or string, but found ${X(Kr(l))} instead.`);return l.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class ul{constructor(r,a,l){this.type=Ge,this.needle=r,this.haystack=a,this.fromIndex=l}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const l=a.parse(r[1],1,Tt),f=a.parse(r[2],2,Tt);if(!l||!f)return null;if(!_e(l.type,[Ct,At,Ge,yr,Tt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${X(l.type)} instead`);if(r.length===4){const v=a.parse(r[3],3,Ge);return v?new ul(l,f,v):null}return new ul(l,f)}evaluate(r){const a=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!ce(a,["boolean","string","number","null"]))throw new _r(`Expected first argument to be of type boolean, string, number or null, but found ${X(Kr(a))} instead.`);if(!ce(l,["string","array"]))throw new _r(`Expected second argument to be of type array or string, but found ${X(Kr(l))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(r);return l.indexOf(a,f)}return l.indexOf(a)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class ku{constructor(r,a,l,f,v,x){this.inputType=r,this.type=a,this.input=l,this.cases=f,this.outputs=v,this.otherwise=x}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let l,f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const v={},x=[];for(let T=2;T<r.length-1;T+=2){let M=r[T];const D=r[T+1];Array.isArray(M)||(M=[M]);const O=a.concat(T);if(M.length===0)return O.error("Expected at least one branch label.");for(const j of M){if(typeof j!="number"&&typeof j!="string")return O.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return O.error("Numeric branch labels must be integer values.");if(l){if(O.checkSubtype(l,Kr(j)))return null}else l=Kr(j);if(v[String(j)]!==void 0)return O.error("Branch labels must be unique.");v[String(j)]=x.length}const U=a.parse(D,T,f);if(!U)return null;f=f||U.type,x.push(U)}const w=a.parse(r[1],1,Tt);if(!w)return null;const E=a.parse(r[r.length-1],r.length-1,f);return E?w.type.kind!=="value"&&a.concat(1).checkSubtype(l,w.type)?null:new ku(l,f,w,v,x,E):null}evaluate(r){const a=this.input.evaluate(r);return(Kr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Ru{constructor(r,a,l){this.type=r,this.branches=a,this.otherwise=l}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let l;a.expectedType&&a.expectedType.kind!=="value"&&(l=a.expectedType);const f=[];for(let x=1;x<r.length-1;x+=2){const w=a.parse(r[x],x,Ct);if(!w)return null;const E=a.parse(r[x+1],x+1,l);if(!E)return null;f.push([w,E]),l=l||E.type}const v=a.parse(r[r.length-1],r.length-1,l);if(!v)return null;if(!l)throw new Error("Can't infer output type");return new Ru(l,f,v)}evaluate(r){for(const[a,l]of this.branches)if(a.evaluate(r))return l.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,l]of this.branches)r(a),r(l);r(this.otherwise)}outputDefined(){return this.branches.every(([r,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class cl{constructor(r,a,l,f){this.type=r,this.input=a,this.beginIndex=l,this.endIndex=f}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const l=a.parse(r[1],1,Tt),f=a.parse(r[2],2,Ge);if(!l||!f)return null;if(!_e(l.type,[Z(Tt),At,Tt]))return a.error(`Expected first argument to be of type array or string, but found ${X(l.type)} instead`);if(r.length===4){const v=a.parse(r[3],3,Ge);return v?new cl(l.type,l,f,v):null}return new cl(l.type,l,f)}evaluate(r){const a=this.input.evaluate(r),l=this.beginIndex.evaluate(r);if(!ce(a,["string","array"]))throw new _r(`Expected first argument to be of type array or string, but found ${X(Kr(a))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(r);return a.slice(l,f)}return a.slice(l)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Vh(i,r){return i==="=="||i==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function jh(i,r,a,l){return l.compare(r,a)===0}function ys(i,r,a){const l=i!=="=="&&i!=="!=";return class US{constructor(v,x,w){this.type=Ct,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let E=x.parse(v[1],1,Tt);if(!E)return null;if(!Vh(w,E.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${X(E.type)}'.`);let T=x.parse(v[2],2,Tt);if(!T)return null;if(!Vh(w,T.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${X(T.type)}'.`);if(E.type.kind!==T.type.kind&&E.type.kind!=="value"&&T.type.kind!=="value")return x.error(`Cannot compare types '${X(E.type)}' and '${X(T.type)}'.`);l&&(E.type.kind==="value"&&T.type.kind!=="value"?E=new ni(T.type,[E]):E.type.kind!=="value"&&T.type.kind==="value"&&(T=new ni(E.type,[T])));let M=null;if(v.length===4){if(E.type.kind!=="string"&&T.type.kind!=="string"&&E.type.kind!=="value"&&T.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(M=x.parse(v[3],3,la),!M)return null}return new US(E,T,M)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(l&&this.hasUntypedArgument){const E=Kr(x),T=Kr(w);if(E.kind!==T.kind||E.kind!=="string"&&E.kind!=="number")throw new _r(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${E.kind}, ${T.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const E=Kr(x),T=Kr(w);if(E.kind!=="string"||T.kind!=="string")return r(v,x,w)}return this.collator?a(v,x,w,this.collator.evaluate(v)):r(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Mp=ys("==",function(i,r,a){return r===a},jh),kp=ys("!=",function(i,r,a){return r!==a},function(i,r,a,l){return!jh(0,r,a,l)}),Rp=ys("<",function(i,r,a){return r<a},function(i,r,a,l){return l.compare(r,a)<0}),Dp=ys(">",function(i,r,a){return r>a},function(i,r,a,l){return l.compare(r,a)>0}),Lp=ys("<=",function(i,r,a){return r<=a},function(i,r,a,l){return l.compare(r,a)<=0}),zp=ys(">=",function(i,r,a){return r>=a},function(i,r,a,l){return l.compare(r,a)>=0});class Du{constructor(r,a,l,f,v){this.type=At,this.number=r,this.locale=a,this.currency=l,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const l=a.parse(r[1],1,Ge);if(!l)return null;const f=r[2];if(typeof f!="object"||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=a.parse(f.locale,1,At),!v))return null;let x=null;if(f.currency&&(x=a.parse(f.currency,1,At),!x))return null;let w=null;if(f["min-fraction-digits"]&&(w=a.parse(f["min-fraction-digits"],1,Ge),!w))return null;let E=null;return f["max-fraction-digits"]&&(E=a.parse(f["max-fraction-digits"],1,Ge),!E)?null:new Du(l,v,x,w,E)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class hl{constructor(r){this.type=Fr,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const l=r[1];if(!Array.isArray(l)&&typeof l=="object")return a.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=r.length-1;++x){const w=r[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let E=null;if(w["font-scale"]&&(E=a.parse(w["font-scale"],1,Ge),!E))return null;let T=null;if(w["text-font"]&&(T=a.parse(w["text-font"],1,Z(At)),!T))return null;let M=null;if(w["text-color"]&&(M=a.parse(w["text-color"],1,Cr),!M))return null;const D=f[f.length-1];D.scale=E,D.font=T,D.textColor=M}else{const E=a.parse(r[x],1,Tt);if(!E)return null;const T=E.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new hl(f)}evaluate(r){return new gn(this.sections.map(a=>{const l=a.content.evaluate(r);return Kr(l)===B?new Wi("",l,null,null,null):new Wi(io(l),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null)}))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}outputDefined(){return!1}}class Lu{constructor(r){this.type=B,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const l=a.parse(r[1],1,At);return l?new Lu(l):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),l=xi.fromString(a);return l&&r.availableImages&&(l.available=r.availableImages.indexOf(a)>-1),l}eachChild(r){r(this.input)}outputDefined(){return!1}}class zu{constructor(r){this.type=Ge,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const l=a.parse(r[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${X(l.type)} instead.`):new zu(l):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string"||Array.isArray(a))return a.length;throw new _r(`Expected value to be of type string or array, but found ${X(Kr(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const _s={"==":Mp,"!=":kp,">":Dp,"<":Rp,">=":zp,"<=":Lp,array:ni,at:Pu,boolean:ni,case:Ru,coalesce:ol,collator:gs,format:hl,image:Lu,in:Mu,"index-of":ul,interpolate:wn,"interpolate-hcl":wn,"interpolate-lab":wn,length:zu,let:ll,literal:Ta,match:ku,number:ni,"number-format":Du,object:ni,slice:cl,step:ho,string:ni,"to-boolean":Yi,"to-color":Yi,"to-number":Yi,"to-string":Yi,var:il,within:Ua};function Zh(i,[r,a,l,f]){r=r.evaluate(i),a=a.evaluate(i),l=l.evaluate(i);const v=f?f.evaluate(i):1,x=ms(r,a,l,v);if(x)throw new _r(x);return new zt(r/255,a/255,l/255,v,!1)}function Hh(i,r){return i in r}function Fu(i,r){const a=r[i];return a===void 0?null:a}function ja(i){return{type:i}}function Gh(i){return{result:"success",value:i}}function vs(i){return{result:"error",value:i}}function xs(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function qh(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Bu(i){return!!i.expression&&i.expression.interpolated}function qt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function dl(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Fp(i){return i}function Wh(i,r){const a=r.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",f=l||!(l||i.property!==void 0),v=i.type||(Bu(r)?"exponential":"interval");if(a||r.type==="padding"){const M=a?zt.parse:Nr.parse;(i=zr({},i)).stops&&(i.stops=i.stops.map(D=>[D[0],M(D[1])])),i.default=M(i.default?i.default:r.default)}if(i.colorSpace&&(x=i.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var x;let w,E,T;if(v==="exponential")w=Ht;else if(v==="interval")w=Bp;else if(v==="categorical"){w=$r,E=Object.create(null);for(const M of i.stops)E[M[0]]=M[1];T=typeof i.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Ou}if(l){const M={},D=[];for(let j=0;j<i.stops.length;j++){const W=i.stops[j],ee=W[0].zoom;M[ee]===void 0&&(M[ee]={zoom:ee,type:i.type,property:i.property,default:i.default,stops:[]},D.push(ee)),M[ee].stops.push([W[0].value,W[1]])}const O=[];for(const j of D)O.push([M[j].zoom,Wh(M[j],r)]);const U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:wn.interpolationFactor.bind(void 0,U),zoomStops:O.map(j=>j[0]),evaluate:({zoom:j},W)=>Ht({stops:O,base:i.base},r,j).evaluate(j,W)}}if(f){const M=v==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:wn.interpolationFactor.bind(void 0,M),zoomStops:i.stops.map(D=>D[0]),evaluate:({zoom:D})=>w(i,r,D,E,T)}}return{kind:"source",evaluate(M,D){const O=D&&D.properties?D.properties[i.property]:void 0;return O===void 0?fo(i.default,r.default):w(i,r,O,E,T)}}}function fo(i,r,a){return i!==void 0?i:r!==void 0?r:a!==void 0?a:void 0}function $r(i,r,a,l,f){return fo(typeof a===f?l[a]:void 0,i.default,r.default)}function Bp(i,r,a){if(qt(a)!=="number")return fo(i.default,r.default);const l=i.stops.length;if(l===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[l-1][0])return i.stops[l-1][1];const f=co(i.stops.map(v=>v[0]),a);return i.stops[f][1]}function Ht(i,r,a){const l=i.base!==void 0?i.base:1;if(qt(a)!=="number")return fo(i.default,r.default);const f=i.stops.length;if(f===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[f-1][0])return i.stops[f-1][1];const v=co(i.stops.map(M=>M[0]),a),x=function(M,D,O,U){const j=U-O,W=M-O;return j===0?0:D===1?W/j:(Math.pow(D,W)-1)/(Math.pow(D,j)-1)}(a,l,i.stops[v][0],i.stops[v+1][0]),w=i.stops[v][1],E=i.stops[v+1][1],T=Rn[r.type]||Fp;return typeof w.evaluate=="function"?{evaluate(...M){const D=w.evaluate.apply(void 0,M),O=E.evaluate.apply(void 0,M);if(D!==void 0&&O!==void 0)return T(D,O,x,i.colorSpace)}}:T(w,E,x,i.colorSpace)}function Ou(i,r,a){switch(r.type){case"color":a=zt.parse(a);break;case"formatted":a=gn.fromString(a.toString());break;case"resolvedImage":a=xi.fromString(a.toString());break;case"padding":a=Nr.parse(a);break;default:qt(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0)}return fo(a,i.default,r.default)}ii.register(_s,{error:[{kind:"error"},[At],(i,[r])=>{throw new _r(r.evaluate(i))}],typeof:[At,[Tt],(i,[r])=>X(Kr(r.evaluate(i)))],"to-rgba":[Z(Ge,4),[Cr],(i,[r])=>{const[a,l,f,v]=r.evaluate(i).rgb;return[255*a,255*l,255*f,v]}],rgb:[Cr,[Ge,Ge,Ge],Zh],rgba:[Cr,[Ge,Ge,Ge,Ge],Zh],has:{type:Ct,overloads:[[[At],(i,[r])=>Hh(r.evaluate(i),i.properties())],[[At,yi],(i,[r,a])=>Hh(r.evaluate(i),a.evaluate(i))]]},get:{type:Tt,overloads:[[[At],(i,[r])=>Fu(r.evaluate(i),i.properties())],[[At,yi],(i,[r,a])=>Fu(r.evaluate(i),a.evaluate(i))]]},"feature-state":[Tt,[At],(i,[r])=>Fu(r.evaluate(i),i.featureState||{})],properties:[yi,[],i=>i.properties()],"geometry-type":[At,[],i=>i.geometryType()],id:[Tt,[],i=>i.id()],zoom:[Ge,[],i=>i.globals.zoom],"heatmap-density":[Ge,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ge,[],i=>i.globals.lineProgress||0],accumulated:[Tt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ge,ja(Ge),(i,r)=>{let a=0;for(const l of r)a+=l.evaluate(i);return a}],"*":[Ge,ja(Ge),(i,r)=>{let a=1;for(const l of r)a*=l.evaluate(i);return a}],"-":{type:Ge,overloads:[[[Ge,Ge],(i,[r,a])=>r.evaluate(i)-a.evaluate(i)],[[Ge],(i,[r])=>-r.evaluate(i)]]},"/":[Ge,[Ge,Ge],(i,[r,a])=>r.evaluate(i)/a.evaluate(i)],"%":[Ge,[Ge,Ge],(i,[r,a])=>r.evaluate(i)%a.evaluate(i)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(i,[r,a])=>Math.pow(r.evaluate(i),a.evaluate(i))],sqrt:[Ge,[Ge],(i,[r])=>Math.sqrt(r.evaluate(i))],log10:[Ge,[Ge],(i,[r])=>Math.log(r.evaluate(i))/Math.LN10],ln:[Ge,[Ge],(i,[r])=>Math.log(r.evaluate(i))],log2:[Ge,[Ge],(i,[r])=>Math.log(r.evaluate(i))/Math.LN2],sin:[Ge,[Ge],(i,[r])=>Math.sin(r.evaluate(i))],cos:[Ge,[Ge],(i,[r])=>Math.cos(r.evaluate(i))],tan:[Ge,[Ge],(i,[r])=>Math.tan(r.evaluate(i))],asin:[Ge,[Ge],(i,[r])=>Math.asin(r.evaluate(i))],acos:[Ge,[Ge],(i,[r])=>Math.acos(r.evaluate(i))],atan:[Ge,[Ge],(i,[r])=>Math.atan(r.evaluate(i))],min:[Ge,ja(Ge),(i,r)=>Math.min(...r.map(a=>a.evaluate(i)))],max:[Ge,ja(Ge),(i,r)=>Math.max(...r.map(a=>a.evaluate(i)))],abs:[Ge,[Ge],(i,[r])=>Math.abs(r.evaluate(i))],round:[Ge,[Ge],(i,[r])=>{const a=r.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[Ge,[Ge],(i,[r])=>Math.floor(r.evaluate(i))],ceil:[Ge,[Ge],(i,[r])=>Math.ceil(r.evaluate(i))],"filter-==":[Ct,[At,Tt],(i,[r,a])=>i.properties()[r.value]===a.value],"filter-id-==":[Ct,[Tt],(i,[r])=>i.id()===r.value],"filter-type-==":[Ct,[At],(i,[r])=>i.geometryType()===r.value],"filter-<":[Ct,[At,Tt],(i,[r,a])=>{const l=i.properties()[r.value],f=a.value;return typeof l==typeof f&&l<f}],"filter-id-<":[Ct,[Tt],(i,[r])=>{const a=i.id(),l=r.value;return typeof a==typeof l&&a<l}],"filter->":[Ct,[At,Tt],(i,[r,a])=>{const l=i.properties()[r.value],f=a.value;return typeof l==typeof f&&l>f}],"filter-id->":[Ct,[Tt],(i,[r])=>{const a=i.id(),l=r.value;return typeof a==typeof l&&a>l}],"filter-<=":[Ct,[At,Tt],(i,[r,a])=>{const l=i.properties()[r.value],f=a.value;return typeof l==typeof f&&l<=f}],"filter-id-<=":[Ct,[Tt],(i,[r])=>{const a=i.id(),l=r.value;return typeof a==typeof l&&a<=l}],"filter->=":[Ct,[At,Tt],(i,[r,a])=>{const l=i.properties()[r.value],f=a.value;return typeof l==typeof f&&l>=f}],"filter-id->=":[Ct,[Tt],(i,[r])=>{const a=i.id(),l=r.value;return typeof a==typeof l&&a>=l}],"filter-has":[Ct,[Tt],(i,[r])=>r.value in i.properties()],"filter-has-id":[Ct,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Ct,[Z(At)],(i,[r])=>r.value.indexOf(i.geometryType())>=0],"filter-id-in":[Ct,[Z(Tt)],(i,[r])=>r.value.indexOf(i.id())>=0],"filter-in-small":[Ct,[At,Z(Tt)],(i,[r,a])=>a.value.indexOf(i.properties()[r.value])>=0],"filter-in-large":[Ct,[At,Z(Tt)],(i,[r,a])=>function(l,f,v,x){for(;v<=x;){const w=v+x>>1;if(f[w]===l)return!0;f[w]>l?x=w-1:v=w+1}return!1}(i.properties()[r.value],a.value,0,a.value.length-1)],all:{type:Ct,overloads:[[[Ct,Ct],(i,[r,a])=>r.evaluate(i)&&a.evaluate(i)],[ja(Ct),(i,r)=>{for(const a of r)if(!a.evaluate(i))return!1;return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],(i,[r,a])=>r.evaluate(i)||a.evaluate(i)],[ja(Ct),(i,r)=>{for(const a of r)if(a.evaluate(i))return!0;return!1}]]},"!":[Ct,[Ct],(i,[r])=>!r.evaluate(i)],"is-supported-script":[Ct,[At],(i,[r])=>{const a=i.globals&&i.globals.isSupportedScript;return!a||a(r.evaluate(i))}],upcase:[At,[At],(i,[r])=>r.evaluate(i).toUpperCase()],downcase:[At,[At],(i,[r])=>r.evaluate(i).toLowerCase()],concat:[At,ja(Tt),(i,r)=>r.map(a=>io(a.evaluate(i))).join("")],"resolved-locale":[At,[la],(i,[r])=>r.evaluate(i).resolvedLocale()]});class ur{constructor(r,a){var l;this.expression=r,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=a?(l=a).type==="color"&&dl(l.default)?new zt(0,0,0,0):l.type==="color"?zt.parse(l.default)||null:l.type==="padding"?Nr.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?vi.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(r,a,l,f,v,x){return this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=l,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,a,l,f,v,x){this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=l||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new _r(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function rr(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in _s}function Za(i,r){const a=new Qo(_s,oo,[],r?function(f){const v={color:Cr,string:At,number:Ge,enum:At,boolean:Ct,formatted:Fr,padding:te,resolvedImage:B,variableAnchorOffsetCollection:$};return f.type==="array"?Z(v[f.value]||Tt,f.length):v[f.type]}(r):void 0),l=a.parse(i,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Gh(new ur(l,r)):vs(a.errors)}class fl{constructor(r,a){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!lo(a.expression)}evaluateWithoutErrorHandling(r,a,l,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,a,l,f,v,x)}evaluate(r,a,l,f,v,x){return this._styleExpression.evaluate(r,a,l,f,v,x)}}class Nu{constructor(r,a,l,f){this.kind=r,this.zoomStops=l,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!lo(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(r,a,l,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,a,l,f,v,x)}evaluate(r,a,l,f,v,x){return this._styleExpression.evaluate(r,a,l,f,v,x)}interpolationFactor(r,a,l){return this.interpolationType?wn.interpolationFactor(this.interpolationType,r,a,l):0}}function Kh(i,r){const a=Za(i,r);if(a.result==="error")return a;const l=a.value.expression,f=al(l);if(!f&&!xs(r))return vs([new Jr("","data expressions not supported")]);const v=uo(l,["zoom"]);if(!v&&!qh(r))return vs([new Jr("","zoom expressions not supported")]);const x=ml(l);return x||v?x instanceof Jr?vs([x]):x instanceof wn&&!Bu(r)?vs([new Jr("",'"interpolate" expressions cannot be used with this property')]):Gh(x?new Nu(f?"camera":"composite",a.value,x.labels,x instanceof wn?x.interpolation:void 0):new fl(f?"constant":"source",a.value)):vs([new Jr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class pl{constructor(r,a){this._parameters=r,this._specification=a,zr(this,Wh(this._parameters,this._specification))}static deserialize(r){return new pl(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function ml(i){let r=null;if(i instanceof ll)r=ml(i.result);else if(i instanceof ol){for(const a of i.args)if(r=ml(a),r)break}else(i instanceof ho||i instanceof wn)&&i.input instanceof ii&&i.input.name==="zoom"&&(r=i);return r instanceof Jr||i.eachChild(a=>{const l=ml(a);l instanceof Jr?r=l:!r&&l?r=new Jr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&l&&r!==l&&(r=new Jr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function gl(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const r of i.slice(1))if(!gl(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Yh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yl(i){if(i==null)return{filter:()=>!0,needGeometry:!1};gl(i)||(i=vl(i));const r=Za(i,Yh);if(r.result==="error")throw new Error(r.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,l,f)=>r.value.evaluate(a,l,{},f),needGeometry:_l(i)}}function Xh(i,r){return i<r?-1:i>r?1:0}function _l(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let r=1;r<i.length;r++)if(_l(i[r]))return!0;return!1}function vl(i){if(!i)return!0;const r=i[0];return i.length<=1?r!=="any":r==="=="?$u(i[1],i[2],"=="):r==="!="?xl($u(i[1],i[2],"==")):r==="<"||r===">"||r==="<="||r===">="?$u(i[1],i[2],r):r==="any"?(a=i.slice(1),["any"].concat(a.map(vl))):r==="all"?["all"].concat(i.slice(1).map(vl)):r==="none"?["all"].concat(i.slice(1).map(vl).map(xl)):r==="in"?Jh(i[1],i.slice(2)):r==="!in"?xl(Jh(i[1],i.slice(2))):r==="has"?Qh(i[1]):r==="!has"?xl(Qh(i[1])):r!=="within"||i;var a}function $u(i,r,a){switch(i){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,i,r]}}function Jh(i,r){if(r.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(a=>typeof a!=typeof r[0])?["filter-in-large",i,["literal",r.sort(Xh)]]:["filter-in-small",i,["literal",r]]}}function Qh(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function xl(i){return["!",i]}function Uu(i){const r=typeof i;if(r==="number"||r==="boolean"||r==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let f="[";for(const v of i)f+=`${Uu(v)},`;return`${f}]`}const a=Object.keys(i).sort();let l="{";for(let f=0;f<a.length;f++)l+=`${JSON.stringify(a[f])}:${Uu(i[a[f]])},`;return`${l}}`}function Op(i){let r="";for(const a of oe)r+=`/${Uu(i[a])}`;return r}function ed(i){const r=i.value;return r?[new je(i.key,r,"constants have been deprecated as of v8")]:[]}function xr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Pa(i){if(Array.isArray(i))return i.map(Pa);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const r={};for(const a in i)r[a]=Pa(i[a]);return r}return xr(i)}function Dn(i){const r=i.key,a=i.value,l=i.valueSpec||{},f=i.objectElementValidators||{},v=i.style,x=i.styleSpec,w=i.validateSpec;let E=[];const T=qt(a);if(T!=="object")return[new je(r,a,`object expected, ${T} found`)];for(const M in a){const D=M.split(".")[0],O=l[D]||l["*"];let U;if(f[D])U=f[D];else if(l[D])U=w;else if(f["*"])U=f["*"];else{if(!l["*"]){E.push(new je(r,a[M],`unknown property "${M}"`));continue}U=w}E=E.concat(U({key:(r&&`${r}.`)+M,value:a[M],valueSpec:O,style:v,styleSpec:x,object:a,objectKey:M,validateSpec:w},a))}for(const M in l)f[M]||l[M].required&&l[M].default===void 0&&a[M]===void 0&&E.push(new je(r,a,`missing required property "${M}"`));return E}function Vu(i){const r=i.value,a=i.valueSpec,l=i.style,f=i.styleSpec,v=i.key,x=i.arrayElementValidator||i.validateSpec;if(qt(r)!=="array")return[new je(v,r,`array expected, ${qt(r)} found`)];if(a.length&&r.length!==a.length)return[new je(v,r,`array length ${a.length} expected, length ${r.length} found`)];if(a["min-length"]&&r.length<a["min-length"])return[new je(v,r,`array length at least ${a["min-length"]} expected, length ${r.length} found`)];let w={type:a.value,values:a.values};f.$version<7&&(w.function=a.function),qt(a.value)==="object"&&(w=a.value);let E=[];for(let T=0;T<r.length;T++)E=E.concat(x({array:r,arrayIndex:T,value:r[T],valueSpec:w,validateSpec:i.validateSpec,style:l,styleSpec:f,key:`${v}[${T}]`}));return E}function wl(i){const r=i.key,a=i.value,l=i.valueSpec;let f=qt(a);return f==="number"&&a!=a&&(f="NaN"),f!=="number"?[new je(r,a,`number expected, ${f} found`)]:"minimum"in l&&a<l.minimum?[new je(r,a,`${a} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&a>l.maximum?[new je(r,a,`${a} is greater than the maximum value ${l.maximum}`)]:[]}function td(i){const r=i.valueSpec,a=xr(i.value.type);let l,f,v,x={};const w=a!=="categorical"&&i.value.property===void 0,E=!w,T=qt(i.value.stops)==="array"&&qt(i.value.stops[0])==="array"&&qt(i.value.stops[0][0])==="object",M=Dn({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(U){if(a==="identity")return[new je(U.key,U.value,'identity function may not have a "stops" property')];let j=[];const W=U.value;return j=j.concat(Vu({key:U.key,value:W,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:D})),qt(W)==="array"&&W.length===0&&j.push(new je(U.key,W,"array must have at least one stop")),j},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:r,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return a==="identity"&&w&&M.push(new je(i.key,i.value,'missing required property "property"')),a==="identity"||i.value.stops||M.push(new je(i.key,i.value,'missing required property "stops"')),a==="exponential"&&i.valueSpec.expression&&!Bu(i.valueSpec)&&M.push(new je(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(E&&!xs(i.valueSpec)?M.push(new je(i.key,i.value,"property functions not supported")):w&&!qh(i.valueSpec)&&M.push(new je(i.key,i.value,"zoom functions not supported"))),a!=="categorical"&&!T||i.value.property!==void 0||M.push(new je(i.key,i.value,'"property" property is required')),M;function D(U){let j=[];const W=U.value,ee=U.key;if(qt(W)!=="array")return[new je(ee,W,`array expected, ${qt(W)} found`)];if(W.length!==2)return[new je(ee,W,`array length 2 expected, length ${W.length} found`)];if(T){if(qt(W[0])!=="object")return[new je(ee,W,`object expected, ${qt(W[0])} found`)];if(W[0].zoom===void 0)return[new je(ee,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new je(ee,W,"object stop key must have value")];if(v&&v>xr(W[0].zoom))return[new je(ee,W[0].zoom,"stop zoom values must appear in ascending order")];xr(W[0].zoom)!==v&&(v=xr(W[0].zoom),f=void 0,x={}),j=j.concat(Dn({key:`${ee}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:wl,value:O}}))}else j=j.concat(O({key:`${ee}[0]`,value:W[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},W));return rr(Pa(W[1]))?j.concat([new je(`${ee}[1]`,W[1],"expressions are not allowed in function stops.")]):j.concat(U.validateSpec({key:`${ee}[1]`,value:W[1],valueSpec:r,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function O(U,j){const W=qt(U.value),ee=xr(U.value),le=U.value!==null?U.value:j;if(l){if(W!==l)return[new je(U.key,le,`${W} stop domain type must match previous stop domain type ${l}`)]}else l=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new je(U.key,le,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&a!=="categorical"){let xe=`number expected, ${W} found`;return xs(r)&&a===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(U.key,le,xe)]}return a!=="categorical"||W!=="number"||isFinite(ee)&&Math.floor(ee)===ee?a!=="categorical"&&W==="number"&&f!==void 0&&ee<f?[new je(U.key,le,"stop domain values must appear in ascending order")]:(f=ee,a==="categorical"&&ee in x?[new je(U.key,le,"stop domain values must be unique")]:(x[ee]=!0,[])):[new je(U.key,le,`integer expected, found ${ee}`)]}}function Ma(i){const r=(i.expressionContext==="property"?Kh:Za)(Pa(i.value),i.valueSpec);if(r.result==="error")return r.value.map(l=>new je(`${i.key}${l.key}`,i.value,l.message));const a=r.value.expression||r.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!a.outputDefined())return[new je(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!lo(a))return[new je(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!lo(a))return[new je(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!uo(a,["zoom","feature-state"]))return[new je(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!al(a))return[new je(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ka(i){const r=i.key,a=i.value,l=i.valueSpec,f=[];return Array.isArray(l.values)?l.values.indexOf(xr(a))===-1&&f.push(new je(r,a,`expected one of [${l.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(l.values).indexOf(xr(a))===-1&&f.push(new je(r,a,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function ws(i){return gl(Pa(i.value))?Ma(zr({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bl(i)}function bl(i){const r=i.value,a=i.key;if(qt(r)!=="array")return[new je(a,r,`array expected, ${qt(r)} found`)];const l=i.styleSpec;let f,v=[];if(r.length<1)return[new je(a,r,"filter array must have at least 1 element")];switch(v=v.concat(ka({key:`${a}[0]`,value:r[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),xr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&xr(r[1])==="$type"&&v.push(new je(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new je(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(f=qt(r[1]),f!=="string"&&v.push(new je(`${a}[1]`,r[1],`string expected, ${f} found`)));for(let x=2;x<r.length;x++)f=qt(r[x]),xr(r[1])==="$type"?v=v.concat(ka({key:`${a}[${x}]`,value:r[x],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new je(`${a}[${x}]`,r[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(bl({key:`${a}[${x}]`,value:r[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=qt(r[1]),r.length!==2?v.push(new je(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new je(`${a}[1]`,r[1],`string expected, ${f} found`));break;case"within":f=qt(r[1]),r.length!==2?v.push(new je(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new je(`${a}[1]`,r[1],`object expected, ${f} found`))}return v}function ju(i,r){const a=i.key,l=i.validateSpec,f=i.style,v=i.styleSpec,x=i.value,w=i.objectKey,E=v[`${r}_${i.layerType}`];if(!E)return[];const T=w.match(/^(.*)-transition$/);if(r==="paint"&&T&&E[T[1]]&&E[T[1]].transition)return l({key:a,value:x,valueSpec:v.transition,style:f,styleSpec:v});const M=i.valueSpec||E[w];if(!M)return[new je(a,x,`unknown property "${w}"`)];let D;if(qt(x)==="string"&&xs(M)&&!M.tokens&&(D=/^{([^}]+)}$/.exec(x)))return[new je(a,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const O=[];return i.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&O.push(new je(a,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&dl(Pa(x))&&xr(x.type)==="identity"&&O.push(new je(a,x,'"text-font" does not support identity functions'))),O.concat(l({key:i.key,value:x,valueSpec:M,style:f,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:w}))}function Zu(i){return ju(i,"paint")}function po(i){return ju(i,"layout")}function rd(i){let r=[];const a=i.value,l=i.key,f=i.style,v=i.styleSpec;a.type||a.ref||r.push(new je(l,a,'either "type" or "ref" is required'));let x=xr(a.type);const w=xr(a.ref);if(a.id){const E=xr(a.id);for(let T=0;T<i.arrayIndex;T++){const M=f.layers[T];xr(M.id)===E&&r.push(new je(l,a.id,`duplicate layer id "${a.id}", previously used at line ${M.id.__line__}`))}}if("ref"in a){let E;["type","source","source-layer","filter","layout"].forEach(T=>{T in a&&r.push(new je(l,a[T],`"${T}" is prohibited for ref layers`))}),f.layers.forEach(T=>{xr(T.id)===w&&(E=T)}),E?E.ref?r.push(new je(l,a.ref,"ref cannot reference another ref layer")):x=xr(E.type):r.push(new je(l,a.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(a.source){const E=f.sources&&f.sources[a.source],T=E&&xr(E.type);E?T==="vector"&&x==="raster"?r.push(new je(l,a.source,`layer "${a.id}" requires a raster source`)):T!=="raster-dem"&&x==="hillshade"?r.push(new je(l,a.source,`layer "${a.id}" requires a raster-dem source`)):T==="raster"&&x!=="raster"?r.push(new je(l,a.source,`layer "${a.id}" requires a vector source`)):T!=="vector"||a["source-layer"]?T==="raster-dem"&&x!=="hillshade"?r.push(new je(l,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||T==="geojson"&&E.lineMetrics||r.push(new je(l,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new je(l,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new je(l,a.source,`source "${a.source}" not found`))}else r.push(new je(l,a,'missing required property "source"'));return r=r.concat(Dn({key:l,value:a,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${l}.type`,value:a.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:a,objectKey:"type"}),filter:ws,layout:E=>Dn({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":T=>po(zr({layerType:x},T))}}),paint:E=>Dn({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":T=>Zu(zr({layerType:x},T))}})}})),r}function Ha(i){const r=i.value,a=i.key,l=qt(r);return l!=="string"?[new je(a,r,`string expected, ${l} found`)]:[]}const nd={promoteId:function({key:i,value:r}){if(qt(r)==="string")return Ha({key:i,value:r});{const a=[];for(const l in r)a.push(...Ha({key:`${i}.${l}`,value:r[l]}));return a}}};function id(i){const r=i.value,a=i.key,l=i.styleSpec,f=i.style,v=i.validateSpec;if(!r.type)return[new je(a,r,'"type" is required')];const x=xr(r.type);let w;switch(x){case"vector":case"raster":return w=Dn({key:a,value:r,valueSpec:l[`source_${x.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:nd,validateSpec:v}),w;case"raster-dem":return w=function(E){var T;const M=(T=E.sourceName)!==null&&T!==void 0?T:"",D=E.value,O=E.styleSpec,U=O.source_raster_dem,j=E.style;let W=[];const ee=qt(D);if(D===void 0)return W;if(ee!=="object")return W.push(new je("source_raster_dem",D,`object expected, ${ee} found`)),W;const le=xr(D.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],he=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const ge in D)!le&&xe.includes(ge)?W.push(new je(ge,D[ge],`In "${M}": "${ge}" is only valid when "encoding" is set to "custom". ${he} encoding found`)):U[ge]?W=W.concat(E.validateSpec({key:ge,value:D[ge],valueSpec:U[ge],validateSpec:E.validateSpec,style:j,styleSpec:O})):W.push(new je(ge,D[ge],`unknown property "${ge}"`));return W}({sourceName:a,value:r,style:i.style,styleSpec:l,validateSpec:v}),w;case"geojson":if(w=Dn({key:a,value:r,valueSpec:l.source_geojson,style:f,styleSpec:l,validateSpec:v,objectElementValidators:nd}),r.cluster)for(const E in r.clusterProperties){const[T,M]=r.clusterProperties[E],D=typeof T=="string"?[T,["accumulated"],["get",E]]:T;w.push(...Ma({key:`${a}.${E}.map`,value:M,validateSpec:v,expressionContext:"cluster-map"})),w.push(...Ma({key:`${a}.${E}.reduce`,value:D,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return Dn({key:a,value:r,valueSpec:l.source_video,style:f,validateSpec:v,styleSpec:l});case"image":return Dn({key:a,value:r,valueSpec:l.source_image,style:f,validateSpec:v,styleSpec:l});case"canvas":return[new je(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ka({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:l})}}function ad(i){const r=i.value,a=i.styleSpec,l=a.light,f=i.style;let v=[];const x=qt(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new je("light",r,`object expected, ${x} found`)]),v;for(const w in r){const E=w.match(/^(.*)-transition$/);v=v.concat(E&&l[E[1]]&&l[E[1]].transition?i.validateSpec({key:w,value:r[w],valueSpec:a.transition,validateSpec:i.validateSpec,style:f,styleSpec:a}):l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],validateSpec:i.validateSpec,style:f,styleSpec:a}):[new je(w,r[w],`unknown property "${w}"`)])}return v}function mo(i){const r=i.value,a=i.styleSpec,l=a.sky,f=i.style,v=qt(r);if(r===void 0)return[];if(v!=="object")return[new je("sky",r,`object expected, ${v} found`)];let x=[];for(const w in r)x=x.concat(l[w]?Ga({key:w,value:r[w],valueSpec:l[w],style:f,styleSpec:a}):[new je(w,r[w],`unknown property "${w}"`)]);return x}function go(i){const r=i.value,a=i.styleSpec,l=a.terrain,f=i.style;let v=[];const x=qt(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new je("terrain",r,`object expected, ${x} found`)]),v;for(const w in r)v=v.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],validateSpec:i.validateSpec,style:f,styleSpec:a}):[new je(w,r[w],`unknown property "${w}"`)]);return v}function Hn(i){let r=[];const a=i.value,l=i.key;if(Array.isArray(a)){const f=[],v=[];for(const x in a)a[x].id&&f.includes(a[x].id)&&r.push(new je(l,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),f.push(a[x].id),a[x].url&&v.includes(a[x].url)&&r.push(new je(l,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),r=r.concat(Dn({key:`${l}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return r}return Ha({key:l,value:a})}const bs={"*":()=>[],array:Vu,boolean:function(i){const r=i.value,a=i.key,l=qt(r);return l!=="boolean"?[new je(a,r,`boolean expected, ${l} found`)]:[]},number:wl,color:function(i){const r=i.key,a=i.value,l=qt(a);return l!=="string"?[new je(r,a,`color expected, ${l} found`)]:zt.parse(String(a))?[]:[new je(r,a,`color expected, "${a}" found`)]},constants:ed,enum:ka,filter:ws,function:td,layer:rd,object:Dn,source:id,light:ad,sky:mo,terrain:go,string:Ha,formatted:function(i){return Ha(i).length===0?[]:Ma(i)},resolvedImage:function(i){return Ha(i).length===0?[]:Ma(i)},padding:function(i){const r=i.key,a=i.value;if(qt(a)==="array"){if(a.length<1||a.length>4)return[new je(r,a,`padding requires 1 to 4 values; ${a.length} values found`)];const l={type:"number"};let f=[];for(let v=0;v<a.length;v++)f=f.concat(i.validateSpec({key:`${r}[${v}]`,value:a[v],validateSpec:i.validateSpec,valueSpec:l}));return f}return wl({key:r,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const r=i.key,a=i.value,l=qt(a),f=i.styleSpec;if(l!=="array"||a.length<1||a.length%2!=0)return[new je(r,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(ka({key:`${r}[${x}]`,value:a[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(Vu({key:`${r}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:f}));return v},sprite:Hn};function Ga(i){const r=i.value,a=i.valueSpec,l=i.styleSpec;return i.validateSpec=Ga,a.expression&&dl(xr(r))?td(i):a.expression&&rr(Pa(r))?Ma(i):a.type&&bs[a.type]?bs[a.type](i):Dn(zr({},i,{valueSpec:a.type?l[a.type]:a}))}function sd(i){const r=i.value,a=i.key,l=Ha(i);return l.length||(r.indexOf("{fontstack}")===-1&&l.push(new je(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&l.push(new je(a,r,'"glyphs" url must include a "{range}" token'))),l}function Di(i,r=Ie){let a=[];return a=a.concat(Ga({key:"",value:i,valueSpec:r.$root,styleSpec:r,style:i,validateSpec:Ga,objectElementValidators:{glyphs:sd,"*":()=>[]}})),i.constants&&(a=a.concat(ed({key:"constants",value:i.constants,style:i,styleSpec:r,validateSpec:Ga}))),Hu(a)}function Gn(i){return function(r){return i({...r,validateSpec:Ga})}}function Hu(i){return[].concat(i).sort((r,a)=>r.line-a.line)}function wi(i){return function(...r){return Hu(i.apply(this,r))}}Di.source=wi(Gn(id)),Di.sprite=wi(Gn(Hn)),Di.glyphs=wi(Gn(sd)),Di.light=wi(Gn(ad)),Di.sky=wi(Gn(mo)),Di.terrain=wi(Gn(go)),Di.layer=wi(Gn(rd)),Di.filter=wi(Gn(ws)),Di.paintProperty=wi(Gn(Zu)),Di.layoutProperty=wi(Gn(po));const yo=Di,Gu=yo.light,Np=yo.paintProperty,_o=yo.layoutProperty;function od(i,r){let a=!1;if(r&&r.length)for(const l of r)i.fire(new gr(new Error(l.message))),a=!0;return a}class qa{constructor(r,a,l){const f=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(a=x[1])+2*(l=x[2]);for(let E=0;E<this.d*this.d;E++){const T=x[3+E],M=x[3+E+1];f.push(T===M?null:x.subarray(T,M))}const w=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=a+2*l;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=r,this.padding=l,this.scale=a/r,this.uid=0;const v=l/a*r;this.min=-v,this.max=r+v}insert(r,a,l,f,v){this._forEachCell(a,l,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(a),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,a,l,f,v,x){this.cells[v].push(x)}query(r,a,l,f,v){const x=this.min,w=this.max;if(r<=x&&a<=x&&w<=l&&w<=f&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(r,a,l,f,this._queryCell,E,{},v),E}}_queryCell(r,a,l,f,v,x,w,E){const T=this.cells[v];if(T!==null){const M=this.keys,D=this.bboxes;for(let O=0;O<T.length;O++){const U=T[O];if(w[U]===void 0){const j=4*U;(E?E(D[j+0],D[j+1],D[j+2],D[j+3]):r<=D[j+2]&&a<=D[j+3]&&l>=D[j+0]&&f>=D[j+1])?(w[U]=!0,x.push(M[U])):w[U]=!1}}}}_forEachCell(r,a,l,f,v,x,w,E){const T=this._convertToCellCoord(r),M=this._convertToCellCoord(a),D=this._convertToCellCoord(l),O=this._convertToCellCoord(f);for(let U=T;U<=D;U++)for(let j=M;j<=O;j++){const W=this.d*j+U;if((!E||E(this._convertFromCellCoord(U),this._convertFromCellCoord(j),this._convertFromCellCoord(U+1),this._convertFromCellCoord(j+1)))&&v.call(this,r,a,l,f,W,x,w,E))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,a=3+this.cells.length+1+1;let l=0;for(let x=0;x<this.cells.length;x++)l+=this.cells[x].length;const f=new Int32Array(a+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=a;for(let x=0;x<r.length;x++){const w=r[x];f[3+x]=v,f.set(w,v),v+=w.length}return f[3+r.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+r.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(r,a){const l=r.toArrayBuffer();return a&&a.push(l),{buffer:l}}static deserialize(r){return new qa(r.buffer)}}const ua={};function st(i,r,a={}){if(ua[i])throw new Error(`${i} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:i,writeable:!1}),ua[i]={klass:r,omit:a.omit||[],shallow:a.shallow||[]}}st("Object",Object),st("TransferableGridIndex",qa),st("Color",zt),st("Error",Error),st("AJAXError",Mn),st("ResolvedImage",xi),st("StylePropertyFunction",pl),st("StyleExpression",ur,{omit:["_evaluator"]}),st("ZoomDependentExpression",Nu),st("ZoomConstantExpression",fl),st("CompoundExpression",ii,{omit:["_evaluate"]});for(const i in _s)_s[i]._classRegistryKey||st(`Expression_${i}`,_s[i]);function qu(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ss(i,r){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error)return i;if(qu(i)||et(i))return r&&r.push(i),i;if(ArrayBuffer.isView(i)){const a=i;return r&&r.push(a.buffer),a}if(i instanceof ImageData)return r&&r.push(i.data.buffer),i;if(Array.isArray(i)){const a=[];for(const l of i)a.push(Ss(l,r));return a}if(typeof i=="object"){const a=i.constructor,l=a._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${a.name}`);if(!ua[l])throw new Error(`${l} is not registered.`);const f=a.serialize?a.serialize(i,r):{};if(a.serialize){if(r&&f===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||ua[l].omit.indexOf(v)>=0)continue;const x=i[v];f[v]=ua[l].shallow.indexOf(v)>=0?x:Ss(x,r)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(f.$name=l),f}throw new Error("can't serialize object of type "+typeof i)}function vo(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||qu(i)||et(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(vo);if(typeof i=="object"){const r=i.$name||"Object";if(!ua[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:a}=ua[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(i);const l=Object.create(a.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const v=i[f];l[f]=ua[r].shallow.indexOf(f)>=0?v:vo(v)}return l}throw new Error("can't deserialize object of type "+typeof i)}class Sl{constructor(){this.first=!0}update(r,a){const l=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=a),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=l,!0))}}const tt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function El(i){for(const r of i)if(Al(r.charCodeAt(0)))return!0;return!1}function ld(i){for(const r of i)if(!ud(r.charCodeAt(0)))return!1;return!0}function ud(i){return!(tt.Arabic(i)||tt["Arabic Supplement"](i)||tt["Arabic Extended-A"](i)||tt["Arabic Presentation Forms-A"](i)||tt["Arabic Presentation Forms-B"](i))}function Al(i){return!(i!==746&&i!==747&&(i<4352||!(tt["Bopomofo Extended"](i)||tt.Bopomofo(i)||tt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||tt["CJK Compatibility Ideographs"](i)||tt["CJK Compatibility"](i)||tt["CJK Radicals Supplement"](i)||tt["CJK Strokes"](i)||!(!tt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||tt["CJK Unified Ideographs Extension A"](i)||tt["CJK Unified Ideographs"](i)||tt["Enclosed CJK Letters and Months"](i)||tt["Hangul Compatibility Jamo"](i)||tt["Hangul Jamo Extended-A"](i)||tt["Hangul Jamo Extended-B"](i)||tt["Hangul Jamo"](i)||tt["Hangul Syllables"](i)||tt.Hiragana(i)||tt["Ideographic Description Characters"](i)||tt.Kanbun(i)||tt["Kangxi Radicals"](i)||tt["Katakana Phonetic Extensions"](i)||tt.Katakana(i)&&i!==12540||!(!tt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!tt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||tt["Unified Canadian Aboriginal Syllabics"](i)||tt["Unified Canadian Aboriginal Syllabics Extended"](i)||tt["Vertical Forms"](i)||tt["Yijing Hexagram Symbols"](i)||tt["Yi Syllables"](i)||tt["Yi Radicals"](i))))}function Cl(i){return!(Al(i)||function(r){return!!(tt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||tt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||tt["Letterlike Symbols"](r)||tt["Number Forms"](r)||tt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||tt["Control Pictures"](r)&&r!==9251||tt["Optical Character Recognition"](r)||tt["Enclosed Alphanumerics"](r)||tt["Geometric Shapes"](r)||tt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||tt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||tt["CJK Symbols and Punctuation"](r)||tt.Katakana(r)||tt["Private Use Area"](r)||tt["CJK Compatibility Forms"](r)||tt["Small Form Variants"](r)||tt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(i))}function Wu(i){return i>=1424&&i<=2303||tt["Arabic Presentation Forms-A"](i)||tt["Arabic Presentation Forms-B"](i)}function $p(i,r){return!(!r&&Wu(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||tt.Khmer(i))}function cd(i){for(const r of i)if(Wu(r.charCodeAt(0)))return!0;return!1}const Wa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class cr{constructor(r,a){this.zoom=r,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sl,this.transition={})}isSupportedScript(r){return function(a,l){for(const f of a)if(!$p(f.charCodeAt(0),l))return!1;return!0}(r,Wa.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,a=r-Math.floor(r),l=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*a}}}class xo{constructor(r,a){this.property=r,this.value=a,this.expression=function(l,f){if(dl(l))return new pl(l,f);if(rr(l)){const v=Kh(l,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=l;return f.type==="color"&&typeof l=="string"?v=zt.parse(l):f.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(v=vi.parse(l)):v=Nr.parse(l),{kind:"constant",evaluate:()=>v}}}(a===void 0?r.specification.default:a,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,a,l){return this.property.possiblyEvaluate(this,r,a,l)}}class Tl{constructor(r){this.property=r,this.value=new xo(r,void 0)}transitioned(r,a){return new dd(this.property,this.value,a,Te({},r.transition,this.transition),r.now)}untransitioned(){return new dd(this.property,this.value,null,{},0)}}class hd{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Et(this._values[r].value.value)}setValue(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tl(this._values[r].property)),this._values[r].value=new xo(this._values[r].property,a===null?void 0:Et(a))}getTransition(r){return Et(this._values[r].transition)}setTransition(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tl(this._values[r].property)),this._values[r].transition=Et(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const l=this.getValue(a);l!==void 0&&(r[a]=l);const f=this.getTransition(a);f!==void 0&&(r[`${a}-transition`]=f)}return r}transitioned(r,a){const l=new Ku(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].transitioned(r,a._values[f]);return l}untransitioned(){const r=new Ku(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class dd{constructor(r,a,l,f,v){this.property=r,this.value=a,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,r.specification.transition&&(f.delay||f.duration)&&(this.prior=l)}possiblyEvaluate(r,a,l){const f=r.now||0,v=this.value.possiblyEvaluate(r,a,l),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(r,a,l);{const w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,a,l),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const T=E*E,M=T*E;return 4*(E<.5?M:3*(E-T)+M-.75)}(w))}}return v}}class Ku{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,l){const f=new wo(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(r,a,l);return f}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class fd{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Et(this._values[r].value)}setValue(r,a){this._values[r]=new xo(this._values[r].property,a===null?void 0:Et(a))}serialize(){const r={};for(const a of Object.keys(this._values)){const l=this.getValue(a);l!==void 0&&(r[a]=l)}return r}possiblyEvaluate(r,a,l){const f=new wo(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(r,a,l);return f}}class Li{constructor(r,a,l){this.property=r,this.value=a,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,l,f){return this.property.evaluate(this.value,this.parameters,r,a,l,f)}}class wo{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ht{constructor(r){this.specification=r}possiblyEvaluate(r,a){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(a)}interpolate(r,a,l){const f=Rn[this.specification.type];return f?f(r,a,l):r}}class xt{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,l,f){return new Li(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},l,f)}:r.expression,a)}interpolate(r,a,l){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new Li(this,{kind:"constant",value:void 0},r.parameters);const f=Rn[this.specification.type];if(f){const v=f(r.value.value,a.value.value,l);return new Li(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,a,l,f,v,x){return r.kind==="constant"?r.value:r.evaluate(a,l,f,v,x)}}class Es extends xt{possiblyEvaluate(r,a,l,f){if(r.value===void 0)return new Li(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){const v=r.expression.evaluate(a,null,{},l,f),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,a);return new Li(this,{kind:"constant",value:w},a)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new Li(this,{kind:"constant",value:v},a)}return new Li(this,r.expression,a)}evaluate(r,a,l,f,v,x){if(r.kind==="source"){const w=r.evaluate(a,l,f,v,x);return this._calculate(w,w,w,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},l,f),r.evaluate({zoom:Math.floor(a.zoom)},l,f),r.evaluate({zoom:Math.floor(a.zoom)+1},l,f),a):r.value}_calculate(r,a,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:l,to:a}}interpolate(r){return r}}class Yu{constructor(r){this.specification=r}possiblyEvaluate(r,a,l,f){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(a,null,{},l,f);return this._calculate(v,v,v,a)}return this._calculate(r.expression.evaluate(new cr(Math.floor(a.zoom-1),a)),r.expression.evaluate(new cr(Math.floor(a.zoom),a)),r.expression.evaluate(new cr(Math.floor(a.zoom+1),a)),a)}}_calculate(r,a,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:l,to:a}}interpolate(r){return r}}class Xu{constructor(r){this.specification=r}possiblyEvaluate(r,a,l,f){return!!r.expression.evaluate(a,null,{},l,f)}interpolate(){return!1}}class Ln{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in r){const l=r[a];l.specification.overridable&&this.overridableProperties.push(a);const f=this.defaultPropertyValues[a]=new xo(l,void 0),v=this.defaultTransitionablePropertyValues[a]=new Tl(l);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=f.possiblyEvaluate({})}}}st("DataDrivenProperty",xt),st("DataConstantProperty",ht),st("CrossFadedDataDrivenProperty",Es),st("CrossFadedProperty",Yu),st("ColorRampProperty",Xu);const Ju="-transition";class zi extends Zn{constructor(r,a){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new fd(a.layout)),a.paint)){this._transitionablePaint=new hd(a.paint);for(const l in r.paint)this.setPaintProperty(l,r.paint[l],{validate:!1});for(const l in r.layout)this.setLayoutProperty(l,r.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wo(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,a,l={}){a!=null&&this._validate(_o,`layers.${this.id}.layout.${r}`,r,a,l)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a)}getPaintProperty(r){return r.endsWith(Ju)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,l={}){if(a!=null&&this._validate(Np,`layers.${this.id}.paint.${r}`,r,a,l))return!1;if(r.endsWith(Ju))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;{const f=this._transitionablePaint._values[r],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const E=this._transitionablePaint._values[r].value;return E.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,w,E)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,a,l){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,a){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),rt(r,(a,l)=>!(a===void 0||l==="layout"&&!Object.keys(a).length||l==="paint"&&!Object.keys(a).length))}_validate(r,a,l,f,v={}){return(!v||v.validate!==!1)&&od(this,r.call(yo,{key:a,layerType:this.type,objectKey:l,value:f,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof Li&&xs(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const Up={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class bo{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ur(i,r=1){let a=0,l=0;return{members:i.map(f=>{const v=Up[f.type].BYTES_PER_ELEMENT,x=a=pd(a,Math.max(r,v)),w=f.components||1;return l=Math.max(l,v),a+=v*w,{name:f.name,type:f.type,components:w,offset:x}}),size:pd(a,Math.max(l,r)),alignment:r}}function pd(i,r){return Math.ceil(i/r)*r}class Xi extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const l=this.length;return this.resize(l+1),this.emplace(l,r,a)}emplace(r,a,l){const f=2*r;return this.int16[f+0]=a,this.int16[f+1]=l,r}}Xi.prototype.bytesPerElement=4,st("StructArrayLayout2i4",Xi);class Il extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,l)}emplace(r,a,l,f){const v=3*r;return this.int16[v+0]=a,this.int16[v+1]=l,this.int16[v+2]=f,r}}Il.prototype.bytesPerElement=6,st("StructArrayLayout3i6",Il);class Qu extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,l,f)}emplace(r,a,l,f,v){const x=4*r;return this.int16[x+0]=a,this.int16[x+1]=l,this.int16[x+2]=f,this.int16[x+3]=v,r}}Qu.prototype.bytesPerElement=8,st("StructArrayLayout4i8",Qu);class ec extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,a,l,f,v,x)}emplace(r,a,l,f,v,x,w){const E=6*r;return this.int16[E+0]=a,this.int16[E+1]=l,this.int16[E+2]=f,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=w,r}}ec.prototype.bytesPerElement=12,st("StructArrayLayout2i4i12",ec);class tc extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,a,l,f,v,x)}emplace(r,a,l,f,v,x,w){const E=4*r,T=8*r;return this.int16[E+0]=a,this.int16[E+1]=l,this.uint8[T+4]=f,this.uint8[T+5]=v,this.uint8[T+6]=x,this.uint8[T+7]=w,r}}tc.prototype.bytesPerElement=8,st("StructArrayLayout2i4ub8",tc);class As extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const l=this.length;return this.resize(l+1),this.emplace(l,r,a)}emplace(r,a,l){const f=2*r;return this.float32[f+0]=a,this.float32[f+1]=l,r}}As.prototype.bytesPerElement=8,st("StructArrayLayout2f8",As);class rc extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x,w,E,T,M){const D=this.length;return this.resize(D+1),this.emplace(D,r,a,l,f,v,x,w,E,T,M)}emplace(r,a,l,f,v,x,w,E,T,M,D){const O=10*r;return this.uint16[O+0]=a,this.uint16[O+1]=l,this.uint16[O+2]=f,this.uint16[O+3]=v,this.uint16[O+4]=x,this.uint16[O+5]=w,this.uint16[O+6]=E,this.uint16[O+7]=T,this.uint16[O+8]=M,this.uint16[O+9]=D,r}}rc.prototype.bytesPerElement=20,st("StructArrayLayout10ui20",rc);class nc extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x,w,E,T,M,D,O){const U=this.length;return this.resize(U+1),this.emplace(U,r,a,l,f,v,x,w,E,T,M,D,O)}emplace(r,a,l,f,v,x,w,E,T,M,D,O,U){const j=12*r;return this.int16[j+0]=a,this.int16[j+1]=l,this.int16[j+2]=f,this.int16[j+3]=v,this.uint16[j+4]=x,this.uint16[j+5]=w,this.uint16[j+6]=E,this.uint16[j+7]=T,this.int16[j+8]=M,this.int16[j+9]=D,this.int16[j+10]=O,this.int16[j+11]=U,r}}nc.prototype.bytesPerElement=24,st("StructArrayLayout4i4ui4i24",nc);class ca extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,l)}emplace(r,a,l,f){const v=3*r;return this.float32[v+0]=a,this.float32[v+1]=l,this.float32[v+2]=f,r}}ca.prototype.bytesPerElement=12,st("StructArrayLayout3f12",ca);class Pl extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}Pl.prototype.bytesPerElement=4,st("StructArrayLayout1ul4",Pl);class So extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x,w,E,T){const M=this.length;return this.resize(M+1),this.emplace(M,r,a,l,f,v,x,w,E,T)}emplace(r,a,l,f,v,x,w,E,T,M){const D=10*r,O=5*r;return this.int16[D+0]=a,this.int16[D+1]=l,this.int16[D+2]=f,this.int16[D+3]=v,this.int16[D+4]=x,this.int16[D+5]=w,this.uint32[O+3]=E,this.uint16[D+8]=T,this.uint16[D+9]=M,r}}So.prototype.bytesPerElement=20,st("StructArrayLayout6i1ul2ui20",So);class Ml extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,a,l,f,v,x)}emplace(r,a,l,f,v,x,w){const E=6*r;return this.int16[E+0]=a,this.int16[E+1]=l,this.int16[E+2]=f,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=w,r}}Ml.prototype.bytesPerElement=12,st("StructArrayLayout2i2i2i12",Ml);class Eo extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,l,f,v)}emplace(r,a,l,f,v,x){const w=4*r,E=8*r;return this.float32[w+0]=a,this.float32[w+1]=l,this.float32[w+2]=f,this.int16[E+6]=v,this.int16[E+7]=x,r}}Eo.prototype.bytesPerElement=16,st("StructArrayLayout2f1f2i16",Eo);class ic extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,l,f)}emplace(r,a,l,f,v){const x=12*r,w=3*r;return this.uint8[x+0]=a,this.uint8[x+1]=l,this.float32[w+1]=f,this.float32[w+2]=v,r}}ic.prototype.bytesPerElement=12,st("StructArrayLayout2ub2f12",ic);class Ka extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,l)}emplace(r,a,l,f){const v=3*r;return this.uint16[v+0]=a,this.uint16[v+1]=l,this.uint16[v+2]=f,r}}Ka.prototype.bytesPerElement=6,st("StructArrayLayout3ui6",Ka);class Ya extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x,w,E,T,M,D,O,U,j,W,ee,le){const xe=this.length;return this.resize(xe+1),this.emplace(xe,r,a,l,f,v,x,w,E,T,M,D,O,U,j,W,ee,le)}emplace(r,a,l,f,v,x,w,E,T,M,D,O,U,j,W,ee,le,xe){const he=24*r,ge=12*r,ke=48*r;return this.int16[he+0]=a,this.int16[he+1]=l,this.uint16[he+2]=f,this.uint16[he+3]=v,this.uint32[ge+2]=x,this.uint32[ge+3]=w,this.uint32[ge+4]=E,this.uint16[he+10]=T,this.uint16[he+11]=M,this.uint16[he+12]=D,this.float32[ge+7]=O,this.float32[ge+8]=U,this.uint8[ke+36]=j,this.uint8[ke+37]=W,this.uint8[ke+38]=ee,this.uint32[ge+10]=le,this.int16[he+22]=xe,r}}Ya.prototype.bytesPerElement=48,st("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ya);class ac extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,l,f,v,x,w,E,T,M,D,O,U,j,W,ee,le,xe,he,ge,ke,Fe,it,ct,nt,Qe,We,lt){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,r,a,l,f,v,x,w,E,T,M,D,O,U,j,W,ee,le,xe,he,ge,ke,Fe,it,ct,nt,Qe,We,lt)}emplace(r,a,l,f,v,x,w,E,T,M,D,O,U,j,W,ee,le,xe,he,ge,ke,Fe,it,ct,nt,Qe,We,lt,Ye){const Ze=32*r,gt=16*r;return this.int16[Ze+0]=a,this.int16[Ze+1]=l,this.int16[Ze+2]=f,this.int16[Ze+3]=v,this.int16[Ze+4]=x,this.int16[Ze+5]=w,this.int16[Ze+6]=E,this.int16[Ze+7]=T,this.uint16[Ze+8]=M,this.uint16[Ze+9]=D,this.uint16[Ze+10]=O,this.uint16[Ze+11]=U,this.uint16[Ze+12]=j,this.uint16[Ze+13]=W,this.uint16[Ze+14]=ee,this.uint16[Ze+15]=le,this.uint16[Ze+16]=xe,this.uint16[Ze+17]=he,this.uint16[Ze+18]=ge,this.uint16[Ze+19]=ke,this.uint16[Ze+20]=Fe,this.uint16[Ze+21]=it,this.uint16[Ze+22]=ct,this.uint32[gt+12]=nt,this.float32[gt+13]=Qe,this.float32[gt+14]=We,this.uint16[Ze+30]=lt,this.uint16[Ze+31]=Ye,r}}ac.prototype.bytesPerElement=64,st("StructArrayLayout8i15ui1ul2f2ui64",ac);class Ao extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}Ao.prototype.bytesPerElement=4,st("StructArrayLayout1f4",Ao);class Xa extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,l)}emplace(r,a,l,f){const v=3*r;return this.uint16[6*r+0]=a,this.float32[v+1]=l,this.float32[v+2]=f,r}}Xa.prototype.bytesPerElement=12,st("StructArrayLayout1ui2f12",Xa);class sc extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,l)}emplace(r,a,l,f){const v=4*r;return this.uint32[2*r+0]=a,this.uint16[v+2]=l,this.uint16[v+3]=f,r}}sc.prototype.bytesPerElement=8,st("StructArrayLayout1ul2ui8",sc);class oc extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const l=this.length;return this.resize(l+1),this.emplace(l,r,a)}emplace(r,a,l){const f=2*r;return this.uint16[f+0]=a,this.uint16[f+1]=l,r}}oc.prototype.bytesPerElement=4,st("StructArrayLayout2ui4",oc);class kl extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}kl.prototype.bytesPerElement=2,st("StructArrayLayout1ui2",kl);class lc extends wr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,l,f)}emplace(r,a,l,f,v){const x=4*r;return this.float32[x+0]=a,this.float32[x+1]=l,this.float32[x+2]=f,this.float32[x+3]=v,r}}lc.prototype.bytesPerElement=16,st("StructArrayLayout4f16",lc);class y extends bo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new R(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class n extends So{get(r){return new y(this,r)}}st("CollisionBoxArray",n);class o extends bo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}o.prototype.size=48;class h extends Ya{get(r){return new o(this,r)}}st("PlacedSymbolArray",h);class m extends bo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}m.prototype.size=64;class _ extends ac{get(r){return new m(this,r)}}st("SymbolInstanceArray",_);class b extends Ao{getoffsetX(r){return this.float32[1*r+0]}}st("GlyphOffsetArray",b);class A extends Il{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}st("SymbolLineVertexArray",A);class C extends bo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}C.prototype.size=12;class P extends Xa{get(r){return new C(this,r)}}st("TextAnchorOffsetArray",P);class L extends bo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}L.prototype.size=8;class F extends sc{get(r){return new L(this,r)}}st("FeatureIndexArray",F);class V extends Xi{}class J extends Xi{}class Q extends Xi{}class ne extends ec{}class K extends tc{}class fe extends As{}class Se extends rc{}class se extends nc{}class ye extends ca{}class Ce extends Pl{}class Ee extends Ml{}class De extends ic{}class Ne extends Ka{}class Be extends oc{}const He=Ur([{name:"a_pos",components:2,type:"Int16"}],4),{members:ot}=He;class vt{constructor(r=[]){this.segments=r}prepareSegment(r,a,l,f){let v=this.segments[this.segments.length-1];return r>vt.MAX_VERTEX_ARRAY_LENGTH&&Gt(`Max vertices per segment is ${vt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>vt.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:a.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,l,f){return new vt([{vertexOffset:r,primitiveOffset:a,vertexLength:l,primitiveLength:f,vaos:{},sortKey:0}])}}function Je(i,r){return 256*(i=be(Math.floor(i),0,255))+be(Math.floor(r),0,255)}vt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,st("SegmentVector",vt);const yt=Ur([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ut={exports:{}},hr={exports:{}};hr.exports=function(i,r){var a,l,f,v,x,w,E,T;for(l=i.length-(a=3&i.length),f=r,x=3432918353,w=461845907,T=0;T<l;)E=255&i.charCodeAt(T)|(255&i.charCodeAt(++T))<<8|(255&i.charCodeAt(++T))<<16|(255&i.charCodeAt(++T))<<24,++T,f=27492+(65535&(v=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,a){case 3:E^=(255&i.charCodeAt(T+2))<<16;case 2:E^=(255&i.charCodeAt(T+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&i.charCodeAt(T)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295}return f^=i.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Bt=hr.exports,Rt={exports:{}};Rt.exports=function(i,r){for(var a,l=i.length,f=r^l,v=0;l>=4;)a=1540483477*(65535&(a=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),l-=4,++v;switch(l){case 3:f^=(255&i.charCodeAt(v+2))<<16;case 2:f^=(255&i.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&i.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var Ot=Bt,Vr=Rt.exports;ut.exports=Ot,ut.exports.murmur3=Ot,ut.exports.murmur2=Vr;var er=S(ut.exports);class zn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,l,f){this.ids.push(dn(r)),this.positions.push(a,l,f)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=dn(r);let l=0,f=this.ids.length-1;for(;l<f;){const x=l+f>>1;this.ids[x]>=a?f=x:l=x+1}const v=[];for(;this.ids[l]===a;)v.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return v}static serialize(r,a){const l=new Float64Array(r.ids),f=new Uint32Array(r.positions);return br(l,f,0,l.length-1),a&&a.push(l.buffer,f.buffer),{ids:l,positions:f}}static deserialize(r){const a=new zn;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function dn(i){const r=+i;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:er(String(i))}function br(i,r,a,l){for(;a<l;){const f=i[a+l>>1];let v=a-1,x=l+1;for(;;){do v++;while(i[v]<f);do x--;while(i[x]>f);if(v>=x)break;bn(i,v,x),bn(r,3*v,3*x),bn(r,3*v+1,3*x+1),bn(r,3*v+2,3*x+2)}x-a<l-x?(br(i,r,a,x),a=x+1):(br(i,r,x+1,l),l=x)}}function bn(i,r,a){const l=i[r];i[r]=i[a],i[a]=l}st("FeaturePositionMap",zn);class Sn{constructor(r,a){this.gl=r.gl,this.location=a}}class bi extends Sn{constructor(r,a){super(r,a),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Ra extends Sn{constructor(r,a){super(r,a),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Cs extends Sn{constructor(r,a){super(r,a),this.current=zt.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Ts=new Float32Array(16);function Da(i){return[Je(255*i.r,255*i.g),Je(255*i.b,255*i.a)]}class Qr{constructor(r,a,l){this.value=r,this.uniformNames=a.map(f=>`u_${f}`),this.type=l}setUniform(r,a,l){r.set(l.constantOr(this.value))}getBinding(r,a,l){return this.type==="color"?new Cs(r,a):new bi(r,a)}}class jr{constructor(r,a){this.uniformNames=a.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=r.tlbr}setUniform(r,a,l,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,a,l){return l.substr(0,9)==="u_pattern"?new Ra(r,a):new bi(r,a)}}class Sr{constructor(r,a,l,f){this.expression=r,this.type=l,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(r,a,l,f,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new cr(0),a,{},f,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,w)}updatePaintArray(r,a,l,f){const v=this.expression.evaluate({zoom:0},l,f);this._setPaintValue(r,a,v)}_setPaintValue(r,a,l){if(this.type==="color"){const f=Da(l);for(let v=r;v<a;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=r;f<a;f++)this.paintVertexArray.emplace(f,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fn{constructor(r,a,l,f,v,x){this.expression=r,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=l,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,a,l,f,v){const x=this.expression.evaluate(new cr(this.zoom),a,{},f,[],v),w=this.expression.evaluate(new cr(this.zoom+1),a,{},f,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(E,r,x,w)}updatePaintArray(r,a,l,f){const v=this.expression.evaluate({zoom:this.zoom},l,f),x=this.expression.evaluate({zoom:this.zoom+1},l,f);this._setPaintValue(r,a,v,x)}_setPaintValue(r,a,l,f){if(this.type==="color"){const v=Da(l),x=Da(f);for(let w=r;w<a;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=r;v<a;v++)this.paintVertexArray.emplace(v,l,f);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a){const l=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,f=be(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);r.set(f)}getBinding(r,a,l){return new bi(r,a)}}class dr{constructor(r,a,l,f,v,x){this.expression=r,this.type=a,this.useIntegerZoom=l,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,a,l){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(f,r,a.patterns&&a.patterns[this.layerId],l)}updatePaintArray(r,a,l,f,v){this._setPaintValues(r,a,l.patterns&&l.patterns[this.layerId],v)}_setPaintValues(r,a,l,f){if(!f||!l)return;const{min:v,mid:x,max:w}=l,E=f[v],T=f[x],M=f[w];if(E&&T&&M)for(let D=r;D<a;D++)this.zoomInPaintVertexArray.emplace(D,T.tl[0],T.tl[1],T.br[0],T.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],T.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,T.tl[0],T.tl[1],T.br[0],T.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],T.pixelRatio,M.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,yt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class en{constructor(r,a,l){this.binders={},this._buffers=[];const f=[];for(const v in r.paint._values){if(!l(v))continue;const x=r.paint.get(v);if(!(x instanceof Li&&xs(x.property.specification)))continue;const w=tn(v,r.type),E=x.value,T=x.property.specification.type,M=x.property.useIntegerZoom,D=x.property.specification["property-type"],O=D==="cross-faded"||D==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=O?new jr(E.value,w):new Qr(E.value,w,T),f.push(`/u_${v}`);else if(E.kind==="source"||O){const U=md(v,T,"source");this.binders[v]=O?new dr(E,T,M,a,U,r.id):new Sr(E,w,T,U),f.push(`/a_${v}`)}else{const U=md(v,T,"composite");this.binders[v]=new Fn(E,w,T,M,a,U),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof Sr||a instanceof Fn?a.maxValue:0}populatePaintArrays(r,a,l,f,v){for(const x in this.binders){const w=this.binders[x];(w instanceof Sr||w instanceof Fn||w instanceof dr)&&w.populatePaintArray(r,a,l,f,v)}}setConstantPatternPositions(r,a){for(const l in this.binders){const f=this.binders[l];f instanceof jr&&f.setConstantPatternPositions(r,a)}}updatePaintArrays(r,a,l,f,v){let x=!1;for(const w in r){const E=a.getPositions(w);for(const T of E){const M=l.feature(T.index);for(const D in this.binders){const O=this.binders[D];if((O instanceof Sr||O instanceof Fn||O instanceof dr)&&O.expression.isStateDependent===!0){const U=f.paint.get(D);O.expression=U.value,O.updatePaintArray(T.start,T.end,M,r[w],v),x=!0}}}}return x}defines(){const r=[];for(const a in this.binders){const l=this.binders[a];(l instanceof Qr||l instanceof jr)&&r.push(...l.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const l=this.binders[a];if(l instanceof Sr||l instanceof Fn)for(let f=0;f<l.paintVertexAttributes.length;f++)r.push(l.paintVertexAttributes[f].name);else if(l instanceof dr)for(let f=0;f<yt.members.length;f++)r.push(yt.members[f].name)}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const l=this.binders[a];if(l instanceof Qr||l instanceof jr||l instanceof Fn)for(const f of l.uniformNames)r.push(f)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,a){const l=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Qr||v instanceof jr||v instanceof Fn){for(const x of v.uniformNames)if(a[x]){const w=v.getBinding(r,a[x],x);l.push({name:x,property:f,binding:w})}}}return l}setUniforms(r,a,l,f){for(const{name:v,property:x,binding:w}of a)this.binders[x].setUniform(w,f,l.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const a in this.binders){const l=this.binders[a];if(r&&l instanceof dr){const f=r.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(l instanceof Sr||l instanceof Fn)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(r){for(const a in this.binders){const l=this.binders[a];(l instanceof Sr||l instanceof Fn||l instanceof dr)&&l.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof Sr||a instanceof Fn||a instanceof dr)&&a.destroy()}}}class fn{constructor(r,a,l=()=>!0){this.programConfigurations={};for(const f of r)this.programConfigurations[f.id]=new en(f,a,l);this.needsUpload=!1,this._featureMap=new zn,this._bufferOffset=0}populatePaintArrays(r,a,l,f,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(r,a,f,v,x);a.id!==void 0&&this._featureMap.add(a.id,l,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,l,f){for(const v of l)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,a,v,f)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function tn(i,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${r}-`,"").replace(/-/g,"_")]}function md(i,r,a){const l={color:{source:As,composite:lc},number:{source:Ao,composite:As}},f=function(v){return{"line-pattern":{source:Se,composite:Se},"fill-pattern":{source:Se,composite:Se},"fill-extrusion-pattern":{source:Se,composite:Se}}[v]}(i);return f&&f[a]||l[r][a]}st("ConstantBinder",Qr),st("CrossFadedConstantBinder",jr),st("SourceExpressionBinder",Sr),st("CrossFadedCompositeBinder",dr),st("CompositeExpressionBinder",Fn),st("ProgramConfiguration",en,{omit:["_buffers"]}),st("ProgramConfigurationSet",fn);const Ir=8192,uc=Math.pow(2,14)-1,gd=-uc-1;function Ja(i){const r=Ir/i.extent,a=i.loadGeometry();for(let l=0;l<a.length;l++){const f=a[l];for(let v=0;v<f.length;v++){const x=f[v],w=Math.round(x.x*r),E=Math.round(x.y*r);x.x=be(w,gd,uc),x.y=be(E,gd,uc),(w<x.x||w>x.x+1||E<x.y||E>x.y+1)&&Gt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Qa(i,r){return{type:i.type,id:i.id,properties:i.properties,geometry:r?Ja(i):[]}}function ha(i,r,a,l,f){i.emplaceBack(2*r+(l+1)/2,2*a+(f+1)/2)}class Rl{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new J,this.indexArray=new Ne,this.segments=new vt,this.programConfigurations=new fn(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,l){const f=this.layers[0],v=[];let x=null,w=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:E,id:T,index:M,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=Qa(E,O);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),U,l))continue;const j=w?x.evaluate(U,{},l):void 0,W={id:T,properties:E.properties,type:E.type,sourceLayerIndex:D,index:M,geometry:O?U.geometry:Ja(E),patterns:{},sortKey:j};v.push(W)}w&&v.sort((E,T)=>E.sortKey-T.sortKey);for(const E of v){const{geometry:T,index:M,sourceLayerIndex:D}=E,O=r[M].feature;this.addFeature(E,T,M,l),a.featureIndex.insert(O,T,M,D,this.index)}}update(r,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ot),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,l,f){for(const v of a)for(const x of v){const w=x.x,E=x.y;if(w<0||w>=Ir||E<0||E>=Ir)continue;const T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),M=T.vertexLength;ha(this.layoutVertexArray,w,E,-1,-1),ha(this.layoutVertexArray,w,E,1,-1),ha(this.layoutVertexArray,w,E,1,1),ha(this.layoutVertexArray,w,E,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),T.vertexLength+=4,T.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,{},f)}}function cc(i,r){for(let a=0;a<i.length;a++)if(Ll(r,i[a]))return!0;for(let a=0;a<r.length;a++)if(Ll(i,r[a]))return!0;return!!Co(i,r)}function yd(i,r,a){return!!Ll(i,r)||!!Vp(r,i,a)}function Dl(i,r){if(i.length===1)return yv(r,i[0]);for(let a=0;a<r.length;a++){const l=r[a];for(let f=0;f<l.length;f++)if(Ll(i,l[f]))return!0}for(let a=0;a<i.length;a++)if(yv(r,i[a]))return!0;for(let a=0;a<r.length;a++)if(Co(i,r[a]))return!0;return!1}function _d(i,r,a){if(i.length>1){if(Co(i,r))return!0;for(let l=0;l<r.length;l++)if(Vp(r[l],i,a))return!0}for(let l=0;l<i.length;l++)if(Vp(i[l],r,a))return!0;return!1}function Co(i,r){if(i.length===0||r.length===0)return!1;for(let a=0;a<i.length-1;a++){const l=i[a],f=i[a+1];for(let v=0;v<r.length-1;v++)if(oE(l,f,r[v],r[v+1]))return!0}return!1}function oE(i,r,a,l){return nr(i,a,l)!==nr(r,a,l)&&nr(i,r,a)!==nr(i,r,l)}function Vp(i,r,a){const l=a*a;if(r.length===1)return i.distSqr(r[0])<l;for(let f=1;f<r.length;f++)if(gv(i,r[f-1],r[f])<l)return!0;return!1}function gv(i,r,a){const l=r.distSqr(a);if(l===0)return i.distSqr(r);const f=((i.x-r.x)*(a.x-r.x)+(i.y-r.y)*(a.y-r.y))/l;return i.distSqr(f<0?r:f>1?a:a.sub(r)._mult(f)._add(r))}function yv(i,r){let a,l,f,v=!1;for(let x=0;x<i.length;x++){a=i[x];for(let w=0,E=a.length-1;w<a.length;E=w++)l=a[w],f=a[E],l.y>r.y!=f.y>r.y&&r.x<(f.x-l.x)*(r.y-l.y)/(f.y-l.y)+l.x&&(v=!v)}return v}function Ll(i,r){let a=!1;for(let l=0,f=i.length-1;l<i.length;f=l++){const v=i[l],x=i[f];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function lE(i,r,a){const l=a[0],f=a[2];if(i.x<l.x&&r.x<l.x||i.x>f.x&&r.x>f.x||i.y<l.y&&r.y<l.y||i.y>f.y&&r.y>f.y)return!1;const v=nr(i,r,a[0]);return v!==nr(i,r,a[1])||v!==nr(i,r,a[2])||v!==nr(i,r,a[3])}function hc(i,r,a){const l=r.paint.get(i).value;return l.kind==="constant"?l.value:a.programConfigurations.get(r.id).getMaxValue(i)}function vd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function xd(i,r,a,l,f){if(!r[0]&&!r[1])return i;const v=R.convert(r)._mult(f);a==="viewport"&&v._rotate(-l);const x=[];for(let w=0;w<i.length;w++)x.push(i[w].sub(v));return x}let _v,vv;st("CircleBucket",Rl,{omit:["layers"]});var uE={get paint(){return vv=vv||new Ln({"circle-radius":new xt(Ie.paint_circle["circle-radius"]),"circle-color":new xt(Ie.paint_circle["circle-color"]),"circle-blur":new xt(Ie.paint_circle["circle-blur"]),"circle-opacity":new xt(Ie.paint_circle["circle-opacity"]),"circle-translate":new ht(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new ht(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ht(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ht(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(Ie.paint_circle["circle-stroke-opacity"])})},get layout(){return _v=_v||new Ln({"circle-sort-key":new xt(Ie.layout_circle["circle-sort-key"])})}},qn=1e-6,zl=typeof Float32Array<"u"?Float32Array:Array;function jp(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xv(i,r,a){var l=r[0],f=r[1],v=r[2],x=r[3],w=r[4],E=r[5],T=r[6],M=r[7],D=r[8],O=r[9],U=r[10],j=r[11],W=r[12],ee=r[13],le=r[14],xe=r[15],he=a[0],ge=a[1],ke=a[2],Fe=a[3];return i[0]=he*l+ge*w+ke*D+Fe*W,i[1]=he*f+ge*E+ke*O+Fe*ee,i[2]=he*v+ge*T+ke*U+Fe*le,i[3]=he*x+ge*M+ke*j+Fe*xe,i[4]=(he=a[4])*l+(ge=a[5])*w+(ke=a[6])*D+(Fe=a[7])*W,i[5]=he*f+ge*E+ke*O+Fe*ee,i[6]=he*v+ge*T+ke*U+Fe*le,i[7]=he*x+ge*M+ke*j+Fe*xe,i[8]=(he=a[8])*l+(ge=a[9])*w+(ke=a[10])*D+(Fe=a[11])*W,i[9]=he*f+ge*E+ke*O+Fe*ee,i[10]=he*v+ge*T+ke*U+Fe*le,i[11]=he*x+ge*M+ke*j+Fe*xe,i[12]=(he=a[12])*l+(ge=a[13])*w+(ke=a[14])*D+(Fe=a[15])*W,i[13]=he*f+ge*E+ke*O+Fe*ee,i[14]=he*v+ge*T+ke*U+Fe*le,i[15]=he*x+ge*M+ke*j+Fe*xe,i}Math.hypot||(Math.hypot=function(){for(var i=0,r=arguments.length;r--;)i+=arguments[r]*arguments[r];return Math.sqrt(i)});var dc,cE=xv;function wd(i,r,a){var l=r[0],f=r[1],v=r[2],x=r[3];return i[0]=a[0]*l+a[4]*f+a[8]*v+a[12]*x,i[1]=a[1]*l+a[5]*f+a[9]*v+a[13]*x,i[2]=a[2]*l+a[6]*f+a[10]*v+a[14]*x,i[3]=a[3]*l+a[7]*f+a[11]*v+a[15]*x,i}dc=new zl(4),zl!=Float32Array&&(dc[0]=0,dc[1]=0,dc[2]=0,dc[3]=0);class hE extends zi{constructor(r){super(r,uE)}createBucket(r){return new Rl(r)}queryRadius(r){const a=r;return hc("circle-radius",this,a)+hc("circle-stroke-width",this,a)+vd(this.paint.get("circle-translate"))}queryIntersectsFeature(r,a,l,f,v,x,w,E){const T=xd(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),M=this.paint.get("circle-radius").evaluate(a,l)+this.paint.get("circle-stroke-width").evaluate(a,l),D=this.paint.get("circle-pitch-alignment")==="map",O=D?T:function(j,W){return j.map(ee=>wv(ee,W))}(T,E),U=D?M*w:M;for(const j of f)for(const W of j){const ee=D?W:wv(W,E);let le=U;const xe=wd([],[W.x,W.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=xe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=x.cameraToCenterDistance/xe[3]),yd(O,ee,le))return!0}return!1}}function wv(i,r){const a=wd([],[i.x,i.y,0,1],r);return new R(a[0]/a[3],a[1]/a[3])}class bv extends Rl{}let Sv;st("HeatmapBucket",bv,{omit:["layers"]});var dE={get paint(){return Sv=Sv||new Ln({"heatmap-radius":new xt(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ht(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xu(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ht(Ie.paint_heatmap["heatmap-opacity"])})}};function Zp(i,{width:r,height:a},l,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==r*a*l)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${r*a*l}`)}else f=new Uint8Array(r*a*l);return i.width=r,i.height=a,i.data=f,i}function Ev(i,{width:r,height:a},l){if(r===i.width&&a===i.height)return;const f=Zp({},{width:r,height:a},l);Hp(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,r),height:Math.min(i.height,a)},l),i.width=r,i.height=a,i.data=f.data}function Hp(i,r,a,l,f,v){if(f.width===0||f.height===0)return r;if(f.width>i.width||f.height>i.height||a.x>i.width-f.width||a.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>r.width||f.height>r.height||l.x>r.width-f.width||l.y>r.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,w=r.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<f.height;E++){const T=((a.y+E)*i.width+a.x)*v,M=((l.y+E)*r.width+l.x)*v;for(let D=0;D<f.width*v;D++)w[M+D]=x[T+D]}return r}class fc{constructor(r,a){Zp(this,r,1,a)}resize(r){Ev(this,r,1)}clone(){return new fc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,l,f,v){Hp(r,a,l,f,v,1)}}class Fi{constructor(r,a){Zp(this,r,4,a)}resize(r){Ev(this,r,4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Fi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,l,f,v){Hp(r,a,l,f,v,4)}}function Av(i){const r={},a=i.resolution||256,l=i.clips?i.clips.length:1,f=i.image||new Fi({width:a,height:l});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,w,E)=>{r[i.evaluationKey]=E;const T=i.expression.evaluate(r);f.data[x+w+0]=Math.floor(255*T.r/T.a),f.data[x+w+1]=Math.floor(255*T.g/T.a),f.data[x+w+2]=Math.floor(255*T.b/T.a),f.data[x+w+3]=Math.floor(255*T.a)};if(i.clips)for(let x=0,w=0;x<l;++x,w+=4*a)for(let E=0,T=0;E<a;E++,T+=4){const M=E/(a-1),{start:D,end:O}=i.clips[x];v(w,T,D*(1-M)+O*M)}else for(let x=0,w=0;x<a;x++,w+=4)v(0,w,x/(a-1));return f}st("AlphaImage",fc),st("RGBAImage",Fi);class fE extends zi{createBucket(r){return new bv(r)}constructor(r){super(r,dE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Av({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Cv;var pE={get paint(){return Cv=Cv||new Ln({"hillshade-illumination-direction":new ht(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ht(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ht(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ht(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ht(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ht(Ie.paint_hillshade["hillshade-accent-color"])})}};class mE extends zi{constructor(r){super(r,pE)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const gE=Ur([{name:"a_pos",components:2,type:"Int16"}],4),{members:yE}=gE;var Gp={exports:{}};function bd(i,r,a){a=a||2;var l,f,v,x,w,E,T,M=r&&r.length,D=M?r[0]*a:i.length,O=Tv(i,0,D,a,!0),U=[];if(!O||O.next===O.prev)return U;if(M&&(O=function(W,ee,le,xe){var he,ge,ke,Fe=[];for(he=0,ge=ee.length;he<ge;he++)(ke=Tv(W,ee[he]*xe,he<ge-1?ee[he+1]*xe:W.length,xe,!1))===ke.next&&(ke.steiner=!0),Fe.push(AE(ke));for(Fe.sort(bE),he=0;he<Fe.length;he++)le=SE(Fe[he],le);return le}(i,r,O,a)),i.length>80*a){l=v=i[0],f=x=i[1];for(var j=a;j<D;j+=a)(w=i[j])<l&&(l=w),(E=i[j+1])<f&&(f=E),w>v&&(v=w),E>x&&(x=E);T=(T=Math.max(v-l,x-f))!==0?32767/T:0}return pc(O,U,a,l,f,T,0),U}function Tv(i,r,a,l,f){var v,x;if(f===Kp(i,r,a,l)>0)for(v=r;v<a;v+=l)x=Mv(v,i[v],i[v+1],x);else for(v=a-l;v>=r;v-=l)x=Mv(v,i[v],i[v+1],x);return x&&Sd(x,x.next)&&(gc(x),x=x.next),x}function To(i,r){if(!i)return i;r||(r=i);var a,l=i;do if(a=!1,l.steiner||!Sd(l,l.next)&&Zr(l.prev,l,l.next)!==0)l=l.next;else{if(gc(l),(l=r=l.prev)===l.next)break;a=!0}while(a||l!==r);return r}function pc(i,r,a,l,f,v,x){if(i){!x&&v&&function(M,D,O,U){var j=M;do j.z===0&&(j.z=qp(j.x,j.y,D,O,U)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==M);j.prevZ.nextZ=null,j.prevZ=null,function(W){var ee,le,xe,he,ge,ke,Fe,it,ct=1;do{for(le=W,W=null,ge=null,ke=0;le;){for(ke++,xe=le,Fe=0,ee=0;ee<ct&&(Fe++,xe=xe.nextZ);ee++);for(it=ct;Fe>0||it>0&&xe;)Fe!==0&&(it===0||!xe||le.z<=xe.z)?(he=le,le=le.nextZ,Fe--):(he=xe,xe=xe.nextZ,it--),ge?ge.nextZ=he:W=he,he.prevZ=ge,ge=he;le=xe}ge.nextZ=null,ct*=2}while(ke>1)}(j)}(i,l,f,v);for(var w,E,T=i;i.prev!==i.next;)if(w=i.prev,E=i.next,v?vE(i,l,f,v):_E(i))r.push(w.i/a|0),r.push(i.i/a|0),r.push(E.i/a|0),gc(i),i=E.next,T=E.next;else if((i=E)===T){x?x===1?pc(i=xE(To(i),r,a),r,a,l,f,v,2):x===2&&wE(i,r,a,l,f,v):pc(To(i),r,a,l,f,v,1);break}}}function _E(i){var r=i.prev,a=i,l=i.next;if(Zr(r,a,l)>=0)return!1;for(var f=r.x,v=a.x,x=l.x,w=r.y,E=a.y,T=l.y,M=f<v?f<x?f:x:v<x?v:x,D=w<E?w<T?w:T:E<T?E:T,O=f>v?f>x?f:x:v>x?v:x,U=w>E?w>T?w:T:E>T?E:T,j=l.next;j!==r;){if(j.x>=M&&j.x<=O&&j.y>=D&&j.y<=U&&Fl(f,w,v,E,x,T,j.x,j.y)&&Zr(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function vE(i,r,a,l){var f=i.prev,v=i,x=i.next;if(Zr(f,v,x)>=0)return!1;for(var w=f.x,E=v.x,T=x.x,M=f.y,D=v.y,O=x.y,U=w<E?w<T?w:T:E<T?E:T,j=M<D?M<O?M:O:D<O?D:O,W=w>E?w>T?w:T:E>T?E:T,ee=M>D?M>O?M:O:D>O?D:O,le=qp(U,j,r,a,l),xe=qp(W,ee,r,a,l),he=i.prevZ,ge=i.nextZ;he&&he.z>=le&&ge&&ge.z<=xe;){if(he.x>=U&&he.x<=W&&he.y>=j&&he.y<=ee&&he!==f&&he!==x&&Fl(w,M,E,D,T,O,he.x,he.y)&&Zr(he.prev,he,he.next)>=0||(he=he.prevZ,ge.x>=U&&ge.x<=W&&ge.y>=j&&ge.y<=ee&&ge!==f&&ge!==x&&Fl(w,M,E,D,T,O,ge.x,ge.y)&&Zr(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;he&&he.z>=le;){if(he.x>=U&&he.x<=W&&he.y>=j&&he.y<=ee&&he!==f&&he!==x&&Fl(w,M,E,D,T,O,he.x,he.y)&&Zr(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;ge&&ge.z<=xe;){if(ge.x>=U&&ge.x<=W&&ge.y>=j&&ge.y<=ee&&ge!==f&&ge!==x&&Fl(w,M,E,D,T,O,ge.x,ge.y)&&Zr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function xE(i,r,a){var l=i;do{var f=l.prev,v=l.next.next;!Sd(f,v)&&Iv(f,l,l.next,v)&&mc(f,v)&&mc(v,f)&&(r.push(f.i/a|0),r.push(l.i/a|0),r.push(v.i/a|0),gc(l),gc(l.next),l=i=v),l=l.next}while(l!==i);return To(l)}function wE(i,r,a,l,f,v){var x=i;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&CE(x,w)){var E=Pv(x,w);return x=To(x,x.next),E=To(E,E.next),pc(x,r,a,l,f,v,0),void pc(E,r,a,l,f,v,0)}w=w.next}x=x.next}while(x!==i)}function bE(i,r){return i.x-r.x}function SE(i,r){var a=function(f,v){var x,w=v,E=f.x,T=f.y,M=-1/0;do{if(T<=w.y&&T>=w.next.y&&w.next.y!==w.y){var D=w.x+(T-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(D<=E&&D>M&&(M=D,x=w.x<w.next.x?w:w.next,D===E))return x}w=w.next}while(w!==v);if(!x)return null;var O,U=x,j=x.x,W=x.y,ee=1/0;w=x;do E>=w.x&&w.x>=j&&E!==w.x&&Fl(T<W?E:M,T,j,W,T<W?M:E,T,w.x,w.y)&&(O=Math.abs(T-w.y)/(E-w.x),mc(w,f)&&(O<ee||O===ee&&(w.x>x.x||w.x===x.x&&EE(x,w)))&&(x=w,ee=O)),w=w.next;while(w!==U);return x}(i,r);if(!a)return r;var l=Pv(a,i);return To(l,l.next),To(a,a.next)}function EE(i,r){return Zr(i.prev,i,r.prev)<0&&Zr(r.next,i,i.next)<0}function qp(i,r,a,l,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-a)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-l)*f|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function AE(i){var r=i,a=i;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==i);return a}function Fl(i,r,a,l,f,v,x,w){return(f-x)*(r-w)>=(i-x)*(v-w)&&(i-x)*(l-w)>=(a-x)*(r-w)&&(a-x)*(v-w)>=(f-x)*(l-w)}function CE(i,r){return i.next.i!==r.i&&i.prev.i!==r.i&&!function(a,l){var f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==l.i&&f.next.i!==l.i&&Iv(f,f.next,a,l))return!0;f=f.next}while(f!==a);return!1}(i,r)&&(mc(i,r)&&mc(r,i)&&function(a,l){var f=a,v=!1,x=(a.x+l.x)/2,w=(a.y+l.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&x<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==a);return v}(i,r)&&(Zr(i.prev,i,r.prev)||Zr(i,r.prev,r))||Sd(i,r)&&Zr(i.prev,i,i.next)>0&&Zr(r.prev,r,r.next)>0)}function Zr(i,r,a){return(r.y-i.y)*(a.x-r.x)-(r.x-i.x)*(a.y-r.y)}function Sd(i,r){return i.x===r.x&&i.y===r.y}function Iv(i,r,a,l){var f=Ad(Zr(i,r,a)),v=Ad(Zr(i,r,l)),x=Ad(Zr(a,l,i)),w=Ad(Zr(a,l,r));return f!==v&&x!==w||!(f!==0||!Ed(i,a,r))||!(v!==0||!Ed(i,l,r))||!(x!==0||!Ed(a,i,l))||!(w!==0||!Ed(a,r,l))}function Ed(i,r,a){return r.x<=Math.max(i.x,a.x)&&r.x>=Math.min(i.x,a.x)&&r.y<=Math.max(i.y,a.y)&&r.y>=Math.min(i.y,a.y)}function Ad(i){return i>0?1:i<0?-1:0}function mc(i,r){return Zr(i.prev,i,i.next)<0?Zr(i,r,i.next)>=0&&Zr(i,i.prev,r)>=0:Zr(i,r,i.prev)<0||Zr(i,i.next,r)<0}function Pv(i,r){var a=new Wp(i.i,i.x,i.y),l=new Wp(r.i,r.x,r.y),f=i.next,v=r.prev;return i.next=r,r.prev=i,a.next=f,f.prev=a,l.next=a,a.prev=l,v.next=l,l.prev=v,l}function Mv(i,r,a,l){var f=new Wp(i,r,a);return l?(f.next=l.next,f.prev=l,l.next.prev=f,l.next=f):(f.prev=f,f.next=f),f}function gc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Wp(i,r,a){this.i=i,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Kp(i,r,a,l){for(var f=0,v=r,x=a-l;v<a;v+=l)f+=(i[x]-i[v])*(i[v+1]+i[x+1]),x=v;return f}Gp.exports=bd,Gp.exports.default=bd,bd.deviation=function(i,r,a,l){var f=r&&r.length,v=Math.abs(Kp(i,0,f?r[0]*a:i.length,a));if(f)for(var x=0,w=r.length;x<w;x++)v-=Math.abs(Kp(i,r[x]*a,x<w-1?r[x+1]*a:i.length,a));var E=0;for(x=0;x<l.length;x+=3){var T=l[x]*a,M=l[x+1]*a,D=l[x+2]*a;E+=Math.abs((i[T]-i[D])*(i[M+1]-i[T+1])-(i[T]-i[M])*(i[D+1]-i[T+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},bd.flatten=function(i){for(var r=i[0][0].length,a={vertices:[],holes:[],dimensions:r},l=0,f=0;f<i.length;f++){for(var v=0;v<i[f].length;v++)for(var x=0;x<r;x++)a.vertices.push(i[f][v][x]);f>0&&a.holes.push(l+=i[f-1].length)}return a};var kv=S(Gp.exports);function TE(i,r,a,l,f){Rv(i,r,a||0,l||i.length-1,f||IE)}function Rv(i,r,a,l,f){for(;l>a;){if(l-a>600){var v=l-a+1,x=r-a+1,w=Math.log(v),E=.5*Math.exp(2*w/3),T=.5*Math.sqrt(w*E*(v-E)/v)*(x-v/2<0?-1:1);Rv(i,r,Math.max(a,Math.floor(r-x*E/v+T)),Math.min(l,Math.floor(r+(v-x)*E/v+T)),f)}var M=i[r],D=a,O=l;for(yc(i,a,r),f(i[l],M)>0&&yc(i,a,l);D<O;){for(yc(i,D,O),D++,O--;f(i[D],M)<0;)D++;for(;f(i[O],M)>0;)O--}f(i[a],M)===0?yc(i,a,O):yc(i,++O,l),O<=r&&(a=O+1),r<=O&&(l=O-1)}}function yc(i,r,a){var l=i[r];i[r]=i[a],i[a]=l}function IE(i,r){return i<r?-1:i>r?1:0}function Yp(i,r){const a=i.length;if(a<=1)return[i];const l=[];let f,v;for(let x=0;x<a;x++){const w=or(i[x]);w!==0&&(i[x].area=Math.abs(w),v===void 0&&(v=w<0),v===w<0?(f&&l.push(f),f=[i[x]]):f.push(i[x]))}if(f&&l.push(f),r>1)for(let x=0;x<l.length;x++)l[x].length<=r||(TE(l[x],r,1,l[x].length-1,PE),l[x]=l[x].slice(0,r));return l}function PE(i,r){return r.area-i.area}function Xp(i,r,a){const l=a.patternDependencies;let f=!1;for(const v of r){const x=v.paint.get(`${i}-pattern`);x.isConstant()||(f=!0);const w=x.constantOr(null);w&&(f=!0,l[w.to]=!0,l[w.from]=!0)}return f}function Jp(i,r,a,l,f){const v=f.patternDependencies;for(const x of r){const w=x.paint.get(`${i}-pattern`).value;if(w.kind!=="constant"){let E=w.evaluate({zoom:l-1},a,{},f.availableImages),T=w.evaluate({zoom:l},a,{},f.availableImages),M=w.evaluate({zoom:l+1},a,{},f.availableImages);E=E&&E.name?E.name:E,T=T&&T.name?T.name:T,M=M&&M.name?M.name:M,v[E]=!0,v[T]=!0,v[M]=!0,a.patterns[x.id]={min:E,mid:T,max:M}}}return a}class Qp{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Q,this.indexArray=new Ne,this.indexArray2=new Be,this.programConfigurations=new fn(r.layers,r.zoom),this.segments=new vt,this.segments2=new vt,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,l){this.hasPattern=Xp("fill",this.layers,a);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:w,id:E,index:T,sourceLayerIndex:M}of r){const D=this.layers[0]._featureFilter.needGeometry,O=Qa(w,D);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),O,l))continue;const U=v?f.evaluate(O,{},l,a.availableImages):void 0,j={id:E,properties:w.properties,type:w.type,sourceLayerIndex:M,index:T,geometry:D?O.geometry:Ja(w),patterns:{},sortKey:U};x.push(j)}v&&x.sort((w,E)=>w.sortKey-E.sortKey);for(const w of x){const{geometry:E,index:T,sourceLayerIndex:M}=w;if(this.hasPattern){const D=Jp("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(D)}else this.addFeature(w,E,T,l,{});a.featureIndex.insert(r[T].feature,E,T,M,this.index)}}update(r,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,l)}addFeatures(r,a,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,yE),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,l,f,v){for(const x of Yp(a,500)){let w=0;for(const U of x)w+=U.length;const E=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),T=E.vertexLength,M=[],D=[];for(const U of x){if(U.length===0)continue;U!==x[0]&&D.push(M.length/2);const j=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),W=j.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(W+U.length-1,W),M.push(U[0].x),M.push(U[0].y);for(let ee=1;ee<U.length;ee++)this.layoutVertexArray.emplaceBack(U[ee].x,U[ee].y),this.indexArray2.emplaceBack(W+ee-1,W+ee),M.push(U[ee].x),M.push(U[ee].y);j.vertexLength+=U.length,j.primitiveLength+=U.length}const O=kv(M,D);for(let U=0;U<O.length;U+=3)this.indexArray.emplaceBack(T+O[U],T+O[U+1],T+O[U+2]);E.vertexLength+=w,E.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,v,f)}}let Dv,Lv;st("FillBucket",Qp,{omit:["layers","patternFeatures"]});var ME={get paint(){return Lv=Lv||new Ln({"fill-antialias":new ht(Ie.paint_fill["fill-antialias"]),"fill-opacity":new xt(Ie.paint_fill["fill-opacity"]),"fill-color":new xt(Ie.paint_fill["fill-color"]),"fill-outline-color":new xt(Ie.paint_fill["fill-outline-color"]),"fill-translate":new ht(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new ht(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new Es(Ie.paint_fill["fill-pattern"])})},get layout(){return Dv=Dv||new Ln({"fill-sort-key":new xt(Ie.layout_fill["fill-sort-key"])})}};class kE extends zi{constructor(r){super(r,ME)}recalculate(r,a){super.recalculate(r,a);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Qp(r)}queryRadius(){return vd(this.paint.get("fill-translate"))}queryIntersectsFeature(r,a,l,f,v,x,w){return Dl(xd(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),f)}isTileClipped(){return!0}}const RE=Ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),DE=Ur([{name:"a_centroid",components:2,type:"Int16"}],4),{members:LE}=RE;var Is={},zE=I,zv=Bl;function Bl(i,r,a,l,f){this.properties={},this.extent=a,this.type=0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=f,i.readFields(FE,this,r)}function FE(i,r,a){i==1?r.id=a.readVarint():i==2?function(l,f){for(var v=l.readVarint()+l.pos;l.pos<v;){var x=f._keys[l.readVarint()],w=f._values[l.readVarint()];f.properties[x]=w}}(a,r):i==3?r.type=a.readVarint():i==4&&(r._geometry=a.pos)}function BE(i){for(var r,a,l=0,f=0,v=i.length,x=v-1;f<v;x=f++)l+=((a=i[x]).x-(r=i[f]).x)*(r.y+a.y);return l}Bl.types=["Unknown","Point","LineString","Polygon"],Bl.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var r,a=i.readVarint()+i.pos,l=1,f=0,v=0,x=0,w=[];i.pos<a;){if(f<=0){var E=i.readVarint();l=7&E,f=E>>3}if(f--,l===1||l===2)v+=i.readSVarint(),x+=i.readSVarint(),l===1&&(r&&w.push(r),r=[]),r.push(new zE(v,x));else{if(l!==7)throw new Error("unknown command "+l);r&&r.push(r[0].clone())}}return r&&w.push(r),w},Bl.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var r=i.readVarint()+i.pos,a=1,l=0,f=0,v=0,x=1/0,w=-1/0,E=1/0,T=-1/0;i.pos<r;){if(l<=0){var M=i.readVarint();a=7&M,l=M>>3}if(l--,a===1||a===2)(f+=i.readSVarint())<x&&(x=f),f>w&&(w=f),(v+=i.readSVarint())<E&&(E=v),v>T&&(T=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,E,w,T]},Bl.prototype.toGeoJSON=function(i,r,a){var l,f,v=this.extent*Math.pow(2,a),x=this.extent*i,w=this.extent*r,E=this.loadGeometry(),T=Bl.types[this.type];function M(U){for(var j=0;j<U.length;j++){var W=U[j];U[j]=[360*(W.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(l=0;l<E.length;l++)D[l]=E[l][0];M(E=D);break;case 2:for(l=0;l<E.length;l++)M(E[l]);break;case 3:for(E=function(U){var j=U.length;if(j<=1)return[U];for(var W,ee,le=[],xe=0;xe<j;xe++){var he=BE(U[xe]);he!==0&&(ee===void 0&&(ee=he<0),ee===he<0?(W&&le.push(W),W=[U[xe]]):W.push(U[xe]))}return W&&le.push(W),le}(E),l=0;l<E.length;l++)for(f=0;f<E[l].length;f++)M(E[l][f])}E.length===1?E=E[0]:T="Multi"+T;var O={type:"Feature",geometry:{type:T,coordinates:E},properties:this.properties};return"id"in this&&(O.id=this.id),O};var OE=zv,Fv=Bv;function Bv(i,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(NE,this,r),this.length=this._features.length}function NE(i,r,a){i===15?r.version=a.readVarint():i===1?r.name=a.readString():i===5?r.extent=a.readVarint():i===2?r._features.push(a.pos):i===3?r._keys.push(a.readString()):i===4&&r._values.push(function(l){for(var f=null,v=l.readVarint()+l.pos;l.pos<v;){var x=l.readVarint()>>3;f=x===1?l.readString():x===2?l.readFloat():x===3?l.readDouble():x===4?l.readVarint64():x===5?l.readVarint():x===6?l.readSVarint():x===7?l.readBoolean():null}return f}(a))}Bv.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var r=this._pbf.readVarint()+this._pbf.pos;return new OE(this._pbf,r,this.extent,this._keys,this._values)};var $E=Fv;function UE(i,r,a){if(i===3){var l=new $E(a,a.readVarint()+a.pos);l.length&&(r[l.name]=l)}}Is.VectorTile=function(i,r){this.layers=i.readFields(UE,{},r)},Is.VectorTileFeature=zv,Is.VectorTileLayer=Fv;const VE=Is.VectorTileFeature.types,em=Math.pow(2,13);function _c(i,r,a,l,f,v,x,w){i.emplaceBack(r,a,2*Math.floor(l*em)+x,f*em*2,v*em*2,Math.round(w))}class tm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ne,this.centroidVertexArray=new V,this.indexArray=new Ne,this.programConfigurations=new fn(r.layers,r.zoom),this.segments=new vt,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,l){this.features=[],this.hasPattern=Xp("fill-extrusion",this.layers,a);for(const{feature:f,id:v,index:x,sourceLayerIndex:w}of r){const E=this.layers[0]._featureFilter.needGeometry,T=Qa(f,E);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),T,l))continue;const M={id:v,sourceLayerIndex:w,index:x,geometry:E?T.geometry:Ja(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Jp("fill-extrusion",this.layers,M,this.zoom,a)):this.addFeature(M,M.geometry,x,l,{}),a.featureIndex.insert(f,M.geometry,x,w,this.index,!0)}}addFeatures(r,a,l){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,a,l)}}update(r,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,LE),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,DE.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,a,l,f,v){const x={x:0,y:0,vertexCount:0};for(const w of Yp(a,500)){let E=0;for(const j of w)E+=j.length;let T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const j of w){if(j.length===0||ZE(j))continue;let W=0;for(let ee=0;ee<j.length;ee++){const le=j[ee];if(ee>=1){const xe=j[ee-1];if(!jE(le,xe)){T.vertexLength+4>vt.MAX_VERTEX_ARRAY_LENGTH&&(T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const he=le.sub(xe)._perp()._unit(),ge=xe.dist(le);W+ge>32768&&(W=0),_c(this.layoutVertexArray,le.x,le.y,he.x,he.y,0,0,W),_c(this.layoutVertexArray,le.x,le.y,he.x,he.y,0,1,W),x.x+=2*le.x,x.y+=2*le.y,x.vertexCount+=2,W+=ge,_c(this.layoutVertexArray,xe.x,xe.y,he.x,he.y,0,0,W),_c(this.layoutVertexArray,xe.x,xe.y,he.x,he.y,0,1,W),x.x+=2*xe.x,x.y+=2*xe.y,x.vertexCount+=2;const ke=T.vertexLength;this.indexArray.emplaceBack(ke,ke+2,ke+1),this.indexArray.emplaceBack(ke+1,ke+2,ke+3),T.vertexLength+=4,T.primitiveLength+=2}}}}if(T.vertexLength+E>vt.MAX_VERTEX_ARRAY_LENGTH&&(T=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),VE[r.type]!=="Polygon")continue;const M=[],D=[],O=T.vertexLength;for(const j of w)if(j.length!==0){j!==w[0]&&D.push(M.length/2);for(let W=0;W<j.length;W++){const ee=j[W];_c(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),x.x+=ee.x,x.y+=ee.y,x.vertexCount+=1,M.push(ee.x),M.push(ee.y)}}const U=kv(M,D);for(let j=0;j<U.length;j+=3)this.indexArray.emplaceBack(O+U[j],O+U[j+2],O+U[j+1]);T.primitiveLength+=U.length/3,T.vertexLength+=E}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,v,f)}}function jE(i,r){return i.x===r.x&&(i.x<0||i.x>Ir)||i.y===r.y&&(i.y<0||i.y>Ir)}function ZE(i){return i.every(r=>r.x<0)||i.every(r=>r.x>Ir)||i.every(r=>r.y<0)||i.every(r=>r.y>Ir)}let Ov;st("FillExtrusionBucket",tm,{omit:["layers","features"]});var HE={get paint(){return Ov=Ov||new Ln({"fill-extrusion-opacity":new ht(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ht(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ht(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Es(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ht(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class GE extends zi{constructor(r){super(r,HE)}createBucket(r){return new tm(r)}queryRadius(){return vd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,a,l,f,v,x,w,E){const T=xd(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),M=this.paint.get("fill-extrusion-height").evaluate(a,l),D=this.paint.get("fill-extrusion-base").evaluate(a,l),O=function(j,W,ee,le){const xe=[];for(const he of j){const ge=[he.x,he.y,0,1];wd(ge,ge,W),xe.push(new R(ge[0]/ge[3],ge[1]/ge[3]))}return xe}(T,E),U=function(j,W,ee,le){const xe=[],he=[],ge=le[8]*W,ke=le[9]*W,Fe=le[10]*W,it=le[11]*W,ct=le[8]*ee,nt=le[9]*ee,Qe=le[10]*ee,We=le[11]*ee;for(const lt of j){const Ye=[],Ze=[];for(const gt of lt){const dt=gt.x,Ft=gt.y,fr=le[0]*dt+le[4]*Ft+le[12],mr=le[1]*dt+le[5]*Ft+le[13],nn=le[2]*dt+le[6]*Ft+le[14],Si=le[3]*dt+le[7]*Ft+le[15],Wn=nn+Fe,Yr=Si+it,yn=fr+ct,An=mr+nt,Kn=nn+Qe,Yn=Si+We,an=new R((fr+ge)/Yr,(mr+ke)/Yr);an.z=Wn/Yr,Ye.push(an);const sn=new R(yn/Yn,An/Yn);sn.z=Kn/Yn,Ze.push(sn)}xe.push(Ye),he.push(Ze)}return[xe,he]}(f,D,M,E);return function(j,W,ee){let le=1/0;Dl(ee,W)&&(le=Nv(ee,W[0]));for(let xe=0;xe<W.length;xe++){const he=W[xe],ge=j[xe];for(let ke=0;ke<he.length-1;ke++){const Fe=he[ke],it=[Fe,he[ke+1],ge[ke+1],ge[ke],Fe];cc(ee,it)&&(le=Math.min(le,Nv(ee,it)))}}return le!==1/0&&le}(U[0],U[1],O)}}function vc(i,r){return i.x*r.x+i.y*r.y}function Nv(i,r){if(i.length===1){let a=0;const l=r[a++];let f;for(;!f||l.equals(f);)if(f=r[a++],!f)return 1/0;for(;a<r.length;a++){const v=r[a],x=i[0],w=f.sub(l),E=v.sub(l),T=x.sub(l),M=vc(w,w),D=vc(w,E),O=vc(E,E),U=vc(T,w),j=vc(T,E),W=M*O-D*D,ee=(O*U-D*j)/W,le=(M*j-D*U)/W,xe=l.z*(1-ee-le)+f.z*ee+v.z*le;if(isFinite(xe))return xe}return 1/0}{let a=1/0;for(const l of r)a=Math.min(a,l.z);return a}}const qE=Ur([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:WE}=qE,KE=Ur([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:YE}=KE,XE=Is.VectorTileFeature.types,JE=Math.cos(Math.PI/180*37.5),$v=Math.pow(2,14)/.5;class rm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new K,this.layoutVertexArray2=new fe,this.indexArray=new Ne,this.programConfigurations=new fn(r.layers,r.zoom),this.segments=new vt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,l){this.hasPattern=Xp("line",this.layers,a);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:w,id:E,index:T,sourceLayerIndex:M}of r){const D=this.layers[0]._featureFilter.needGeometry,O=Qa(w,D);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),O,l))continue;const U=v?f.evaluate(O,{},l):void 0,j={id:E,properties:w.properties,type:w.type,sourceLayerIndex:M,index:T,geometry:D?O.geometry:Ja(w),patterns:{},sortKey:U};x.push(j)}v&&x.sort((w,E)=>w.sortKey-E.sortKey);for(const w of x){const{geometry:E,index:T,sourceLayerIndex:M}=w;if(this.hasPattern){const D=Jp("line",this.layers,w,this.zoom,a);this.patternFeatures.push(D)}else this.addFeature(w,E,T,l,{});a.featureIndex.insert(r[T].feature,E,T,M,this.index)}}update(r,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,l)}addFeatures(r,a,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,YE)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,WE),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,l,f,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(r,{}),E=x.get("line-cap"),T=x.get("line-miter-limit"),M=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const D of a)this.addLine(D,r,w,E,T,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,v,f)}addLine(r,a,l,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<r.length-1;le++)this.totalDistance+=r[le].dist(r[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=XE[a.type]==="Polygon";let E=r.length;for(;E>=2&&r[E-1].equals(r[E-2]);)E--;let T=0;for(;T<E-1&&r[T].equals(r[T+1]);)T++;if(E<(w?3:2))return;l==="bevel"&&(v=1.05);const M=this.overscaling<=16?15*Ir/(512*this.overscaling):0,D=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let O,U,j,W,ee;this.e1=this.e2=-1,w&&(O=r[E-2],ee=r[T].sub(O)._unit()._perp());for(let le=T;le<E;le++){if(j=le===E-1?w?r[T+1]:void 0:r[le+1],j&&r[le].equals(j))continue;ee&&(W=ee),O&&(U=O),O=r[le],ee=j?j.sub(O)._unit()._perp():W,W=W||ee;let xe=W.add(ee);xe.x===0&&xe.y===0||xe._unit();const he=W.x*ee.x+W.y*ee.y,ge=xe.x*ee.x+xe.y*ee.y,ke=ge!==0?1/ge:1/0,Fe=2*Math.sqrt(2-2*ge),it=ge<JE&&U&&j,ct=W.x*ee.y-W.y*ee.x>0;if(it&&le>T){const We=O.dist(U);if(We>2*M){const lt=O.sub(O.sub(U)._mult(M/We)._round());this.updateDistance(U,lt),this.addCurrentVertex(lt,W,0,0,D),U=lt}}const nt=U&&j;let Qe=nt?l:w?"butt":f;if(nt&&Qe==="round"&&(ke<x?Qe="miter":ke<=2&&(Qe="fakeround")),Qe==="miter"&&ke>v&&(Qe="bevel"),Qe==="bevel"&&(ke>2&&(Qe="flipbevel"),ke<v&&(Qe="miter")),U&&this.updateDistance(U,O),Qe==="miter")xe._mult(ke),this.addCurrentVertex(O,xe,0,0,D);else if(Qe==="flipbevel"){if(ke>100)xe=ee.mult(-1);else{const We=ke*W.add(ee).mag()/W.sub(ee).mag();xe._perp()._mult(We*(ct?-1:1))}this.addCurrentVertex(O,xe,0,0,D),this.addCurrentVertex(O,xe.mult(-1),0,0,D)}else if(Qe==="bevel"||Qe==="fakeround"){const We=-Math.sqrt(ke*ke-1),lt=ct?We:0,Ye=ct?0:We;if(U&&this.addCurrentVertex(O,W,lt,Ye,D),Qe==="fakeround"){const Ze=Math.round(180*Fe/Math.PI/20);for(let gt=1;gt<Ze;gt++){let dt=gt/Ze;if(dt!==.5){const fr=dt-.5;dt+=dt*fr*(dt-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*fr*fr+(.848013+he*(.215638*he-1.06021)))}const Ft=ee.sub(W)._mult(dt)._add(W)._unit()._mult(ct?-1:1);this.addHalfVertex(O,Ft.x,Ft.y,!1,ct,0,D)}}j&&this.addCurrentVertex(O,ee,-lt,-Ye,D)}else if(Qe==="butt")this.addCurrentVertex(O,xe,0,0,D);else if(Qe==="square"){const We=U?1:-1;this.addCurrentVertex(O,xe,We,We,D)}else Qe==="round"&&(U&&(this.addCurrentVertex(O,W,0,0,D),this.addCurrentVertex(O,W,1,1,D,!0)),j&&(this.addCurrentVertex(O,ee,-1,-1,D,!0),this.addCurrentVertex(O,ee,0,0,D)));if(it&&le<E-1){const We=O.dist(j);if(We>2*M){const lt=O.add(j.sub(O)._mult(M/We)._round());this.updateDistance(O,lt),this.addCurrentVertex(lt,ee,0,0,D),O=lt}}}}addCurrentVertex(r,a,l,f,v,x=!1){const w=a.y*f-a.x,E=-a.y-a.x*f;this.addHalfVertex(r,a.x+a.y*l,a.y-a.x*l,x,!1,l,v),this.addHalfVertex(r,w,E,x,!0,-f,v),this.distance>$v/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,a,l,f,v,x))}addHalfVertex({x:r,y:a},l,f,v,x,w,E){const T=.5*(this.lineClips?this.scaledDistance*($v-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*l)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),x?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}}let Uv,Vv;st("LineBucket",rm,{omit:["layers","patternFeatures"]});var jv={get paint(){return Vv=Vv||new Ln({"line-opacity":new xt(Ie.paint_line["line-opacity"]),"line-color":new xt(Ie.paint_line["line-color"]),"line-translate":new ht(Ie.paint_line["line-translate"]),"line-translate-anchor":new ht(Ie.paint_line["line-translate-anchor"]),"line-width":new xt(Ie.paint_line["line-width"]),"line-gap-width":new xt(Ie.paint_line["line-gap-width"]),"line-offset":new xt(Ie.paint_line["line-offset"]),"line-blur":new xt(Ie.paint_line["line-blur"]),"line-dasharray":new Yu(Ie.paint_line["line-dasharray"]),"line-pattern":new Es(Ie.paint_line["line-pattern"]),"line-gradient":new Xu(Ie.paint_line["line-gradient"])})},get layout(){return Uv=Uv||new Ln({"line-cap":new ht(Ie.layout_line["line-cap"]),"line-join":new xt(Ie.layout_line["line-join"]),"line-miter-limit":new ht(Ie.layout_line["line-miter-limit"]),"line-round-limit":new ht(Ie.layout_line["line-round-limit"]),"line-sort-key":new xt(Ie.layout_line["line-sort-key"])})}};class QE extends xt{possiblyEvaluate(r,a){return a=new cr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(r,a)}evaluate(r,a,l,f){return a=Te({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(r,a,l,f)}}let Cd;class eA extends zi{constructor(r){super(r,jv),this.gradientVersion=0,Cd||(Cd=new QE(jv.paint.properties["line-width"].specification),Cd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof ho,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,a){super.recalculate(r,a),this.paint._values["line-floorwidth"]=Cd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new rm(r)}queryRadius(r){const a=r,l=Zv(hc("line-width",this,a),hc("line-gap-width",this,a)),f=hc("line-offset",this,a);return l/2+Math.abs(f)+vd(this.paint.get("line-translate"))}queryIntersectsFeature(r,a,l,f,v,x,w){const E=xd(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),T=w/2*Zv(this.paint.get("line-width").evaluate(a,l),this.paint.get("line-gap-width").evaluate(a,l)),M=this.paint.get("line-offset").evaluate(a,l);return M&&(f=function(D,O){const U=[];for(let j=0;j<D.length;j++){const W=D[j],ee=[];for(let le=0;le<W.length;le++){const xe=W[le-1],he=W[le],ge=W[le+1],ke=le===0?new R(0,0):he.sub(xe)._unit()._perp(),Fe=le===W.length-1?new R(0,0):ge.sub(he)._unit()._perp(),it=ke._add(Fe)._unit(),ct=it.x*Fe.x+it.y*Fe.y;ct!==0&&it._mult(1/ct),ee.push(it._mult(O)._add(he))}U.push(ee)}return U}(f,M*w)),function(D,O,U){for(let j=0;j<O.length;j++){const W=O[j];if(D.length>=3){for(let ee=0;ee<W.length;ee++)if(Ll(D,W[ee]))return!0}if(_d(D,W,U))return!0}return!1}(E,f,T)}isTileClipped(){return!0}}function Zv(i,r){return r>0?r+2*i:i}const tA=Ur([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rA=Ur([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ur([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nA=Ur([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ur([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Hv=Ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iA=Ur([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function aA(i,r,a){return i.sections.forEach(l=>{l.text=function(f,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),Wa.applyArabicShaping&&(f=Wa.applyArabicShaping(f)),f}(l.text,r,a)}),i}Ur([{name:"triangle",components:3,type:"Uint16"}]),Ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ur([{type:"Float32",name:"offsetX"}]),Ur([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ur([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const xc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var rn=24,Gv=tr,qv=function(i,r,a,l,f){var v,x,w=8*f-l-1,E=(1<<w)-1,T=E>>1,M=-7,D=a?f-1:0,O=a?-1:1,U=i[r+D];for(D+=O,v=U&(1<<-M)-1,U>>=-M,M+=w;M>0;v=256*v+i[r+D],D+=O,M-=8);for(x=v&(1<<-M)-1,v>>=-M,M+=l;M>0;x=256*x+i[r+D],D+=O,M-=8);if(v===0)v=1-T;else{if(v===E)return x?NaN:1/0*(U?-1:1);x+=Math.pow(2,l),v-=T}return(U?-1:1)*x*Math.pow(2,v-l)},Wv=function(i,r,a,l,f,v){var x,w,E,T=8*v-f-1,M=(1<<T)-1,D=M>>1,O=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=l?0:v-1,j=l?1:-1,W=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,x=M):(x=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-x))<1&&(x--,E*=2),(r+=x+D>=1?O/E:O*Math.pow(2,1-D))*E>=2&&(x++,E/=2),x+D>=M?(w=0,x=M):x+D>=1?(w=(r*E-1)*Math.pow(2,f),x+=D):(w=r*Math.pow(2,D-1)*Math.pow(2,f),x=0));f>=8;i[a+U]=255&w,U+=j,w/=256,f-=8);for(x=x<<f|w,T+=f;T>0;i[a+U]=255&x,U+=j,x/=256,T-=8);i[a+U-j]|=128*W};function tr(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}tr.Varint=0,tr.Fixed64=1,tr.Bytes=2,tr.Fixed32=5;var nm=4294967296,Kv=1/nm,Yv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function es(i){return i.type===tr.Bytes?i.readVarint()+i.pos:i.pos+1}function Ol(i,r,a){return a?4294967296*r+(i>>>0):4294967296*(r>>>0)+(i>>>0)}function Xv(i,r,a){var l=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(l);for(var f=a.pos-1;f>=i;f--)a.buf[f+l]=a.buf[f]}function sA(i,r){for(var a=0;a<i.length;a++)r.writeVarint(i[a])}function oA(i,r){for(var a=0;a<i.length;a++)r.writeSVarint(i[a])}function lA(i,r){for(var a=0;a<i.length;a++)r.writeFloat(i[a])}function uA(i,r){for(var a=0;a<i.length;a++)r.writeDouble(i[a])}function cA(i,r){for(var a=0;a<i.length;a++)r.writeBoolean(i[a])}function hA(i,r){for(var a=0;a<i.length;a++)r.writeFixed32(i[a])}function dA(i,r){for(var a=0;a<i.length;a++)r.writeSFixed32(i[a])}function fA(i,r){for(var a=0;a<i.length;a++)r.writeFixed64(i[a])}function pA(i,r){for(var a=0;a<i.length;a++)r.writeSFixed64(i[a])}function Td(i,r){return(i[r]|i[r+1]<<8|i[r+2]<<16)+16777216*i[r+3]}function Nl(i,r,a){i[a]=r,i[a+1]=r>>>8,i[a+2]=r>>>16,i[a+3]=r>>>24}function Jv(i,r){return(i[r]|i[r+1]<<8|i[r+2]<<16)+(i[r+3]<<24)}tr.prototype={destroy:function(){this.buf=null},readFields:function(i,r,a){for(a=a||this.length;this.pos<a;){var l=this.readVarint(),f=l>>3,v=this.pos;this.type=7&l,i(f,r,this),this.pos===v&&this.skip(l)}return r},readMessage:function(i,r){return this.readFields(i,r,this.readVarint()+this.pos)},readFixed32:function(){var i=Td(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Jv(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Td(this.buf,this.pos)+Td(this.buf,this.pos+4)*nm;return this.pos+=8,i},readSFixed64:function(){var i=Td(this.buf,this.pos)+Jv(this.buf,this.pos+4)*nm;return this.pos+=8,i},readFloat:function(){var i=qv(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=qv(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var r,a,l=this.buf;return r=127&(a=l[this.pos++]),a<128?r:(r|=(127&(a=l[this.pos++]))<<7,a<128?r:(r|=(127&(a=l[this.pos++]))<<14,a<128?r:(r|=(127&(a=l[this.pos++]))<<21,a<128?r:function(f,v,x){var w,E,T=x.buf;if(w=(112&(E=T[x.pos++]))>>4,E<128||(w|=(127&(E=T[x.pos++]))<<3,E<128)||(w|=(127&(E=T[x.pos++]))<<10,E<128)||(w|=(127&(E=T[x.pos++]))<<17,E<128)||(w|=(127&(E=T[x.pos++]))<<24,E<128)||(w|=(1&(E=T[x.pos++]))<<31,E<128))return Ol(f,w,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(a=l[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,r=this.pos;return this.pos=i,i-r>=12&&Yv?function(a,l,f){return Yv.decode(a.subarray(l,f))}(this.buf,r,i):function(a,l,f){for(var v="",x=l;x<f;){var w,E,T,M=a[x],D=null,O=M>239?4:M>223?3:M>191?2:1;if(x+O>f)break;O===1?M<128&&(D=M):O===2?(192&(w=a[x+1]))==128&&(D=(31&M)<<6|63&w)<=127&&(D=null):O===3?(E=a[x+2],(192&(w=a[x+1]))==128&&(192&E)==128&&((D=(15&M)<<12|(63&w)<<6|63&E)<=2047||D>=55296&&D<=57343)&&(D=null)):O===4&&(E=a[x+2],T=a[x+3],(192&(w=a[x+1]))==128&&(192&E)==128&&(192&T)==128&&((D=(15&M)<<18|(63&w)<<12|(63&E)<<6|63&T)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,O=1):D>65535&&(D-=65536,v+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),v+=String.fromCharCode(D),x+=O}return v}(this.buf,r,i)},readBytes:function(){var i=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,i);return this.pos=i,r},readPackedVarint:function(i,r){if(this.type!==tr.Bytes)return i.push(this.readVarint(r));var a=es(this);for(i=i||[];this.pos<a;)i.push(this.readVarint(r));return i},readPackedSVarint:function(i){if(this.type!==tr.Bytes)return i.push(this.readSVarint());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==tr.Bytes)return i.push(this.readBoolean());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==tr.Bytes)return i.push(this.readFloat());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==tr.Bytes)return i.push(this.readDouble());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==tr.Bytes)return i.push(this.readFixed32());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==tr.Bytes)return i.push(this.readSFixed32());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==tr.Bytes)return i.push(this.readFixed64());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==tr.Bytes)return i.push(this.readSFixed64());var r=es(this);for(i=i||[];this.pos<r;)i.push(this.readSFixed64());return i},skip:function(i){var r=7&i;if(r===tr.Varint)for(;this.buf[this.pos++]>127;);else if(r===tr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===tr.Fixed32)this.pos+=4;else{if(r!==tr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(i,r){this.writeVarint(i<<3|r)},realloc:function(i){for(var r=this.length||16;r<this.pos+i;)r*=2;if(r!==this.length){var a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Nl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Nl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Nl(this.buf,-1&i,this.pos),Nl(this.buf,Math.floor(i*Kv),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Nl(this.buf,-1&i,this.pos),Nl(this.buf,Math.floor(i*Kv),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(r,a){var l,f;if(r>=0?(l=r%4294967296|0,f=r/4294967296|0):(f=~(-r/4294967296),4294967295^(l=~(-r%4294967296))?l=l+1|0:(l=0,f=f+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(l,0,a),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,a)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var r=this.pos;this.pos=function(l,f,v){for(var x,w,E=0;E<f.length;E++){if((x=f.charCodeAt(E))>55295&&x<57344){if(!w){x>56319||E+1===f.length?(l[v++]=239,l[v++]=191,l[v++]=189):w=x;continue}if(x<56320){l[v++]=239,l[v++]=191,l[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(l[v++]=239,l[v++]=191,l[v++]=189,w=null);x<128?l[v++]=x:(x<2048?l[v++]=x>>6|192:(x<65536?l[v++]=x>>12|224:(l[v++]=x>>18|240,l[v++]=x>>12&63|128),l[v++]=x>>6&63|128),l[v++]=63&x|128)}return v}(this.buf,i,this.pos);var a=this.pos-r;a>=128&&Xv(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeFloat:function(i){this.realloc(4),Wv(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Wv(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var r=i.length;this.writeVarint(r),this.realloc(r);for(var a=0;a<r;a++)this.buf[this.pos++]=i[a]},writeRawMessage:function(i,r){this.pos++;var a=this.pos;i(r,this);var l=this.pos-a;l>=128&&Xv(a,l,this),this.pos=a-1,this.writeVarint(l),this.pos+=l},writeMessage:function(i,r,a){this.writeTag(i,tr.Bytes),this.writeRawMessage(r,a)},writePackedVarint:function(i,r){r.length&&this.writeMessage(i,sA,r)},writePackedSVarint:function(i,r){r.length&&this.writeMessage(i,oA,r)},writePackedBoolean:function(i,r){r.length&&this.writeMessage(i,cA,r)},writePackedFloat:function(i,r){r.length&&this.writeMessage(i,lA,r)},writePackedDouble:function(i,r){r.length&&this.writeMessage(i,uA,r)},writePackedFixed32:function(i,r){r.length&&this.writeMessage(i,hA,r)},writePackedSFixed32:function(i,r){r.length&&this.writeMessage(i,dA,r)},writePackedFixed64:function(i,r){r.length&&this.writeMessage(i,fA,r)},writePackedSFixed64:function(i,r){r.length&&this.writeMessage(i,pA,r)},writeBytesField:function(i,r){this.writeTag(i,tr.Bytes),this.writeBytes(r)},writeFixed32Field:function(i,r){this.writeTag(i,tr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(i,r){this.writeTag(i,tr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(i,r){this.writeTag(i,tr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(i,r){this.writeTag(i,tr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(i,r){this.writeTag(i,tr.Varint),this.writeVarint(r)},writeSVarintField:function(i,r){this.writeTag(i,tr.Varint),this.writeSVarint(r)},writeStringField:function(i,r){this.writeTag(i,tr.Bytes),this.writeString(r)},writeFloatField:function(i,r){this.writeTag(i,tr.Fixed32),this.writeFloat(r)},writeDoubleField:function(i,r){this.writeTag(i,tr.Fixed64),this.writeDouble(r)},writeBooleanField:function(i,r){this.writeVarintField(i,!!r)}};var im=S(Gv);const am=3;function mA(i,r,a){i===1&&a.readMessage(gA,r)}function gA(i,r,a){if(i===3){const{id:l,bitmap:f,width:v,height:x,left:w,top:E,advance:T}=a.readMessage(yA,{});r.push({id:l,bitmap:new fc({width:v+2*am,height:x+2*am},f),metrics:{width:v,height:x,left:w,top:E,advance:T}})}}function yA(i,r,a){i===1?r.id=a.readVarint():i===2?r.bitmap=a.readBytes():i===3?r.width=a.readVarint():i===4?r.height=a.readVarint():i===5?r.left=a.readSVarint():i===6?r.top=a.readSVarint():i===7&&(r.advance=a.readVarint())}const Qv=am;function ex(i){let r=0,a=0;for(const x of i)r+=x.w*x.h,a=Math.max(a,x.w);i.sort((x,w)=>w.h-x.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let f=0,v=0;for(const x of i)for(let w=l.length-1;w>=0;w--){const E=l[w];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===E.w&&x.h===E.h){const T=l.pop();w<l.length&&(l[w]=T)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(l.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:f,h:v,fill:r/(f*v)||0}}const ai=1;class sm{constructor(r,{pixelRatio:a,version:l,stretchX:f,stretchY:v,content:x}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=f,this.stretchY=v,this.content=x,this.version=l}get tl(){return[this.paddedRect.x+ai,this.paddedRect.y+ai]}get br(){return[this.paddedRect.x+this.paddedRect.w-ai,this.paddedRect.y+this.paddedRect.h-ai]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ai)/this.pixelRatio,(this.paddedRect.h-2*ai)/this.pixelRatio]}}class tx{constructor(r,a){const l={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,l,v),this.addImages(a,f,v);const{w:x,h:w}=ex(v),E=new Fi({width:x||1,height:w||1});for(const T in r){const M=r[T],D=l[T].paddedRect;Fi.copy(M.data,E,{x:0,y:0},{x:D.x+ai,y:D.y+ai},M.data)}for(const T in a){const M=a[T],D=f[T].paddedRect,O=D.x+ai,U=D.y+ai,j=M.data.width,W=M.data.height;Fi.copy(M.data,E,{x:0,y:0},{x:O,y:U},M.data),Fi.copy(M.data,E,{x:0,y:W-1},{x:O,y:U-1},{width:j,height:1}),Fi.copy(M.data,E,{x:0,y:0},{x:O,y:U+W},{width:j,height:1}),Fi.copy(M.data,E,{x:j-1,y:0},{x:O-1,y:U},{width:1,height:W}),Fi.copy(M.data,E,{x:0,y:0},{x:O+j,y:U},{width:1,height:W})}this.image=E,this.iconPositions=l,this.patternPositions=f}addImages(r,a,l){for(const f in r){const v=r[f],x={x:0,y:0,w:v.data.width+2*ai,h:v.data.height+2*ai};l.push(x),a[f]=new sm(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(r,a){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in r.updatedImages)this.patchUpdatedImage(this.iconPositions[l],r.getImage(l),a),this.patchUpdatedImage(this.patternPositions[l],r.getImage(l),a)}patchUpdatedImage(r,a,l){if(!r||!a||r.version===a.version)return;r.version=a.version;const[f,v]=r.tl;l.update(a.data,void 0,{x:f,y:v})}}var Ps;st("ImagePosition",sm),st("ImageAtlas",tx),p.ah=void 0,(Ps=p.ah||(p.ah={}))[Ps.none=0]="none",Ps[Ps.horizontal=1]="horizontal",Ps[Ps.vertical=2]="vertical",Ps[Ps.horizontalOnly=3]="horizontalOnly";const wc=-17;class bc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,a){const l=new bc;return l.scale=r||1,l.fontStack=a,l}static forImage(r){const a=new bc;return a.imageName=r,a}}class $l{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,a){const l=new $l;for(let f=0;f<r.sections.length;f++){const v=r.sections[f];v.image?l.addImageSection(v):l.addTextSection(v,a)}return l}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let a="";for(let l=0;l<r.length;l++){const f=r.charCodeAt(l+1)||null,v=r.charCodeAt(l-1)||null;a+=f&&Cl(f)&&!xc[r[l+1]]||v&&Cl(v)&&!xc[r[l-1]]||!xc[r[l]]?r[l]:xc[r[l]]}return a}(this.text)}trim(){let r=0;for(let l=0;l<this.text.length&&Pd[this.text.charCodeAt(l)];l++)r++;let a=this.text.length;for(let l=this.text.length-1;l>=0&&l>=r&&Pd[this.text.charCodeAt(l)];l--)a--;this.text=this.text.substring(r,a),this.sectionIndex=this.sectionIndex.slice(r,a)}substring(r,a){const l=new $l;return l.text=this.text.substring(r,a),l.sectionIndex=this.sectionIndex.slice(r,a),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,a)=>Math.max(r,this.sections[a].scale),0)}addTextSection(r,a){this.text+=r.text,this.sections.push(bc.forText(r.scale,r.fontStack||a));const l=this.sections.length-1;for(let f=0;f<r.text.length;++f)this.sectionIndex.push(l)}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void Gt("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(bc.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Gt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Id(i,r,a,l,f,v,x,w,E,T,M,D,O,U,j,W){const ee=$l.fromFeature(i,f);let le;D===p.ah.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:xe,processStyledBidirectionalText:he}=Wa;if(xe&&ee.sections.length===1){le=[];const Fe=xe(ee.toString(),om(ee,T,v,r,l,U,j));for(const it of Fe){const ct=new $l;ct.text=it,ct.sections=ee.sections;for(let nt=0;nt<it.length;nt++)ct.sectionIndex.push(0);le.push(ct)}}else if(he){le=[];const Fe=he(ee.text,ee.sectionIndex,om(ee,T,v,r,l,U,j));for(const it of Fe){const ct=new $l;ct.text=it[0],ct.sectionIndex=it[1],ct.sections=ee.sections,le.push(ct)}}else le=function(Fe,it){const ct=[],nt=Fe.text;let Qe=0;for(const We of it)ct.push(Fe.substring(Qe,We)),Qe=We;return Qe<nt.length&&ct.push(Fe.substring(Qe,nt.length)),ct}(ee,om(ee,T,v,r,l,U,j));const ge=[],ke={positionedLines:ge,text:ee.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Fe,it,ct,nt,Qe,We,lt,Ye,Ze,gt,dt,Ft){let fr=0,mr=wc,nn=0,Si=0;const Wn=Ye==="right"?1:Ye==="left"?0:.5;let Yr=0;for(const an of Qe){an.trim();const sn=an.getMaxScale(),Bn=(sn-1)*rn,Xn={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[Yr]=Xn;const On=Xn.positionedGlyphs;let si=0;if(!an.length()){mr+=We,++Yr;continue}for(let on=0;on<an.length();on++){const Zt=an.getSection(on),Nn=an.getSectionIndex(on),Cn=an.getCharCode(on);let ln=0,Ji=null,da=null,fa=null,ts=rn;const Qi=!(Ze===p.ah.horizontal||!dt&&!Al(Cn)||dt&&(Pd[Cn]||(yn=Cn,tt.Arabic(yn)||tt["Arabic Supplement"](yn)||tt["Arabic Extended-A"](yn)||tt["Arabic Presentation Forms-A"](yn)||tt["Arabic Presentation Forms-B"](yn))));if(Zt.imageName){const Oi=nt[Zt.imageName];if(!Oi)continue;fa=Zt.imageName,Fe.iconsInText=Fe.iconsInText||!0,da=Oi.paddedRect;const li=Oi.displaySize;Zt.scale=Zt.scale*rn/Ft,Ji={width:li[0],height:li[1],left:ai,top:-Qv,advance:Qi?li[1]:li[0]},ln=Bn+(rn-li[1]*Zt.scale),ts=Ji.advance;const rs=Qi?li[0]*Zt.scale-rn*sn:li[1]*Zt.scale-rn*sn;rs>0&&rs>si&&(si=rs)}else{const Oi=ct[Zt.fontStack],li=Oi&&Oi[Cn];if(li&&li.rect)da=li.rect,Ji=li.metrics;else{const rs=it[Zt.fontStack],Tc=rs&&rs[Cn];if(!Tc)continue;Ji=Tc.metrics}ln=(sn-Zt.scale)*rn}Qi?(Fe.verticalizable=!0,On.push({glyph:Cn,imageName:fa,x:fr,y:mr+ln,vertical:Qi,scale:Zt.scale,fontStack:Zt.fontStack,sectionIndex:Nn,metrics:Ji,rect:da}),fr+=ts*Zt.scale+gt):(On.push({glyph:Cn,imageName:fa,x:fr,y:mr+ln,vertical:Qi,scale:Zt.scale,fontStack:Zt.fontStack,sectionIndex:Nn,metrics:Ji,rect:da}),fr+=Ji.advance*Zt.scale+gt)}On.length!==0&&(nn=Math.max(fr-gt,nn),xA(On,0,On.length-1,Wn,si)),fr=0;const oi=We*sn+si;Xn.lineOffset=Math.max(si,Bn),mr+=oi,Si=Math.max(oi,Si),++Yr}var yn;const An=mr-wc,{horizontalAlign:Kn,verticalAlign:Yn}=lm(lt);(function(an,sn,Bn,Xn,On,si,oi,on,Zt){const Nn=(sn-Bn)*On;let Cn=0;Cn=si!==oi?-on*Xn-wc:(-Xn*Zt+.5)*oi;for(const ln of an)for(const Ji of ln.positionedGlyphs)Ji.x+=Nn,Ji.y+=Cn})(Fe.positionedLines,Wn,Kn,Yn,nn,Si,We,An,Qe.length),Fe.top+=-Yn*An,Fe.bottom=Fe.top+An,Fe.left+=-Kn*nn,Fe.right=Fe.left+nn}(ke,r,a,l,le,x,w,E,D,T,O,W),!function(Fe){for(const it of Fe)if(it.positionedGlyphs.length!==0)return!1;return!0}(ge)&&ke}const Pd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_A={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function rx(i,r,a,l,f,v){if(r.imageName){const x=l[r.imageName];return x?x.displaySize[0]*r.scale*rn/v+f:0}{const x=a[r.fontStack],w=x&&x[i];return w?w.metrics.advance*r.scale+f:0}}function nx(i,r,a,l){const f=Math.pow(i-r,2);return l?i<r?f/2:2*f:f+Math.abs(a)*a}function vA(i,r,a){let l=0;return i===10&&(l-=1e4),a&&(l+=150),i!==40&&i!==65288||(l+=50),r!==41&&r!==65289||(l+=50),l}function ix(i,r,a,l,f,v){let x=null,w=nx(r,a,f,v);for(const E of l){const T=nx(r-E.x,a,f,v)+E.badness;T<=w&&(x=E,w=T)}return{index:i,x:r,priorBreak:x,badness:w}}function ax(i){return i?ax(i.priorBreak).concat(i.index):[]}function om(i,r,a,l,f,v,x){if(v!=="point")return[];if(!i)return[];const w=[],E=function(O,U,j,W,ee,le){let xe=0;for(let he=0;he<O.length();he++){const ge=O.getSection(he);xe+=rx(O.getCharCode(he),ge,W,ee,U,le)}return xe/Math.max(1,Math.ceil(xe/j))}(i,r,a,l,f,x),T=i.text.indexOf("​")>=0;let M=0;for(let O=0;O<i.length();O++){const U=i.getSection(O),j=i.getCharCode(O);if(Pd[j]||(M+=rx(j,U,l,f,r,x)),O<i.length()-1){const W=!((D=j)<11904||!(tt["Bopomofo Extended"](D)||tt.Bopomofo(D)||tt["CJK Compatibility Forms"](D)||tt["CJK Compatibility Ideographs"](D)||tt["CJK Compatibility"](D)||tt["CJK Radicals Supplement"](D)||tt["CJK Strokes"](D)||tt["CJK Symbols and Punctuation"](D)||tt["CJK Unified Ideographs Extension A"](D)||tt["CJK Unified Ideographs"](D)||tt["Enclosed CJK Letters and Months"](D)||tt["Halfwidth and Fullwidth Forms"](D)||tt.Hiragana(D)||tt["Ideographic Description Characters"](D)||tt["Kangxi Radicals"](D)||tt["Katakana Phonetic Extensions"](D)||tt.Katakana(D)||tt["Vertical Forms"](D)||tt["Yi Radicals"](D)||tt["Yi Syllables"](D)));(_A[j]||W||U.imageName)&&w.push(ix(O+1,M,E,w,vA(j,i.getCharCode(O+1),W&&T),!1))}}var D;return ax(ix(i.length(),M,E,w,0,!0))}function lm(i){let r=.5,a=.5;switch(i){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function xA(i,r,a,l,f){if(!l&&!f)return;const v=i[a],x=(i[a].x+v.metrics.advance*v.scale)*l;for(let w=r;w<=a;w++)i[w].x-=x,i[w].y+=f}function wA(i,r,a){const{horizontalAlign:l,verticalAlign:f}=lm(a),v=r[0]-i.displaySize[0]*l,x=r[1]-i.displaySize[1]*f;return{image:i,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function sx(i,r,a,l,f,v){const x=i.image;let w;if(x.content){const ee=x.content,le=x.pixelRatio||1;w=[ee[0]/le,ee[1]/le,x.displaySize[0]-ee[2]/le,x.displaySize[1]-ee[3]/le]}const E=r.left*v,T=r.right*v;let M,D,O,U;a==="width"||a==="both"?(U=f[0]+E-l[3],D=f[0]+T+l[1]):(U=f[0]+(E+T-x.displaySize[0])/2,D=U+x.displaySize[0]);const j=r.top*v,W=r.bottom*v;return a==="height"||a==="both"?(M=f[1]+j-l[0],O=f[1]+W+l[2]):(M=f[1]+(j+W-x.displaySize[1])/2,O=M+x.displaySize[1]),{image:x,top:M,right:D,bottom:O,left:U,collisionPadding:w}}const Sc=255,La=128,Ms=Sc*La;function ox(i,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new cr(i+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:f}=a;let v=0;for(;v<l.length&&l[v]<=i;)v++;v=Math.max(0,v-1);let x=v;for(;x<l.length&&l[x]<i+1;)x++;x=Math.min(l.length-1,x);const w=l[v],E=l[x];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:E,minSize:a.evaluate(new cr(w)),maxSize:a.evaluate(new cr(E)),interpolationType:f}}}function um(i,r,a){let l="never";const f=i.get(r);return f?l=f:i.get(a)&&(l="always"),l}const bA=Is.VectorTileFeature.types,SA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Md(i,r,a,l,f,v,x,w,E,T,M,D,O){const U=w?Math.min(Ms,Math.round(w[0])):0,j=w?Math.min(Ms,Math.round(w[1])):0;i.emplaceBack(r,a,Math.round(32*l),Math.round(32*f),v,x,(U<<1)+(E?1:0),j,16*T,16*M,256*D,256*O)}function cm(i,r,a){i.emplaceBack(r.x,r.y,a),i.emplaceBack(r.x,r.y,a),i.emplaceBack(r.x,r.y,a),i.emplaceBack(r.x,r.y,a)}function EA(i){for(const r of i.sections)if(cd(r.text))return!0;return!1}class hm{constructor(r){this.layoutVertexArray=new se,this.indexArray=new Ne,this.programConfigurations=r,this.segments=new vt,this.dynamicLayoutVertexArray=new ye,this.opacityVertexArray=new Ce,this.hasVisibleVertices=!1,this.placedSymbolArray=new h}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,l,f){this.isEmpty()||(l&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,tA.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,rA.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,SA,!0),this.opacityVertexBuffer.itemSize=1),(l||f)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}st("SymbolBuffers",hm);class dm{constructor(r,a,l){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new l,this.segments=new vt,this.collisionVertexArray=new De}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,nA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}st("CollisionBuffers",dm);class Ul{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jp([]),this.placementViewportMatrix=jp([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ox(this.zoom,a["text-size"]),this.iconSizeData=ox(this.zoom,a["icon-size"]);const l=this.layers[0].layout,f=l.get("symbol-sort-key"),v=l.get("symbol-z-order");this.canOverlap=um(l,"text-overlap","text-allow-overlap")!=="never"||um(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(x=>p.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new hm(new fn(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new hm(new fn(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new b,this.lineVertexArray=new A,this.symbolInstances=new _,this.textAnchorOffsets=new P}calculateGlyphDependencies(r,a,l,f,v){for(let x=0;x<r.length;x++)if(a[r.charCodeAt(x)]=!0,(l||f)&&v){const w=xc[r.charAt(x)];w&&(a[w.charCodeAt(0)]=!0)}}populate(r,a,l){const f=this.layers[0],v=f.layout,x=v.get("text-font"),w=v.get("text-field"),E=v.get("icon-image"),T=(w.value.kind!=="constant"||w.value.value instanceof gn&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),M=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,D=v.get("symbol-sort-key");if(this.features=[],!T&&!M)return;const O=a.iconDependencies,U=a.glyphDependencies,j=a.availableImages,W=new cr(this.zoom);for(const{feature:ee,id:le,index:xe,sourceLayerIndex:he}of r){const ge=f._featureFilter.needGeometry,ke=Qa(ee,ge);if(!f._featureFilter.filter(W,ke,l))continue;let Fe,it;if(ge||(ke.geometry=Ja(ee)),T){const nt=f.getValueAndResolveTokens("text-field",ke,l,j),Qe=gn.factory(nt);EA(Qe)&&(this.hasRTLText=!0),(!this.hasRTLText||Wa.getRTLTextPluginStatus()==="unavailable"||this.hasRTLText&&Wa.isParsed())&&(Fe=aA(Qe,f,ke))}if(M){const nt=f.getValueAndResolveTokens("icon-image",ke,l,j);it=nt instanceof xi?nt:xi.fromString(nt)}if(!Fe&&!it)continue;const ct=this.sortFeaturesByKey?D.evaluate(ke,{},l):void 0;if(this.features.push({id:le,text:Fe,icon:it,index:xe,sourceLayerIndex:he,geometry:ke.geometry,properties:ee.properties,type:bA[ee.type],sortKey:ct}),it&&(O[it.name]=!0),Fe){const nt=x.evaluate(ke,{},l).join(","),Qe=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ah.vertical)>=0;for(const We of Fe.sections)if(We.image)O[We.image.name]=!0;else{const lt=El(Fe.toString()),Ye=We.fontStack||nt,Ze=U[Ye]=U[Ye]||{};this.calculateGlyphDependencies(We.text,Ze,Qe,this.allowVerticalPlacement,lt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ee){const le={},xe={},he=[];let ge=0;function ke(nt){he.push(ee[nt]),ge++}function Fe(nt,Qe,We){const lt=xe[nt];return delete xe[nt],xe[Qe]=lt,he[lt].geometry[0].pop(),he[lt].geometry[0]=he[lt].geometry[0].concat(We[0]),lt}function it(nt,Qe,We){const lt=le[Qe];return delete le[Qe],le[nt]=lt,he[lt].geometry[0].shift(),he[lt].geometry[0]=We[0].concat(he[lt].geometry[0]),lt}function ct(nt,Qe,We){const lt=We?Qe[0][Qe[0].length-1]:Qe[0][0];return`${nt}:${lt.x}:${lt.y}`}for(let nt=0;nt<ee.length;nt++){const Qe=ee[nt],We=Qe.geometry,lt=Qe.text?Qe.text.toString():null;if(!lt){ke(nt);continue}const Ye=ct(lt,We),Ze=ct(lt,We,!0);if(Ye in xe&&Ze in le&&xe[Ye]!==le[Ze]){const gt=it(Ye,Ze,We),dt=Fe(Ye,Ze,he[gt].geometry);delete le[Ye],delete xe[Ze],xe[ct(lt,he[dt].geometry,!0)]=dt,he[gt].geometry=null}else Ye in xe?Fe(Ye,Ze,We):Ze in le?it(Ye,Ze,We):(ke(nt),le[Ye]=ge-1,xe[Ze]=ge-1)}return he.filter(nt=>nt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,le)=>ee.sortKey-le.sortKey)}update(r,a,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,l),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const l=this.lineVertexArray.length;if(r.segment!==void 0){let f=r.dist(a[r.segment+1]),v=r.dist(a[r.segment]);const x={};for(let w=r.segment+1;w<a.length;w++)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:f},w<a.length-1&&(f+=a[w+1].dist(a[w]));for(let w=r.segment||0;w>=0;w--)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=a[w-1].dist(a[w]));for(let w=0;w<a.length;w++){const E=x[w];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(r,a,l,f,v,x,w,E,T,M,D,O){const U=r.indexArray,j=r.layoutVertexArray,W=r.segments.prepareSegment(4*a.length,j,U,this.canOverlap?x.sortKey:void 0),ee=this.glyphOffsetArray.length,le=W.vertexLength,xe=this.allowVerticalPlacement&&w===p.ah.vertical?Math.PI/2:0,he=x.text&&x.text.sections;for(let ge=0;ge<a.length;ge++){const{tl:ke,tr:Fe,bl:it,br:ct,tex:nt,pixelOffsetTL:Qe,pixelOffsetBR:We,minFontScaleX:lt,minFontScaleY:Ye,glyphOffset:Ze,isSDF:gt,sectionIndex:dt}=a[ge],Ft=W.vertexLength,fr=Ze[1];Md(j,E.x,E.y,ke.x,fr+ke.y,nt.x,nt.y,l,gt,Qe.x,Qe.y,lt,Ye),Md(j,E.x,E.y,Fe.x,fr+Fe.y,nt.x+nt.w,nt.y,l,gt,We.x,Qe.y,lt,Ye),Md(j,E.x,E.y,it.x,fr+it.y,nt.x,nt.y+nt.h,l,gt,Qe.x,We.y,lt,Ye),Md(j,E.x,E.y,ct.x,fr+ct.y,nt.x+nt.w,nt.y+nt.h,l,gt,We.x,We.y,lt,Ye),cm(r.dynamicLayoutVertexArray,E,xe),U.emplaceBack(Ft,Ft+1,Ft+2),U.emplaceBack(Ft+1,Ft+2,Ft+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ze[0]),ge!==a.length-1&&dt===a[ge+1].sectionIndex||r.programConfigurations.populatePaintArrays(j.length,x,x.index,{},O,he&&he[dt])}r.placedSymbolArray.emplaceBack(E.x,E.y,ee,this.glyphOffsetArray.length-ee,le,T,M,E.segment,l?l[0]:0,l?l[1]:0,f[0],f[1],w,0,!1,0,D)}_addCollisionDebugVertex(r,a,l,f,v,x){return a.emplaceBack(0,0),r.emplaceBack(l.x,l.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,a,l,f,v,x,w){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),T=E.vertexLength,M=v.layoutVertexArray,D=v.collisionVertexArray,O=w.anchorX,U=w.anchorY;this._addCollisionDebugVertex(M,D,x,O,U,new R(r,a)),this._addCollisionDebugVertex(M,D,x,O,U,new R(l,a)),this._addCollisionDebugVertex(M,D,x,O,U,new R(l,f)),this._addCollisionDebugVertex(M,D,x,O,U,new R(r,f)),E.vertexLength+=4;const j=v.indexArray;j.emplaceBack(T,T+1),j.emplaceBack(T+1,T+2),j.emplaceBack(T+2,T+3),j.emplaceBack(T+3,T),E.primitiveLength+=4}addDebugCollisionBoxes(r,a,l,f){for(let v=r;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dm(Ee,Hv.members,Be),this.iconCollisionBox=new dm(Ee,Hv.members,Be);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(r,a,l,f,v,x,w,E,T){const M={};for(let D=a;D<l;D++){const O=r.get(D);M.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.textFeatureIndex=O.featureIndex;break}for(let D=f;D<v;D++){const O=r.get(D);M.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.verticalTextFeatureIndex=O.featureIndex;break}for(let D=x;D<w;D++){const O=r.get(D);M.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.iconFeatureIndex=O.featureIndex;break}for(let D=E;D<T;D++){const O=r.get(D);M.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.verticalIconFeatureIndex=O.featureIndex;break}return M}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const l=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const l=r.placedSymbolArray.get(a),f=l.vertexStartIndex+4*l.numGlyphs;for(let v=l.vertexStartIndex;v<f;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),l=Math.cos(r),f=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const E=this.symbolInstances.get(w);f.push(0|Math.round(a*E.anchorX+l*E.anchorY)),v.push(E.featureIndex)}return x.sort((w,E)=>f[w]-f[E]||v[E]-v[w]),x}addToSortKeyRanges(r,a){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===a?l.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const l=this.symbolInstances.get(a);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let lx,ux;st("SymbolBucket",Ul,{omit:["layers","collisionBoxArray","features","compareText"]}),Ul.MAX_GLYPHS=65535,Ul.addDynamicAttributes=cm;var fm={get paint(){return ux=ux||new Ln({"icon-opacity":new xt(Ie.paint_symbol["icon-opacity"]),"icon-color":new xt(Ie.paint_symbol["icon-color"]),"icon-halo-color":new xt(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new ht(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new ht(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(Ie.paint_symbol["text-opacity"]),"text-color":new xt(Ie.paint_symbol["text-color"],{runtimeType:Cr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new xt(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new xt(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(Ie.paint_symbol["text-halo-blur"]),"text-translate":new ht(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new ht(Ie.paint_symbol["text-translate-anchor"])})},get layout(){return lx=lx||new Ln({"symbol-placement":new ht(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new ht(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ht(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ht(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ht(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ht(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ht(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new ht(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ht(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(Ie.layout_symbol["icon-size"]),"icon-text-fit":new ht(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ht(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(Ie.layout_symbol["icon-image"]),"icon-rotate":new xt(Ie.layout_symbol["icon-rotate"]),"icon-padding":new xt(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new ht(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(Ie.layout_symbol["icon-offset"]),"icon-anchor":new xt(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ht(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ht(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ht(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new xt(Ie.layout_symbol["text-field"]),"text-font":new xt(Ie.layout_symbol["text-font"]),"text-size":new xt(Ie.layout_symbol["text-size"]),"text-max-width":new xt(Ie.layout_symbol["text-max-width"]),"text-line-height":new ht(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new xt(Ie.layout_symbol["text-justify"]),"text-radial-offset":new xt(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ht(Ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xt(Ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xt(Ie.layout_symbol["text-anchor"]),"text-max-angle":new ht(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new ht(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new xt(Ie.layout_symbol["text-rotate"]),"text-padding":new ht(Ie.layout_symbol["text-padding"]),"text-keep-upright":new ht(Ie.layout_symbol["text-keep-upright"]),"text-transform":new xt(Ie.layout_symbol["text-transform"]),"text-offset":new xt(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new ht(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new ht(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new ht(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new ht(Ie.layout_symbol["text-optional"])})}};class cx{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:yr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}st("FormatSectionOverride",cx,{omit:["defaultValue"]});class kd extends zi{constructor(r){super(r,fm)}recalculate(r,a){if(super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const f=[];for(const v of l)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,a,l,f){const v=this.layout.get(r).evaluate(a,{},l,f),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||rr(x.value)||!v?v:function(w,E){return E.replace(/{([^{}]+)}/g,(T,M)=>w&&M in w?String(w[M]):"")}(a.properties,v)}createBucket(r){return new Ul(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of fm.paint.overridableProperties){if(!kd.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),l=new cx(a),f=new ur(l,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new fl("source",f):new Nu("composite",f,a.value.zoomStops),this.paint._values[r]=new Li(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,l){return!(!this.layout||a.isDataDriven()||l.isDataDriven())&&kd.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const l=r.get("text-field"),f=fm.paint.properties[a];let v=!1;const x=w=>{for(const E of w)if(f.overrides&&f.overrides.hasOverride(E))return void(v=!0)};if(l.value.kind==="constant"&&l.value.value instanceof gn)x(l.value.value.sections);else if(l.value.kind==="source"){const w=T=>{v||(T instanceof Ta&&Kr(T.value)===Fr?x(T.value.sections):T instanceof hl?x(T.sections):T.eachChild(w))},E=l.value;E._styleExpression&&w(E._styleExpression.expression)}return v}}let hx;var AA={get paint(){return hx=hx||new Ln({"background-color":new ht(Ie.paint_background["background-color"]),"background-pattern":new Yu(Ie.paint_background["background-pattern"]),"background-opacity":new ht(Ie.paint_background["background-opacity"])})}};class CA extends zi{constructor(r){super(r,AA)}}let dx;var TA={get paint(){return dx=dx||new Ln({"raster-opacity":new ht(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new ht(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ht(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ht(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new ht(Ie.paint_raster["raster-saturation"]),"raster-contrast":new ht(Ie.paint_raster["raster-contrast"]),"raster-resampling":new ht(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new ht(Ie.paint_raster["raster-fade-duration"])})}};class IA extends zi{constructor(r){super(r,TA)}}class PA extends zi{constructor(r){super(r,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class MA{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const pm=63710088e-1;class ks{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ks(Pe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,l=this.lat*a,f=r.lat*a,v=Math.sin(l)*Math.sin(f)+Math.cos(l)*Math.cos(f)*Math.cos((r.lng-this.lng)*a);return pm*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof ks)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ks(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ks(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fx=2*Math.PI*pm;function px(i){return fx*Math.cos(i*Math.PI/180)}function mx(i){return(180+i)/360}function gx(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function yx(i,r){return i/px(r)}function mm(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Rd{constructor(r,a,l=0){this.x=+r,this.y=+a,this.z=+l}static fromLngLat(r,a=0){const l=ks.convert(r);return new Rd(mx(l.lng),gx(l.lat),yx(a,l.lat))}toLngLat(){return new ks(360*this.x-180,mm(this.y))}toAltitude(){return this.z*px(mm(this.y))}meterInMercatorCoordinateUnits(){return 1/fx*(r=mm(this.y),1/Math.cos(r*Math.PI/180));var r}}function _x(i,r,a){var l=2*Math.PI*6378137/256/Math.pow(2,a);return[i*l-2*Math.PI*6378137/2,r*l-2*Math.PI*6378137/2]}class gm{constructor(r,a,l){if(r<0||r>25||l<0||l>=Math.pow(2,r)||a<0||a>=Math.pow(2,r))throw new Error(`x=${a}, y=${l}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=a,this.y=l,this.key=Ec(0,r,r,a,l)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a,l){const f=(x=this.y,w=this.z,E=_x(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),T=_x(256*(v+1),256*(x+1),w),E[0]+","+E[1]+","+T[0]+","+T[1]);var v,x,w,E,T;const M=function(D,O,U){let j,W="";for(let ee=D;ee>0;ee--)j=1<<ee-1,W+=(O&j?1:0)+(U&j?2:0);return W}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,f)}isChildOf(r){const a=this.z-r.z;return a>0&&r.x===this.x>>a&&r.y===this.y>>a}getTilePoint(r){const a=Math.pow(2,this.z);return new R((r.x*a-this.x)*Ir,(r.y*a-this.y)*Ir)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vx{constructor(r,a){this.wrap=r,this.canonical=a,this.key=Ec(r,a.z,a.z,a.x,a.y)}}class Bi{constructor(r,a,l,f,v){if(r<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${l}`);this.overscaledZ=r,this.wrap=a,this.canonical=new gm(l,+f,+v),this.key=Ec(a,r,l,f,v)}clone(){return new Bi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-r;return r>this.canonical.z?new Bi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bi(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(r,a){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?Ec(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y):Ec(this.wrap*+a,r,r,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const a=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new Bi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,l=2*this.canonical.x,f=2*this.canonical.y;return[new Bi(a,this.wrap,a,l,f),new Bi(a,this.wrap,a,l+1,f),new Bi(a,this.wrap,a,l,f+1),new Bi(a,this.wrap,a,l+1,f+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Bi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Bi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Rd(r.x-this.wrap,r.y))}}function Ec(i,r,a,l,f){(i*=2)<0&&(i=-1*i-1);const v=1<<a;return(v*v*i+v*f+l).toString(36)+a.toString(36)+r.toString(36)}st("CanonicalTileID",gm),st("OverscaledTileID",Bi,{omit:["posMatrix"]});class xx{constructor(r,a,l,f=1,v=1,x=1,w=0){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void Gt(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const E=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let T=0;T<E;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(E,T)]=this.data[this._idx(E-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,E)]=this.data[this._idx(T,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<E;T++)for(let M=0;M<E;M++){const D=this.get(T,M);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(r,a){const l=new Uint8Array(this.data.buffer),f=4*this._idx(r,a);return this.unpack(l[f],l[f+1],l[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(r+1)}unpack(r,a,l){return r*this.redFactor+a*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new Fi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,a,l){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,v=a*this.dim+this.dim,x=l*this.dim,w=l*this.dim+this.dim;switch(a){case-1:f=v-1;break;case 1:v=f+1}switch(l){case-1:x=w-1;break;case 1:w=x+1}const E=-a*this.dim,T=-l*this.dim;for(let M=x;M<w;M++)for(let D=f;D<v;D++)this.data[this._idx(D,M)]=r.data[this._idx(D+E,M+T)]}}st("DEMData",xx);class wx{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const l=r[a];this._stringToNumber[l]=a,this._numberToString[a]=l}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class bx{constructor(r,a,l,f,v){this.type="Feature",this._vectorTileFeature=r,r._z=a,r._x=l,r._y=f,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(r[a]=this[a]);return r}}class Sx{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new qa(Ir,16,0),this.grid3D=new qa(Ir,16,0),this.featureIndexArray=new F,this.promoteId=a}insert(r,a,l,f,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,f,v);const E=x?this.grid3D:this.grid;for(let T=0;T<a.length;T++){const M=a[T],D=[1/0,1/0,-1/0,-1/0];for(let O=0;O<M.length;O++){const U=M[O];D[0]=Math.min(D[0],U.x),D[1]=Math.min(D[1],U.y),D[2]=Math.max(D[2],U.x),D[3]=Math.max(D[3],U.y)}D[0]<Ir&&D[1]<Ir&&D[2]>=0&&D[3]>=0&&E.insert(w,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Is.VectorTile(new im(this.rawTileData)).layers,this.sourceLayerCoder=new wx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,a,l,f){this.loadVTLayers();const v=r.params||{},x=Ir/r.tileSize/r.scale,w=yl(v.filter),E=r.queryGeometry,T=r.queryPadding*x,M=Ax(E),D=this.grid.query(M.minX-T,M.minY-T,M.maxX+T,M.maxY+T),O=Ax(r.cameraQueryGeometry),U=this.grid3D.query(O.minX-T,O.minY-T,O.maxX+T,O.maxY+T,(ee,le,xe,he)=>function(ge,ke,Fe,it,ct){for(const Qe of ge)if(ke<=Qe.x&&Fe<=Qe.y&&it>=Qe.x&&ct>=Qe.y)return!0;const nt=[new R(ke,Fe),new R(ke,ct),new R(it,ct),new R(it,Fe)];if(ge.length>2){for(const Qe of nt)if(Ll(ge,Qe))return!0}for(let Qe=0;Qe<ge.length-1;Qe++)if(lE(ge[Qe],ge[Qe+1],nt))return!0;return!1}(r.cameraQueryGeometry,ee-T,le-T,xe+T,he+T));for(const ee of U)D.push(ee);D.sort(kA);const j={};let W;for(let ee=0;ee<D.length;ee++){const le=D[ee];if(le===W)continue;W=le;const xe=this.featureIndexArray.get(le);let he=null;this.loadMatchingFeature(j,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,w,v.layers,v.availableImages,a,l,f,(ge,ke,Fe)=>(he||(he=Ja(ge)),ke.queryIntersectsFeature(E,ge,Fe,he,this.z,r.transform,x,r.pixelPosMatrix)))}return j}loadMatchingFeature(r,a,l,f,v,x,w,E,T,M,D){const O=this.bucketLayerIDs[a];if(x&&!function(ee,le){for(let xe=0;xe<ee.length;xe++)if(le.indexOf(ee[xe])>=0)return!0;return!1}(x,O))return;const U=this.sourceLayerCoder.decode(l),j=this.vtLayers[U].feature(f);if(v.needGeometry){const ee=Qa(j,!0);if(!v.filter(new cr(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!v.filter(new cr(this.tileID.overscaledZ),j))return;const W=this.getId(j,U);for(let ee=0;ee<O.length;ee++){const le=O[ee];if(x&&x.indexOf(le)<0)continue;const xe=E[le];if(!xe)continue;let he={};W&&M&&(he=M.getState(xe.sourceLayer||"_geojsonTileLayer",W));const ge=Te({},T[le]);ge.paint=Ex(ge.paint,xe.paint,j,he,w),ge.layout=Ex(ge.layout,xe.layout,j,he,w);const ke=!D||D(j,xe,he);if(!ke)continue;const Fe=new bx(j,this.z,this.x,this.y,W);Fe.layer=ge;let it=r[le];it===void 0&&(it=r[le]=[]),it.push({featureIndex:f,feature:Fe,intersectionZ:ke})}}lookupSymbolFeatures(r,a,l,f,v,x,w,E){const T={};this.loadVTLayers();const M=yl(v);for(const D of r)this.loadMatchingFeature(T,l,f,D,M,x,w,E,a);return T}hasLayer(r){for(const a of this.bucketLayerIDs)for(const l of a)if(r===l)return!0;return!1}getId(r,a){let l=r.id;return this.promoteId&&(l=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof l=="boolean"&&(l=Number(l))),l}}function Ex(i,r,a,l,f){return at(i,(v,x)=>{const w=r instanceof wo?r.get(x):null;return w&&w.evaluate?w.evaluate(a,l,f):w})}function Ax(i){let r=1/0,a=1/0,l=-1/0,f=-1/0;for(const v of i)r=Math.min(r,v.x),a=Math.min(a,v.y),l=Math.max(l,v.x),f=Math.max(f,v.y);return{minX:r,minY:a,maxX:l,maxY:f}}function kA(i,r){return r-i}function Cx(i,r,a,l,f){const v=[];for(let x=0;x<i.length;x++){const w=i[x];let E;for(let T=0;T<w.length-1;T++){let M=w[T],D=w[T+1];M.x<r&&D.x<r||(M.x<r?M=new R(r,M.y+(r-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x<r&&(D=new R(r,M.y+(r-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y<a&&D.y<a||(M.y<a?M=new R(M.x+(a-M.y)/(D.y-M.y)*(D.x-M.x),a)._round():D.y<a&&(D=new R(M.x+(a-M.y)/(D.y-M.y)*(D.x-M.x),a)._round()),M.x>=l&&D.x>=l||(M.x>=l?M=new R(l,M.y+(l-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x>=l&&(D=new R(l,M.y+(l-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y>=f&&D.y>=f||(M.y>=f?M=new R(M.x+(f-M.y)/(D.y-M.y)*(D.x-M.x),f)._round():D.y>=f&&(D=new R(M.x+(f-M.y)/(D.y-M.y)*(D.x-M.x),f)._round()),E&&M.equals(E[E.length-1])||(E=[M],v.push(E)),E.push(D)))))}}return v}st("FeatureIndex",Sx,{omit:["rawTileData","sourceLayerCoder"]});class Rs extends R{constructor(r,a,l,f){super(r,a),this.angle=l,f!==void 0&&(this.segment=f)}clone(){return new Rs(this.x,this.y,this.angle,this.segment)}}function Tx(i,r,a,l,f){if(r.segment===void 0||a===0)return!0;let v=r,x=r.segment+1,w=0;for(;w>-a/2;){if(x--,x<0)return!1;w-=i[x].dist(v),v=i[x]}w+=i[x].dist(i[x+1]),x++;const E=[];let T=0;for(;w<a/2;){const M=i[x],D=i[x+1];if(!D)return!1;let O=i[x-1].angleTo(M)-M.angleTo(D);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:w,angleDelta:O}),T+=O;w-E[0].distance>l;)T-=E.shift().angleDelta;if(T>f)return!1;x++,w+=M.dist(D)}return!0}function Ix(i){let r=0;for(let a=0;a<i.length-1;a++)r+=i[a].dist(i[a+1]);return r}function Px(i,r,a){return i?.6*r*a:0}function Mx(i,r){return Math.max(i?i.right-i.left:0,r?r.right-r.left:0)}function RA(i,r,a,l,f,v){const x=Px(a,f,v),w=Mx(a,l)*v;let E=0;const T=Ix(i)/2;for(let M=0;M<i.length-1;M++){const D=i[M],O=i[M+1],U=D.dist(O);if(E+U>T){const j=(T-E)/U,W=Rn.number(D.x,O.x,j),ee=Rn.number(D.y,O.y,j),le=new Rs(W,ee,O.angleTo(D),M);return le._round(),!x||Tx(i,le,w,x,r)?le:void 0}E+=U}}function DA(i,r,a,l,f,v,x,w,E){const T=Px(l,v,x),M=Mx(l,f),D=M*x,O=i[0].x===0||i[0].x===E||i[0].y===0||i[0].y===E;return r-D<r/4&&(r=D+r/4),kx(i,O?r/2*w%r:(M/2+2*v)*x*w%r,r,T,a,D,O,!1,E)}function kx(i,r,a,l,f,v,x,w,E){const T=v/2,M=Ix(i);let D=0,O=r-a,U=[];for(let j=0;j<i.length-1;j++){const W=i[j],ee=i[j+1],le=W.dist(ee),xe=ee.angleTo(W);for(;O+a<D+le;){O+=a;const he=(O-D)/le,ge=Rn.number(W.x,ee.x,he),ke=Rn.number(W.y,ee.y,he);if(ge>=0&&ge<E&&ke>=0&&ke<E&&O-T>=0&&O+T<=M){const Fe=new Rs(ge,ke,xe,j);Fe._round(),l&&!Tx(i,Fe,v,l,f)||U.push(Fe)}}D+=le}return w||U.length||x||(U=kx(i,D/2,a,l,f,v,x,!0,E)),U}st("Anchor",Rs);const Vl=ai;function Rx(i,r,a,l){const f=[],v=i.image,x=v.pixelRatio,w=v.paddedRect.w-2*Vl,E=v.paddedRect.h-2*Vl,T=i.right-i.left,M=i.bottom-i.top,D=v.stretchX||[[0,w]],O=v.stretchY||[[0,E]],U=(We,lt)=>We+lt[1]-lt[0],j=D.reduce(U,0),W=O.reduce(U,0),ee=w-j,le=E-W;let xe=0,he=j,ge=0,ke=W,Fe=0,it=ee,ct=0,nt=le;if(v.content&&l){const We=v.content;xe=Dd(D,0,We[0]),ge=Dd(O,0,We[1]),he=Dd(D,We[0],We[2]),ke=Dd(O,We[1],We[3]),Fe=We[0]-xe,ct=We[1]-ge,it=We[2]-We[0]-he,nt=We[3]-We[1]-ke}const Qe=(We,lt,Ye,Ze)=>{const gt=Ld(We.stretch-xe,he,T,i.left),dt=zd(We.fixed-Fe,it,We.stretch,j),Ft=Ld(lt.stretch-ge,ke,M,i.top),fr=zd(lt.fixed-ct,nt,lt.stretch,W),mr=Ld(Ye.stretch-xe,he,T,i.left),nn=zd(Ye.fixed-Fe,it,Ye.stretch,j),Si=Ld(Ze.stretch-ge,ke,M,i.top),Wn=zd(Ze.fixed-ct,nt,Ze.stretch,W),Yr=new R(gt,Ft),yn=new R(mr,Ft),An=new R(mr,Si),Kn=new R(gt,Si),Yn=new R(dt/x,fr/x),an=new R(nn/x,Wn/x),sn=r*Math.PI/180;if(sn){const On=Math.sin(sn),si=Math.cos(sn),oi=[si,-On,On,si];Yr._matMult(oi),yn._matMult(oi),Kn._matMult(oi),An._matMult(oi)}const Bn=We.stretch+We.fixed,Xn=lt.stretch+lt.fixed;return{tl:Yr,tr:yn,bl:Kn,br:An,tex:{x:v.paddedRect.x+Vl+Bn,y:v.paddedRect.y+Vl+Xn,w:Ye.stretch+Ye.fixed-Bn,h:Ze.stretch+Ze.fixed-Xn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yn,pixelOffsetBR:an,minFontScaleX:it/x/T,minFontScaleY:nt/x/M,isSDF:a}};if(l&&(v.stretchX||v.stretchY)){const We=Dx(D,ee,j),lt=Dx(O,le,W);for(let Ye=0;Ye<We.length-1;Ye++){const Ze=We[Ye],gt=We[Ye+1];for(let dt=0;dt<lt.length-1;dt++)f.push(Qe(Ze,lt[dt],gt,lt[dt+1]))}}else f.push(Qe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:E+1}));return f}function Dd(i,r,a){let l=0;for(const f of i)l+=Math.max(r,Math.min(a,f[1]))-Math.max(r,Math.min(a,f[0]));return l}function Dx(i,r,a){const l=[{fixed:-Vl,stretch:0}];for(const[f,v]of i){const x=l[l.length-1];l.push({fixed:f-x.stretch,stretch:x.stretch}),l.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return l.push({fixed:r+Vl,stretch:a}),l}function Ld(i,r,a,l){return i/r*a+l}function zd(i,r,a,l){return i-r*a/l}class Fd{constructor(r,a,l,f,v,x,w,E,T,M){if(this.boxStartIndex=r.length,T){let D=x.top,O=x.bottom;const U=x.collisionPadding;U&&(D-=U[1],O+=U[3]);let j=O-D;j>0&&(j=Math.max(10,j),this.circleDiameter=j)}else{let D=x.top*w-E[0],O=x.bottom*w+E[2],U=x.left*w-E[3],j=x.right*w+E[1];const W=x.collisionPadding;if(W&&(U-=W[0]*w,D-=W[1]*w,j+=W[2]*w,O+=W[3]*w),M){const ee=new R(U,D),le=new R(j,D),xe=new R(U,O),he=new R(j,O),ge=M*Math.PI/180;ee._rotate(ge),le._rotate(ge),xe._rotate(ge),he._rotate(ge),U=Math.min(ee.x,le.x,xe.x,he.x),j=Math.max(ee.x,le.x,xe.x,he.x),D=Math.min(ee.y,le.y,xe.y,he.y),O=Math.max(ee.y,le.y,xe.y,he.y)}r.emplaceBack(a.x,a.y,U,D,j,O,l,f,v)}this.boxEndIndex=r.length}}class LA{constructor(r=[],a=zA){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:l}=this,f=a[r];for(;r>0;){const v=r-1>>1,x=a[v];if(l(f,x)>=0)break;a[r]=x,r=v}a[r]=f}_down(r){const{data:a,compare:l}=this,f=this.length>>1,v=a[r];for(;r<f;){let x=1+(r<<1),w=a[x];const E=x+1;if(E<this.length&&l(a[E],w)<0&&(x=E,w=a[E]),l(w,v)>=0)break;a[r]=w,r=x}a[r]=v}}function zA(i,r){return i<r?-1:i>r?1:0}function FA(i,r=1,a=!1){let l=1/0,f=1/0,v=-1/0,x=-1/0;const w=i[0];for(let U=0;U<w.length;U++){const j=w[U];(!U||j.x<l)&&(l=j.x),(!U||j.y<f)&&(f=j.y),(!U||j.x>v)&&(v=j.x),(!U||j.y>x)&&(x=j.y)}const E=Math.min(v-l,x-f);let T=E/2;const M=new LA([],BA);if(E===0)return new R(l,f);for(let U=l;U<v;U+=E)for(let j=f;j<x;j+=E)M.push(new jl(U+T,j+T,T,i));let D=function(U){let j=0,W=0,ee=0;const le=U[0];for(let xe=0,he=le.length,ge=he-1;xe<he;ge=xe++){const ke=le[xe],Fe=le[ge],it=ke.x*Fe.y-Fe.x*ke.y;W+=(ke.x+Fe.x)*it,ee+=(ke.y+Fe.y)*it,j+=3*it}return new jl(W/j,ee/j,0,U)}(i),O=M.length;for(;M.length;){const U=M.pop();(U.d>D.d||!D.d)&&(D=U,a&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,O)),U.max-D.d<=r||(T=U.h/2,M.push(new jl(U.p.x-T,U.p.y-T,T,i)),M.push(new jl(U.p.x+T,U.p.y-T,T,i)),M.push(new jl(U.p.x-T,U.p.y+T,T,i)),M.push(new jl(U.p.x+T,U.p.y+T,T,i)),O+=4)}return a&&(console.log(`num probes: ${O}`),console.log(`best distance: ${D.d}`)),D.p}function BA(i,r){return r.max-i.max}function jl(i,r,a,l){this.p=new R(i,r),this.h=a,this.d=function(f,v){let x=!1,w=1/0;for(let E=0;E<v.length;E++){const T=v[E];for(let M=0,D=T.length,O=D-1;M<D;O=M++){const U=T[M],j=T[O];U.y>f.y!=j.y>f.y&&f.x<(j.x-U.x)*(f.y-U.y)/(j.y-U.y)+U.x&&(x=!x),w=Math.min(w,gv(f,U,j))}}return(x?1:-1)*Math.sqrt(w)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var En;p.ap=void 0,(En=p.ap||(p.ap={}))[En.center=1]="center",En[En.left=2]="left",En[En.right=3]="right",En[En.top=4]="top",En[En.bottom=5]="bottom",En[En["top-left"]=6]="top-left",En[En["top-right"]=7]="top-right",En[En["bottom-left"]=8]="bottom-left",En[En["bottom-right"]=9]="bottom-right";const Ds=7,ym=Number.POSITIVE_INFINITY;function Lx(i,r){return r[1]!==ym?function(a,l,f){let v=0,x=0;switch(l=Math.abs(l),f=Math.abs(f),a){case"top-right":case"top-left":case"top":x=f-Ds;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Ds}switch(a){case"top-right":case"bottom-right":case"right":v=-l;break;case"top-left":case"bottom-left":case"left":v=l}return[v,x]}(i,r[0],r[1]):function(a,l){let f=0,v=0;l<0&&(l=0);const x=l/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-Ds;break;case"bottom-right":case"bottom-left":v=-x+Ds;break;case"bottom":v=-l+Ds;break;case"top":v=l-Ds}switch(a){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=l;break;case"right":f=-l}return[f,v]}(i,r[0])}function zx(i,r,a){var l;const f=i.layout,v=(l=f.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(r,{},a);if(v){const w=v.values,E=[];for(let T=0;T<w.length;T+=2){const M=E[T]=w[T],D=w[T+1].map(O=>O*rn);M.startsWith("top")?D[1]-=Ds:M.startsWith("bottom")&&(D[1]+=Ds),E[T+1]=D}return new vi(E)}const x=f.get("text-variable-anchor");if(x){let w;w=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(r,{},a)*rn,ym]:f.get("text-offset").evaluate(r,{},a).map(T=>T*rn);const E=[];for(const T of x)E.push(T,Lx(T,w));return new vi(E)}return null}function _m(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function OA(i,r,a,l,f,v,x,w,E,T,M){let D=v.textMaxSize.evaluate(r,{});D===void 0&&(D=x);const O=i.layers[0].layout,U=O.get("icon-offset").evaluate(r,{},M),j=Bx(a.horizontal),W=x/24,ee=i.tilePixelRatio*W,le=i.tilePixelRatio*D/24,xe=i.tilePixelRatio*w,he=i.tilePixelRatio*O.get("symbol-spacing"),ge=O.get("text-padding")*i.tilePixelRatio,ke=function(Ze,gt,dt,Ft=1){const fr=Ze.get("icon-padding").evaluate(gt,{},dt),mr=fr&&fr.values;return[mr[0]*Ft,mr[1]*Ft,mr[2]*Ft,mr[3]*Ft]}(O,r,M,i.tilePixelRatio),Fe=O.get("text-max-angle")/180*Math.PI,it=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",ct=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",nt=O.get("symbol-placement"),Qe=he/2,We=O.get("icon-text-fit");let lt;l&&We!=="none"&&(i.allowVerticalPlacement&&a.vertical&&(lt=sx(l,a.vertical,We,O.get("icon-text-fit-padding"),U,W)),j&&(l=sx(l,j,We,O.get("icon-text-fit-padding"),U,W)));const Ye=(Ze,gt)=>{gt.x<0||gt.x>=Ir||gt.y<0||gt.y>=Ir||function(dt,Ft,fr,mr,nn,Si,Wn,Yr,yn,An,Kn,Yn,an,sn,Bn,Xn,On,si,oi,on,Zt,Nn,Cn,ln,Ji){const da=dt.addToLineVertexArray(Ft,fr);let fa,ts,Qi,Oi,li=0,rs=0,Tc=0,Ux=0,Cm=-1,Tm=-1;const ns={};let Vx=er("");if(dt.allowVerticalPlacement&&mr.vertical){const $n=Yr.layout.get("text-rotate").evaluate(Zt,{},ln)+90;Qi=new Fd(yn,Ft,An,Kn,Yn,mr.vertical,an,sn,Bn,$n),Wn&&(Oi=new Fd(yn,Ft,An,Kn,Yn,Wn,On,si,Bn,$n))}if(nn){const $n=Yr.layout.get("icon-rotate").evaluate(Zt,{}),Ni=Yr.layout.get("icon-text-fit")!=="none",Io=Rx(nn,$n,Cn,Ni),ma=Wn?Rx(Wn,$n,Cn,Ni):void 0;ts=new Fd(yn,Ft,An,Kn,Yn,nn,On,si,!1,$n),li=4*Io.length;const Po=dt.iconSizeData;let za=null;Po.kind==="source"?(za=[La*Yr.layout.get("icon-size").evaluate(Zt,{})],za[0]>Ms&&Gt(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Sc}. Reduce your "icon-size".`)):Po.kind==="composite"&&(za=[La*Nn.compositeIconSizes[0].evaluate(Zt,{},ln),La*Nn.compositeIconSizes[1].evaluate(Zt,{},ln)],(za[0]>Ms||za[1]>Ms)&&Gt(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Sc}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,Io,za,on,oi,Zt,p.ah.none,Ft,da.lineStartIndex,da.lineLength,-1,ln),Cm=dt.icon.placedSymbolArray.length-1,ma&&(rs=4*ma.length,dt.addSymbols(dt.icon,ma,za,on,oi,Zt,p.ah.vertical,Ft,da.lineStartIndex,da.lineLength,-1,ln),Tm=dt.icon.placedSymbolArray.length-1)}const jx=Object.keys(mr.horizontal);for(const $n of jx){const Ni=mr.horizontal[$n];if(!fa){Vx=er(Ni.text);const ma=Yr.layout.get("text-rotate").evaluate(Zt,{},ln);fa=new Fd(yn,Ft,An,Kn,Yn,Ni,an,sn,Bn,ma)}const Io=Ni.positionedLines.length===1;if(Tc+=Fx(dt,Ft,Ni,Si,Yr,Bn,Zt,Xn,da,mr.vertical?p.ah.horizontal:p.ah.horizontalOnly,Io?jx:[$n],ns,Cm,Nn,ln),Io)break}mr.vertical&&(Ux+=Fx(dt,Ft,mr.vertical,Si,Yr,Bn,Zt,Xn,da,p.ah.vertical,["vertical"],ns,Tm,Nn,ln));const UA=fa?fa.boxStartIndex:dt.collisionBoxArray.length,VA=fa?fa.boxEndIndex:dt.collisionBoxArray.length,jA=Qi?Qi.boxStartIndex:dt.collisionBoxArray.length,ZA=Qi?Qi.boxEndIndex:dt.collisionBoxArray.length,HA=ts?ts.boxStartIndex:dt.collisionBoxArray.length,GA=ts?ts.boxEndIndex:dt.collisionBoxArray.length,qA=Oi?Oi.boxStartIndex:dt.collisionBoxArray.length,WA=Oi?Oi.boxEndIndex:dt.collisionBoxArray.length;let pa=-1;const Od=($n,Ni)=>$n&&$n.circleDiameter?Math.max($n.circleDiameter,Ni):Ni;pa=Od(fa,pa),pa=Od(Qi,pa),pa=Od(ts,pa),pa=Od(Oi,pa);const Zx=pa>-1?1:0;Zx&&(pa*=Ji/rn),dt.glyphOffsetArray.length>=Ul.MAX_GLYPHS&&Gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zt.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,Zt.sortKey);const KA=zx(Yr,Zt,ln),[YA,XA]=function($n,Ni){const Io=$n.length,ma=Ni==null?void 0:Ni.values;if((ma==null?void 0:ma.length)>0)for(let Po=0;Po<ma.length;Po+=2){const za=ma[Po+1];$n.emplaceBack(p.ap[ma[Po]],za[0],za[1])}return[Io,$n.length]}(dt.textAnchorOffsets,KA);dt.symbolInstances.emplaceBack(Ft.x,Ft.y,ns.right>=0?ns.right:-1,ns.center>=0?ns.center:-1,ns.left>=0?ns.left:-1,ns.vertical||-1,Cm,Tm,Vx,UA,VA,jA,ZA,HA,GA,qA,WA,An,Tc,Ux,li,rs,Zx,0,an,pa,YA,XA)}(i,gt,Ze,a,l,f,lt,i.layers[0],i.collisionBoxArray,r.index,r.sourceLayerIndex,i.index,ee,[ge,ge,ge,ge],it,E,xe,ke,ct,U,r,v,T,M,x)};if(nt==="line")for(const Ze of Cx(r.geometry,0,0,Ir,Ir)){const gt=DA(Ze,he,Fe,a.vertical||j,l,24,le,i.overscaling,Ir);for(const dt of gt)j&&NA(i,j.text,Qe,dt)||Ye(Ze,dt)}else if(nt==="line-center"){for(const Ze of r.geometry)if(Ze.length>1){const gt=RA(Ze,Fe,a.vertical||j,l,24,le);gt&&Ye(Ze,gt)}}else if(r.type==="Polygon")for(const Ze of Yp(r.geometry,0)){const gt=FA(Ze,16);Ye(Ze[0],new Rs(gt.x,gt.y,0))}else if(r.type==="LineString")for(const Ze of r.geometry)Ye(Ze,new Rs(Ze[0].x,Ze[0].y,0));else if(r.type==="Point")for(const Ze of r.geometry)for(const gt of Ze)Ye([gt],new Rs(gt.x,gt.y,0))}function Fx(i,r,a,l,f,v,x,w,E,T,M,D,O,U,j){const W=function(xe,he,ge,ke,Fe,it,ct,nt){const Qe=ke.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,We=[];for(const lt of he.positionedLines)for(const Ye of lt.positionedGlyphs){if(!Ye.rect)continue;const Ze=Ye.rect||{};let gt=Qv+1,dt=!0,Ft=1,fr=0;const mr=(Fe||nt)&&Ye.vertical,nn=Ye.metrics.advance*Ye.scale/2;if(nt&&he.verticalizable&&(fr=lt.lineOffset/2-(Ye.imageName?-(rn-Ye.metrics.width*Ye.scale)/2:(Ye.scale-1)*rn)),Ye.imageName){const on=ct[Ye.imageName];dt=on.sdf,Ft=on.pixelRatio,gt=ai/Ft}const Si=Fe?[Ye.x+nn,Ye.y]:[0,0];let Wn=Fe?[0,0]:[Ye.x+nn+ge[0],Ye.y+ge[1]-fr],Yr=[0,0];mr&&(Yr=Wn,Wn=[0,0]);const yn=Ye.metrics.isDoubleResolution?2:1,An=(Ye.metrics.left-gt)*Ye.scale-nn+Wn[0],Kn=(-Ye.metrics.top-gt)*Ye.scale+Wn[1],Yn=An+Ze.w/yn*Ye.scale/Ft,an=Kn+Ze.h/yn*Ye.scale/Ft,sn=new R(An,Kn),Bn=new R(Yn,Kn),Xn=new R(An,an),On=new R(Yn,an);if(mr){const on=new R(-nn,nn-wc),Zt=-Math.PI/2,Nn=rn/2-nn,Cn=new R(5-wc-Nn,-(Ye.imageName?Nn:0)),ln=new R(...Yr);sn._rotateAround(Zt,on)._add(Cn)._add(ln),Bn._rotateAround(Zt,on)._add(Cn)._add(ln),Xn._rotateAround(Zt,on)._add(Cn)._add(ln),On._rotateAround(Zt,on)._add(Cn)._add(ln)}if(Qe){const on=Math.sin(Qe),Zt=Math.cos(Qe),Nn=[Zt,-on,on,Zt];sn._matMult(Nn),Bn._matMult(Nn),Xn._matMult(Nn),On._matMult(Nn)}const si=new R(0,0),oi=new R(0,0);We.push({tl:sn,tr:Bn,bl:Xn,br:On,tex:Ze,writingMode:he.writingMode,glyphOffset:Si,sectionIndex:Ye.sectionIndex,isSDF:dt,pixelOffsetTL:si,pixelOffsetBR:oi,minFontScaleX:0,minFontScaleY:0})}return We}(0,a,w,f,v,x,l,i.allowVerticalPlacement),ee=i.textSizeData;let le=null;ee.kind==="source"?(le=[La*f.layout.get("text-size").evaluate(x,{})],le[0]>Ms&&Gt(`${i.layerIds[0]}: Value for "text-size" is >= ${Sc}. Reduce your "text-size".`)):ee.kind==="composite"&&(le=[La*U.compositeTextSizes[0].evaluate(x,{},j),La*U.compositeTextSizes[1].evaluate(x,{},j)],(le[0]>Ms||le[1]>Ms)&&Gt(`${i.layerIds[0]}: Value for "text-size" is >= ${Sc}. Reduce your "text-size".`)),i.addSymbols(i.text,W,le,w,v,x,T,r,E.lineStartIndex,E.lineLength,O,j);for(const xe of M)D[xe]=i.text.placedSymbolArray.length-1;return 4*W.length}function Bx(i){for(const r in i)return i[r];return null}function NA(i,r,a,l){const f=i.compareText;if(r in f){const v=f[r];for(let x=v.length-1;x>=0;x--)if(l.dist(v[x])<a)return!0}else f[r]=[];return f[r].push(l),!1}const Ox=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vm{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,l]=new Uint8Array(r,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=l>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=Ox[15&l];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[w]=new Uint32Array(r,4,1);return new vm(w,x,v,r)}constructor(r,a=64,l=Float64Array,f){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=l,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=Ox.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,w=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${l}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=r)}add(r,a){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=r,this.coords[this._pos++]=a,l}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return xm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,a,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,E=[0,v.length-1,0],T=[];for(;E.length;){const M=E.pop()||0,D=E.pop()||0,O=E.pop()||0;if(D-O<=w){for(let ee=O;ee<=D;ee++){const le=x[2*ee],xe=x[2*ee+1];le>=r&&le<=l&&xe>=a&&xe<=f&&T.push(v[ee])}continue}const U=O+D>>1,j=x[2*U],W=x[2*U+1];j>=r&&j<=l&&W>=a&&W<=f&&T.push(v[U]),(M===0?r<=j:a<=W)&&(E.push(O),E.push(U-1),E.push(1-M)),(M===0?l>=j:f>=W)&&(E.push(U+1),E.push(D),E.push(1-M))}return T}within(r,a,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,w=[0,f.length-1,0],E=[],T=l*l;for(;w.length;){const M=w.pop()||0,D=w.pop()||0,O=w.pop()||0;if(D-O<=x){for(let ee=O;ee<=D;ee++)$x(v[2*ee],v[2*ee+1],r,a)<=T&&E.push(f[ee]);continue}const U=O+D>>1,j=v[2*U],W=v[2*U+1];$x(j,W,r,a)<=T&&E.push(f[U]),(M===0?r-l<=j:a-l<=W)&&(w.push(O),w.push(U-1),w.push(1-M)),(M===0?r+l>=j:a+l>=W)&&(w.push(U+1),w.push(D),w.push(1-M))}return E}}function xm(i,r,a,l,f,v){if(f-l<=a)return;const x=l+f>>1;Nx(i,r,x,l,f,v),xm(i,r,a,l,x-1,1-v),xm(i,r,a,x+1,f,1-v)}function Nx(i,r,a,l,f,v){for(;f>l;){if(f-l>600){const T=f-l+1,M=a-l+1,D=Math.log(T),O=.5*Math.exp(2*D/3),U=.5*Math.sqrt(D*O*(T-O)/T)*(M-T/2<0?-1:1);Nx(i,r,a,Math.max(l,Math.floor(a-M*O/T+U)),Math.min(f,Math.floor(a+(T-M)*O/T+U)),v)}const x=r[2*a+v];let w=l,E=f;for(Ac(i,r,l,a),r[2*f+v]>x&&Ac(i,r,l,f);w<E;){for(Ac(i,r,w,E),w++,E--;r[2*w+v]<x;)w++;for(;r[2*E+v]>x;)E--}r[2*l+v]===x?Ac(i,r,l,E):(E++,Ac(i,r,E,f)),E<=a&&(l=E+1),a<=E&&(f=E-1)}}function Ac(i,r,a,l){wm(i,a,l),wm(r,2*a,2*l),wm(r,2*a+1,2*l+1)}function wm(i,r,a){const l=i[r];i[r]=i[a],i[a]=l}function $x(i,r,a,l){const f=i-a,v=r-l;return f*f+v*v}var bm;p.bc=void 0,(bm=p.bc||(p.bc={})).create="create",bm.load="load",bm.fullLoad="fullLoad";let Bd=null,Cc=[];const Sm=1e3/60,Em="loadTime",Am="fullLoadTime",$A={mark(i){performance.mark(i)},frame(i){const r=i;Bd!=null&&Cc.push(r-Bd),Bd=r},clearMetrics(){Bd=null,Cc=[],performance.clearMeasures(Em),performance.clearMeasures(Am);for(const i in p.bc)performance.clearMarks(p.bc[i])},getPerformanceMetrics(){performance.measure(Em,p.bc.create,p.bc.load),performance.measure(Am,p.bc.create,p.bc.fullLoad);const i=performance.getEntriesByName(Em)[0].duration,r=performance.getEntriesByName(Am)[0].duration,a=Cc.length,l=1/(Cc.reduce((v,x)=>v+x,0)/a/1e3),f=Cc.filter(v=>v>Sm).reduce((v,x)=>v+(x-Sm)/Sm,0);return{loadTime:i,fullLoadTime:r,fps:l,percentDroppedFrames:f/(a+f)*100,totalFrames:a}}};p.$=vt,p.A=zl,p.B=function(i){if(xn==null){const r=i.navigator?i.navigator.userAgent:null;xn=!!i.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return xn},p.C=class{constructor(i,r){this.target=i,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new MA(()=>this.process()),this.subscription=function(a,l,f,v){return a.addEventListener(l,f,!1),{unsubscribe:()=>{a.removeEventListener(l,f,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=ir(self)?i:window}registerMessageHandler(i,r){this.messageHandlers[i]=r}sendAsync(i,r){return new Promise((a,l)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:a,reject:l},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const w={id:f,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const v=[],x=Object.assign(Object.assign({},i),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Ss(i.data,v)});this.target.postMessage(x,{transfer:v})})}receive(i){const r=i.data,a=r.id;if(r.origin===location.origin&&(!r.targetMapId||this.mapId===r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[a];const l=this.abortControllers[a];return delete this.abortControllers[a],void(l&&l.abort())}if(ir(self)||r.mustQueue)return this.tasks[a]=r,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,r)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),r=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(i,r)}processTask(i,r){return c(this,void 0,void 0,function*(){if(r.type==="<response>"){const f=this.resolveRejects[i];return delete this.resolveRejects[i],f?void(r.error?f.reject(vo(r.error)):f.resolve(vo(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=vo(r.data),l=new AbortController;this.abortControllers[i]=l;try{const f=yield this.messageHandlers[r.type](r.sourceMapId,a,l);this.completeTask(i,null,f)}catch(f){this.completeTask(i,f)}})}completeTask(i,r,a){const l=[];delete this.abortControllers[i];const f={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Ss(r):null,data:Ss(a,l)};this.target.postMessage(f,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.D=ht,p.E=Zn,p.F=function(){var i=new zl(16);return zl!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},p.G=Wr,p.H=function(i,r,a){var l,f,v,x,w,E,T,M,D,O,U,j,W=a[0],ee=a[1],le=a[2];return r===i?(i[12]=r[0]*W+r[4]*ee+r[8]*le+r[12],i[13]=r[1]*W+r[5]*ee+r[9]*le+r[13],i[14]=r[2]*W+r[6]*ee+r[10]*le+r[14],i[15]=r[3]*W+r[7]*ee+r[11]*le+r[15]):(f=r[1],v=r[2],x=r[3],w=r[4],E=r[5],T=r[6],M=r[7],D=r[8],O=r[9],U=r[10],j=r[11],i[0]=l=r[0],i[1]=f,i[2]=v,i[3]=x,i[4]=w,i[5]=E,i[6]=T,i[7]=M,i[8]=D,i[9]=O,i[10]=U,i[11]=j,i[12]=l*W+w*ee+D*le+r[12],i[13]=f*W+E*ee+O*le+r[13],i[14]=v*W+T*ee+U*le+r[14],i[15]=x*W+M*ee+j*le+r[15]),i},p.I=sm,p.J=function(i,r,a){var l=a[0],f=a[1],v=a[2];return i[0]=r[0]*l,i[1]=r[1]*l,i[2]=r[2]*l,i[3]=r[3]*l,i[4]=r[4]*f,i[5]=r[5]*f,i[6]=r[6]*f,i[7]=r[7]*f,i[8]=r[8]*v,i[9]=r[9]*v,i[10]=r[10]*v,i[11]=r[11]*v,i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},p.K=xv,p.L=function(i,r){const a={};for(let l=0;l<r.length;l++){const f=r[l];f in i&&(a[f]=i[f])}return a},p.M=ks,p.N=mx,p.O=gx,p.P=R,p.Q=Bi,p.R=Fi,p.S=G,p.T=hd,p.U=N,p.V=wt,p.W=Ir,p.X=Ur,p.Y=Rd,p.Z=class extends Qu{},p._=c,p.a=Pn,p.a$=function(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]*r[3]},p.a0=gm,p.a1=je,p.a2=i=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(a=>{r.onloadstart=()=>{a(r)};for(const l of i){const f=window.document.createElement("source");Ca(l)||(r.crossOrigin="Anonymous"),f.src=l,r.appendChild(f)}})},p.a3=function(){return Oe++},p.a4=n,p.a5=Ul,p.a6=yl,p.a7=Qa,p.a8=cr,p.a9=bx,p.aA=Et,p.aB=function(i,r){if(!i)return[{command:"setStyle",args:[r]}];let a=[];try{if(!ve(i.version,r.version))return[{command:"setStyle",args:[r]}];ve(i.center,r.center)||a.push({command:"setCenter",args:[r.center]}),ve(i.zoom,r.zoom)||a.push({command:"setZoom",args:[r.zoom]}),ve(i.bearing,r.bearing)||a.push({command:"setBearing",args:[r.bearing]}),ve(i.pitch,r.pitch)||a.push({command:"setPitch",args:[r.pitch]}),ve(i.sprite,r.sprite)||a.push({command:"setSprite",args:[r.sprite]}),ve(i.glyphs,r.glyphs)||a.push({command:"setGlyphs",args:[r.glyphs]}),ve(i.transition,r.transition)||a.push({command:"setTransition",args:[r.transition]}),ve(i.light,r.light)||a.push({command:"setLight",args:[r.light]}),ve(i.terrain,r.terrain)||a.push({command:"setTerrain",args:[r.terrain]});const l={},f=[];(function(x,w,E,T){let M;for(M in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(w,M)||qe(M,E,T));for(M in w)Object.prototype.hasOwnProperty.call(w,M)&&(Object.prototype.hasOwnProperty.call(x,M)?ve(x[M],w[M])||(x[M].type==="geojson"&&w[M].type==="geojson"&&kt(x,w,M)?$e(E,{command:"setGeoJSONSourceData",args:[M,w[M].data]}):_t(M,w,E,T)):Ve(M,w,E))})(i.sources,r.sources,f,l);const v=[];i.layers&&i.layers.forEach(x=>{"source"in x&&l[x.source]?a.push({command:"removeLayer",args:[x.id]}):v.push(x)}),a=a.concat(f),function(x,w,E){w=w||[];const T=(x=x||[]).map(Qt),M=w.map(Qt),D=x.reduce(kn,{}),O=w.reduce(kn,{}),U=T.slice(),j=Object.create(null);let W,ee,le,xe,he;for(let ge=0,ke=0;ge<T.length;ge++)W=T[ge],Object.prototype.hasOwnProperty.call(O,W)?ke++:($e(E,{command:"removeLayer",args:[W]}),U.splice(U.indexOf(W,ke),1));for(let ge=0,ke=0;ge<M.length;ge++)W=M[M.length-1-ge],U[U.length-1-ge]!==W&&(Object.prototype.hasOwnProperty.call(D,W)?($e(E,{command:"removeLayer",args:[W]}),U.splice(U.lastIndexOf(W,U.length-ke),1)):ke++,xe=U[U.length-ge],$e(E,{command:"addLayer",args:[O[W],xe]}),U.splice(U.length-ge,0,W),j[W]=!0);for(let ge=0;ge<M.length;ge++)if(W=M[ge],ee=D[W],le=O[W],!j[W]&&!ve(ee,le))if(ve(ee.source,le.source)&&ve(ee["source-layer"],le["source-layer"])&&ve(ee.type,le.type)){for(he in $t(ee.layout,le.layout,E,W,null,"setLayoutProperty"),$t(ee.paint,le.paint,E,W,null,"setPaintProperty"),ve(ee.filter,le.filter)||$e(E,{command:"setFilter",args:[W,le.filter]}),ve(ee.minzoom,le.minzoom)&&ve(ee.maxzoom,le.maxzoom)||$e(E,{command:"setLayerZoomRange",args:[W,le.minzoom,le.maxzoom]}),ee)Object.prototype.hasOwnProperty.call(ee,he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?$t(ee[he],le[he],E,W,he.slice(6),"setPaintProperty"):ve(ee[he],le[he])||$e(E,{command:"setLayerProperty",args:[W,he,le[he]]}));for(he in le)Object.prototype.hasOwnProperty.call(le,he)&&!Object.prototype.hasOwnProperty.call(ee,he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?$t(ee[he],le[he],E,W,he.slice(6),"setPaintProperty"):ve(ee[he],le[he])||$e(E,{command:"setLayerProperty",args:[W,he,le[he]]}))}else $e(E,{command:"removeLayer",args:[W]}),xe=U[U.lastIndexOf(W)+1],$e(E,{command:"addLayer",args:[le,xe]})}(v,r.layers,a)}catch(l){console.warn("Unable to compute style diff:",l),a=[{command:"setStyle",args:[r]}]}return a},p.aC=function(i){const r=[],a=i.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),i.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},p.aD=function i(r,a){if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(!i(r[l],a[l]))return!1;return!0}if(typeof r=="object"&&r!==null&&a!==null){if(typeof a!="object"||Object.keys(r).length!==Object.keys(a).length)return!1;for(const l in r)if(!i(r[l],a[l]))return!1;return!0}return r===a},p.aE=at,p.aF=rt,p.aG=class extends Sn{constructor(i,r){super(i,r),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},p.aH=bi,p.aI=class extends Sn{constructor(i,r){super(i,r),this.current=Ts}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let r=1;r<16;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},p.aJ=Ra,p.aK=class extends Sn{constructor(i,r){super(i,r),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},p.aL=class extends Sn{constructor(i,r){super(i,r),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},p.aM=Cs,p.aN=function(i,r,a,l,f,v,x){var w=1/(r-a),E=1/(l-f),T=1/(v-x);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*E,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*T,i[11]=0,i[12]=(r+a)*w,i[13]=(f+l)*E,i[14]=(x+v)*T,i[15]=1,i},p.aO=zt,p.aP=cE,p.aQ=class extends Eo{},p.aR=iA,p.aS=class extends Ka{},p.aT=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},p.aU=Av,p.aV=V,p.aW=class extends kl{},p.aX=Ne,p.aY=function(i,r){var a=i[0],l=i[1],f=i[2],v=i[3],x=i[4],w=i[5],E=i[6],T=i[7],M=i[8],D=i[9],O=i[10],U=i[11],j=i[12],W=i[13],ee=i[14],le=i[15],xe=r[0],he=r[1],ge=r[2],ke=r[3],Fe=r[4],it=r[5],ct=r[6],nt=r[7],Qe=r[8],We=r[9],lt=r[10],Ye=r[11],Ze=r[12],gt=r[13],dt=r[14],Ft=r[15];return Math.abs(a-xe)<=qn*Math.max(1,Math.abs(a),Math.abs(xe))&&Math.abs(l-he)<=qn*Math.max(1,Math.abs(l),Math.abs(he))&&Math.abs(f-ge)<=qn*Math.max(1,Math.abs(f),Math.abs(ge))&&Math.abs(v-ke)<=qn*Math.max(1,Math.abs(v),Math.abs(ke))&&Math.abs(x-Fe)<=qn*Math.max(1,Math.abs(x),Math.abs(Fe))&&Math.abs(w-it)<=qn*Math.max(1,Math.abs(w),Math.abs(it))&&Math.abs(E-ct)<=qn*Math.max(1,Math.abs(E),Math.abs(ct))&&Math.abs(T-nt)<=qn*Math.max(1,Math.abs(T),Math.abs(nt))&&Math.abs(M-Qe)<=qn*Math.max(1,Math.abs(M),Math.abs(Qe))&&Math.abs(D-We)<=qn*Math.max(1,Math.abs(D),Math.abs(We))&&Math.abs(O-lt)<=qn*Math.max(1,Math.abs(O),Math.abs(lt))&&Math.abs(U-Ye)<=qn*Math.max(1,Math.abs(U),Math.abs(Ye))&&Math.abs(j-Ze)<=qn*Math.max(1,Math.abs(j),Math.abs(Ze))&&Math.abs(W-gt)<=qn*Math.max(1,Math.abs(W),Math.abs(gt))&&Math.abs(ee-dt)<=qn*Math.max(1,Math.abs(ee),Math.abs(dt))&&Math.abs(le-Ft)<=qn*Math.max(1,Math.abs(le),Math.abs(Ft))},p.aZ=function(i,r){return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},p.a_=function(i,r,a){return i[0]=r[0]*a[0],i[1]=r[1]*a[1],i[2]=r[2]*a[2],i[3]=r[3]*a[3],i},p.aa=function(i){const r={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,l,f,v)=>{const x=f||v;return r[l]=!x||x.toLowerCase(),""}),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r},p.ab=function(i,r){const a=[];for(const l in i)l in r||a.push(l);return a},p.ac=be,p.ad=function(i,r,a){var l=Math.sin(a),f=Math.cos(a),v=r[0],x=r[1],w=r[2],E=r[3],T=r[4],M=r[5],D=r[6],O=r[7];return r!==i&&(i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[0]=v*f+T*l,i[1]=x*f+M*l,i[2]=w*f+D*l,i[3]=E*f+O*l,i[4]=T*f-v*l,i[5]=M*f-x*l,i[6]=D*f-w*l,i[7]=O*f-E*l,i},p.ae=function(i){var r=new zl(16);return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},p.af=wd,p.ag=function(i,r){let a=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=i,w=f?be(wn.interpolationFactor(f,r,v,x),0,1):0;i.kind==="camera"?l=Rn.number(i.minSize,i.maxSize,w):a=w}return{uSizeT:a,uSize:l}},p.ai=function(i,{uSize:r,uSizeT:a},{lowerSize:l,upperSize:f}){return i.kind==="source"?l/La:i.kind==="composite"?Rn.number(l/La,f/La,a):r},p.aj=cm,p.ak=function(i,r,a,l){const f=r.y-i.y,v=r.x-i.x,x=l.y-a.y,w=l.x-a.x,E=x*v-w*f;if(E===0)return null;const T=(w*(i.y-a.y)-x*(i.x-a.x))/E;return new R(i.x+T*v,i.y+T*f)},p.al=Cx,p.am=cc,p.an=jp,p.ao=rn,p.aq=um,p.ar=function(i,r){var a=r[0],l=r[1],f=r[2],v=r[3],x=r[4],w=r[5],E=r[6],T=r[7],M=r[8],D=r[9],O=r[10],U=r[11],j=r[12],W=r[13],ee=r[14],le=r[15],xe=a*w-l*x,he=a*E-f*x,ge=a*T-v*x,ke=l*E-f*w,Fe=l*T-v*w,it=f*T-v*E,ct=M*W-D*j,nt=M*ee-O*j,Qe=M*le-U*j,We=D*ee-O*W,lt=D*le-U*W,Ye=O*le-U*ee,Ze=xe*Ye-he*lt+ge*We+ke*Qe-Fe*nt+it*ct;return Ze?(i[0]=(w*Ye-E*lt+T*We)*(Ze=1/Ze),i[1]=(f*lt-l*Ye-v*We)*Ze,i[2]=(W*it-ee*Fe+le*ke)*Ze,i[3]=(O*Fe-D*it-U*ke)*Ze,i[4]=(E*Qe-x*Ye-T*nt)*Ze,i[5]=(a*Ye-f*Qe+v*nt)*Ze,i[6]=(ee*ge-j*it-le*he)*Ze,i[7]=(M*it-O*ge+U*he)*Ze,i[8]=(x*lt-w*Qe+T*ct)*Ze,i[9]=(l*Qe-a*lt-v*ct)*Ze,i[10]=(j*Fe-W*ge+le*xe)*Ze,i[11]=(D*ge-M*Fe-U*xe)*Ze,i[12]=(w*nt-x*We-E*ct)*Ze,i[13]=(a*We-l*nt+f*ct)*Ze,i[14]=(W*he-j*ke-ee*xe)*Ze,i[15]=(M*ke-D*he+O*xe)*Ze,i):null},p.as=_m,p.at=lm,p.au=vm,p.av=function(){const i={},r=Ie.$version;for(const a in Ie.$root){const l=Ie.$root[a];if(l.required){let f=null;f=a==="version"?r:l.type==="array"?[]:{},f!=null&&(i[a]=f)}}return i},p.aw=Sl,p.ax=qi,p.ay=function(i){i=i.slice();const r=Object.create(null);for(let a=0;a<i.length;a++)r[i[a].id]=i[a];for(let a=0;a<i.length;a++)"ref"in i[a]&&(i[a]=de(i[a],r[i[a].ref]));return i},p.az=function(i){if(i.type==="custom")return new PA(i);switch(i.type){case"background":return new CA(i);case"circle":return new hE(i);case"fill":return new kE(i);case"fill-extrusion":return new GE(i);case"heatmap":return new fE(i);case"hillshade":return new mE(i);case"line":return new eA(i);case"raster":return new IA(i);case"symbol":return new kd(i)}},p.b=et,p.b0=Pe,p.b1=vx,p.b2=yx,p.b3=function(i,r,a,l,f){var v,x=1/Math.tan(r/2);return i[0]=x/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+l)*(v=1/(l-f)),i[14]=2*f*l*v):(i[10]=-1,i[14]=-2*l),i},p.b4=function(i,r,a){var l=Math.sin(a),f=Math.cos(a),v=r[4],x=r[5],w=r[6],E=r[7],T=r[8],M=r[9],D=r[10],O=r[11];return r!==i&&(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[4]=v*f+T*l,i[5]=x*f+M*l,i[6]=w*f+D*l,i[7]=E*f+O*l,i[8]=T*f-v*l,i[9]=M*f-x*l,i[10]=D*f-w*l,i[11]=O*f-E*l,i},p.b5=H,p.b6=re,p.b7=function(i){return i*Math.PI/180},p.b8=function(i,r){return i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},p.b9=class extends Il{},p.ba=pm,p.bb=$A,p.bd=Mn,p.be=function(i,r){Pn.REGISTERED_PROTOCOLS[i]=r},p.bf=function(i){delete Pn.REGISTERED_PROTOCOLS[i]},p.bg=function(i,r){const a={};for(let f=0;f<i.length;f++){const v=r&&r[i[f].id]||Op(i[f]);r&&(r[i[f].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(i[f])}const l=[];for(const f in a)l.push(a[f]);return l},p.bh=st,p.bi=wx,p.bj=Sx,p.bk=tx,p.bl=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=Ir/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const r=i.bucket.layers[0],a=r.layout,l=r._unevaluatedLayout._values,f={layoutIconSize:l["icon-size"].possiblyEvaluate(new cr(i.bucket.zoom+1),i.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new cr(i.bucket.zoom+1),i.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new cr(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:T,maxZoom:M}=i.bucket.textSizeData;f.compositeTextSizes=[l["text-size"].possiblyEvaluate(new cr(T),i.canonical),l["text-size"].possiblyEvaluate(new cr(M),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:T,maxZoom:M}=i.bucket.iconSizeData;f.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new cr(T),i.canonical),l["icon-size"].possiblyEvaluate(new cr(M),i.canonical)]}const v=a.get("text-line-height")*rn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",w=a.get("text-keep-upright"),E=a.get("text-size");for(const T of i.bucket.features){const M=a.get("text-font").evaluate(T,{},i.canonical).join(","),D=E.evaluate(T,{},i.canonical),O=f.layoutTextSize.evaluate(T,{},i.canonical),U=f.layoutIconSize.evaluate(T,{},i.canonical),j={horizontal:{},vertical:void 0},W=T.text;let ee,le=[0,0];if(W){const ge=W.toString(),ke=a.get("text-letter-spacing").evaluate(T,{},i.canonical)*rn,Fe=ld(ge)?ke:0,it=a.get("text-anchor").evaluate(T,{},i.canonical),ct=zx(r,T,i.canonical);if(!ct){const Ye=a.get("text-radial-offset").evaluate(T,{},i.canonical);le=Ye?Lx(it,[Ye*rn,ym]):a.get("text-offset").evaluate(T,{},i.canonical).map(Ze=>Ze*rn)}let nt=x?"center":a.get("text-justify").evaluate(T,{},i.canonical);const Qe=a.get("symbol-placement"),We=Qe==="point"?a.get("text-max-width").evaluate(T,{},i.canonical)*rn:0,lt=()=>{i.bucket.allowVerticalPlacement&&El(ge)&&(j.vertical=Id(W,i.glyphMap,i.glyphPositions,i.imagePositions,M,We,v,it,"left",Fe,le,p.ah.vertical,!0,Qe,O,D))};if(!x&&ct){const Ye=new Set;if(nt==="auto")for(let gt=0;gt<ct.values.length;gt+=2)Ye.add(_m(ct.values[gt]));else Ye.add(nt);let Ze=!1;for(const gt of Ye)if(!j.horizontal[gt])if(Ze)j.horizontal[gt]=j.horizontal[0];else{const dt=Id(W,i.glyphMap,i.glyphPositions,i.imagePositions,M,We,v,"center",gt,Fe,le,p.ah.horizontal,!1,Qe,O,D);dt&&(j.horizontal[gt]=dt,Ze=dt.positionedLines.length===1)}lt()}else{nt==="auto"&&(nt=_m(it));const Ye=Id(W,i.glyphMap,i.glyphPositions,i.imagePositions,M,We,v,it,nt,Fe,le,p.ah.horizontal,!1,Qe,O,D);Ye&&(j.horizontal[nt]=Ye),lt(),El(ge)&&x&&w&&(j.vertical=Id(W,i.glyphMap,i.glyphPositions,i.imagePositions,M,We,v,it,nt,Fe,le,p.ah.vertical,!1,Qe,O,D))}}let xe=!1;if(T.icon&&T.icon.name){const ge=i.imageMap[T.icon.name];ge&&(ee=wA(i.imagePositions[T.icon.name],a.get("icon-offset").evaluate(T,{},i.canonical),a.get("icon-anchor").evaluate(T,{},i.canonical)),xe=!!ge.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=xe:i.bucket.sdfIcons!==xe&&Gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ge.pixelRatio!==i.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const he=Bx(j.horizontal)||j.vertical;i.bucket.iconsInText=!!he&&he.iconsInText,(he||ee)&&OA(i.bucket,T,j,ee,i.imageMap,f,O,U,le,xe,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},p.bm=rm,p.bn=Qp,p.bo=tm,p.bp=Is,p.bq=im,p.br=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},p.bs=function(i,r,a,l,f){return c(this,void 0,void 0,function*(){if(N())try{return yield wt(i,r,a,l,f)}catch{}return function(v,x,w,E,T){const M=v.width,D=v.height;Lt&&jt||(Lt=new OffscreenCanvas(M,D),jt=Lt.getContext("2d",{willReadFrequently:!0})),Lt.width=M,Lt.height=D,jt.drawImage(v,0,0,M,D);const O=jt.getImageData(x,w,E,T);return jt.clearRect(0,0,M,D),O.data}(i,r,a,l,f)})},p.bt=xx,p.bu=S,p.bv=I,p.bw=Gv,p.bx=Za,p.by=function(i){return i.message===Pt},p.bz=Wa,p.c=Nt,p.d=i=>c(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(r)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.e=Te,p.f=i=>new Promise((r,a)=>{const l=new Image;l.onload=()=>{r(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=bt})},l.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(i)],{type:"image/png"});l.src=i.byteLength?URL.createObjectURL(f):bt}),p.g=Rr,p.h=(i,r)=>ri(Te(i,{type:"json"}),r),p.i=ir,p.j=gr,p.k=Lr,p.l=(i,r)=>ri(Te(i,{type:"arrayBuffer"}),r),p.m=ri,p.n=function(i){return new im(i).readFields(mA,[])},p.o=fc,p.p=ex,p.q=Ln,p.r=Gu,p.s=Ca,p.t=od,p.u=tt,p.v=Ie,p.w=Gt,p.x=yo,p.y=function([i,r,a]){return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:i*Math.cos(r)*Math.sin(a),y:i*Math.sin(r)*Math.sin(a),z:i*Math.cos(a)}},p.z=Rn}),d("worker",["./shared"],function(p){class c{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,$){for(const X of B){this._layerConfigs[X.id]=X;const pe=this._layers[X.id]=p.az(X);pe._featureFilter=p.a6(pe.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(const X of $)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};const Z=p.bg(Object.values(this._layerConfigs),this.keyCache);for(const X of Z){const pe=X.map(Me=>this._layers[Me.id]),me=pe[0];if(me.visibility==="none")continue;const _e=me.source||"";let ce=this.familiesBySource[_e];ce||(ce=this.familiesBySource[_e]={});const we=me.sourceLayer||"_geojsonTileLayer";let ze=ce[we];ze||(ze=ce[we]=[]),ze.push(pe)}}}class S{constructor(B){const $={},Z=[];for(const _e in B){const ce=B[_e],we=$[_e]={};for(const ze in ce){const Me=ce[+ze];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Re={x:0,y:0,w:Me.bitmap.width+2,h:Me.bitmap.height+2};Z.push(Re),we[ze]={rect:Re,metrics:Me.metrics}}}const{w:X,h:pe}=p.p(Z),me=new p.o({width:X||1,height:pe||1});for(const _e in B){const ce=B[_e];for(const we in ce){const ze=ce[+we];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const Me=$[_e][we].rect;p.o.copy(ze.bitmap,me,{x:0,y:0},{x:Me.x+1,y:Me.y+1},ze.bitmap)}}this.image=me,this.positions=$}}p.bh("GlyphAtlas",S);class I{constructor(B){this.tileID=new p.Q(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[]}parse(B,$,Z,X){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=B,this.collisionBoxArray=new p.a4;const pe=new p.bi(Object.keys(B.layers).sort()),me=new p.bj(this.tileID,this.promoteId);me.bucketLayerIDs=[];const _e={},ce={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},we=$.familiesBySource[this.source];for(const Mt in we){const pr=B.layers[Mt];if(!pr)continue;pr.version===1&&p.w(`Vector tile source "${this.source}" layer "${Mt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Br=pe.encode(Mt),hn=[];for(let Or=0;Or<pr.length;Or++){const Ue=pr.feature(Or),_i=me.getId(Ue,Mt);hn.push({feature:Ue,id:_i,index:Or,sourceLayerIndex:Br})}for(const Or of we[Mt]){const Ue=Or[0];Ue.source!==this.source&&p.w(`layer.source = ${Ue.source} does not equal this.source = ${this.source}`),Ue.minzoom&&this.zoom<Math.floor(Ue.minzoom)||Ue.maxzoom&&this.zoom>=Ue.maxzoom||Ue.visibility!=="none"&&(k(Or,this.zoom,Z),(_e[Ue.id]=Ue.createBucket({index:me.bucketLayerIDs.length,layers:Or,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Br,sourceID:this.source})).populate(hn,ce,this.tileID.canonical),me.bucketLayerIDs.push(Or.map(_i=>_i.id)))}}const ze=p.aE(ce.glyphDependencies,Mt=>Object.keys(Mt).map(Number));this.inFlightDependencies.forEach(Mt=>Mt==null?void 0:Mt.abort()),this.inFlightDependencies=[];let Me=Promise.resolve({});if(Object.keys(ze).length){const Mt=new AbortController;this.inFlightDependencies.push(Mt),Me=X.sendAsync({type:"getGlyphs",data:{stacks:ze,source:this.source,tileID:this.tileID,type:"glyphs"}},Mt)}const Re=Object.keys(ce.iconDependencies);let ft=Promise.resolve({});if(Re.length){const Mt=new AbortController;this.inFlightDependencies.push(Mt),ft=X.sendAsync({type:"getImages",data:{icons:Re,source:this.source,tileID:this.tileID,type:"icons"}},Mt)}const mt=Object.keys(ce.patternDependencies);let It=Promise.resolve({});if(mt.length){const Mt=new AbortController;this.inFlightDependencies.push(Mt),It=X.sendAsync({type:"getImages",data:{icons:mt,source:this.source,tileID:this.tileID,type:"patterns"}},Mt)}const[St,Ut,Yt]=yield Promise.all([Me,ft,It]),ar=new S(St),Tr=new p.bk(Ut,Yt);for(const Mt in _e){const pr=_e[Mt];pr instanceof p.a5?(k(pr.layers,this.zoom,Z),p.bl({bucket:pr,glyphMap:St,glyphPositions:ar.positions,imageMap:Ut,imagePositions:Tr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):pr.hasPattern&&(pr instanceof p.bm||pr instanceof p.bn||pr instanceof p.bo)&&(k(pr.layers,this.zoom,Z),pr.addFeatures(ce,this.tileID.canonical,Tr.patternPositions))}return this.status="done",{buckets:Object.values(_e).filter(Mt=>!Mt.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ar.image,imageAtlas:Tr,glyphMap:this.returnDependencies?St:null,iconMap:this.returnDependencies?Ut:null,glyphPositions:this.returnDependencies?ar.positions:null}})}}function k(te,B,$){const Z=new p.a8(B);for(const X of te)X.recalculate(Z,$)}class R{constructor(B,$,Z){this.actor=B,this.layerIndex=$,this.availableImages=Z,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(B,$){return p._(this,void 0,void 0,function*(){const Z=yield p.l(B.request,$);try{return{vectorTile:new p.bp.VectorTile(new p.bq(Z.data)),rawData:Z.data,cacheControl:Z.cacheControl,expires:Z.expires}}catch(X){const pe=new Uint8Array(Z.data);let me=`Unable to parse the tile at ${B.request.url}, `;throw me+=pe[0]===31&&pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${X.messge}`,new Error(me)}})}loadTile(B){return p._(this,void 0,void 0,function*(){const $=B.uid,Z=!!(B&&B.request&&B.request.collectResourceTiming)&&new p.br(B.request),X=new I(B);this.loading[$]=X;const pe=new AbortController;X.abort=pe;try{const me=yield this.loadVectorTile(B,pe);if(delete this.loading[$],!me)return null;const _e=me.rawData,ce={};me.expires&&(ce.expires=me.expires),me.cacheControl&&(ce.cacheControl=me.cacheControl);const we={};if(Z){const Me=Z.finish();Me&&(we.resourceTiming=JSON.parse(JSON.stringify(Me)))}X.vectorTile=me.vectorTile;const ze=X.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[$]=X,this.fetching[$]={rawTileData:_e,cacheControl:ce,resourceTiming:we};try{const Me=yield ze;return p.e({rawTileData:_e.slice(0)},Me,ce,we)}finally{delete this.fetching[$]}}catch(me){throw delete this.loading[$],X.status="done",this.loaded[$]=X,me}})}reloadTile(B){return p._(this,void 0,void 0,function*(){const $=B.uid;if(!this.loaded||!this.loaded[$])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Z=this.loaded[$];if(Z.showCollisionBoxes=B.showCollisionBoxes,Z.status==="parsing"){const X=yield Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor);let pe;if(this.fetching[$]){const{rawTileData:me,cacheControl:_e,resourceTiming:ce}=this.fetching[$];delete this.fetching[$],pe=p.e({rawTileData:me.slice(0)},X,_e,ce)}else pe=X;return pe}if(Z.status==="done"&&Z.vectorTile)return Z.parse(Z.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(B){return p._(this,void 0,void 0,function*(){const $=this.loading,Z=B.uid;$&&$[Z]&&$[Z].abort&&($[Z].abort.abort(),delete $[Z])})}removeTile(B){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[B.uid]&&delete this.loaded[B.uid]})}}class z{constructor(){this.loaded={}}loadTile(B){return p._(this,void 0,void 0,function*(){const{uid:$,encoding:Z,rawImageData:X,redFactor:pe,greenFactor:me,blueFactor:_e,baseShift:ce}=B,we=X.width+2,ze=X.height+2,Me=p.b(X)?new p.R({width:we,height:ze},yield p.bs(X,-1,-1,we,ze)):X,Re=new p.bt($,Me,Z,pe,me,_e,ce);return this.loaded=this.loaded||{},this.loaded[$]=Re,Re})}removeTile(B){const $=this.loaded,Z=B.uid;$&&$[Z]&&delete $[Z]}}function ue(te,B){if(te.length!==0){ie(te[0],B);for(var $=1;$<te.length;$++)ie(te[$],!B)}}function ie(te,B){for(var $=0,Z=0,X=0,pe=te.length,me=pe-1;X<pe;me=X++){var _e=(te[X][0]-te[me][0])*(te[me][1]+te[X][1]),ce=$+_e;Z+=Math.abs($)>=Math.abs(_e)?$-ce+_e:_e-ce+$,$=ce}$+Z>=0!=!!B&&te.reverse()}var q=p.bu(function te(B,$){var Z,X=B&&B.type;if(X==="FeatureCollection")for(Z=0;Z<B.features.length;Z++)te(B.features[Z],$);else if(X==="GeometryCollection")for(Z=0;Z<B.geometries.length;Z++)te(B.geometries[Z],$);else if(X==="Feature")te(B.geometry,$);else if(X==="Polygon")ue(B.coordinates,$);else if(X==="MultiPolygon")for(Z=0;Z<B.coordinates.length;Z++)ue(B.coordinates[Z],$);return B});const ae=p.bp.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},N=p.bv,H=p.bp.VectorTileFeature,re=be;function be(te,B){this.options=B||{},this.features=te,this.length=te.length}function Pe(te,B){this.id=typeof te.id=="number"?te.id:void 0,this.type=te.type,this.rawGeometry=te.type===1?[te.geometry]:te.geometry,this.properties=te.tags,this.extent=B||4096}be.prototype.feature=function(te){return new Pe(this.features[te],this.options.extent)},Pe.prototype.loadGeometry=function(){var te=this.rawGeometry;this.geometry=[];for(var B=0;B<te.length;B++){for(var $=te[B],Z=[],X=0;X<$.length;X++)Z.push(new N($[X][0],$[X][1]));this.geometry.push(Z)}return this.geometry},Pe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var te=this.geometry,B=1/0,$=-1/0,Z=1/0,X=-1/0,pe=0;pe<te.length;pe++)for(var me=te[pe],_e=0;_e<me.length;_e++){var ce=me[_e];B=Math.min(B,ce.x),$=Math.max($,ce.x),Z=Math.min(Z,ce.y),X=Math.max(X,ce.y)}return[B,Z,$,X]},Pe.prototype.toGeoJSON=H.prototype.toGeoJSON;var Te=p.bw,Oe=re;function at(te){var B=new Te;return function($,Z){for(var X in $.layers)Z.writeMessage(3,rt,$.layers[X])}(te,B),B.finish()}function rt(te,B){var $;B.writeVarintField(15,te.version||1),B.writeStringField(1,te.name||""),B.writeVarintField(5,te.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<te.length;$++)Z.feature=te.feature($),B.writeMessage(2,Et,Z);var X=Z.keys;for($=0;$<X.length;$++)B.writeStringField(3,X[$]);var pe=Z.values;for($=0;$<pe.length;$++)B.writeMessage(4,ir,pe[$])}function Et(te,B){var $=te.feature;$.id!==void 0&&B.writeVarintField(1,$.id),B.writeMessage(2,Dt,te),B.writeVarintField(3,$.type),B.writeMessage(4,or,$)}function Dt(te,B){var $=te.feature,Z=te.keys,X=te.values,pe=te.keycache,me=te.valuecache;for(var _e in $.properties){var ce=$.properties[_e],we=pe[_e];if(ce!==null){we===void 0&&(Z.push(_e),pe[_e]=we=Z.length-1),B.writeVarint(we);var ze=typeof ce;ze!=="string"&&ze!=="boolean"&&ze!=="number"&&(ce=JSON.stringify(ce));var Me=ze+":"+ce,Re=me[Me];Re===void 0&&(X.push(ce),me[Me]=Re=X.length-1),B.writeVarint(Re)}}}function Gt(te,B){return(B<<3)+(7&te)}function nr(te){return te<<1^te>>31}function or(te,B){for(var $=te.loadGeometry(),Z=te.type,X=0,pe=0,me=$.length,_e=0;_e<me;_e++){var ce=$[_e],we=1;Z===1&&(we=ce.length),B.writeVarint(Gt(1,we));for(var ze=Z===3?ce.length-1:ce.length,Me=0;Me<ze;Me++){Me===1&&Z!==1&&B.writeVarint(Gt(2,ze-1));var Re=ce[Me].x-X,ft=ce[Me].y-pe;B.writeVarint(nr(Re)),B.writeVarint(nr(ft)),X+=Re,pe+=ft}Z===3&&B.writeVarint(Gt(7,1))}}function ir(te,B){var $=typeof te;$==="string"?B.writeStringField(1,te):$==="boolean"?B.writeBooleanField(7,te):$==="number"&&(te%1!=0?B.writeDoubleField(3,te):te<0?B.writeSVarintField(6,te):B.writeVarintField(5,te))}G.exports=at,G.exports.fromVectorTileJs=at,G.exports.fromGeojsonVt=function(te,B){B=B||{};var $={};for(var Z in te)$[Z]=new Oe(te[Z].features,B),$[Z].name=Z,$[Z].version=B.version,$[Z].extent=B.extent;return at({layers:$})},G.exports.GeoJSONWrapper=Oe;var xn=p.bu(G.exports);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:te=>te},bt=Math.fround||(wt=new Float32Array(1),te=>(wt[0]=+te,wt[0]));var wt;const Lt=3,jt=5,Pt=6;class Nt{constructor(B){this.options=Object.assign(Object.create(et),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){const{log:$,minZoom:Z,maxZoom:X}=this.options;$&&console.time("total time");const pe=`prepare ${B.length} points`;$&&console.time(pe),this.points=B;const me=[];for(let ce=0;ce<B.length;ce++){const we=B[ce];if(!we.geometry)continue;const[ze,Me]=we.geometry.coordinates,Re=bt(Wr(ze)),ft=bt(Mn(Me));me.push(Re,ft,1/0,ce,-1,1),this.options.reduce&&me.push(0)}let _e=this.trees[X+1]=this._createTree(me);$&&console.timeEnd(pe);for(let ce=X;ce>=Z;ce--){const we=+Date.now();_e=this.trees[ce]=this._createTree(this._cluster(_e,ce)),$&&console.log("z%d: %d clusters in %dms",ce,_e.numItems,+Date.now()-we)}return $&&console.timeEnd("total time"),this}getClusters(B,$){let Z=((B[0]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,B[1]));let pe=B[2]===180?180:((B[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)Z=-180,pe=180;else if(Z>pe){const Me=this.getClusters([Z,X,180,me],$),Re=this.getClusters([-180,X,pe,me],$);return Me.concat(Re)}const _e=this.trees[this._limitZoom($)],ce=_e.range(Wr(Z),Mn(me),Wr(pe),Mn(X)),we=_e.data,ze=[];for(const Me of ce){const Re=this.stride*Me;ze.push(we[Re+jt]>1?Pn(we,Re,this.clusterProps):this.points[we[Re+Lt]])}return ze}getChildren(B){const $=this._getOriginId(B),Z=this._getOriginZoom(B),X="No cluster with the specified id.",pe=this.trees[Z];if(!pe)throw new Error(X);const me=pe.data;if($*this.stride>=me.length)throw new Error(X);const _e=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),ce=pe.within(me[$*this.stride],me[$*this.stride+1],_e),we=[];for(const ze of ce){const Me=ze*this.stride;me[Me+4]===B&&we.push(me[Me+jt]>1?Pn(me,Me,this.clusterProps):this.points[me[Me+Lt]])}if(we.length===0)throw new Error(X);return we}getLeaves(B,$,Z){const X=[];return this._appendLeaves(X,B,$=$||10,Z=Z||0,0),X}getTile(B,$,Z){const X=this.trees[this._limitZoom(B)],pe=Math.pow(2,B),{extent:me,radius:_e}=this.options,ce=_e/me,we=(Z-ce)/pe,ze=(Z+1+ce)/pe,Me={features:[]};return this._addTileFeatures(X.range(($-ce)/pe,we,($+1+ce)/pe,ze),X.data,$,Z,pe,Me),$===0&&this._addTileFeatures(X.range(1-ce/pe,we,1,ze),X.data,pe,Z,pe,Me),$===pe-1&&this._addTileFeatures(X.range(0,we,ce/pe,ze),X.data,-1,Z,pe,Me),Me.features.length?Me:null}getClusterExpansionZoom(B){let $=this._getOriginZoom(B)-1;for(;$<=this.options.maxZoom;){const Z=this.getChildren(B);if($++,Z.length!==1)break;B=Z[0].properties.cluster_id}return $}_appendLeaves(B,$,Z,X,pe){const me=this.getChildren($);for(const _e of me){const ce=_e.properties;if(ce&&ce.cluster?pe+ce.point_count<=X?pe+=ce.point_count:pe=this._appendLeaves(B,ce.cluster_id,Z,X,pe):pe<X?pe++:B.push(_e),B.length===Z)break}return pe}_createTree(B){const $=new p.au(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Z=0;Z<B.length;Z+=this.stride)$.add(B[Z],B[Z+1]);return $.finish(),$.data=B,$}_addTileFeatures(B,$,Z,X,pe,me){for(const _e of B){const ce=_e*this.stride,we=$[ce+jt]>1;let ze,Me,Re;if(we)ze=Rr($,ce,this.clusterProps),Me=$[ce],Re=$[ce+1];else{const It=this.points[$[ce+Lt]];ze=It.properties;const[St,Ut]=It.geometry.coordinates;Me=Wr(St),Re=Mn(Ut)}const ft={type:1,geometry:[[Math.round(this.options.extent*(Me*pe-Z)),Math.round(this.options.extent*(Re*pe-X))]],tags:ze};let mt;mt=we||this.options.generateId?$[ce+Lt]:this.points[$[ce+Lt]].id,mt!==void 0&&(ft.id=mt),me.features.push(ft)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,$){const{radius:Z,extent:X,reduce:pe,minPoints:me}=this.options,_e=Z/(X*Math.pow(2,$)),ce=B.data,we=[],ze=this.stride;for(let Me=0;Me<ce.length;Me+=ze){if(ce[Me+2]<=$)continue;ce[Me+2]=$;const Re=ce[Me],ft=ce[Me+1],mt=B.within(ce[Me],ce[Me+1],_e),It=ce[Me+jt];let St=It;for(const Ut of mt){const Yt=Ut*ze;ce[Yt+2]>$&&(St+=ce[Yt+jt])}if(St>It&&St>=me){let Ut,Yt=Re*It,ar=ft*It,Tr=-1;const Mt=((Me/ze|0)<<5)+($+1)+this.points.length;for(const pr of mt){const Br=pr*ze;if(ce[Br+2]<=$)continue;ce[Br+2]=$;const hn=ce[Br+jt];Yt+=ce[Br]*hn,ar+=ce[Br+1]*hn,ce[Br+4]=Mt,pe&&(Ut||(Ut=this._map(ce,Me,!0),Tr=this.clusterProps.length,this.clusterProps.push(Ut)),pe(Ut,this._map(ce,Br)))}ce[Me+4]=Mt,we.push(Yt/St,ar/St,1/0,Mt,-1,St),pe&&we.push(Tr)}else{for(let Ut=0;Ut<ze;Ut++)we.push(ce[Me+Ut]);if(St>1)for(const Ut of mt){const Yt=Ut*ze;if(!(ce[Yt+2]<=$)){ce[Yt+2]=$;for(let ar=0;ar<ze;ar++)we.push(ce[Yt+ar])}}}}return we}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,$,Z){if(B[$+jt]>1){const me=this.clusterProps[B[$+Pt]];return Z?Object.assign({},me):me}const X=this.points[B[$+Lt]].properties,pe=this.options.map(X);return Z&&pe===X?Object.assign({},pe):pe}}function Pn(te,B,$){return{type:"Feature",id:te[B+Lt],properties:Rr(te,B,$),geometry:{type:"Point",coordinates:[(Z=te[B],360*(Z-.5)),qi(te[B+1])]}};var Z}function Rr(te,B,$){const Z=te[B+jt],X=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z,pe=te[B+Pt],me=pe===-1?{}:Object.assign({},$[pe]);return Object.assign(me,{cluster:!0,cluster_id:te[B+Lt],point_count:Z,point_count_abbreviated:X})}function Wr(te){return te/360+.5}function Mn(te){const B=Math.sin(te*Math.PI/180),$=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return $<0?0:$>1?1:$}function qi(te){const B=(180-360*te)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function ri(te,B,$,Z){for(var X,pe=Z,me=$-B>>1,_e=$-B,ce=te[B],we=te[B+1],ze=te[$],Me=te[$+1],Re=B+3;Re<$;Re+=3){var ft=Ca(te[Re],te[Re+1],ce,we,ze,Me);if(ft>pe)X=Re,pe=ft;else if(ft===pe){var mt=Math.abs(Re-me);mt<_e&&(X=Re,_e=mt)}}pe>Z&&(X-B>3&&ri(te,B,X,Z),te[X+2]=pe,$-X>3&&ri(te,X,$,Z))}function Ca(te,B,$,Z,X,pe){var me=X-$,_e=pe-Z;if(me!==0||_e!==0){var ce=((te-$)*me+(B-Z)*_e)/(me*me+_e*_e);ce>1?($=X,Z=pe):ce>0&&($+=me*ce,Z+=_e*ce)}return(me=te-$)*me+(_e=B-Z)*_e}function gi(te,B,$,Z){var X={id:te===void 0?null:te,type:B,geometry:$,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(pe){var me=pe.geometry,_e=pe.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")Dr(pe,me);else if(_e==="Polygon"||_e==="MultiLineString")for(var ce=0;ce<me.length;ce++)Dr(pe,me[ce]);else if(_e==="MultiPolygon")for(ce=0;ce<me.length;ce++)for(var we=0;we<me[ce].length;we++)Dr(pe,me[ce][we])}(X),X}function Dr(te,B){for(var $=0;$<B.length;$+=3)te.minX=Math.min(te.minX,B[$]),te.minY=Math.min(te.minY,B[$+1]),te.maxX=Math.max(te.maxX,B[$]),te.maxY=Math.max(te.maxY,B[$+1])}function Lr(te,B,$,Z){if(B.geometry){var X=B.geometry.coordinates,pe=B.geometry.type,me=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2),_e=[],ce=B.id;if($.promoteId?ce=B.properties[$.promoteId]:$.generateId&&(ce=Z||0),pe==="Point")gr(X,_e);else if(pe==="MultiPoint")for(var we=0;we<X.length;we++)gr(X[we],_e);else if(pe==="LineString")Zn(X,_e,me,!1);else if(pe==="MultiLineString"){if($.lineMetrics){for(we=0;we<X.length;we++)Zn(X[we],_e=[],me,!1),te.push(gi(ce,"LineString",_e,B.properties));return}Ie(X,_e,me,!1)}else if(pe==="Polygon")Ie(X,_e,me,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(we=0;we<B.geometry.geometries.length;we++)Lr(te,{id:ce,geometry:B.geometry.geometries[we],properties:B.properties},$,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<X.length;we++){var ze=[];Ie(X[we],ze,me,!0),_e.push(ze)}}te.push(gi(ce,pe,_e,B.properties))}}function gr(te,B){B.push(oe(te[0])),B.push(de(te[1])),B.push(0)}function Zn(te,B,$,Z){for(var X,pe,me=0,_e=0;_e<te.length;_e++){var ce=oe(te[_e][0]),we=de(te[_e][1]);B.push(ce),B.push(we),B.push(0),_e>0&&(me+=Z?(X*we-ce*pe)/2:Math.sqrt(Math.pow(ce-X,2)+Math.pow(we-pe,2))),X=ce,pe=we}var ze=B.length-3;B[2]=1,ri(B,0,ze,$),B[ze+2]=1,B.size=Math.abs(me),B.start=0,B.end=B.size}function Ie(te,B,$,Z){for(var X=0;X<te.length;X++){var pe=[];Zn(te[X],pe,$,Z),B.push(pe)}}function oe(te){return te/360+.5}function de(te){var B=Math.sin(te*Math.PI/180),$=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return $<0?0:$>1?1:$}function ve(te,B,$,Z,X,pe,me,_e){if(Z/=B,pe>=($/=B)&&me<Z)return te;if(me<$||pe>=Z)return null;for(var ce=[],we=0;we<te.length;we++){var ze=te[we],Me=ze.geometry,Re=ze.type,ft=X===0?ze.minX:ze.minY,mt=X===0?ze.maxX:ze.maxY;if(ft>=$&&mt<Z)ce.push(ze);else if(!(mt<$||ft>=Z)){var It=[];if(Re==="Point"||Re==="MultiPoint")$e(Me,It,$,Z,X);else if(Re==="LineString")Ve(Me,It,$,Z,X,!1,_e.lineMetrics);else if(Re==="MultiLineString")_t(Me,It,$,Z,X,!1);else if(Re==="Polygon")_t(Me,It,$,Z,X,!0);else if(Re==="MultiPolygon")for(var St=0;St<Me.length;St++){var Ut=[];_t(Me[St],Ut,$,Z,X,!0),Ut.length&&It.push(Ut)}if(It.length){if(_e.lineMetrics&&Re==="LineString"){for(St=0;St<It.length;St++)ce.push(gi(ze.id,Re,It[St],ze.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(It.length===1?(Re="LineString",It=It[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=It.length===3?"Point":"MultiPoint"),ce.push(gi(ze.id,Re,It,ze.tags))}}}return ce.length?ce:null}function $e(te,B,$,Z,X){for(var pe=0;pe<te.length;pe+=3){var me=te[pe+X];me>=$&&me<=Z&&(B.push(te[pe]),B.push(te[pe+1]),B.push(te[pe+2]))}}function Ve(te,B,$,Z,X,pe,me){for(var _e,ce,we=qe(te),ze=X===0?$t:Qt,Me=te.start,Re=0;Re<te.length-3;Re+=3){var ft=te[Re],mt=te[Re+1],It=te[Re+2],St=te[Re+3],Ut=te[Re+4],Yt=X===0?ft:mt,ar=X===0?St:Ut,Tr=!1;me&&(_e=Math.sqrt(Math.pow(ft-St,2)+Math.pow(mt-Ut,2))),Yt<$?ar>$&&(ce=ze(we,ft,mt,St,Ut,$),me&&(we.start=Me+_e*ce)):Yt>Z?ar<Z&&(ce=ze(we,ft,mt,St,Ut,Z),me&&(we.start=Me+_e*ce)):kt(we,ft,mt,It),ar<$&&Yt>=$&&(ce=ze(we,ft,mt,St,Ut,$),Tr=!0),ar>Z&&Yt<=Z&&(ce=ze(we,ft,mt,St,Ut,Z),Tr=!0),!pe&&Tr&&(me&&(we.end=Me+_e*ce),B.push(we),we=qe(te)),me&&(Me+=_e)}var Mt=te.length-3;ft=te[Mt],mt=te[Mt+1],It=te[Mt+2],(Yt=X===0?ft:mt)>=$&&Yt<=Z&&kt(we,ft,mt,It),Mt=we.length-3,pe&&Mt>=3&&(we[Mt]!==we[0]||we[Mt+1]!==we[1])&&kt(we,we[0],we[1],we[2]),we.length&&B.push(we)}function qe(te){var B=[];return B.size=te.size,B.start=te.start,B.end=te.end,B}function _t(te,B,$,Z,X,pe){for(var me=0;me<te.length;me++)Ve(te[me],B,$,Z,X,pe,!1)}function kt(te,B,$,Z){te.push(B),te.push($),te.push(Z)}function $t(te,B,$,Z,X,pe){var me=(pe-B)/(Z-B);return te.push(pe),te.push($+(X-$)*me),te.push(1),me}function Qt(te,B,$,Z,X,pe){var me=(pe-$)/(X-$);return te.push(B+(Z-B)*me),te.push(pe),te.push(1),me}function kn(te,B){for(var $=[],Z=0;Z<te.length;Z++){var X,pe=te[Z],me=pe.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")X=je(pe.geometry,B);else if(me==="MultiLineString"||me==="Polygon"){X=[];for(var _e=0;_e<pe.geometry.length;_e++)X.push(je(pe.geometry[_e],B))}else if(me==="MultiPolygon")for(X=[],_e=0;_e<pe.geometry.length;_e++){for(var ce=[],we=0;we<pe.geometry[_e].length;we++)ce.push(je(pe.geometry[_e][we],B));X.push(ce)}$.push(gi(pe.id,me,X,pe.tags))}return $}function je(te,B){var $=[];$.size=te.size,te.start!==void 0&&($.start=te.start,$.end=te.end);for(var Z=0;Z<te.length;Z+=3)$.push(te[Z]+B,te[Z+1],te[Z+2]);return $}function zr(te,B){if(te.transformed)return te;var $,Z,X,pe=1<<te.z,me=te.x,_e=te.y;for($=0;$<te.features.length;$++){var ce=te.features[$],we=ce.geometry,ze=ce.type;if(ce.geometry=[],ze===1)for(Z=0;Z<we.length;Z+=2)ce.geometry.push(Jr(we[Z],we[Z+1],B,pe,me,_e));else for(Z=0;Z<we.length;Z++){var Me=[];for(X=0;X<we[Z].length;X+=2)Me.push(Jr(we[Z][X],we[Z][X+1],B,pe,me,_e));ce.geometry.push(Me)}}return te.transformed=!0,te}function Jr(te,B,$,Z,X,pe){return[Math.round($*(te*Z-X)),Math.round($*(B*Z-pe))]}function ki(te,B,$,Z,X){for(var pe=B===X.maxZoom?0:X.tolerance/((1<<B)*X.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:$,y:Z,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_e=0;_e<te.length;_e++){me.numFeatures++,yr(me,te[_e],pe,X);var ce=te[_e].minX,we=te[_e].minY,ze=te[_e].maxX,Me=te[_e].maxY;ce<me.minX&&(me.minX=ce),we<me.minY&&(me.minY=we),ze>me.maxX&&(me.maxX=ze),Me>me.maxY&&(me.maxY=Me)}return me}function yr(te,B,$,Z){var X=B.geometry,pe=B.type,me=[];if(pe==="Point"||pe==="MultiPoint")for(var _e=0;_e<X.length;_e+=3)me.push(X[_e]),me.push(X[_e+1]),te.numPoints++,te.numSimplified++;else if(pe==="LineString")Ge(me,X,te,$,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(_e=0;_e<X.length;_e++)Ge(me,X[_e],te,$,pe==="Polygon",_e===0);else if(pe==="MultiPolygon")for(var ce=0;ce<X.length;ce++){var we=X[ce];for(_e=0;_e<we.length;_e++)Ge(me,we[_e],te,$,!0,_e===0)}if(me.length){var ze=B.tags||null;if(pe==="LineString"&&Z.lineMetrics){for(var Me in ze={},B.tags)ze[Me]=B.tags[Me];ze.mapbox_clip_start=X.start/X.size,ze.mapbox_clip_end=X.end/X.size}var Re={geometry:me,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:ze};B.id!==null&&(Re.id=B.id),te.features.push(Re)}}function Ge(te,B,$,Z,X,pe){var me=Z*Z;if(Z>0&&B.size<(X?me:Z))$.numPoints+=B.length/3;else{for(var _e=[],ce=0;ce<B.length;ce+=3)(Z===0||B[ce+2]>me)&&($.numSimplified++,_e.push(B[ce]),_e.push(B[ce+1])),$.numPoints++;X&&function(we,ze){for(var Me=0,Re=0,ft=we.length,mt=ft-2;Re<ft;mt=Re,Re+=2)Me+=(we[Re]-we[mt])*(we[Re+1]+we[mt+1]);if(Me>0===ze)for(Re=0,ft=we.length;Re<ft/2;Re+=2){var It=we[Re],St=we[Re+1];we[Re]=we[ft-2-Re],we[Re+1]=we[ft-1-Re],we[ft-2-Re]=It,we[ft-1-Re]=St}}(_e,pe),te.push(_e)}}function At(te,B){var $=(B=this.options=function(X,pe){for(var me in pe)X[me]=pe[me];return X}(Object.create(this.options),B)).debug;if($&&console.time("preprocess data"),B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(X,pe){var me=[];if(X.type==="FeatureCollection")for(var _e=0;_e<X.features.length;_e++)Lr(me,X.features[_e],pe,_e);else Lr(me,X.type==="Feature"?X:{geometry:X},pe);return me}(te,B);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Z=function(X,pe){var me=pe.buffer/pe.extent,_e=X,ce=ve(X,1,-1-me,me,0,-1,2,pe),we=ve(X,1,1-me,2+me,0,-1,2,pe);return(ce||we)&&(_e=ve(X,1,-me,1+me,0,-1,2,pe)||[],ce&&(_e=kn(ce,1).concat(_e)),we&&(_e=_e.concat(kn(we,-1)))),_e}(Z,B),Z.length&&this.splitTile(Z,0,0,0),$&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ct(te,B,$){return 32*((1<<te)*$+B)+te}function Cr(te,B){return B?te.properties[B]:te.id}function yi(te,B){if(te==null)return!0;if(te.type==="Feature")return Cr(te,B)!=null;if(te.type==="FeatureCollection"){const $=new Set;for(const Z of te.features){const X=Cr(Z,B);if(X==null||$.has(X))return!1;$.add(X)}return!0}return!1}function Tt(te,B){const $=new Map;if(te!=null)if(te.type==="Feature")$.set(Cr(te,B),te);else for(const Z of te.features)$.set(Cr(Z,B),Z);return $}At.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},At.prototype.splitTile=function(te,B,$,Z,X,pe,me){for(var _e=[te,B,$,Z],ce=this.options,we=ce.debug;_e.length;){Z=_e.pop(),$=_e.pop(),B=_e.pop(),te=_e.pop();var ze=1<<B,Me=Ct(B,$,Z),Re=this.tiles[Me];if(!Re&&(we>1&&console.time("creation"),Re=this.tiles[Me]=ki(te,B,$,Z,ce),this.tileCoords.push({z:B,x:$,y:Z}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,$,Z,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));var ft="z"+B;this.stats[ft]=(this.stats[ft]||0)+1,this.total++}if(Re.source=te,X){if(B===ce.maxZoom||B===X)continue;var mt=1<<X-B;if($!==Math.floor(pe/mt)||Z!==Math.floor(me/mt))continue}else if(B===ce.indexMaxZoom||Re.numPoints<=ce.indexMaxPoints)continue;if(Re.source=null,te.length!==0){we>1&&console.time("clipping");var It,St,Ut,Yt,ar,Tr,Mt=.5*ce.buffer/ce.extent,pr=.5-Mt,Br=.5+Mt,hn=1+Mt;It=St=Ut=Yt=null,ar=ve(te,ze,$-Mt,$+Br,0,Re.minX,Re.maxX,ce),Tr=ve(te,ze,$+pr,$+hn,0,Re.minX,Re.maxX,ce),te=null,ar&&(It=ve(ar,ze,Z-Mt,Z+Br,1,Re.minY,Re.maxY,ce),St=ve(ar,ze,Z+pr,Z+hn,1,Re.minY,Re.maxY,ce),ar=null),Tr&&(Ut=ve(Tr,ze,Z-Mt,Z+Br,1,Re.minY,Re.maxY,ce),Yt=ve(Tr,ze,Z+pr,Z+hn,1,Re.minY,Re.maxY,ce),Tr=null),we>1&&console.timeEnd("clipping"),_e.push(It||[],B+1,2*$,2*Z),_e.push(St||[],B+1,2*$,2*Z+1),_e.push(Ut||[],B+1,2*$+1,2*Z),_e.push(Yt||[],B+1,2*$+1,2*Z+1)}}},At.prototype.getTile=function(te,B,$){var Z=this.options,X=Z.extent,pe=Z.debug;if(te<0||te>24)return null;var me=1<<te,_e=Ct(te,B=(B%me+me)%me,$);if(this.tiles[_e])return zr(this.tiles[_e],X);pe>1&&console.log("drilling down to z%d-%d-%d",te,B,$);for(var ce,we=te,ze=B,Me=$;!ce&&we>0;)we--,ze=Math.floor(ze/2),Me=Math.floor(Me/2),ce=this.tiles[Ct(we,ze,Me)];return ce&&ce.source?(pe>1&&console.log("found parent tile z%d-%d-%d",we,ze,Me),pe>1&&console.time("drilling down"),this.splitTile(ce.source,we,ze,Me,te,B,$),pe>1&&console.timeEnd("drilling down"),this.tiles[_e]?zr(this.tiles[_e],X):null):null};class la extends R{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(B,$){return p._(this,void 0,void 0,function*(){const Z=B.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const X=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!X)return null;const pe=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.W,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(ce){this._feature=ce,this.extent=p.W,this.type=ce.type,this.properties=ce.tags,"id"in ce&&!isNaN(ce.id)&&(this.id=parseInt(ce.id,10))}loadGeometry(){if(this._feature.type===1){const ce=[];for(const we of this._feature.geometry)ce.push([new p.P(we[0],we[1])]);return ce}{const ce=[];for(const we of this._feature.geometry){const ze=[];for(const Me of we)ze.push(new p.P(Me[0],Me[1]));ce.push(ze)}return ce}}toGeoJSON(ce,we,ze){return ae.call(this,ce,we,ze)}}(this._features[_e])}}(X.features);let me=xn(pe);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:pe,rawData:me.buffer}})}loadData(B){var $;return p._(this,void 0,void 0,function*(){($=this._pendingRequest)===null||$===void 0||$.abort();const Z=!!(B&&B.request&&B.request.collectResourceTiming)&&new p.br(B.request);this._pendingRequest=new AbortController;try{let X=yield this.loadGeoJSON(B,this._pendingRequest);if(delete this._pendingRequest,typeof X!="object")throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(q(X,!0),B.filter){const me=p.bx(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(me.result==="error")throw new Error(me.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));X={type:"FeatureCollection",features:X.features.filter(ce=>me.value.evaluate({zoom:0},ce))}}this._geoJSONIndex=B.cluster?new Nt(function({superclusterOptions:me,clusterProperties:_e}){if(!_e||!me)return me;const ce={},we={},ze={accumulated:null,zoom:0},Me={properties:null},Re=Object.keys(_e);for(const ft of Re){const[mt,It]=_e[ft],St=p.bx(It),Ut=p.bx(typeof mt=="string"?[mt,["accumulated"],["get",ft]]:mt);ce[ft]=St.value,we[ft]=Ut.value}return me.map=ft=>{Me.properties=ft;const mt={};for(const It of Re)mt[It]=ce[It].evaluate(ze,Me);return mt},me.reduce=(ft,mt)=>{Me.properties=mt;for(const It of Re)ze.accumulated=ft[It],ft[It]=we[It].evaluate(ze,Me)},me}(B)).load(X.features):function(me,_e){return new At(me,_e)}(X,B.geojsonVtOptions),this.loaded={};const pe={};if(Z){const me=Z.finish();me&&(pe.resourceTiming={},pe.resourceTiming[B.source]=JSON.parse(JSON.stringify(me)))}return pe}catch(X){if(delete this._pendingRequest,p.by(X))return{abandoned:!0};throw X}})}reloadTile(B){const $=this.loaded;return $&&$[B.uid]?super.reloadTile(B):this.loadTile(B)}loadGeoJSON(B,$){return p._(this,void 0,void 0,function*(){const{promoteId:Z}=B;if(B.request){const X=yield p.h(B.request,$);return this._dataUpdateable=yi(X.data,Z)?Tt(X.data,Z):void 0,X.data}if(typeof B.data=="string")try{const X=JSON.parse(B.data);return this._dataUpdateable=yi(X,Z)?Tt(X,Z):void 0,X}catch{throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`)}if(!B.dataDiff)throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${B.source}`);return function(X,pe,me){var _e,ce,we,ze;if(pe.removeAll&&X.clear(),pe.remove)for(const Me of pe.remove)X.delete(Me);if(pe.add)for(const Me of pe.add){const Re=Cr(Me,me);Re!=null&&X.set(Re,Me)}if(pe.update)for(const Me of pe.update){let Re=X.get(Me.id);if(Re==null)continue;const ft=!Me.removeAllProperties&&(((_e=Me.removeProperties)===null||_e===void 0?void 0:_e.length)>0||((ce=Me.addOrUpdateProperties)===null||ce===void 0?void 0:ce.length)>0);if((Me.newGeometry||Me.removeAllProperties||ft)&&(Re=Object.assign({},Re),X.set(Me.id,Re),ft&&(Re.properties=Object.assign({},Re.properties))),Me.newGeometry&&(Re.geometry=Me.newGeometry),Me.removeAllProperties)Re.properties={};else if(((we=Me.removeProperties)===null||we===void 0?void 0:we.length)>0)for(const mt of Me.removeProperties)Object.prototype.hasOwnProperty.call(Re.properties,mt)&&delete Re.properties[mt];if(((ze=Me.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0)for(const{key:mt,value:It}of Me.addOrUpdateProperties)Re.properties[mt]=It}}(this._dataUpdateable,B.dataDiff,Z),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(B){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(B){return this._geoJSONIndex.getClusterExpansionZoom(B.clusterId)}getClusterChildren(B){return this._geoJSONIndex.getChildren(B.clusterId)}getClusterLeaves(B){return this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset)}}class Fr{constructor(B){this.self=B,this.actor=new p.C(B),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=($,Z)=>{if(this.externalWorkerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.externalWorkerSourceTypes[$]=Z},this.self.addProtocol=p.be,this.self.removeProtocol=p.bf,this.self.registerRTLTextPlugin=$=>{if(p.bz.isParsed())throw new Error("RTL text plugin already registered.");p.bz.setMethods($)},this.actor.registerMessageHandler("loadDEMTile",($,Z)=>this._getDEMWorkerSource($,Z.source).loadTile(Z)),this.actor.registerMessageHandler("removeDEMTile",($,Z)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource($,Z.source).removeTile(Z)})),this.actor.registerMessageHandler("getClusterExpansionZoom",($,Z)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource($,Z.type,Z.source).getClusterExpansionZoom(Z)})),this.actor.registerMessageHandler("getClusterChildren",($,Z)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource($,Z.type,Z.source).getClusterChildren(Z)})),this.actor.registerMessageHandler("getClusterLeaves",($,Z)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource($,Z.type,Z.source).getClusterLeaves(Z)})),this.actor.registerMessageHandler("loadData",($,Z)=>this._getWorkerSource($,Z.type,Z.source).loadData(Z)),this.actor.registerMessageHandler("loadTile",($,Z)=>this._getWorkerSource($,Z.type,Z.source).loadTile(Z)),this.actor.registerMessageHandler("reloadTile",($,Z)=>this._getWorkerSource($,Z.type,Z.source).reloadTile(Z)),this.actor.registerMessageHandler("abortTile",($,Z)=>this._getWorkerSource($,Z.type,Z.source).abortTile(Z)),this.actor.registerMessageHandler("removeTile",($,Z)=>this._getWorkerSource($,Z.type,Z.source).removeTile(Z)),this.actor.registerMessageHandler("removeSource",($,Z)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[$]||!this.workerSources[$][Z.type]||!this.workerSources[$][Z.type][Z.source])return;const X=this.workerSources[$][Z.type][Z.source];delete this.workerSources[$][Z.type][Z.source],X.removeSource!==void 0&&X.removeSource(Z)})),this.actor.registerMessageHandler("setReferrer",($,Z)=>p._(this,void 0,void 0,function*(){this.referrer=Z})),this.actor.registerMessageHandler("syncRTLPluginState",($,Z)=>this._syncRTLPluginState($,Z)),this.actor.registerMessageHandler("importScript",($,Z)=>p._(this,void 0,void 0,function*(){this.self.importScripts(Z)})),this.actor.registerMessageHandler("setImages",($,Z)=>this._setImages($,Z)),this.actor.registerMessageHandler("updateLayers",($,Z)=>p._(this,void 0,void 0,function*(){this._getLayerIndex($).update(Z.layers,Z.removedIds)})),this.actor.registerMessageHandler("setLayers",($,Z)=>p._(this,void 0,void 0,function*(){this._getLayerIndex($).replace(Z)}))}_setImages(B,$){return p._(this,void 0,void 0,function*(){this.availableImages[B]=$;for(const Z in this.workerSources[B]){const X=this.workerSources[B][Z];for(const pe in X)X[pe].availableImages=$}})}_syncRTLPluginState(B,$){return p._(this,void 0,void 0,function*(){p.bz.setState($);const Z=p.bz.getPluginURL();if($.pluginStatus==="loaded"&&!p.bz.isParsed()&&Z!=null){this.self.importScripts(Z);const X=p.bz.isParsed();if(X)return X;throw new Error(`RTL Text Plugin failed to import scripts from ${Z}`)}return!1})}_getAvailableImages(B){let $=this.availableImages[B];return $||($=[]),$}_getLayerIndex(B){let $=this.layerIndexes[B];return $||($=this.layerIndexes[B]=new c),$}_getWorkerSource(B,$,Z){if(this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][$]||(this.workerSources[B][$]={}),!this.workerSources[B][$][Z]){const X={sendAsync:(pe,me)=>(pe.targetMapId=B,this.actor.sendAsync(pe,me))};switch($){case"vector":this.workerSources[B][$][Z]=new R(X,this._getLayerIndex(B),this._getAvailableImages(B));break;case"geojson":this.workerSources[B][$][Z]=new la(X,this._getLayerIndex(B),this._getAvailableImages(B));break;default:this.workerSources[B][$][Z]=new this.externalWorkerSourceTypes[$](X,this._getLayerIndex(B),this._getAvailableImages(B))}}return this.workerSources[B][$][Z]}_getDEMWorkerSource(B,$){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][$]||(this.demWorkerSources[B][$]=new z),this.demWorkerSources[B][$]}}return p.i(self)&&(self.worker=new Fr(self)),Fr}),d("index",["exports","./shared"],function(p,c){var S="4.0.0";let I,k;const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((n,o)=>{const h=requestAnimationFrame(n);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(h),o(c.c())})}),getImageData(y,n=0){return this.getImageCanvasContext(y).getImageData(-n,-n,y.width+2*n,y.height+2*n)},getImageCanvasContext(y){const n=window.document.createElement("canvas"),o=n.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return n.width=y.width,n.height=y.height,o.drawImage(y,0,0,y.width,y.height),o},resolveURL:y=>(I||(I=document.createElement("a")),I.href=y,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class z{static testProp(n){if(!z.docStyle)return n[0];for(let o=0;o<n.length;o++)if(n[o]in z.docStyle)return n[o];return n[0]}static create(n,o,h){const m=window.document.createElement(n);return o!==void 0&&(m.className=o),h&&h.appendChild(m),m}static createNS(n,o){return window.document.createElementNS(n,o)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(n,o){n.style[z.transformProp]=o}static addEventListener(n,o,h,m={}){n.addEventListener(o,h,"passive"in m?m:m.capture)}static removeEventListener(n,o,h,m={}){n.removeEventListener(o,h,"passive"in m?m:m.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",z.suppressClickInternal,!0)},0)}static getScale(n){const o=n.getBoundingClientRect();return{x:o.width/n.offsetWidth||1,y:o.height/n.offsetHeight||1,boundingClientRect:o}}static getPoint(n,o,h){const m=o.boundingClientRect;return new c.P((h.clientX-m.left)/o.x-n.clientLeft,(h.clientY-m.top)/o.y-n.clientTop)}static mousePos(n,o){const h=z.getScale(n);return z.getPoint(n,h,o)}static touchPos(n,o){const h=[],m=z.getScale(n);for(let _=0;_<o.length;_++)h.push(z.getPoint(n,m,o[_]));return h}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const ue={supported:!1,testSupport:function(y){!ae&&q&&(G?N(y):ie=y)}};let ie,q,ae=!1,G=!1;function N(y){const n=y.createTexture();y.bindTexture(y.TEXTURE_2D,n);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,q),y.isContextLost())return;ue.supported=!0}catch{}y.deleteTexture(n),ae=!0}var H,re;typeof document<"u"&&(q=document.createElement("img"),q.onload=function(){ie&&N(ie),ie=null,G=!0},q.onerror=function(){ae=!0,ie=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let n,o,h,m;y.resetRequestQueue=()=>{n=[],o=0,h=0,m={}},y.addThrottleControl=C=>{const P=h++;return m[P]=C,P},y.removeThrottleControl=C=>{delete m[C],b()},y.getImage=(C,P,L=!0)=>new Promise((F,V)=>{ue.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),c.e(C,{type:"image"}),n.push({abortController:P,requestParameters:C,supportImageRefresh:L,state:"queued",onError:J=>{V(J)},onSuccess:J=>{F(J)}}),b()});const _=C=>c._(this,void 0,void 0,function*(){C.state="running";const{requestParameters:P,supportImageRefresh:L,onError:F,onSuccess:V,abortController:J}=C,Q=L===!1&&!c.i(self)&&!c.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((fe,Se)=>fe&&Se==="accept",!0));o++;const ne=Q?A(P,J):c.m(P,J);try{const fe=yield ne;delete C.abortController,C.state="completed",fe.data instanceof HTMLImageElement||c.b(fe.data)?V(fe):fe.data&&V({data:yield(K=fe.data,typeof createImageBitmap=="function"?c.d(K):c.f(K)),cacheControl:fe.cacheControl,expires:fe.expires})}catch(fe){delete C.abortController,F(fe)}finally{o--,b()}var K}),b=()=>{const C=(()=>{for(const P of Object.keys(m))if(m[P]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=o;P<C&&n.length>0;P++){const L=n.shift();L.abortController.signal.aborted?P--:_(L)}},A=(C,P)=>new Promise((L,F)=>{const V=new Image,J=C.url,Q=C.credentials;Q&&Q==="include"?V.crossOrigin="use-credentials":(Q&&Q==="same-origin"||!c.s(J))&&(V.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{V.src="",F(c.c())}),V.fetchPriority="high",V.onload=()=>{V.onerror=V.onload=null,L({data:V})},V.onerror=()=>{V.onerror=V.onload=null,P.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},V.src=J})}(H||(H={})),H.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(re||(re={}));class be{constructor(n){this._transformRequestFn=n}transformRequest(n,o){return this._transformRequestFn&&this._transformRequestFn(n,o)||{url:n}}normalizeSpriteURL(n,o,h){const m=function(_){const b=_.match(Pe);if(!b)throw new Error(`Unable to parse URL "${_}"`);return{protocol:b[1],authority:b[2],path:b[3]||"/",params:b[4]?b[4].split("&"):[]}}(n);return m.path+=`${o}${h}`,function(_){const b=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${b}`}(m)}setTransformRequest(n){this._transformRequestFn=n}}const Pe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(y){var n=new c.A(3);return n[0]=y[0],n[1]=y[1],n[2]=y[2],n}var Oe,at=function(y,n,o){return y[0]=n[0]-o[0],y[1]=n[1]-o[1],y[2]=n[2]-o[2],y};Oe=new c.A(3),c.A!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0);var rt=function(y){var n=y[0],o=y[1];return n*n+o*o};function Et(y){const n=[];if(typeof y=="string")n.push({id:"default",url:y});else if(y&&y.length>0){const o=[];for(const{id:h,url:m}of y){const _=`${h}${m}`;o.indexOf(_)===-1&&(o.push(_),n.push({id:h,url:m}))}}return n}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Dt{constructor(n,o,h,m){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(o,m)}update(n,o,h){const{width:m,height:_}=n,b=!(this.size&&this.size[0]===m&&this.size[1]===_||h),{context:A}=this,{gl:C}=A;if(this.useMipmap=!!(o&&o.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!o||o.premultiply!==!1)),b)this.size=[m,_],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.b(n)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,n):C.texImage2D(C.TEXTURE_2D,0,this.format,m,_,0,this.format,C.UNSIGNED_BYTE,n.data);else{const{x:P,y:L}=h||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.b(n)?C.texSubImage2D(C.TEXTURE_2D,0,P,L,C.RGBA,C.UNSIGNED_BYTE,n):C.texSubImage2D(C.TEXTURE_2D,0,P,L,m,_,C.RGBA,C.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(n,o,h){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),n!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||n),this.filter=n),o!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function Gt(y){const{userImage:n}=y;return!!(n&&n.render&&n.render())&&(y.data.replace(new Uint8Array(n.data.buffer)),!0)}class nr extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:o,promiseResolve:h}of this.requestors)h(this._getImagesForIds(o));this.requestors=[]}}getImage(n){const o=this.images[n];if(o&&!o.data&&o.spriteData){const h=o.spriteData;o.data=new c.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),o.spriteData=null}return o}addImage(n,o){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,o)&&(this.images[n]=o)}_validate(n,o){let h=!0;const m=o.data||o.spriteData;return this._validateStretch(o.stretchX,m&&m.width)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "stretchX" value`))),h=!1),this._validateStretch(o.stretchY,m&&m.height)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "stretchY" value`))),h=!1),this._validateContent(o.content,o)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "content" value`))),h=!1),h}_validateStretch(n,o){if(!n)return!0;let h=0;for(const m of n){if(m[0]<h||m[1]<m[0]||o<m[1])return!1;h=m[1]}return!0}_validateContent(n,o){if(!n)return!0;if(n.length!==4)return!1;const h=o.spriteData,m=h&&h.width||o.data.width,_=h&&h.height||o.data.height;return!(n[0]<0||m<n[0]||n[1]<0||_<n[1]||n[2]<0||m<n[2]||n[3]<0||_<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,o,h=!0){const m=this.getImage(n);if(h&&(m.data.width!==o.data.width||m.data.height!==o.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=m.version+1,this.images[n]=o,this.updatedImages[n]=!0}removeImage(n){const o=this.images[n];delete this.images[n],delete this.patterns[n],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((o,h)=>{let m=!0;if(!this.isLoaded())for(const _ of n)this.images[_]||(m=!1);this.isLoaded()||m?o(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:o})})}_getImagesForIds(n){const o={};for(const h of n){let m=this.getImage(h);m||(this.fire(new c.k("styleimagemissing",{id:h})),m=this.getImage(h)),m?o[h]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:c.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:n,height:o}=this.atlasImage;return{width:n,height:o}}getPattern(n){const o=this.patterns[n],h=this.getImage(n);if(!h)return null;if(o&&o.position.version===h.version)return o.position;if(o)o.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},_=new c.I(m,h);this.patterns[n]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const o=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Dt(n,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const _ in this.patterns)n.push(this.patterns[_].bin);const{w:o,h}=c.p(n),m=this.atlasImage;m.resize({width:o||1,height:h||1});for(const _ in this.patterns){const{bin:b}=this.patterns[_],A=b.x+1,C=b.y+1,P=this.getImage(_).data,L=P.width,F=P.height;c.R.copy(P,m,{x:0,y:0},{x:A,y:C},{width:L,height:F}),c.R.copy(P,m,{x:0,y:F-1},{x:A,y:C-1},{width:L,height:1}),c.R.copy(P,m,{x:0,y:0},{x:A,y:C+F},{width:L,height:1}),c.R.copy(P,m,{x:L-1,y:0},{x:A-1,y:C},{width:1,height:F}),c.R.copy(P,m,{x:0,y:0},{x:A+L,y:C},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const o of n){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const h=this.getImage(o);h||c.w(`Image with ID: "${o}" was not found`),Gt(h)&&this.updateImage(o,h)}}}const or=1e20;function ir(y,n,o,h,m,_,b,A,C){for(let P=n;P<n+h;P++)xn(y,o*_+P,_,m,b,A,C);for(let P=o;P<o+m;P++)xn(y,P*_+n,1,h,b,A,C)}function xn(y,n,o,h,m,_,b){_[0]=0,b[0]=-or,b[1]=or,m[0]=y[n];for(let A=1,C=0,P=0;A<h;A++){m[A]=y[n+A*o];const L=A*A;do{const F=_[C];P=(m[A]-m[F]+L-F*F)/(A-F)/2}while(P<=b[C]&&--C>-1);C++,_[C]=A,b[C]=P,b[C+1]=or}for(let A=0,C=0;A<h;A++){for(;b[C+1]<A;)C++;const P=_[C],L=A-P;y[n+A*o]=m[P]+L*L}}class et{constructor(n,o){this.requestManager=n,this.localIdeographFontFamily=o,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,function*(){const o=[];for(const _ in n)for(const b of n[_])o.push(this._getAndCacheGlyphsPromise(_,b));const h=yield Promise.all(o),m={};for(const{stack:_,id:b,glyph:A}of h)m[_]||(m[_]={}),m[_][b]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return m})}_getAndCacheGlyphsPromise(n,o){return c._(this,void 0,void 0,function*(){let h=this.entries[n];h||(h=this.entries[n]={glyphs:{},requests:{},ranges:{}});let m=h.glyphs[o];if(m!==void 0)return{stack:n,id:o,glyph:m};if(m=this._tinySDF(h,n,o),m)return h.glyphs[o]=m,{stack:n,id:o,glyph:m};const _=Math.floor(o/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[_])return{stack:n,id:o,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[_]){const A=et.loadGlyphRange(n,_,this.url,this.requestManager);h.requests[_]=A}const b=yield h.requests[_];for(const A in b)this._doesCharSupportLocalGlyph(+A)||(h.glyphs[+A]=b[+A]);return h.ranges[_]=!0,{stack:n,id:o,glyph:b[o]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](n)||c.u["Hangul Syllables"](n)||c.u.Hiragana(n)||c.u.Katakana(n))}_tinySDF(n,o,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let _=n.tinySDF;if(!_){let A="400";/bold/i.test(o)?A="900":/medium/i.test(o)?A="500":/light/i.test(o)&&(A="200"),_=n.tinySDF=new et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:A})}const b=_.draw(String.fromCharCode(h));return{id:h,bitmap:new c.o({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}et.loadGlyphRange=function(y,n,o,h){return c._(this,void 0,void 0,function*(){const m=256*n,_=m+255,b=h.transformRequest(o.replace("{fontstack}",y).replace("{range}",`${m}-${_}`),re.Glyphs),A=yield c.l(b,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${n}, ${m}-${_}`);const C={};for(const P of c.n(A.data))C[P.id]=P;return C})},et.TinySDF=class{constructor({fontSize:y=24,buffer:n=3,radius:o=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:b="normal"}={}){this.buffer=n,this.cutoff=h,this.radius=o;const A=this.size=y+4*n,C=this._createCanvas(A),P=this.ctx=C.getContext("2d",{willReadFrequently:!0});P.font=`${b} ${_} ${y}px ${m}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(y){const n=document.createElement("canvas");return n.width=n.height=y,n}draw(y){const{width:n,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(y),b=Math.ceil(o),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),C=Math.min(this.size-this.buffer,b+Math.ceil(h)),P=A+2*this.buffer,L=C+2*this.buffer,F=Math.max(P*L,0),V=new Uint8ClampedArray(F),J={data:V,width:P,height:L,glyphWidth:A,glyphHeight:C,glyphTop:b,glyphLeft:0,glyphAdvance:n};if(A===0||C===0)return J;const{ctx:Q,buffer:ne,gridInner:K,gridOuter:fe}=this;Q.clearRect(ne,ne,A,C),Q.fillText(y,ne,ne+b);const Se=Q.getImageData(ne,ne,A,C);fe.fill(or,0,F),K.fill(0,0,F);for(let se=0;se<C;se++)for(let ye=0;ye<A;ye++){const Ce=Se.data[4*(se*A+ye)+3]/255;if(Ce===0)continue;const Ee=(se+ne)*P+ye+ne;if(Ce===1)fe[Ee]=0,K[Ee]=or;else{const De=.5-Ce;fe[Ee]=De>0?De*De:0,K[Ee]=De<0?De*De:0}}ir(fe,0,0,P,L,P,this.f,this.v,this.z),ir(K,ne,ne,A,C,P,this.f,this.v,this.z);for(let se=0;se<F;se++){const ye=Math.sqrt(fe[se])-Math.sqrt(K[se]);V[se]=Math.round(255-255*(ye/this.radius+this.cutoff))}return J}};class bt{constructor(){this.specification=c.v.light.position}possiblyEvaluate(n,o){return c.y(n.expression.evaluate(o))}interpolate(n,o,h){return{x:c.z.number(n.x,o.x,h),y:c.z.number(n.y,o.y,h),z:c.z.number(n.z,o.z,h)}}}let wt;class Lt extends c.E{constructor(n){super(),wt=wt||new c.q({anchor:new c.D(c.v.light.anchor),position:new bt,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(wt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,o={}){if(!this._validate(c.r,n,o))for(const h in n){const m=n[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),m):this._transitionable.setValue(h,m)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,o,h){return(!h||h.validate!==!1)&&c.t(this,n.call(c.x,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}class jt{constructor(n,o){this.width=n,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,o){const h=n.join(",")+String(o);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(n,o)),this.dashEntry[h]}getDashRanges(n,o,h){const m=[];let _=n.length%2==1?-n[n.length-1]*h:0,b=n[0]*h,A=!0;m.push({left:_,right:b,isDash:A,zeroLength:n[0]===0});let C=n[0];for(let P=1;P<n.length;P++){A=!A;const L=n[P];_=C*h,C+=L,b=C*h,m.push({left:_,right:b,isDash:A,zeroLength:L===0})}return m}addRoundDash(n,o,h){const m=o/2;for(let _=-h;_<=h;_++){const b=this.width*(this.nextRow+h+_);let A=0,C=n[A];for(let P=0;P<this.width;P++){P/C.right>1&&(C=n[++A]);const L=Math.abs(P-C.left),F=Math.abs(P-C.right),V=Math.min(L,F);let J;const Q=_/h*(m+1);if(C.isDash){const ne=m-Math.abs(Q);J=Math.sqrt(V*V+ne*ne)}else J=m-Math.sqrt(V*V+Q*Q);this.data[b+P]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(n){for(let A=n.length-1;A>=0;--A){const C=n[A],P=n[A+1];C.zeroLength?n.splice(A,1):P&&P.isDash===C.isDash&&(P.left=C.left,n.splice(A,1))}const o=n[0],h=n[n.length-1];o.isDash===h.isDash&&(o.left=h.left-this.width,h.right=o.right+this.width);const m=this.width*this.nextRow;let _=0,b=n[_];for(let A=0;A<this.width;A++){A/b.right>1&&(b=n[++_]);const C=Math.abs(A-b.left),P=Math.abs(A-b.right),L=Math.min(C,P);this.data[m+A]=Math.max(0,Math.min(255,(b.isDash?L:-L)+128))}}addDash(n,o){const h=o?7:0,m=2*h+1;if(this.nextRow+m>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let A=0;A<n.length;A++)_+=n[A];if(_!==0){const A=this.width/_,C=this.getDashRanges(n,this.width,A);o?this.addRoundDash(C,A,h):this.addRegularDash(C)}const b={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:_};return this.nextRow+=m,this.dirty=!0,b}bind(n){const o=n.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Pt="maplibre_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pt]}numActive(){return Object.keys(this.active).length}}const Pn=Math.floor(R.hardwareConcurrency/2);let Rr,Wr;function Mn(){return Rr||(Rr=new Nt),Rr}Nt.workerCount=c.B(globalThis)?Math.max(Math.min(Pn,3),1):1;class qi{constructor(n,o){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=o;const h=this.workerPool.acquire(o);for(let m=0;m<h.length;m++){const _=new c.C(h[m],o);_.name=`Worker ${m}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,o){const h=[];for(const m of this.actors)h.push(m.sendAsync({type:n,data:o}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,o){for(const h of this.actors)h.registerMessageHandler(n,o)}}function ri(){return Wr||(Wr=new qi(Mn(),c.G),Wr.registerMessageHandler("getResource",(y,n,o)=>c.m(n,o))),Wr}function Ca(y,n){const o=c.F();return c.H(o,o,[1,1,0]),c.J(o,o,[.5*y.width,.5*y.height,1]),c.K(o,o,y.calculatePosMatrix(n.toUnwrapped()))}function gi(y,n,o,h,m,_){const b=function(F,V,J){if(F)for(const Q of F){const ne=V[Q];if(ne&&ne.source===J&&ne.type==="fill-extrusion")return!0}else for(const Q in V){const ne=V[Q];if(ne.source===J&&ne.type==="fill-extrusion")return!0}return!1}(m&&m.layers,n,y.id),A=_.maxPitchScaleFactor(),C=y.tilesIn(h,A,b);C.sort(Dr);const P=[];for(const F of C)P.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(n,o,y._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,m,_,A,Ca(y.transform,F.tileID))});const L=function(F){const V={},J={};for(const Q of F){const ne=Q.queryResults,K=Q.wrappedTileID,fe=J[K]=J[K]||{};for(const Se in ne){const se=ne[Se],ye=fe[Se]=fe[Se]||{},Ce=V[Se]=V[Se]||[];for(const Ee of se)ye[Ee.featureIndex]||(ye[Ee.featureIndex]=!0,Ce.push(Ee))}}return V}(P);for(const F in L)L[F].forEach(V=>{const J=V.feature,Q=y.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=Q});return L}function Dr(y,n){const o=y.tileID,h=n.tileID;return o.overscaledZ-h.overscaledZ||o.canonical.y-h.canonical.y||o.wrap-h.wrap||o.canonical.x-h.canonical.x}function Lr(y,n,o){return c._(this,void 0,void 0,function*(){let h=y;if(y.url?h=(yield c.h(n.transformRequest(y.url,re.Source),o)).data:yield R.frameAsync(o),!h)return null;const m=c.L(c.e(h,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(m.vectorLayerIds=h.vector_layers.map(_=>_.id)),m})}class gr{constructor(n,o){n&&(o?this.setSouthWest(n).setNorthEast(o):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.M?new c.M(n.lng,n.lat):c.M.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.M?new c.M(n.lng,n.lat):c.M.convert(n),this}extend(n){const o=this._sw,h=this._ne;let m,_;if(n instanceof c.M)m=n,_=n;else{if(!(n instanceof gr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(gr.convert(n)):this.extend(c.M.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.M.convert(n)):this;if(m=n._sw,_=n._ne,!m||!_)return this}return o||h?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),h.lng=Math.max(_.lng,h.lng),h.lat=Math.max(_.lat,h.lat)):(this._sw=new c.M(m.lng,m.lat),this._ne=new c.M(_.lng,_.lat)),this}getCenter(){return new c.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.M(this.getWest(),this.getNorth())}getSouthEast(){return new c.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:o,lat:h}=c.M.convert(n);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m}static convert(n){return n instanceof gr?n:n&&new gr(n)}static fromLngLat(n,o=0){const h=360*o/40075017,m=h/Math.cos(Math.PI/180*n.lat);return new gr(new c.M(n.lng-m,n.lat-h),new c.M(n.lng+m,n.lat+h))}}class Zn{constructor(n,o,h){this.bounds=gr.convert(this.validateBounds(n)),this.minzoom=o||0,this.maxzoom=h||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const o=Math.pow(2,n.z),h=Math.floor(c.N(this.bounds.getWest())*o),m=Math.floor(c.O(this.bounds.getNorth())*o),_=Math.ceil(c.N(this.bounds.getEast())*o),b=Math.ceil(c.O(this.bounds.getSouth())*o);return n.x>=h&&n.x<_&&n.y>=m&&n.y<b}}class Ie extends c.E{constructor(n,o,h,m){if(super(),this.id=n,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.L(o,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new Zn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new c.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,function*(){const o=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(o,re.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};h.request.collectResourceTiming=this._collectResourceTiming;let m="reloadTile";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((_,b)=>{n.reloadPromise={resolve:_,reject:b}})}else n.actor=this.dispatcher.getActor(),m="loadTile";n.abortController=new AbortController;try{const _=yield n.actor.sendAsync({type:m,data:h},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,_)}catch(_){if(delete n.abortController,n.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,o){if(o&&o.resourceTiming&&(n.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&n.setExpiryData(o),n.loadVectorData(o,this.map.painter),n.reloadPromise){const h=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(h.resolve).catch(h.reject)}}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"abortTile",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"removeTile",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class oe extends c.E{constructor(n,o,h,m){super(),this.id=n,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},o),c.e(this,c.L(o,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(c.e(this,n),n.bounds&&(this.tileBounds=new Zn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new c.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,function*(){const o=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const h=yield H.getImage(this.map._requestManager.transformRequest(o,re.Tile),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&n.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const m=this.map.painter.context,_=m.gl,b=h.data;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new Dt(m,b,_.RGBA,{useMipmap:!0}),n.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),m.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,m.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,m.extTextureFilterAnisotropicMax)),n.state="loaded"}}catch(h){if(delete n.abortController,n.aborted)n.state="unloaded";else if(h)throw n.state="errored",h}})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class de extends oe{constructor(n,o,h,m){super(n,o,h,m),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(n){return c._(this,void 0,void 0,function*(){const o=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(o,re.Tile);n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const m=yield H.getImage(h,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(m&&m.data){const _=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&n.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const b=c.b(_)&&c.S()?_:yield this.readImageNow(_),A={type:this.type,uid:n.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const C=yield n.actor.sendAsync({type:"loadDEMTile",data:A});n.dem=C,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(m){if(delete n.abortController,n.aborted)n.state="unloaded";else if(m)throw n.state="errored",m}})}readImageNow(n){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.U()){const o=n.width+2,h=n.height+2;try{return new c.R({width:o,height:h},yield c.V(n,-1,-1,o,h))}catch{}}return R.getImageData(n,1)})}_getNeighboringTiles(n){const o=n.canonical,h=Math.pow(2,o.z),m=(o.x-1+h)%h,_=o.x===0?n.wrap-1:n.wrap,b=(o.x+1+h)%h,A=o.x+1===h?n.wrap+1:n.wrap,C={};return C[new c.Q(n.overscaledZ,_,o.z,m,o.y).key]={backfilled:!1},C[new c.Q(n.overscaledZ,A,o.z,b,o.y).key]={backfilled:!1},o.y>0&&(C[new c.Q(n.overscaledZ,_,o.z,m,o.y-1).key]={backfilled:!1},C[new c.Q(n.overscaledZ,n.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},C[new c.Q(n.overscaledZ,A,o.z,b,o.y-1).key]={backfilled:!1}),o.y+1<h&&(C[new c.Q(n.overscaledZ,_,o.z,m,o.y+1).key]={backfilled:!1},C[new c.Q(n.overscaledZ,n.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},C[new c.Q(n.overscaledZ,A,o.z,b,o.y+1).key]={backfilled:!1}),C}unloadTile(n){return c._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class ve extends c.E{constructor(n,o,h,m){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=o.data,this._options=c.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const _=c.W/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*_,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*_,extent:c.W,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:c.W,radius:(o.clusterRadius||50)*_,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,o,h){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:n,limit:o,offset:h}})}_updateWorkerData(n){return c._(this,void 0,void 0,function*(){const o=c.e({type:this.type},this.workerOptions);n?o.dataDiff=n:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(R.resolveURL(this._data),re.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"loadData",data:o});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let m=null;h.resourceTiming&&h.resourceTiming[this.id]&&(m=h.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&c.e(_,{resourceTiming:m}),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(h))}})}loaded(){return this._pendingLoads===0}loadTile(n){return c._(this,void 0,void 0,function*(){const o=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const h={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const m=yield this.actor.sendAsync({type:o,data:h},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(m,this.map.painter,o==="reloadTile")})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var $e=c.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ve extends c.E{constructor(n,o,h,m){super(),this.id=n,this.dispatcher=h,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=o}load(n){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield H.getImage(this.map._requestManager.transformRequest(this.url,re.Image),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,n&&(this.coordinates=n),this._finishLoading())}catch(o){this._request=null,this.fire(new c.j(o))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const o=n.map(c.Y.fromLngLat);this.tileID=function(m){let _=1/0,b=1/0,A=-1/0,C=-1/0;for(const V of m)_=Math.min(_,V.x),b=Math.min(b,V.y),A=Math.max(A,V.x),C=Math.max(C,V.y);const P=Math.max(A-_,C-b),L=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),F=Math.pow(2,L);return new c.a0(L,Math.floor((_+A)/2*F),Math.floor((b+C)/2*F))}(o),this.minzoom=this.maxzoom=this.tileID.z;const h=o.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new c.Z,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,c.W,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,c.W),this._boundsArray.emplaceBack(h[2].x,h[2].y,c.W,c.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,o=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Dt(n,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const _=this.tiles[m];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,h=!0)}h&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class qe extends Ve{constructor(n,o,h,m){super(n,o,h,m),this.roundZoom=!0,this.type="video",this.options=o}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const o of n.urls)this.urls.push(this.map._requestManager.transformRequest(o,re.Source).url);try{const o=yield c.a2(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new c.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const o=this.video.seekable;n<o.start(0)||n>o.end(0)?this.fire(new c.j(new c.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,o=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new Dt(n,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let h=!1;for(const m in this.tiles){const _=this.tiles[m];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,h=!0)}h&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class _t extends Ve{constructor(n,o,h,m){super(n,o,h,m),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new c.j(new c.a1(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a1(`sources.${n}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new c.j(new c.a1(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a1(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a1(`sources.${n}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Dt(o,this.canvas,h.RGBA,{premultiply:!0});let m=!1;for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const kt={},$t=y=>{switch(y){case"geojson":return ve;case"image":return Ve;case"raster":return oe;case"raster-dem":return de;case"vector":return Ie;case"video":return qe;case"canvas":return _t}return kt[y]};class Qt extends c.E{constructor(){super(...arguments),this.pluginStatus="unavailable",this.pluginURL=null,this.dispatcher=ri(),this.queue=[]}_sendPluginStateToWorker(){return c._(this,void 0,void 0,function*(){yield this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}),this.fire(new c.k("pluginStateChange",{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}))})}getRTLTextPluginStatus(){return this.pluginStatus}clearRTLTextPlugin(){this.pluginStatus="unavailable",this.pluginURL=null}setRTLTextPlugin(n,o=!1){return c._(this,void 0,void 0,function*(){if(this.pluginStatus==="deferred"||this.pluginStatus==="loading"||this.pluginStatus==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");this.pluginURL=R.resolveURL(n),this.pluginStatus="deferred",yield this._sendPluginStateToWorker(),o||(yield this._downloadRTLTextPlugin())})}_downloadRTLTextPlugin(){return c._(this,void 0,void 0,function*(){if(this.pluginStatus!=="deferred"||!this.pluginURL)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");try{this.pluginStatus="loading",yield this._sendPluginStateToWorker(),yield c.l({url:this.pluginURL},new AbortController),this.pluginStatus="loaded"}catch{this.pluginStatus="error"}yield this._sendPluginStateToWorker()})}lazyLoadRTLTextPlugin(){return c._(this,void 0,void 0,function*(){this.pluginStatus==="deferred"&&(yield this._downloadRTLTextPlugin())})}}let kn=null;function je(){return kn||(kn=new Qt),kn}class zr{constructor(n,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=c.a3(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const o=n+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,o,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(m,_){const b={};if(!_)return b;for(const A of m){const C=A.layerIds.map(P=>_.getLayer(P)).filter(Boolean);if(C.length!==0){A.layers=C,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(P=>C.filter(L=>L.id===P)[0]));for(const P of C)b[P.id]=A}}return b}(n.buckets,o.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof c.a5){if(this.hasSymbolBuckets=!0,!h)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof c.a5&&_.hasRTLText){this.hasRTLText=!0,je().lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(m).queryRadius(_))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.a4}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(n)}const o=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dt(n,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dt(n,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,o,h,m,_,b,A,C,P,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:b,tileSize:this.tileSize,pixelPosMatrix:L,transform:C,params:A,queryPadding:this.queryPadding*P},n,o,h):{}}querySourceFeatures(n,o){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),_=o&&o.sourceLayer?o.sourceLayer:"",b=m._geojsonTileLayer||m[_];if(!b)return;const A=c.a6(o&&o.filter),{z:C,x:P,y:L}=this.tileID.canonical,F={z:C,x:P,y:L};for(let V=0;V<b.length;V++){const J=b.feature(V);if(A.needGeometry){const K=c.a7(J,!0);if(!A.filter(new c.a8(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!A.filter(new c.a8(this.tileID.overscaledZ),J))continue;const Q=h.getId(J,_),ne=new c.a9(J,C,P,L,Q);ne.tile=F,n.push(ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const o=this.expirationTime;if(n.cacheControl){const h=c.aa(n.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(o)if(this.expirationTime<o)m=!0;else{const _=this.expirationTime-o;_?this.expirationTime=h+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!o.style.hasLayer(m))continue;const _=this.buckets[m],b=_.layers[0].sourceLayer||"_geojsonTileLayer",A=h[b],C=n[b];if(!A||!C||Object.keys(C).length===0)continue;_.update(C,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=o&&o.style&&o.style.getLayer(m);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=R.now()+n}setDependencies(n,o){const h={};for(const m of o)h[m]=!0;this.dependencies[n]=h}hasDependency(n,o){for(const h of n){const m=this.dependencies[h];if(m){for(const _ of o)if(m[_])return!0}}return!1}}class Jr{constructor(n,o){this.max=n,this.onRemove=o,this.reset()}reset(){for(const n in this.data)for(const o of this.data[n])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(n,o,h){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:o,timeout:void 0};if(h!==void 0&&(_.timeout=setTimeout(()=>{this.remove(n,_)},h)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const o=this.data[n].shift();return o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),o.value}getByKey(n){const o=this.data[n];return o?o[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,o){if(!this.has(n))return this;const h=n.wrapped().key,m=o===void 0?0:this.data[h].indexOf(o),_=this.data[h][m];return this.data[h].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(_.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(n){const o=[];for(const h in this.data)for(const m of this.data[h])n(m.value)||o.push(m);for(const h of o)this.remove(h.value.tileID,h)}}class ki{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,o,h){const m=String(o);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},c.e(this.stateChanges[n][m],h),this.deletedStates[n]===null){this.deletedStates[n]={};for(const _ in this.state[n])_!==m&&(this.deletedStates[n][_]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const _ in this.state[n][m])h[_]||(this.deletedStates[n][m][_]=null)}else for(const _ in h)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][_]===null&&delete this.deletedStates[n][m][_]}removeFeatureState(n,o,h){if(this.deletedStates[n]===null)return;const m=String(o);if(this.deletedStates[n]=this.deletedStates[n]||{},h&&o!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][h]=null);else if(o!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(h in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][h]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,o){const h=String(o),m=c.e({},(this.state[n]||{})[h],(this.stateChanges[n]||{})[h]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const _=this.deletedStates[n][o];if(_===null)return{};for(const b in _)delete m[b]}return m}initializeTileState(n,o){n.setFeatureState(this.state,o)}coalesceChanges(n,o){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const b in this.stateChanges[m])this.state[m][b]||(this.state[m][b]={}),c.e(this.state[m][b],this.stateChanges[m][b]),_[b]=this.state[m][b];h[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const b in this.state[m])_[b]={},this.state[m][b]={};else for(const b in this.deletedStates[m]){if(this.deletedStates[m][b]===null)this.state[m][b]={};else for(const A of Object.keys(this.deletedStates[m][b]))delete this.state[m][b][A];_[b]=this.state[m][b]}h[m]=h[m]||{},c.e(h[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in n)n[m].setFeatureState(h,o)}}class yr extends c.E{constructor(n,o,h){super(),this.id=n,this.dispatcher=h,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,b,A)=>{const C=new($t(_.type))(m,_,b,A);if(C.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${C.id}`);return C})(n,o,h,this),this._tiles={},this._cache=new Jr(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ki,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const o=this._tiles[n];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,o,h){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,o,h)}catch(m){n.state="errored",m.status!==404?this._source.fire(new c.j(m,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const h=this._tiles[o];h.upload(n),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Ge).map(n=>n.key)}getRenderableIds(n){const o=[];for(const h in this._tiles)this._isIdRenderable(h,n)&&o.push(this._tiles[h]);return n?o.sort((h,m)=>{const _=h.tileID,b=m.tileID,A=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),C=new c.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-b.overscaledZ||C.y-A.y||C.x-A.x}).map(h=>h.tileID.key):o.map(h=>h.tileID).sort(Ge).map(h=>h.key)}hasRenderableParent(n){const o=this.findLoadedParent(n,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(n,o){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(o||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,o){return c._(this,void 0,void 0,function*(){const h=this._tiles[n];h&&(h.state!=="loading"&&(h.state=o),yield this._loadTile(h,n,o))})}_tileLoaded(n,o,h){n.timeAdded=R.now(),h==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(o,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const o=this.getRenderableIds();for(let m=0;m<o.length;m++){const _=o[m];if(n.neighboringTiles&&n.neighboringTiles[_]){const b=this.getTileByID(_);h(n,b),h(b,n)}}function h(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let b=_.tileID.canonical.x-m.tileID.canonical.x;const A=_.tileID.canonical.y-m.tileID.canonical.y,C=Math.pow(2,m.tileID.canonical.z),P=_.tileID.key;b===0&&A===0||Math.abs(A)>1||(Math.abs(b)>1&&(Math.abs(b+C)===1?b+=C:Math.abs(b-C)===1&&(b-=C)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,b,A),m.neighboringTiles&&m.neighboringTiles[P]&&(m.neighboringTiles[P].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,o,h,m){for(const _ in this._tiles){let b=this._tiles[_];if(m[_]||!b.hasData()||b.tileID.overscaledZ<=o||b.tileID.overscaledZ>h)continue;let A=b.tileID;for(;b&&b.tileID.overscaledZ>o+1;){const P=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[P.key],b&&b.hasData()&&(A=P)}let C=A;for(;C.overscaledZ>o;)if(C=C.scaledTo(C.overscaledZ-1),n[C.key]){m[A.key]=A;break}}}findLoadedParent(n,o){if(n.key in this._loadedParentTiles){const h=this._loadedParentTiles[n.key];return h&&h.tileID.overscaledZ>=o?h:null}for(let h=n.overscaledZ-1;h>=o;h--){const m=n.scaledTo(h),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(n){const o=this._tiles[n.key];return o&&o.hasData()?o:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const o=Math.ceil(n.width/this._source.tileSize)+1,h=Math.ceil(n.height/this._source.tileSize)+1,m=Math.floor(o*h*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(n){const o=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,o){const h={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+o),h[_.tileID.key]=_}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(n,o){if(this.transform=n,this.terrain=o,!this._sourceLoaded||this._paused)return;let h;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new c.Q(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(h=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(h=h.filter(L=>this._source.hasTile(L)))):h=[];const m=n.coveringZoomLevel(this._source),_=Math.max(m-yr.maxOverzooming,this._source.minzoom),b=Math.max(m+yr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const F of h)if(F.canonical.z>this._source.minzoom){const V=F.scaledTo(F.canonical.z-1);L[V.key]=V;const J=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));L[J.key]=J}h=h.concat(Object.values(L))}const A=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const C=this._updateRetainedTiles(h,m);if(At(this._source.type)){const L={},F={},V=Object.keys(C),J=R.now();for(const Q of V){const ne=C[Q],K=this._tiles[Q];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=J)continue;const fe=this.findLoadedParent(ne,_);fe&&(this._addTile(fe.tileID),L[fe.tileID.key]=fe.tileID),F[Q]=ne}this._retainLoadedChildren(F,m,b,C);for(const Q in L)C[Q]||(this._coveredTiles[Q]=!0,C[Q]=L[Q]);if(o){const Q={},ne={};for(const K of h)this._tiles[K.key].hasData()?Q[K.key]=K:ne[K.key]=K;for(const K in ne){const fe=ne[K].children(this._source.maxzoom);this._tiles[fe[0].key]&&this._tiles[fe[1].key]&&this._tiles[fe[2].key]&&this._tiles[fe[3].key]&&(Q[fe[0].key]=C[fe[0].key]=fe[0],Q[fe[1].key]=C[fe[1].key]=fe[1],Q[fe[2].key]=C[fe[2].key]=fe[2],Q[fe[3].key]=C[fe[3].key]=fe[3],delete ne[K])}for(const K in ne){const fe=this.findLoadedParent(ne[K],this._source.minzoom);if(fe){Q[fe.tileID.key]=C[fe.tileID.key]=fe.tileID;for(const Se in Q)Q[Se].isChildOf(fe.tileID)&&delete Q[Se]}}for(const K in this._tiles)Q[K]||(this._coveredTiles[K]=!0)}}for(const L in C)this._tiles[L].clearFadeHold();const P=c.ab(this._tiles,C);for(const L of P){const F=this._tiles[L];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,o){const h={},m={},_=Math.max(o-yr.maxOverzooming,this._source.minzoom),b=Math.max(o+yr.maxUnderzooming,this._source.minzoom),A={};for(const C of n){const P=this._addTile(C);h[C.key]=C,P.hasData()||o<this._source.maxzoom&&(A[C.key]=C)}this._retainLoadedChildren(A,o,b,h);for(const C of n){let P=this._tiles[C.key];if(P.hasData())continue;if(o+1>this._source.maxzoom){const F=C.children(this._source.maxzoom)[0],V=this.getTile(F);if(V&&V.hasData()){h[F.key]=F;continue}}else{const F=C.children(this._source.maxzoom);if(h[F[0].key]&&h[F[1].key]&&h[F[2].key]&&h[F[3].key])continue}let L=P.wasRequested();for(let F=C.overscaledZ-1;F>=_;--F){const V=C.scaledTo(F);if(m[V.key])break;if(m[V.key]=!0,P=this.getTile(V),!P&&L&&(P=this._addTile(V)),P){const J=P.hasData();if((L||J)&&(h[V.key]=V),L=P.wasRequested(),J)break}}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const o=[];let h,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}o.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(_),h)break;m=_}for(const _ of o)this._loadedParentTiles[_]=h}}_addTile(n){let o=this._tiles[n.key];if(o)return o;o=this._cache.getAndRemove(n),o&&(this._setTileReloadTimer(n.key,o),o.tileID=n,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,o)));const h=o;return o||(o=new zr(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(o,n.key,o.state)),o.uses++,this._tiles[n.key]=o,h||this._source.fire(new c.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(n,o){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const h=o.getExpiryTimeout();h&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},h))}_removeTile(n){const o=this._tiles[n];o&&(o.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,o,h){const m=[],_=this.transform;if(!_)return m;const b=h?_.getCameraQueryGeometry(n):n,A=n.map(Q=>_.pointCoordinate(Q,this.terrain)),C=b.map(Q=>_.pointCoordinate(Q,this.terrain)),P=this.getIds();let L=1/0,F=1/0,V=-1/0,J=-1/0;for(const Q of C)L=Math.min(L,Q.x),F=Math.min(F,Q.y),V=Math.max(V,Q.x),J=Math.max(J,Q.y);for(let Q=0;Q<P.length;Q++){const ne=this._tiles[P[Q]];if(ne.holdingForFade())continue;const K=ne.tileID,fe=Math.pow(2,_.zoom-ne.tileID.overscaledZ),Se=o*ne.queryPadding*c.W/ne.tileSize/fe,se=[K.getTilePoint(new c.Y(L,F)),K.getTilePoint(new c.Y(V,J))];if(se[0].x-Se<c.W&&se[0].y-Se<c.W&&se[1].x+Se>=0&&se[1].y+Se>=0){const ye=A.map(Ee=>K.getTilePoint(Ee)),Ce=C.map(Ee=>K.getTilePoint(Ee));m.push({tile:ne,tileID:K,queryGeometry:ye,cameraQueryGeometry:Ce,scale:fe})}}return m}getVisibleCoordinates(n){const o=this.getRenderableIds(n).map(h=>this._tiles[h].tileID);for(const h of o)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(At(this._source.type)){const n=R.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=n)return!0}return!1}setFeatureState(n,o,h){this._state.updateState(n=n||"_geojsonTileLayer",o,h)}removeFeatureState(n,o,h){this._state.removeFeatureState(n=n||"_geojsonTileLayer",o,h)}getFeatureState(n,o){return this._state.getState(n=n||"_geojsonTileLayer",o)}setDependencies(n,o,h){const m=this._tiles[n];m&&m.setDependencies(o,h)}reloadTilesForDependencies(n,o){for(const h in this._tiles)this._tiles[h].hasDependency(n,o)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(n,o))}}function Ge(y,n){const o=Math.abs(2*y.wrap)-+(y.wrap<0),h=Math.abs(2*n.wrap)-+(n.wrap<0);return y.overscaledZ-n.overscaledZ||h-o||n.canonical.y-y.canonical.y||n.canonical.x-y.canonical.x}function At(y){return y==="raster"||y==="image"||y==="video"}yr.maxOverzooming=10,yr.maxUnderzooming=3;class Ct{constructor(n,o){this.reset(n,o)}reset(n,o){this.points=n||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.ac(n,0,1);let o=1,h=this._distances[o];const m=n*this.paddedLength+this.padding;for(;h<m&&o<this._distances.length;)h=this._distances[++o];const _=o-1,b=this._distances[_],A=h-b,C=A>0?(m-b)/A:0;return this.points[_].mult(1-C).add(this.points[o].mult(C))}}function Cr(y,n){let o=!0;return y==="always"||y!=="never"&&n!=="never"||(o=!1),o}class yi{constructor(n,o,h){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/h),this.yCellCount=Math.ceil(o/h);for(let b=0;b<this.xCellCount*this.yCellCount;b++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=o,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,o,h,m,_){this._forEachCell(o,h,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(n,o,h,m){this._forEachCell(o-m,h-m,o+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(o),this.circles.push(h),this.circles.push(m)}_insertBoxCell(n,o,h,m,_,b){this.boxCells[_].push(b)}_insertCircleCell(n,o,h,m,_,b){this.circleCells[_].push(b)}_query(n,o,h,m,_,b,A){if(h<0||n>this.width||m<0||o>this.height)return[];const C=[];if(n<=0&&o<=0&&this.width<=h&&this.height<=m){if(_)return[{key:null,x1:n,y1:o,x2:h,y2:m}];for(let P=0;P<this.boxKeys.length;P++)C.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const L=this.circles[3*P],F=this.circles[3*P+1],V=this.circles[3*P+2];C.push({key:this.circleKeys[P],x1:L-V,y1:F-V,x2:L+V,y2:F+V})}}else this._forEachCell(n,o,h,m,this._queryCell,C,{hitTest:_,overlapMode:b,seenUids:{box:{},circle:{}}},A);return C}query(n,o,h,m){return this._query(n,o,h,m,!1,null)}hitTest(n,o,h,m,_,b){return this._query(n,o,h,m,!0,_,b).length>0}hitTestCircle(n,o,h,m,_){const b=n-h,A=n+h,C=o-h,P=o+h;if(A<0||b>this.width||P<0||C>this.height)return!1;const L=[];return this._forEachCell(b,C,A,P,this._queryCellCircle,L,{hitTest:!0,overlapMode:m,circle:{x:n,y:o,radius:h},seenUids:{box:{},circle:{}}},_),L.length>0}_queryCell(n,o,h,m,_,b,A,C){const{seenUids:P,hitTest:L,overlapMode:F}=A,V=this.boxCells[_];if(V!==null){const Q=this.bboxes;for(const ne of V)if(!P.box[ne]){P.box[ne]=!0;const K=4*ne,fe=this.boxKeys[ne];if(n<=Q[K+2]&&o<=Q[K+3]&&h>=Q[K+0]&&m>=Q[K+1]&&(!C||C(fe))&&(!L||!Cr(F,fe.overlapMode))&&(b.push({key:fe,x1:Q[K],y1:Q[K+1],x2:Q[K+2],y2:Q[K+3]}),L))return!0}}const J=this.circleCells[_];if(J!==null){const Q=this.circles;for(const ne of J)if(!P.circle[ne]){P.circle[ne]=!0;const K=3*ne,fe=this.circleKeys[ne];if(this._circleAndRectCollide(Q[K],Q[K+1],Q[K+2],n,o,h,m)&&(!C||C(fe))&&(!L||!Cr(F,fe.overlapMode))){const Se=Q[K],se=Q[K+1],ye=Q[K+2];if(b.push({key:fe,x1:Se-ye,y1:se-ye,x2:Se+ye,y2:se+ye}),L)return!0}}}return!1}_queryCellCircle(n,o,h,m,_,b,A,C){const{circle:P,seenUids:L,overlapMode:F}=A,V=this.boxCells[_];if(V!==null){const Q=this.bboxes;for(const ne of V)if(!L.box[ne]){L.box[ne]=!0;const K=4*ne,fe=this.boxKeys[ne];if(this._circleAndRectCollide(P.x,P.y,P.radius,Q[K+0],Q[K+1],Q[K+2],Q[K+3])&&(!C||C(fe))&&!Cr(F,fe.overlapMode))return b.push(!0),!0}}const J=this.circleCells[_];if(J!==null){const Q=this.circles;for(const ne of J)if(!L.circle[ne]){L.circle[ne]=!0;const K=3*ne,fe=this.circleKeys[ne];if(this._circlesCollide(Q[K],Q[K+1],Q[K+2],P.x,P.y,P.radius)&&(!C||C(fe))&&!Cr(F,fe.overlapMode))return b.push(!0),!0}}}_forEachCell(n,o,h,m,_,b,A,C){const P=this._convertToXCellCoord(n),L=this._convertToYCellCoord(o),F=this._convertToXCellCoord(h),V=this._convertToYCellCoord(m);for(let J=P;J<=F;J++)for(let Q=L;Q<=V;Q++)if(_.call(this,n,o,h,m,this.xCellCount*Q+J,b,A,C))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,o,h,m,_,b){const A=m-n,C=_-o,P=h+b;return P*P>A*A+C*C}_circleAndRectCollide(n,o,h,m,_,b,A){const C=(b-m)/2,P=Math.abs(n-(m+C));if(P>C+h)return!1;const L=(A-_)/2,F=Math.abs(o-(_+L));if(F>L+h)return!1;if(P<=C||F<=L)return!0;const V=P-C,J=F-L;return V*V+J*J<=h*h}}function Tt(y,n,o,h,m){const _=c.F();return n?(c.J(_,_,[1/m,1/m,1]),o||c.ad(_,_,h.angle)):c.K(_,h.labelPlaneMatrix,y),_}function la(y,n,o,h,m){if(n){const _=c.ae(y);return c.J(_,_,[m,m,1]),o||c.ad(_,_,-h.angle),_}return h.glCoordMatrix}function Fr(y,n,o){let h;o?(h=[y.x,y.y,o(y.x,y.y),1],c.af(h,h,n)):(h=[y.x,y.y,0,1],ft(h,h,n));const m=h[3];return{point:new c.P(h[0]/m,h[1]/m),signedDistanceFromCamera:m}}function te(y,n){return .5+y/n*.5}function B(y,n){const o=y[0]/y[3],h=y[1]/y[3];return o>=-n[0]&&o<=n[0]&&h>=-n[1]&&h<=n[1]}function $(y,n,o,h,m,_,b,A,C,P){const L=h?y.textSizeData:y.iconSizeData,F=c.ag(L,o.transform.zoom),V=[256/o.width*2+1,256/o.height*2+1],J=h?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;J.clear();const Q=y.lineVertexArray,ne=h?y.text.placedSymbolArray:y.icon.placedSymbolArray,K=o.transform.width/o.transform.height;let fe=!1;for(let Se=0;Se<ne.length;Se++){const se=ne.get(Se);if(se.hidden||se.writingMode===c.ah.vertical&&!fe){Re(se.numGlyphs,J);continue}let ye;if(fe=!1,P?(ye=[se.anchorX,se.anchorY,P(se.anchorX,se.anchorY),1],c.af(ye,ye,n)):(ye=[se.anchorX,se.anchorY,0,1],ft(ye,ye,n)),!B(ye,V)){Re(se.numGlyphs,J);continue}const Ce=te(o.transform.cameraToCenterDistance,ye[3]),Ee=c.ai(L,F,se),De=b?Ee/Ce:Ee*Ce,Ne=new c.P(se.anchorX,se.anchorY),Be=Fr(Ne,m,P).point,He={projections:{},offsets:{}},ot=pe(se,De,!1,A,n,m,_,y.glyphOffsetArray,Q,J,Be,Ne,He,K,C,P);fe=ot.useVertical,(ot.notEnoughRoom||fe||ot.needsFlipping&&pe(se,De,!0,A,n,m,_,y.glyphOffsetArray,Q,J,Be,Ne,He,K,C,P).notEnoughRoom)&&Re(se.numGlyphs,J)}h?y.text.dynamicLayoutVertexBuffer.updateData(J):y.icon.dynamicLayoutVertexBuffer.updateData(J)}function Z(y,n,o,h,m,_,b,A,C,P,L,F,V){const J=A.glyphStartIndex+A.numGlyphs,Q=A.lineStartIndex,ne=A.lineStartIndex+A.lineLength,K=n.getoffsetX(A.glyphStartIndex),fe=n.getoffsetX(J-1),Se=ze(y*K,o,h,m,_,b,A.segment,Q,ne,C,P,L,F,V);if(!Se)return null;const se=ze(y*fe,o,h,m,_,b,A.segment,Q,ne,C,P,L,F,V);return se?{first:Se,last:se}:null}function X(y,n,o,h){return y===c.ah.horizontal&&Math.abs(o.y-n.y)>Math.abs(o.x-n.x)*h?{useVertical:!0}:(y===c.ah.vertical?n.y<o.y:n.x>o.x)?{needsFlipping:!0}:null}function pe(y,n,o,h,m,_,b,A,C,P,L,F,V,J,Q,ne){const K=n/24,fe=y.lineOffsetX*K,Se=y.lineOffsetY*K;let se;if(y.numGlyphs>1){const ye=y.glyphStartIndex+y.numGlyphs,Ce=y.lineStartIndex,Ee=y.lineStartIndex+y.lineLength,De=Z(K,A,fe,Se,o,L,F,y,C,_,V,Q,ne);if(!De)return{notEnoughRoom:!0};const Ne=Fr(De.first.point,b,ne).point,Be=Fr(De.last.point,b,ne).point;if(h&&!o){const He=X(y.writingMode,Ne,Be,J);if(He)return He}se=[De.first];for(let He=y.glyphStartIndex+1;He<ye-1;He++)se.push(ze(K*A.getoffsetX(He),fe,Se,o,L,F,y.segment,Ce,Ee,C,_,V,Q,ne));se.push(De.last)}else{if(h&&!o){const Ce=Fr(F,m,ne).point,Ee=y.lineStartIndex+y.segment+1,De=new c.P(C.getx(Ee),C.gety(Ee)),Ne=Fr(De,m,ne),Be=Ne.signedDistanceFromCamera>0?Ne.point:me(F,De,Ce,1,m,ne),He=X(y.writingMode,Ce,Be,J);if(He)return He}const ye=ze(K*A.getoffsetX(y.glyphStartIndex),fe,Se,o,L,F,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,C,_,V,Q,ne);if(!ye)return{notEnoughRoom:!0};se=[ye]}for(const ye of se)c.aj(P,ye.point,ye.angle);return{}}function me(y,n,o,h,m,_){const b=Fr(y.add(y.sub(n)._unit()),m,_).point,A=o.sub(b);return o.add(A._mult(h/A.mag()))}function _e(y,n){const{projectionCache:o,lineVertexArray:h,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:b,getElevation:A,previousVertex:C,direction:P,absOffsetX:L}=n;if(o.projections[y])return o.projections[y];const F=new c.P(h.getx(y),h.gety(y)),V=Fr(F,m,A);if(V.signedDistanceFromCamera>0)return o.projections[y]=V.point,V.point;const J=y-P;return me(b===0?_:new c.P(h.getx(J),h.gety(J)),F,C,L-b+1,m,A)}function ce(y,n,o){return y._unit()._perp()._mult(n*o)}function we(y,n,o,h,m,_,b,A){const{projectionCache:C,direction:P}=A;if(C.offsets[y])return C.offsets[y];const L=o.add(n);if(y+P<h||y+P>=m)return C.offsets[y]=L,L;const F=_e(y+P,A),V=ce(F.sub(o),b,P),J=o.add(V),Q=F.add(V);return C.offsets[y]=c.ak(_,L,J,Q)||L,C.offsets[y]}function ze(y,n,o,h,m,_,b,A,C,P,L,F,V,J){const Q=h?y-n:y+n;let ne=Q>0?1:-1,K=0;h&&(ne*=-1,K=Math.PI),ne<0&&(K+=Math.PI);let fe,Se,se=ne>0?A+b:A+b+1,ye=m,Ce=m,Ee=0,De=0;const Ne=Math.abs(Q),Be=[];let He;for(;Ee+De<=Ne;){if(se+=ne,se<A||se>=C)return null;Ee+=De,Ce=ye,Se=fe;const Je={projectionCache:F,lineVertexArray:P,labelPlaneMatrix:L,tileAnchorPoint:_,distanceFromAnchor:Ee,getElevation:J,previousVertex:Ce,direction:ne,absOffsetX:Ne};if(ye=_e(se,Je),o===0)Be.push(Ce),He=ye.sub(Ce);else{let yt;const ut=ye.sub(Ce);yt=ut.mag()===0?ce(_e(se+ne,Je).sub(ye),o,ne):ce(ut,o,ne),Se||(Se=Ce.add(yt)),fe=we(se,yt,ye,A,C,Se,o,Je),Be.push(Se),He=fe.sub(Se)}De=He.mag()}const ot=He._mult((Ne-Ee)/De)._add(Se||Ce),vt=K+Math.atan2(ye.y-Ce.y,ye.x-Ce.x);return Be.push(ot),{point:ot,angle:V?vt:0,path:Be}}const Me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Re(y,n){for(let o=0;o<y;o++){const h=n.length;n.resize(h+4),n.float32.set(Me,3*h)}}function ft(y,n,o){const h=n[0],m=n[1];return y[0]=o[0]*h+o[4]*m+o[12],y[1]=o[1]*h+o[5]*m+o[13],y[3]=o[3]*h+o[7]*m+o[15],y}const mt=100;class It{constructor(n,o=new yi(n.width+200,n.height+200,25),h=new yi(n.width+200,n.height+200,25)){this.transform=n,this.grid=o,this.ignoredGrid=h,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+mt,this.screenBottomBoundary=n.height+mt,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,o,h,m,_,b){const A=this.projectAndGetPerspectiveRatio(m,n.anchorPointX,n.anchorPointY,b),C=h*A.perspectiveRatio,P=n.x1*C+A.point.x,L=n.y1*C+A.point.y,F=n.x2*C+A.point.x,V=n.y2*C+A.point.y;return!this.isInsideGrid(P,L,F,V)||o!=="always"&&this.grid.hitTest(P,L,F,V,o,_)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[P,L,F,V],offscreen:this.isOffscreen(P,L,F,V)}}placeCollisionCircles(n,o,h,m,_,b,A,C,P,L,F,V,J,Q){const ne=[],K=new c.P(o.anchorX,o.anchorY),fe=Fr(K,b,Q),Se=te(this.transform.cameraToCenterDistance,fe.signedDistanceFromCamera),se=(L?_/Se:_*Se)/c.ao,ye=Fr(K,A,Q).point,Ce=Z(se,m,o.lineOffsetX*se,o.lineOffsetY*se,!1,ye,K,o,h,A,{projections:{},offsets:{}},!1,Q);let Ee=!1,De=!1,Ne=!0;if(Ce){const Be=.5*V*Se+J,He=new c.P(-100,-100),ot=new c.P(this.screenRightBoundary,this.screenBottomBoundary),vt=new Ct,Je=Ce.first,yt=Ce.last;let ut=[];for(let Rt=Je.path.length-1;Rt>=1;Rt--)ut.push(Je.path[Rt]);for(let Rt=1;Rt<yt.path.length;Rt++)ut.push(yt.path[Rt]);const hr=2.5*Be;if(C){const Rt=ut.map(Ot=>Fr(Ot,C,Q));ut=Rt.some(Ot=>Ot.signedDistanceFromCamera<=0)?[]:Rt.map(Ot=>Ot.point)}let Bt=[];if(ut.length>0){const Rt=ut[0].clone(),Ot=ut[0].clone();for(let Vr=1;Vr<ut.length;Vr++)Rt.x=Math.min(Rt.x,ut[Vr].x),Rt.y=Math.min(Rt.y,ut[Vr].y),Ot.x=Math.max(Ot.x,ut[Vr].x),Ot.y=Math.max(Ot.y,ut[Vr].y);Bt=Rt.x>=He.x&&Ot.x<=ot.x&&Rt.y>=He.y&&Ot.y<=ot.y?[ut]:Ot.x<He.x||Rt.x>ot.x||Ot.y<He.y||Rt.y>ot.y?[]:c.al([ut],He.x,He.y,ot.x,ot.y)}for(const Rt of Bt){vt.reset(Rt,.25*Be);let Ot=0;Ot=vt.length<=.5*Be?1:Math.ceil(vt.paddedLength/hr)+1;for(let Vr=0;Vr<Ot;Vr++){const er=Vr/Math.max(Ot-1,1),zn=vt.lerp(er),dn=zn.x+mt,br=zn.y+mt;ne.push(dn,br,Be,0);const bn=dn-Be,Sn=br-Be,bi=dn+Be,Ra=br+Be;if(Ne=Ne&&this.isOffscreen(bn,Sn,bi,Ra),De=De||this.isInsideGrid(bn,Sn,bi,Ra),n!=="always"&&this.grid.hitTestCircle(dn,br,Be,n,F)&&(Ee=!0,!P))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!P&&Ee||!De||Se<this.perspectiveRatioCutoff?[]:ne,offscreen:Ne,collisionDetected:Ee}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let h=1/0,m=1/0,_=-1/0,b=-1/0;for(const L of n){const F=new c.P(L.x+mt,L.y+mt);h=Math.min(h,F.x),m=Math.min(m,F.y),_=Math.max(_,F.x),b=Math.max(b,F.y),o.push(F)}const A=this.grid.query(h,m,_,b).concat(this.ignoredGrid.query(h,m,_,b)),C={},P={};for(const L of A){const F=L.key;if(C[F.bucketInstanceId]===void 0&&(C[F.bucketInstanceId]={}),C[F.bucketInstanceId][F.featureIndex])continue;const V=[new c.P(L.x1,L.y1),new c.P(L.x2,L.y1),new c.P(L.x2,L.y2),new c.P(L.x1,L.y2)];c.am(o,V)&&(C[F.bucketInstanceId][F.featureIndex]=!0,P[F.bucketInstanceId]===void 0&&(P[F.bucketInstanceId]=[]),P[F.bucketInstanceId].push(F.featureIndex))}return P}insertCollisionBox(n,o,h,m,_,b){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:b,overlapMode:o},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,o,h,m,_,b){const A=h?this.ignoredGrid:this.grid,C={bucketInstanceId:m,featureIndex:_,collisionGroupID:b,overlapMode:o};for(let P=0;P<n.length;P+=4)A.insertCircle(C,n[P],n[P+1],n[P+2])}projectAndGetPerspectiveRatio(n,o,h,m){let _;return m?(_=[o,h,m(o,h),1],c.af(_,_,n)):(_=[o,h,0,1],ft(_,_,n)),{point:new c.P((_[0]/_[3]+1)/2*this.transform.width+mt,(-_[1]/_[3]+1)/2*this.transform.height+mt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(n,o,h,m){return h<mt||n>=this.screenRightBoundary||m<mt||o>this.screenBottomBoundary}isInsideGrid(n,o,h,m){return h>=0&&n<this.gridRightBoundary&&m>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const n=c.an([]);return c.H(n,n,[-100,-100,0]),n}}function St(y,n,o){return n*(c.W/(y.tileSize*Math.pow(2,o-y.tileID.overscaledZ)))}class Ut{constructor(n,o,h,m){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?o:-o))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Yt{constructor(n,o,h,m,_){this.text=new Ut(n?n.text:null,o,h,_),this.icon=new Ut(n?n.icon:null,o,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ar{constructor(n,o,h){this.text=n,this.icon=o,this.skipFade=h}}class Tr{constructor(){this.invProjMatrix=c.F(),this.viewportMatrix=c.F(),this.circles=[]}}class Mt{constructor(n,o,h,m,_){this.bucketInstanceId=n,this.featureIndex=o,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=_}}class pr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const o=++this.maxGroupID;this.collisionGroups[n]={ID:o,predicate:h=>h.collisionGroupID===o}}return this.collisionGroups[n]}}function Br(y,n,o,h,m){const{horizontalAlign:_,verticalAlign:b}=c.at(y);return new c.P(-(_-.5)*n+h[0]*m,-(b-.5)*o+h[1]*m)}function hn(y,n,o,h,m,_){const{x1:b,x2:A,y1:C,y2:P,anchorPointX:L,anchorPointY:F}=y,V=new c.P(n,o);return h&&V._rotate(m?_:-_),{x1:b+V.x,y1:C+V.y,x2:A+V.x,y2:P+V.y,anchorPointX:L,anchorPointY:F}}class Or{constructor(n,o,h,m,_){this.transform=n.clone(),this.terrain=o,this.collisionIndex=new It(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new pr(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,o,h,m){const _=h.getBucket(o),b=h.latestFeatureIndex;if(!_||!b||o.id!==_.layerIds[0])return;const A=h.collisionBoxArray,C=_.layers[0].layout,P=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),L=h.tileSize/c.W,F=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),V=C.get("text-pitch-alignment")==="map",J=C.get("text-rotation-alignment")==="map",Q=St(h,1,this.transform.zoom),ne=Tt(F,V,J,this.transform,Q);let K=null;if(V){const Se=la(F,V,J,this.transform,Q);K=c.K([],this.transform.labelPlaneMatrix,Se)}this.retainedQueryData[_.bucketInstanceId]=new Mt(_.bucketInstanceId,b,_.sourceLayerIndex,_.index,h.tileID);const fe={bucket:_,layout:C,posMatrix:F,textLabelPlaneMatrix:ne,labelToScreenMatrix:K,scale:P,textPixelRatio:L,holdingForFade:h.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:c.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const Se of _.sortKeyRanges){const{sortKey:se,symbolInstanceStart:ye,symbolInstanceEnd:Ce}=Se;n.push({sortKey:se,symbolInstanceStart:ye,symbolInstanceEnd:Ce,parameters:fe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:fe})}attemptAnchorPlacement(n,o,h,m,_,b,A,C,P,L,F,V,J,Q,ne,K){const fe=c.ap[n.textAnchor],Se=[n.textOffset0,n.textOffset1],se=Br(fe,h,m,Se,_),ye=this.collisionIndex.placeCollisionBox(hn(o,se.x,se.y,b,A,this.transform.angle),F,C,P,L.predicate,K);if((!ne||this.collisionIndex.placeCollisionBox(hn(ne,se.x,se.y,b,A,this.transform.angle),F,C,P,L.predicate,K).box.length!==0)&&ye.box.length>0){let Ce;if(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(Ce=this.prevPlacement.variableOffsets[V.crossTileID].anchor),V.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[V.crossTileID]={textOffset:Se,width:h,height:m,anchor:fe,textBoxScale:_,prevAnchor:Ce},this.markUsedJustification(J,fe,V,Q),J.allowVerticalPlacement&&(this.markUsedOrientation(J,Q,V),this.placedOrientations[V.crossTileID]=Q),{shift:se,placedGlyphBoxes:ye}}}placeLayerBucketPart(n,o,h){const{bucket:m,layout:_,posMatrix:b,textLabelPlaneMatrix:A,labelToScreenMatrix:C,textPixelRatio:P,holdingForFade:L,collisionBoxArray:F,partiallyEvaluatedTextSize:V,collisionGroup:J}=n.parameters,Q=_.get("text-optional"),ne=_.get("icon-optional"),K=c.aq(_,"text-overlap","text-allow-overlap"),fe=K==="always",Se=c.aq(_,"icon-overlap","icon-allow-overlap"),se=Se==="always",ye=_.get("text-rotation-alignment")==="map",Ce=_.get("text-pitch-alignment")==="map",Ee=_.get("icon-text-fit")!=="none",De=_.get("symbol-z-order")==="viewport-y",Ne=fe&&(se||!m.hasIconData()||ne),Be=se&&(fe||!m.hasTextData()||Q);!m.collisionArrays&&F&&m.deserializeCollisionBoxes(F);const He=this.retainedQueryData[m.bucketInstanceId].tileID,ot=this.terrain?(Je,yt)=>this.terrain.getElevation(He,Je,yt):null,vt=(Je,yt)=>{var ut,hr;if(o[Je.crossTileID])return;if(L)return void(this.placements[Je.crossTileID]=new ar(!1,!1,!1));let Bt=!1,Rt=!1,Ot=!0,Vr=null,er={box:null,offscreen:null},zn={box:null,offscreen:null},dn=null,br=null,bn=null,Sn=0,bi=0,Ra=0;yt.textFeatureIndex?Sn=yt.textFeatureIndex:Je.useRuntimeCollisionCircles&&(Sn=Je.featureIndex),yt.verticalTextFeatureIndex&&(bi=yt.verticalTextFeatureIndex);const Cs=yt.textBox;if(Cs){const Qr=dr=>{let en=c.ah.horizontal;if(m.allowVerticalPlacement&&!dr&&this.prevPlacement){const fn=this.prevPlacement.placedOrientations[Je.crossTileID];fn&&(this.placedOrientations[Je.crossTileID]=fn,en=fn,this.markUsedOrientation(m,en,Je))}return en},jr=(dr,en)=>{if(m.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&yt.verticalTextBox){for(const fn of m.writingModes)if(fn===c.ah.vertical?(er=en(),zn=er):er=dr(),er&&er.box&&er.box.length)break}else er=dr()},Sr=Je.textAnchorOffsetStartIndex,Fn=Je.textAnchorOffsetEndIndex;if(Fn===Sr){const dr=(en,fn)=>{const tn=this.collisionIndex.placeCollisionBox(en,K,P,b,J.predicate,ot);return tn&&tn.box&&tn.box.length&&(this.markUsedOrientation(m,fn,Je),this.placedOrientations[Je.crossTileID]=fn),tn};jr(()=>dr(Cs,c.ah.horizontal),()=>{const en=yt.verticalTextBox;return m.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&en?dr(en,c.ah.vertical):{box:null,offscreen:null}}),Qr(er&&er.box&&er.box.length)}else{let dr=c.ap[(hr=(ut=this.prevPlacement)===null||ut===void 0?void 0:ut.variableOffsets[Je.crossTileID])===null||hr===void 0?void 0:hr.anchor];const en=(tn,md,Ir)=>{const uc=tn.x2-tn.x1,gd=tn.y2-tn.y1,Ja=Je.textBoxScale,Qa=Ee&&Se==="never"?md:null;let ha={box:[],offscreen:!1},Rl=K==="never"?1:2,cc="never";dr&&Rl++;for(let yd=0;yd<Rl;yd++){for(let Dl=Sr;Dl<Fn;Dl++){const _d=m.textAnchorOffsets.get(Dl);if(dr&&_d.textAnchor!==dr)continue;const Co=this.attemptAnchorPlacement(_d,tn,uc,gd,Ja,ye,Ce,P,b,J,cc,Je,m,Ir,Qa,ot);if(Co&&(ha=Co.placedGlyphBoxes,ha&&ha.box&&ha.box.length))return Bt=!0,Vr=Co.shift,ha}dr?dr=null:cc=K}return ha};jr(()=>en(Cs,yt.iconBox,c.ah.horizontal),()=>{const tn=yt.verticalTextBox;return m.allowVerticalPlacement&&!(er&&er.box&&er.box.length)&&Je.numVerticalGlyphVertices>0&&tn?en(tn,yt.verticalIconBox,c.ah.vertical):{box:null,offscreen:null}}),er&&(Bt=er.box,Ot=er.offscreen);const fn=Qr(er&&er.box);if(!Bt&&this.prevPlacement){const tn=this.prevPlacement.variableOffsets[Je.crossTileID];tn&&(this.variableOffsets[Je.crossTileID]=tn,this.markUsedJustification(m,tn.anchor,Je,fn))}}}if(dn=er,Bt=dn&&dn.box&&dn.box.length>0,Ot=dn&&dn.offscreen,Je.useRuntimeCollisionCircles){const Qr=m.text.placedSymbolArray.get(Je.centerJustifiedTextSymbolIndex),jr=c.ai(m.textSizeData,V,Qr),Sr=_.get("text-padding");br=this.collisionIndex.placeCollisionCircles(K,Qr,m.lineVertexArray,m.glyphOffsetArray,jr,b,A,C,h,Ce,J.predicate,Je.collisionCircleDiameter,Sr,ot),br.circles.length&&br.collisionDetected&&!h&&c.w("Collisions detected, but collision boxes are not shown"),Bt=fe||br.circles.length>0&&!br.collisionDetected,Ot=Ot&&br.offscreen}if(yt.iconFeatureIndex&&(Ra=yt.iconFeatureIndex),yt.iconBox){const Qr=jr=>{const Sr=Ee&&Vr?hn(jr,Vr.x,Vr.y,ye,Ce,this.transform.angle):jr;return this.collisionIndex.placeCollisionBox(Sr,Se,P,b,J.predicate,ot)};zn&&zn.box&&zn.box.length&&yt.verticalIconBox?(bn=Qr(yt.verticalIconBox),Rt=bn.box.length>0):(bn=Qr(yt.iconBox),Rt=bn.box.length>0),Ot=Ot&&bn.offscreen}const Ts=Q||Je.numHorizontalGlyphVertices===0&&Je.numVerticalGlyphVertices===0,Da=ne||Je.numIconVertices===0;if(Ts||Da?Da?Ts||(Rt=Rt&&Bt):Bt=Rt&&Bt:Rt=Bt=Rt&&Bt,Bt&&dn&&dn.box&&this.collisionIndex.insertCollisionBox(dn.box,K,_.get("text-ignore-placement"),m.bucketInstanceId,zn&&zn.box&&bi?bi:Sn,J.ID),Rt&&bn&&this.collisionIndex.insertCollisionBox(bn.box,Se,_.get("icon-ignore-placement"),m.bucketInstanceId,Ra,J.ID),br&&(Bt&&this.collisionIndex.insertCollisionCircles(br.circles,K,_.get("text-ignore-placement"),m.bucketInstanceId,Sn,J.ID),h)){const Qr=m.bucketInstanceId;let jr=this.collisionCircleArrays[Qr];jr===void 0&&(jr=this.collisionCircleArrays[Qr]=new Tr);for(let Sr=0;Sr<br.circles.length;Sr+=4)jr.circles.push(br.circles[Sr+0]),jr.circles.push(br.circles[Sr+1]),jr.circles.push(br.circles[Sr+2]),jr.circles.push(br.collisionDetected?1:0)}if(Je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Je.crossTileID]=new ar(Bt||Ne,Rt||Be,Ot||m.justReloaded),o[Je.crossTileID]=!0};if(De){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Je=m.getSortedSymbolIndexes(this.transform.angle);for(let yt=Je.length-1;yt>=0;--yt){const ut=Je[yt];vt(m.symbolInstances.get(ut),m.collisionArrays[ut])}}else for(let Je=n.symbolInstanceStart;Je<n.symbolInstanceEnd;Je++)vt(m.symbolInstances.get(Je),m.collisionArrays[Je]);if(h&&m.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[m.bucketInstanceId];c.ar(Je.invProjMatrix,b),Je.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(n,o,h,m){let _;_=m===c.ah.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[c.as(o)];const b=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const A of b)A>=0&&(n.text.placedSymbolArray.get(A).crossTileID=_>=0&&A!==_?0:h.crossTileID)}markUsedOrientation(n,o,h){const m=o===c.ah.horizontal||o===c.ah.horizontalOnly?o:0,_=o===c.ah.vertical?o:0,b=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const A of b)n.text.placedSymbolArray.get(A).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let h=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const m=o?o.symbolFadeChange(n):1,_=o?o.opacities:{},b=o?o.variableOffsets:{},A=o?o.placedOrientations:{};for(const C in this.placements){const P=this.placements[C],L=_[C];L?(this.opacities[C]=new Yt(L,m,P.text,P.icon),h=h||P.text!==L.text.placed||P.icon!==L.icon.placed):(this.opacities[C]=new Yt(null,m,P.text,P.icon,P.skipFade),h=h||P.text||P.icon)}for(const C in _){const P=_[C];if(!this.opacities[C]){const L=new Yt(P,m,!1,!1);L.isHidden()||(this.opacities[C]=L,h=h||P.text.placed||P.icon.placed)}}for(const C in b)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=b[C]);for(const C in A)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=A[C]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:n)}updateLayerOpacities(n,o){const h={};for(const m of o){const _=m.getBucket(n);_&&m.latestFeatureIndex&&n.id===_.layerIds[0]&&this.updateBucketOpacities(_,h,m.collisionBoxArray)}}updateBucketOpacities(n,o,h){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const m=n.layers[0],_=m.layout,b=new Yt(null,0,!1,!1,!0),A=_.get("text-allow-overlap"),C=_.get("icon-allow-overlap"),P=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=_.get("text-rotation-alignment")==="map",F=_.get("text-pitch-alignment")==="map",V=_.get("icon-text-fit")!=="none",J=new Yt(null,0,A&&(C||!n.hasIconData()||_.get("icon-optional")),C&&(A||!n.hasTextData()||_.get("text-optional")),!0);!n.collisionArrays&&h&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(h);const Q=(ne,K,fe)=>{for(let Se=0;Se<K/4;Se++)ne.opacityVertexArray.emplaceBack(fe);ne.hasVisibleVertices=ne.hasVisibleVertices||fe!==Ki};for(let ne=0;ne<n.symbolInstances.length;ne++){const K=n.symbolInstances.get(ne),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:Se,crossTileID:se}=K;let ye=this.opacities[se];o[se]?ye=b:ye||(ye=J,this.opacities[se]=ye),o[se]=!0;const Ce=K.numIconVertices>0,Ee=this.placedOrientations[K.crossTileID],De=Ee===c.ah.vertical,Ne=Ee===c.ah.horizontal||Ee===c.ah.horizontalOnly;if(fe>0||Se>0){const Be=Nr(ye.text);Q(n.text,fe,De?Ki:Be),Q(n.text,Se,Ne?Ki:Be);const He=ye.text.isHidden();[K.rightJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.leftJustifiedTextSymbolIndex].forEach(Je=>{Je>=0&&(n.text.placedSymbolArray.get(Je).hidden=He||De?1:0)}),K.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(K.verticalPlacedTextSymbolIndex).hidden=He||Ne?1:0);const ot=this.variableOffsets[K.crossTileID];ot&&this.markUsedJustification(n,ot.anchor,K,Ee);const vt=this.placedOrientations[K.crossTileID];vt&&(this.markUsedJustification(n,"left",K,vt),this.markUsedOrientation(n,vt,K))}if(Ce){const Be=Nr(ye.icon),He=!(V&&K.verticalPlacedIconSymbolIndex&&De);K.placedIconSymbolIndex>=0&&(Q(n.icon,K.numIconVertices,He?Be:Ki),n.icon.placedSymbolArray.get(K.placedIconSymbolIndex).hidden=ye.icon.isHidden()),K.verticalPlacedIconSymbolIndex>=0&&(Q(n.icon,K.numVerticalIconVertices,He?Ki:Be),n.icon.placedSymbolArray.get(K.verticalPlacedIconSymbolIndex).hidden=ye.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Be=n.collisionArrays[ne];if(Be){let He=new c.P(0,0);if(Be.textBox||Be.verticalTextBox){let vt=!0;if(P){const Je=this.variableOffsets[se];Je?(He=Br(Je.anchor,Je.width,Je.height,Je.textOffset,Je.textBoxScale),L&&He._rotate(F?this.transform.angle:-this.transform.angle)):vt=!1}Be.textBox&&Ue(n.textCollisionBox.collisionVertexArray,ye.text.placed,!vt||De,He.x,He.y),Be.verticalTextBox&&Ue(n.textCollisionBox.collisionVertexArray,ye.text.placed,!vt||Ne,He.x,He.y)}const ot=!!(!Ne&&Be.verticalIconBox);Be.iconBox&&Ue(n.iconCollisionBox.collisionVertexArray,ye.icon.placed,ot,V?He.x:0,V?He.y:0),Be.verticalIconBox&&Ue(n.iconCollisionBox.collisionVertexArray,ye.icon.placed,!ot,V?He.x:0,V?He.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ne.invProjMatrix,n.placementViewportMatrix=ne.viewportMatrix,n.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,o){const h=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*h>n}setStale(){this.stale=!0}}function Ue(y,n,o,h,m){y.emplaceBack(n?1:0,o?1:0,h||0,m||0),y.emplaceBack(n?1:0,o?1:0,h||0,m||0),y.emplaceBack(n?1:0,o?1:0,h||0,m||0),y.emplaceBack(n?1:0,o?1:0,h||0,m||0)}const _i=Math.pow(2,25),Ko=Math.pow(2,24),lr=Math.pow(2,17),zt=Math.pow(2,16),Ri=Math.pow(2,9),Wi=Math.pow(2,8),gn=Math.pow(2,1);function Nr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const n=y.placed?1:0,o=Math.floor(127*y.opacity);return o*_i+n*Ko+o*lr+n*zt+o*Ri+n*Wi+o*gn+n}const Ki=0;class vi{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,o,h,m,_){const b=this._bucketParts;for(;this._currentTileIndex<n.length;)if(o.getBucketParts(b,m,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((A,C)=>A.sortKey-C.sortKey));this._currentPartIndex<b.length;)if(o.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,_())return!0;return!1}}class xi{constructor(n,o,h,m,_,b,A,C){this.placement=new Or(n,o,b,A,C),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(n,o,h){const m=R.now(),_=()=>!this._forceFullPlacement&&R.now()-m>2;for(;this._currentPlacementIndex>=0;){const b=o[n[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=A)&&(!b.maxzoom||b.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new vi(b)),this._inProgressLayer.continuePlacement(h[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const ms=512/c.W/2;class Yo{constructor(n,o,h){this.tileID=n,this.bucketInstanceId=h,this._symbolsByKey={};const m=new Map;for(let _=0;_<o.length;_++){const b=o.get(_),A=b.key,C=m.get(A);C?C.push(b):m.set(A,[b])}for(const[_,b]of m){const A={positions:b.map(C=>({x:Math.floor(C.anchorX*ms),y:Math.floor(C.anchorY*ms)})),crossTileIDs:b.map(C=>C.crossTileID)};if(A.positions.length>128){const C=new c.au(A.positions.length,16,Uint16Array);for(const{x:P,y:L}of A.positions)C.add(P,L);C.finish(),delete A.positions,A.index=C}this._symbolsByKey[_]=A}}getScaledCoordinates(n,o){const{x:h,y:m,z:_}=this.tileID.canonical,{x:b,y:A,z:C}=o.canonical,P=ms/Math.pow(2,C-_),L=(A*c.W+n.anchorY)*P,F=m*c.W*ms;return{x:Math.floor((b*c.W+n.anchorX)*P-h*c.W*ms),y:Math.floor(L-F)}}findMatches(n,o,h){const m=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let _=0;_<n.length;_++){const b=n.get(_);if(b.crossTileID)continue;const A=this._symbolsByKey[b.key];if(!A)continue;const C=this.getScaledCoordinates(b,o);if(A.index){const P=A.index.range(C.x-m,C.y-m,C.x+m,C.y+m).sort();for(const L of P){const F=A.crossTileIDs[L];if(!h[F]){h[F]=!0,b.crossTileID=F;break}}}else if(A.positions)for(let P=0;P<A.positions.length;P++){const L=A.positions[P],F=A.crossTileIDs[P];if(Math.abs(L.x-C.x)<=m&&Math.abs(L.y-C.y)<=m&&!h[F]){h[F]=!0,b.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class Kr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class io{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const o=Math.round((n-this.lng)/360);if(o!==0)for(const h in this.indexes){const m=this.indexes[h],_={};for(const b in m){const A=m[b];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+o),_[A.tileID.key]=A}this.indexes[h]=_}this.lng=n}addBucket(n,o,h){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let _=0;_<o.symbolInstances.length;_++)o.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const m=this.usedCrossTileIDs[n.overscaledZ];for(const _ in this.indexes){const b=this.indexes[_];if(Number(_)>n.overscaledZ)for(const A in b){const C=b[A];C.tileID.isChildOf(n)&&C.findMatches(o.symbolInstances,n,m)}else{const A=b[n.scaledTo(Number(_)).key];A&&A.findMatches(o.symbolInstances,n,m)}}for(let _=0;_<o.symbolInstances.length;_++){const b=o.symbolInstances.get(_);b.crossTileID||(b.crossTileID=h.generate(),m[b.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Yo(n,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(n,o){for(const h of o.getCrossTileIDsLists())for(const m of h)delete this.usedCrossTileIDs[n][m]}removeStaleBuckets(n){let o=!1;for(const h in this.indexes){const m=this.indexes[h];for(const _ in m)n[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[_]),delete m[_],o=!0)}return o}}class Ta{constructor(){this.layerIndexes={},this.crossTileIDs=new Kr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,o,h){let m=this.layerIndexes[n.id];m===void 0&&(m=this.layerIndexes[n.id]=new io);let _=!1;const b={};m.handleWrapJump(h);for(const A of o){const C=A.getBucket(n);C&&n.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(A.tileID,C,this.crossTileIDs)&&(_=!0),b[C.bucketInstanceId]=!0)}return m.removeStaleBuckets(b)&&(_=!0),_}pruneUnusedLayers(n){const o={};n.forEach(h=>{o[h]=!0});for(const h in this.layerIndexes)o[h]||delete this.layerIndexes[h]}}const _r=(y,n)=>c.t(y,n&&n.filter(o=>o.identifier!=="source.canvas")),Xo=c.av();class ni extends c.E{constructor(n,o={}){super(),this._rtlTextPluginStateChange=()=>{for(const h in this.sourceCaches){const m=this.sourceCaches[h].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[h].reload()}},this.map=n,this.dispatcher=new qi(Mn(),n._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(h,m)=>this.getGlyphs(h,m)),this.dispatcher.registerMessageHandler("getImages",(h,m)=>this.getImages(h,m)),this.imageManager=new nr,this.imageManager.setEventedParent(this),this.glyphManager=new et(n._requestManager,o.localIdeographFontFamily),this.lineAtlas=new jt(256,512),this.crossTileSymbolIndex=new Ta,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.ax()),je().on("pluginStateChange",this._rtlTextPluginStateChange),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const m=this.sourceCaches[h.sourceId];if(!m)return;const _=m.getSource();if(_&&_.vectorLayerIds)for(const b in this._layers){const A=this._layers[b];A.source===_.id&&this._validateLayer(A)}})}loadURL(n,o={},h){this.fire(new c.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const m=this.map._requestManager.transformRequest(n,re.Style);this._loadStyleRequest=new AbortController,c.h(m,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,o,h)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new c.j(_))})}loadJSON(n,o={},h){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(n,o,h)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(Xo,{validate:!1})}_load(n,o,h){var m;const _=o.transformStyle?o.transformStyle(h,n):n;if(!o.validate||!_r(this,c.x(_))){this._loaded=!0,this.stylesheet=_;for(const b in _.sources)this.addSource(b,_.sources[b],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Lt(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const n=c.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",n),this._order=n.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of n){const h=c.az(o);h.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=h}}_loadSprite(n,o=!1,h=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,b,A,C){return c._(this,void 0,void 0,function*(){const P=Et(_),L=A>1?"@2x":"",F={},V={};for(const{id:J,url:Q}of P){const ne=b.transformRequest(b.normalizeSpriteURL(Q,L,".json"),re.SpriteJSON);F[J]=c.h(ne,C);const K=b.transformRequest(b.normalizeSpriteURL(Q,L,".png"),re.SpriteImage);V[J]=H.getImage(K,C)}return yield Promise.all([...Object.values(F),...Object.values(V)]),function(J,Q){return c._(this,void 0,void 0,function*(){const ne={};for(const K in J){ne[K]={};const fe=R.getImageCanvasContext((yield Q[K]).data),Se=(yield J[K]).data;for(const se in Se){const{width:ye,height:Ce,x:Ee,y:De,sdf:Ne,pixelRatio:Be,stretchX:He,stretchY:ot,content:vt}=Se[se];ne[K][se]={data:null,pixelRatio:Be,sdf:Ne,stretchX:He,stretchY:ot,content:vt,spriteData:{width:ye,height:Ce,x:Ee,y:De,context:fe}}}}return ne})}(F,V)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const b in _){this._spritesImagesIds[b]=[];const A=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(C=>!(C in _)):[];for(const C of A)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in _[b]){const P=b==="default"?C:`${b}:${C}`;this._spritesImagesIds[b].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,_[b][C],!1):this.imageManager.addImage(P,_[b][C]),o&&(this._changedImages[P]=!0)}}}).catch(_=>{this._spriteRequest=null,m=_,this.fire(new c.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),h&&h(m)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(n){const o=this.sourceCaches[n.source];if(!o)return;const h=n.sourceLayer;if(!h)return;const m=o.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new c.j(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const o=this._serializedAllLayers();if(!n||n.length===0)return Object.values(o);const h=[];for(const m of n)o[m]&&h.push(o[m]);return h}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const o=Object.keys(this._layers);for(const h of o){const m=this._layers[h];m.type!=="custom"&&(n[h]=m.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const o=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const b in this._updatedSources){const A=this._updatedSources[b];if(A==="reload")this._reloadSource(b);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];h[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(n,this._availableImages),!_.isHidden(n.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in h){const _=this.sourceCaches[m];h[m]!==_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(n),this.z=n.zoom,o&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,o){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(n),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,o={}){this._checkLoaded();const h=this.serialize();if(n=o.transformStyle?o.transformStyle(h,n):n,_r(this,c.x(n)))return!1;(n=c.aA(n)).layers=c.ay(n.layers);const m=c.aB(h,n),_=this._getOperationsToPerform(m);if(_.unimplemented.length>0)throw new Error(`Unimplemented: ${_.unimplemented.join(", ")}.`);if(_.operations.length===0)return!1;for(const b of _.operations)b();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const o=[],h=[];for(const m of n)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":o.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":o.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":o.push(()=>{});break;default:h.push(m.command)}return{operations:o,unimplemented:h}}addImage(n,o){if(this.getImage(n))return this.fire(new c.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,o),this._afterImageUpdated(n)}updateImage(n,o){this.imageManager.updateImage(n,o)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,o,h={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(c.x.source,`sources.${n}`,o,null,h))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const m=this.sourceCaches[n]=new yr(n,o,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:n})),m.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===n)return this.fire(new c.j(new Error(`Source "${n}" cannot be removed while layer "${h}" is using it.`)));const o=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],o.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,o){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const h=this.sourceCaches[n].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(o),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,o,h={}){this._checkLoaded();const m=n.id;if(this.getLayer(m))return void this.fire(new c.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(n.type==="custom"){if(_r(this,c.aC(n)))return;_=c.az(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(m,n.source),n=c.aA(n),n=c.e(n,{source:m})),this._validate(c.x.layer,`layers.${m}`,n,{arrayIndex:-1},h))return;_=c.az(n),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const b=o?this._order.indexOf(o):this._order.length;if(o&&b===-1)this.fire(new c.j(new Error(`Cannot add layer "${m}" before non-existing layer "${o}".`)));else{if(this._order.splice(b,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const A=this._removedLayers[m];delete this._removedLayers[m],A.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(n,o){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===o)return;const h=this._order.indexOf(n);this._order.splice(h,1);const m=o?this._order.indexOf(o):this._order.length;o&&m===-1?this.fire(new c.j(new Error(`Cannot move layer "${n}" before non-existing layer "${o}".`))):(this._order.splice(m,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const o=this._layers[n];if(!o)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${n}".`)));o.setEventedParent(null);const h=this._order.indexOf(n);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=o,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],o.onRemove&&o.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,o,h){this._checkLoaded();const m=this.getLayer(n);m?m.minzoom===o&&m.maxzoom===h||(o!=null&&(m.minzoom=o),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,o,h={}){this._checkLoaded();const m=this.getLayer(n);if(m){if(!c.aD(m.filter,o))return o==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(c.x.filter,`layers.${m.id}.filter`,o,null,h)||(m.filter=c.aA(o),this._updateLayer(m)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.aA(this.getLayer(n).filter)}setLayoutProperty(n,o,h,m={}){this._checkLoaded();const _=this.getLayer(n);_?c.aD(_.getLayoutProperty(o),h)||(_.setLayoutProperty(o,h,m),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,o){const h=this.getLayer(n);if(h)return h.getLayoutProperty(o);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,o,h,m={}){this._checkLoaded();const _=this.getLayer(n);_?c.aD(_.getPaintProperty(o),h)||(_.setPaintProperty(o,h,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,o){return this.getLayer(n).getPaintProperty(o)}setFeatureState(n,o){this._checkLoaded();const h=n.source,m=n.sourceLayer,_=this.sourceCaches[h];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)));const b=_.getSource().type;b==="geojson"&&m?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||m?(n.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,n.id,o)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,o){this._checkLoaded();const h=n.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)));const _=m.getSource().type,b=_==="vector"?n.sourceLayer:void 0;_!=="vector"||b?o&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(b,n.id,o):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const o=n.source,h=n.sourceLayer,m=this.sourceCaches[o];if(m!==void 0)return m.getSource().type!=="vector"||h?(n.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,n.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.aE(this.sourceCaches,_=>_.serialize()),o=this._serializeByIds(this._order),h=this.map.getTerrain()||void 0,m=this.stylesheet;return c.aF({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:n,layers:o,terrain:h},_=>_!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const o=b=>this._layers[b].type==="fill-extrusion",h={},m=[];for(let b=this._order.length-1;b>=0;b--){const A=this._order[b];if(o(A)){h[A]=b;for(const C of n){const P=C[A];if(P)for(const L of P)m.push(L)}}}m.sort((b,A)=>A.intersectionZ-b.intersectionZ);const _=[];for(let b=this._order.length-1;b>=0;b--){const A=this._order[b];if(o(A))for(let C=m.length-1;C>=0;C--){const P=m[C].feature;if(h[P.layer.id]<b)break;_.push(P),m.pop()}else for(const C of n){const P=C[A];if(P)for(const L of P)_.push(L.feature)}}return _}queryRenderedFeatures(n,o,h){o&&o.filter&&this._validate(c.x.filter,"queryRenderedFeatures.filter",o.filter,null,o);const m={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const A of o.layers){const C=this._layers[A];if(!C)return this.fire(new c.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];m[C.source]=!0}}const _=[];o.availableImages=this._availableImages;const b=this._serializedAllLayers();for(const A in this.sourceCaches)o.layers&&!m[A]||_.push(gi(this.sourceCaches[A],this._layers,b,n,o,h));return this.placement&&_.push(function(A,C,P,L,F,V,J){const Q={},ne=V.queryRenderedSymbols(L),K=[];for(const fe of Object.keys(ne).map(Number))K.push(J[fe]);K.sort(Dr);for(const fe of K){const Se=fe.featureIndex.lookupSymbolFeatures(ne[fe.bucketInstanceId],C,fe.bucketIndex,fe.sourceLayerIndex,F.filter,F.layers,F.availableImages,A);for(const se in Se){const ye=Q[se]=Q[se]||[],Ce=Se[se];Ce.sort((Ee,De)=>{const Ne=fe.featureSortOrder;if(Ne){const Be=Ne.indexOf(Ee.featureIndex);return Ne.indexOf(De.featureIndex)-Be}return De.featureIndex-Ee.featureIndex});for(const Ee of Ce)ye.push(Ee)}}for(const fe in Q)Q[fe].forEach(Se=>{const se=Se.feature,ye=P[A[fe].source].getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=ye});return Q}(this._layers,b,this.sourceCaches,n,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(n,o){o&&o.filter&&this._validate(c.x.filter,"querySourceFeatures.filter",o.filter,null,o);const h=this.sourceCaches[n];return h?function(m,_){const b=m.getRenderableIds().map(P=>m.getTileByID(P)),A=[],C={};for(let P=0;P<b.length;P++){const L=b[P],F=L.tileID.canonical.key;C[F]||(C[F]=!0,L.querySourceFeatures(A,_))}return A}(h,o):[]}getLight(){return this.light.getLight()}setLight(n,o={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const b in n)if(!c.aD(n[b],h[b])){m=!0;break}if(!m)return;const _={now:R.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,o),this.light.updateTransitions(_)}_validate(n,o,h,m,_={}){return(!_||_.validate!==!1)&&_r(this,n.call(c.x,c.e({key:o,style:this.serialize(),value:h,styleSpec:c.v},m)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),je().off("pluginStateChange",this._rtlTextPluginStateChange);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const o in this.sourceCaches)this.sourceCaches[o].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,o,h,m,_=!1){let b=!1,A=!1;const C={};for(const P of this._order){const L=this._layers[P];if(L.type!=="symbol")continue;if(!C[L.source]){const V=this.sourceCaches[L.source];C[L.source]=V.getRenderableIds(!0).map(J=>V.getTileByID(J)).sort((J,Q)=>Q.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(Q.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(L,C[L.source],n.center.lng);b=b||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R.now(),n.zoom))&&(this.pauseablePlacement=new xi(n,this.map.terrain,this._order,_,o,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(R.now()),A=!0),b&&this.pauseablePlacement.placement.setStale()),A||b)for(const P of this._order){const L=this._layers[P];L.type==="symbol"&&this.placement.updateLayerOpacities(L,C[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,o){return c._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[o.source];return m&&m.setDependencies(o.tileID.key,o.type,o.icons),h})}getGlyphs(n,o){return c._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(o.stacks),m=this.sourceCaches[o.source];return m&&m.setDependencies(o.tileID.key,o.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,o={}){this._checkLoaded(),n&&this._validate(c.x.glyphs,"glyphs",n,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,o,h={},m){this._checkLoaded();const _=[{id:n,url:o}],b=[...Et(this.stylesheet.sprite),..._];this._validate(c.x.sprite,"sprite",b,null,h)||(this.stylesheet.sprite=b,this._loadSprite(_,!0,m))}removeSprite(n){this._checkLoaded();const o=Et(this.stylesheet.sprite);if(o.find(h=>h.id===n)){if(this._spritesImagesIds[n])for(const h of this._spritesImagesIds[n])this.imageManager.removeImage(h),this._changedImages[h]=!0;o.splice(o.findIndex(h=>h.id===n),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Et(this.stylesheet.sprite)}setSprite(n,o={},h){this._checkLoaded(),n&&this._validate(c.x.sprite,"sprite",n,null,o)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,h):(this._unloadSprite(),h&&h(null)))}}var Jo=c.X([{name:"a_pos",type:"Int16",components:2}]),Yi="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ao={prelude:Jt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Jt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Jt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Jt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Jt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Jt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Jt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Jt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Jt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Jt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Jt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Jt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Jt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Jt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Jt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Jt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Jt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Jt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Jt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Jt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Jt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Jt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Jt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Jt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Yi),terrainDepth:Jt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Yi),terrainCoords:Jt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Yi)};function Jt(y,n){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=n.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(m):m,A={};return{fragmentSource:y=y.replace(o,(C,P,L,F,V)=>(A[V]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
varying ${L} ${F} ${V};
#else
uniform ${L} ${F} u_${V};
#endif
`:`
#ifdef HAS_UNIFORM_u_${V}
    ${L} ${F} ${V} = u_${V};
#endif
`)),vertexSource:n=n.replace(o,(C,P,L,F,V)=>{const J=F==="float"?"vec2":"vec4",Q=V.match(/color/)?"color":J;return A[V]?P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${L} ${J} a_${V};
varying ${L} ${F} ${V};
#else
uniform ${L} ${F} u_${V};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${L} ${F} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${Q}(a_${V}, u_${V}_t);
#else
    ${L} ${F} ${V} = u_${V};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${L} ${J} a_${V};
#else
uniform ${L} ${F} u_${V};
#endif
`:Q==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${L} ${F} ${V} = a_${V};
#else
    ${L} ${F} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${L} ${F} ${V} = unpack_mix_${Q}(a_${V}, u_${V}_t);
#else
    ${L} ${F} ${V} = u_${V};
#endif
`}),staticAttributes:h,staticUniforms:b}}class Qo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,o,h,m,_,b,A,C,P){this.context=n;let L=this.boundPaintVertexBuffers.length!==m.length;for(let F=0;!L&&F<m.length;F++)this.boundPaintVertexBuffers[F]!==m[F]&&(L=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==h||L||this.boundIndexBuffer!==_||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==P?this.freshBind(o,h,m,_,b,A,C,P):(n.bindVertexArray.set(this.vao),A&&A.bind(),_&&_.dynamicDraw&&_.bind(),C&&C.bind(),P&&P.bind())}freshBind(n,o,h,m,_,b,A,C){const P=n.numAttributes,L=this.context,F=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=C,o.enableAttributes(F,n);for(const V of h)V.enableAttributes(F,n);b&&b.enableAttributes(F,n),A&&A.enableAttributes(F,n),C&&C.enableAttributes(F,n),o.bind(),o.setVertexAttribPointers(F,n,_);for(const V of h)V.bind(),V.setVertexAttribPointers(F,n,_);b&&(b.bind(),b.setVertexAttribPointers(F,n,_)),m&&m.bind(),A&&(A.bind(),A.setVertexAttribPointers(F,n,_)),C&&(C.bind(),C.setVertexAttribPointers(F,n,_)),L.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function gs(y){const n=[];for(let o=0;o<y.length;o++){if(y[o]===null)continue;const h=y[o].split(" ");n.push(h.pop())}return n}class Ia{constructor(n,o,h,m,_,b){const A=n.gl;this.program=A.createProgram();const C=gs(o.staticAttributes),P=h?h.getBinderAttributes():[],L=C.concat(P),F=ao.prelude.staticUniforms?gs(ao.prelude.staticUniforms):[],V=o.staticUniforms?gs(o.staticUniforms):[],J=h?h.getBinderUniforms():[],Q=F.concat(V).concat(J),ne=[];for(const Ee of Q)ne.indexOf(Ee)<0&&ne.push(Ee);const K=h?h.defines():[];_&&K.push("#define OVERDRAW_INSPECTOR;"),b&&K.push("#define TERRAIN3D;");const fe=K.concat(ao.prelude.fragmentSource,o.fragmentSource).join(`
`),Se=K.concat(ao.prelude.vertexSource,o.vertexSource).join(`
`),se=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(se,fe),A.compileShader(se),!A.getShaderParameter(se,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(se)}`);A.attachShader(this.program,se);const ye=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ye,Se),A.compileShader(ye),!A.getShaderParameter(ye,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ye)}`);A.attachShader(this.program,ye),this.attributes={};const Ce={};this.numAttributes=L.length;for(let Ee=0;Ee<this.numAttributes;Ee++)L[Ee]&&(A.bindAttribLocation(this.program,Ee,L[Ee]),this.attributes[L[Ee]]=Ee);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ye),A.deleteShader(se);for(let Ee=0;Ee<ne.length;Ee++){const De=ne[Ee];if(De&&!Ce[De]){const Ne=A.getUniformLocation(this.program,De);Ne&&(Ce[De]=Ne)}}this.fixedUniforms=m(n,Ce),this.terrainUniforms=((Ee,De)=>({u_depth:new c.aG(Ee,De.u_depth),u_terrain:new c.aG(Ee,De.u_terrain),u_terrain_dim:new c.aH(Ee,De.u_terrain_dim),u_terrain_matrix:new c.aI(Ee,De.u_terrain_matrix),u_terrain_unpack:new c.aJ(Ee,De.u_terrain_unpack),u_terrain_exaggeration:new c.aH(Ee,De.u_terrain_exaggeration)}))(n,Ce),this.binderUniforms=h?h.getUniforms(n,Ce):[]}draw(n,o,h,m,_,b,A,C,P,L,F,V,J,Q,ne,K,fe,Se){const se=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(h),n.setStencilMode(m),n.setColorMode(_),n.setCullFace(b),C){n.activeTexture.set(se.TEXTURE2),se.bindTexture(se.TEXTURE_2D,C.depthTexture),n.activeTexture.set(se.TEXTURE3),se.bindTexture(se.TEXTURE_2D,C.texture);for(const Ce in this.terrainUniforms)this.terrainUniforms[Ce].set(C[Ce])}for(const Ce in this.fixedUniforms)this.fixedUniforms[Ce].set(A[Ce]);ne&&ne.setUniforms(n,this.binderUniforms,J,{zoom:Q});let ye=0;switch(o){case se.LINES:ye=2;break;case se.TRIANGLES:ye=3;break;case se.LINE_STRIP:ye=1}for(const Ce of V.get()){const Ee=Ce.vaos||(Ce.vaos={});(Ee[P]||(Ee[P]=new Qo)).bind(n,this,L,ne?ne.getPaintVertexBuffers():[],F,Ce.vertexOffset,K,fe,Se),se.drawElements(o,Ce.primitiveLength*ye,se.UNSIGNED_SHORT,Ce.primitiveOffset*ye*2)}}}function el(y,n,o){const h=1/St(o,1,n.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),_=o.tileSize*Math.pow(2,n.transform.tileZoom)/m,b=_*(o.tileID.canonical.x+o.tileID.wrap*m),A=_*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[h,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[b>>16,A>>16],u_pixel_coord_lower:[65535&b,65535&A]}}const so=(y,n,o,h)=>{const m=n.style.light,_=m.properties.get("position"),b=[_.x,_.y,_.z],A=function(){var P=new c.A(9);return c.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();m.properties.get("anchor")==="viewport"&&function(P,L){var F=Math.sin(L),V=Math.cos(L);P[0]=V,P[1]=F,P[2]=0,P[3]=-F,P[4]=V,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(A,-n.transform.angle),function(P,L,F){var V=L[0],J=L[1],Q=L[2];P[0]=V*F[0]+J*F[3]+Q*F[6],P[1]=V*F[1]+J*F[4]+Q*F[7],P[2]=V*F[2]+J*F[5]+Q*F[8]}(b,b,A);const C=m.properties.get("color");return{u_matrix:y,u_lightpos:b,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+o,u_opacity:h}},Ep=(y,n,o,h,m,_,b)=>c.e(so(y,n,o,h),el(_,n,b),{u_height_factor:-Math.pow(2,m.overscaledZ)/b.tileSize/8}),Lh=y=>({u_matrix:y}),tl=(y,n,o,h)=>c.e(Lh(y),el(o,n,h)),Ap=(y,n)=>({u_matrix:y,u_world:n}),zh=(y,n,o,h,m)=>c.e(tl(y,n,o,h),{u_world:m}),Cp=(y,n,o,h)=>{const m=y.transform;let _,b;if(h.paint.get("circle-pitch-alignment")==="map"){const A=St(o,1,m.zoom);_=!0,b=[A,A]}else _=!1,b=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(n.posMatrix,o,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:b}},Fh=(y,n,o)=>{const h=St(o,1,n.zoom),m=Math.pow(2,n.zoom-o.tileID.overscaledZ),_=o.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[n.pixelsToGLUnits[0]/(h*m),n.pixelsToGLUnits[1]/(h*m)],u_overscale_factor:_}},Bh=(y,n,o=1)=>({u_matrix:y,u_color:n,u_overlay:0,u_overlay_scale:o}),rl=y=>({u_matrix:y}),Oh=(y,n,o,h)=>({u_matrix:y,u_extrude_scale:St(n,1,o),u_intensity:h});function Nh(y,n){const o=Math.pow(2,n.canonical.z),h=n.canonical.y;return[new c.Y(0,h/o).toLngLat().lat,new c.Y(0,(h+1)/o).toLngLat().lat]}const nl=(y,n,o,h)=>{const m=y.transform;return{u_matrix:oo(y,n,o,h),u_ratio:1/St(n,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},$h=(y,n,o,h,m)=>c.e(nl(y,n,o,m),{u_image:0,u_image_height:h}),Ua=(y,n,o,h,m)=>{const _=y.transform,b=ii(n,_);return{u_matrix:oo(y,n,o,m),u_texsize:n.imageAtlasTexture.size,u_ratio:1/St(n,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[b,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},il=(y,n,o,h,m,_)=>{const b=y.lineAtlas,A=ii(n,y.transform),C=o.layout.get("line-cap")==="round",P=b.getDash(h.from,C),L=b.getDash(h.to,C),F=P.width*m.fromScale,V=L.width*m.toScale;return c.e(nl(y,n,o,_),{u_patternscale_a:[A/F,-P.height/2],u_patternscale_b:[A/V,-L.height/2],u_sdfgamma:b.width/(256*Math.min(F,V)*y.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:L.y,u_mix:m.t})};function ii(y,n){return 1/St(y,1,n.tileZoom)}function oo(y,n,o,h){return y.translatePosMatrix(h?h.posMatrix:n.tileID.posMatrix,n,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const al=(y,n,o,h,m)=>{return{u_matrix:y,u_tl_parent:n,u_scale_parent:o,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(b=m.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:lo(m.paint.get("raster-hue-rotate"))};var _,b};function lo(y){y*=Math.PI/180;const n=Math.sin(y),o=Math.cos(y);return[(2*o+1)/3,(-Math.sqrt(3)*n-o+1)/3,(Math.sqrt(3)*n-o+1)/3]}const uo=(y,n,o,h,m,_,b,A,C,P)=>{const L=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:L.width/L.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:b,u_coord_matrix:A,u_is_text:+C,u_pitch_with_map:+h,u_texsize:P,u_texture:0}},co=(y,n,o,h,m,_,b,A,C,P,L)=>{const F=m.transform;return c.e(uo(y,n,o,h,m,_,b,A,C,P),{u_gamma_scale:h?Math.cos(F._pitch)*F.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+L})},ho=(y,n,o,h,m,_,b,A,C,P)=>c.e(co(y,n,o,h,m,_,b,A,!0,C,!0),{u_texsize_icon:P,u_texture_icon:1}),Tp=(y,n,o)=>({u_matrix:y,u_opacity:n,u_color:o}),Ip=(y,n,o,h,m,_)=>c.e(function(b,A,C,P){const L=C.imageManager.getPattern(b.from.toString()),F=C.imageManager.getPattern(b.to.toString()),{width:V,height:J}=C.imageManager.getPixelSize(),Q=Math.pow(2,P.tileID.overscaledZ),ne=P.tileSize*Math.pow(2,C.transform.tileZoom)/Q,K=ne*(P.tileID.canonical.x+P.tileID.wrap*Q),fe=ne*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[V,J],u_mix:A.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/St(P,1,C.transform.tileZoom),u_pixel_coord_upper:[K>>16,fe>>16],u_pixel_coord_lower:[65535&K,65535&fe]}}(h,_,o,m),{u_matrix:y,u_opacity:n}),Uh={fillExtrusion:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_lightpos:new c.aK(y,n.u_lightpos),u_lightintensity:new c.aH(y,n.u_lightintensity),u_lightcolor:new c.aK(y,n.u_lightcolor),u_vertical_gradient:new c.aH(y,n.u_vertical_gradient),u_opacity:new c.aH(y,n.u_opacity)}),fillExtrusionPattern:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_lightpos:new c.aK(y,n.u_lightpos),u_lightintensity:new c.aH(y,n.u_lightintensity),u_lightcolor:new c.aK(y,n.u_lightcolor),u_vertical_gradient:new c.aH(y,n.u_vertical_gradient),u_height_factor:new c.aH(y,n.u_height_factor),u_image:new c.aG(y,n.u_image),u_texsize:new c.aL(y,n.u_texsize),u_pixel_coord_upper:new c.aL(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aL(y,n.u_pixel_coord_lower),u_scale:new c.aK(y,n.u_scale),u_fade:new c.aH(y,n.u_fade),u_opacity:new c.aH(y,n.u_opacity)}),fill:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix)}),fillPattern:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_image:new c.aG(y,n.u_image),u_texsize:new c.aL(y,n.u_texsize),u_pixel_coord_upper:new c.aL(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aL(y,n.u_pixel_coord_lower),u_scale:new c.aK(y,n.u_scale),u_fade:new c.aH(y,n.u_fade)}),fillOutline:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_world:new c.aL(y,n.u_world)}),fillOutlinePattern:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_world:new c.aL(y,n.u_world),u_image:new c.aG(y,n.u_image),u_texsize:new c.aL(y,n.u_texsize),u_pixel_coord_upper:new c.aL(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aL(y,n.u_pixel_coord_lower),u_scale:new c.aK(y,n.u_scale),u_fade:new c.aH(y,n.u_fade)}),circle:(y,n)=>({u_camera_to_center_distance:new c.aH(y,n.u_camera_to_center_distance),u_scale_with_map:new c.aG(y,n.u_scale_with_map),u_pitch_with_map:new c.aG(y,n.u_pitch_with_map),u_extrude_scale:new c.aL(y,n.u_extrude_scale),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_matrix:new c.aI(y,n.u_matrix)}),collisionBox:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_camera_to_center_distance:new c.aH(y,n.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aH(y,n.u_pixels_to_tile_units),u_extrude_scale:new c.aL(y,n.u_extrude_scale),u_overscale_factor:new c.aH(y,n.u_overscale_factor)}),collisionCircle:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_inv_matrix:new c.aI(y,n.u_inv_matrix),u_camera_to_center_distance:new c.aH(y,n.u_camera_to_center_distance),u_viewport_size:new c.aL(y,n.u_viewport_size)}),debug:(y,n)=>({u_color:new c.aM(y,n.u_color),u_matrix:new c.aI(y,n.u_matrix),u_overlay:new c.aG(y,n.u_overlay),u_overlay_scale:new c.aH(y,n.u_overlay_scale)}),clippingMask:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix)}),heatmap:(y,n)=>({u_extrude_scale:new c.aH(y,n.u_extrude_scale),u_intensity:new c.aH(y,n.u_intensity),u_matrix:new c.aI(y,n.u_matrix)}),heatmapTexture:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_world:new c.aL(y,n.u_world),u_image:new c.aG(y,n.u_image),u_color_ramp:new c.aG(y,n.u_color_ramp),u_opacity:new c.aH(y,n.u_opacity)}),hillshade:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_image:new c.aG(y,n.u_image),u_latrange:new c.aL(y,n.u_latrange),u_light:new c.aL(y,n.u_light),u_shadow:new c.aM(y,n.u_shadow),u_highlight:new c.aM(y,n.u_highlight),u_accent:new c.aM(y,n.u_accent)}),hillshadePrepare:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_image:new c.aG(y,n.u_image),u_dimension:new c.aL(y,n.u_dimension),u_zoom:new c.aH(y,n.u_zoom),u_unpack:new c.aJ(y,n.u_unpack)}),line:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_ratio:new c.aH(y,n.u_ratio),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_units_to_pixels:new c.aL(y,n.u_units_to_pixels)}),lineGradient:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_ratio:new c.aH(y,n.u_ratio),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_units_to_pixels:new c.aL(y,n.u_units_to_pixels),u_image:new c.aG(y,n.u_image),u_image_height:new c.aH(y,n.u_image_height)}),linePattern:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_texsize:new c.aL(y,n.u_texsize),u_ratio:new c.aH(y,n.u_ratio),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_image:new c.aG(y,n.u_image),u_units_to_pixels:new c.aL(y,n.u_units_to_pixels),u_scale:new c.aK(y,n.u_scale),u_fade:new c.aH(y,n.u_fade)}),lineSDF:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_ratio:new c.aH(y,n.u_ratio),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_units_to_pixels:new c.aL(y,n.u_units_to_pixels),u_patternscale_a:new c.aL(y,n.u_patternscale_a),u_patternscale_b:new c.aL(y,n.u_patternscale_b),u_sdfgamma:new c.aH(y,n.u_sdfgamma),u_image:new c.aG(y,n.u_image),u_tex_y_a:new c.aH(y,n.u_tex_y_a),u_tex_y_b:new c.aH(y,n.u_tex_y_b),u_mix:new c.aH(y,n.u_mix)}),raster:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_tl_parent:new c.aL(y,n.u_tl_parent),u_scale_parent:new c.aH(y,n.u_scale_parent),u_buffer_scale:new c.aH(y,n.u_buffer_scale),u_fade_t:new c.aH(y,n.u_fade_t),u_opacity:new c.aH(y,n.u_opacity),u_image0:new c.aG(y,n.u_image0),u_image1:new c.aG(y,n.u_image1),u_brightness_low:new c.aH(y,n.u_brightness_low),u_brightness_high:new c.aH(y,n.u_brightness_high),u_saturation_factor:new c.aH(y,n.u_saturation_factor),u_contrast_factor:new c.aH(y,n.u_contrast_factor),u_spin_weights:new c.aK(y,n.u_spin_weights)}),symbolIcon:(y,n)=>({u_is_size_zoom_constant:new c.aG(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aG(y,n.u_is_size_feature_constant),u_size_t:new c.aH(y,n.u_size_t),u_size:new c.aH(y,n.u_size),u_camera_to_center_distance:new c.aH(y,n.u_camera_to_center_distance),u_pitch:new c.aH(y,n.u_pitch),u_rotate_symbol:new c.aG(y,n.u_rotate_symbol),u_aspect_ratio:new c.aH(y,n.u_aspect_ratio),u_fade_change:new c.aH(y,n.u_fade_change),u_matrix:new c.aI(y,n.u_matrix),u_label_plane_matrix:new c.aI(y,n.u_label_plane_matrix),u_coord_matrix:new c.aI(y,n.u_coord_matrix),u_is_text:new c.aG(y,n.u_is_text),u_pitch_with_map:new c.aG(y,n.u_pitch_with_map),u_texsize:new c.aL(y,n.u_texsize),u_texture:new c.aG(y,n.u_texture)}),symbolSDF:(y,n)=>({u_is_size_zoom_constant:new c.aG(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aG(y,n.u_is_size_feature_constant),u_size_t:new c.aH(y,n.u_size_t),u_size:new c.aH(y,n.u_size),u_camera_to_center_distance:new c.aH(y,n.u_camera_to_center_distance),u_pitch:new c.aH(y,n.u_pitch),u_rotate_symbol:new c.aG(y,n.u_rotate_symbol),u_aspect_ratio:new c.aH(y,n.u_aspect_ratio),u_fade_change:new c.aH(y,n.u_fade_change),u_matrix:new c.aI(y,n.u_matrix),u_label_plane_matrix:new c.aI(y,n.u_label_plane_matrix),u_coord_matrix:new c.aI(y,n.u_coord_matrix),u_is_text:new c.aG(y,n.u_is_text),u_pitch_with_map:new c.aG(y,n.u_pitch_with_map),u_texsize:new c.aL(y,n.u_texsize),u_texture:new c.aG(y,n.u_texture),u_gamma_scale:new c.aH(y,n.u_gamma_scale),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_is_halo:new c.aG(y,n.u_is_halo)}),symbolTextAndIcon:(y,n)=>({u_is_size_zoom_constant:new c.aG(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aG(y,n.u_is_size_feature_constant),u_size_t:new c.aH(y,n.u_size_t),u_size:new c.aH(y,n.u_size),u_camera_to_center_distance:new c.aH(y,n.u_camera_to_center_distance),u_pitch:new c.aH(y,n.u_pitch),u_rotate_symbol:new c.aG(y,n.u_rotate_symbol),u_aspect_ratio:new c.aH(y,n.u_aspect_ratio),u_fade_change:new c.aH(y,n.u_fade_change),u_matrix:new c.aI(y,n.u_matrix),u_label_plane_matrix:new c.aI(y,n.u_label_plane_matrix),u_coord_matrix:new c.aI(y,n.u_coord_matrix),u_is_text:new c.aG(y,n.u_is_text),u_pitch_with_map:new c.aG(y,n.u_pitch_with_map),u_texsize:new c.aL(y,n.u_texsize),u_texsize_icon:new c.aL(y,n.u_texsize_icon),u_texture:new c.aG(y,n.u_texture),u_texture_icon:new c.aG(y,n.u_texture_icon),u_gamma_scale:new c.aH(y,n.u_gamma_scale),u_device_pixel_ratio:new c.aH(y,n.u_device_pixel_ratio),u_is_halo:new c.aG(y,n.u_is_halo)}),background:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_opacity:new c.aH(y,n.u_opacity),u_color:new c.aM(y,n.u_color)}),backgroundPattern:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_opacity:new c.aH(y,n.u_opacity),u_image:new c.aG(y,n.u_image),u_pattern_tl_a:new c.aL(y,n.u_pattern_tl_a),u_pattern_br_a:new c.aL(y,n.u_pattern_br_a),u_pattern_tl_b:new c.aL(y,n.u_pattern_tl_b),u_pattern_br_b:new c.aL(y,n.u_pattern_br_b),u_texsize:new c.aL(y,n.u_texsize),u_mix:new c.aH(y,n.u_mix),u_pattern_size_a:new c.aL(y,n.u_pattern_size_a),u_pattern_size_b:new c.aL(y,n.u_pattern_size_b),u_scale_a:new c.aH(y,n.u_scale_a),u_scale_b:new c.aH(y,n.u_scale_b),u_pixel_coord_upper:new c.aL(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aL(y,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aH(y,n.u_tile_units_to_pixels)}),terrain:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_texture:new c.aG(y,n.u_texture),u_ele_delta:new c.aH(y,n.u_ele_delta)}),terrainDepth:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_ele_delta:new c.aH(y,n.u_ele_delta)}),terrainCoords:(y,n)=>({u_matrix:new c.aI(y,n.u_matrix),u_texture:new c.aG(y,n.u_texture),u_terrain_coords_id:new c.aH(y,n.u_terrain_coords_id),u_ele_delta:new c.aH(y,n.u_ele_delta)})};class Pp{constructor(n,o,h){this.context=n;const m=n.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Va={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sl{constructor(n,o,h,m){this.length=o.length,this.attributes=h,this.itemSize=o.bytesPerElement,this.dynamicDraw=m,this.context=n;const _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,o){for(let h=0;h<this.attributes.length;h++){const m=o.attributes[this.attributes[h].name];m!==void 0&&n.enableVertexAttribArray(m)}}setVertexAttribPointers(n,o,h){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],b=o.attributes[_.name];b!==void 0&&n.vertexAttribPointer(b,_.components,n[Va[_.type]],!1,this.itemSize,_.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rn=new WeakMap;function wn(y){var n;if(Rn.has(y))return Rn.get(y);{const o=(n=y.getParameter(y.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Rn.set(y,o),o}}class Wt{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ol extends Wt{getDefault(){return c.aO.transparent}set(n){const o=this.current;(n.r!==o.r||n.g!==o.g||n.b!==o.b||n.a!==o.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ll extends Wt{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Pu extends Wt{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Mu extends Wt{getDefault(){return[!0,!0,!0,!0]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class ul extends Wt{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class ku extends Wt{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Ru extends Wt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const o=this.current;(n.func!==o.func||n.ref!==o.ref||n.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class cl extends Wt{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Vh extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=n,this.dirty=!1}}class jh extends Wt{getDefault(){return[0,1]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class ys extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=n,this.dirty=!1}}class Mp extends Wt{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class kp extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.BLEND):o.disable(o.BLEND),this.current=n,this.dirty=!1}}class Rp extends Wt{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Dp extends Wt{getDefault(){return c.aO.transparent}set(n){const o=this.current;(n.r!==o.r||n.g!==o.g||n.b!==o.b||n.a!==o.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Lp extends Wt{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class zp extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=n,this.dirty=!1}}class Du extends Wt{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class hl extends Wt{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Lu extends Wt{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class zu extends Wt{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class _s extends Wt{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Zh extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Hh extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Fu extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class ja extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Gh extends Wt{getDefault(){return null}set(n){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class vs extends Wt{getDefault(){return null}set(n){var o;if(n===this.current&&!this.dirty)return;const h=this.gl;wn(h)?h.bindVertexArray(n):(o=h.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class xs extends Wt{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class qh extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Bu extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class qt extends Wt{constructor(n,o){super(n),this.context=n,this.parent=o}getDefault(){return null}}class dl extends qt{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Fp extends qt{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Wh extends qt{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class fo{constructor(n,o,h,m,_){this.context=n,this.width=o,this.height=h;const b=n.gl,A=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new dl(n,A),m)this.depthAttachment=_?new Wh(n,A):new Fp(n,A);else if(_)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,o=this.colorAttachment.get();if(o&&n.deleteTexture(o),this.depthAttachment){const h=this.depthAttachment.get();h&&n.deleteRenderbuffer(h)}n.deleteFramebuffer(this.framebuffer)}}class $r{constructor(n,o,h){this.blendFunction=n,this.blendColor=o,this.mask=h}}$r.Replace=[1,0],$r.disabled=new $r($r.Replace,c.aO.transparent,[!1,!1,!1,!1]),$r.unblended=new $r($r.Replace,c.aO.transparent,[!0,!0,!0,!0]),$r.alphaBlended=new $r([1,771],c.aO.transparent,[!0,!0,!0,!0]);class Bp{constructor(n){var o,h;if(this.gl=n,this.clearColor=new ol(this),this.clearDepth=new ll(this),this.clearStencil=new Pu(this),this.colorMask=new Mu(this),this.depthMask=new ul(this),this.stencilMask=new ku(this),this.stencilFunc=new Ru(this),this.stencilOp=new cl(this),this.stencilTest=new Vh(this),this.depthRange=new jh(this),this.depthTest=new ys(this),this.depthFunc=new Mp(this),this.blend=new kp(this),this.blendFunc=new Rp(this),this.blendColor=new Dp(this),this.blendEquation=new Lp(this),this.cullFace=new zp(this),this.cullFaceSide=new Du(this),this.frontFace=new hl(this),this.program=new Lu(this),this.activeTexture=new zu(this),this.viewport=new _s(this),this.bindFramebuffer=new Zh(this),this.bindRenderbuffer=new Hh(this),this.bindTexture=new Fu(this),this.bindVertexBuffer=new ja(this),this.bindElementBuffer=new Gh(this),this.bindVertexArray=new vs(this),this.pixelStoreUnpack=new xs(this),this.pixelStoreUnpackPremultiplyAlpha=new qh(this),this.pixelStoreUnpackFlipY=new Bu(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),wn(n)){this.HALF_FLOAT=n.HALF_FLOAT;const m=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=n.RGBA16F)!==null&&o!==void 0?o:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(h=n.RGB16F)!==null&&h!==void 0?h:m==null?void 0:m.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const m=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,o){return new Pp(this,n,o)}createVertexBuffer(n,o,h){return new sl(this,n,o,h)}createRenderbuffer(n,o,h){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,n,o,h),this.bindRenderbuffer.set(null),_}createFramebuffer(n,o,h,m){return new fo(this,n,o,h,m)}clear({color:n,depth:o,stencil:h}){const m=this.gl;let _=0;n&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),h!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),m.clear(_)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.aD(n.blendFunction,$r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return wn(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var o;return wn(this.gl)?this.gl.deleteVertexArray(n):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class Ht{constructor(n,o,h){this.func=n,this.mask=o,this.range=h}}Ht.ReadOnly=!1,Ht.ReadWrite=!0,Ht.disabled=new Ht(519,Ht.ReadOnly,[0,1]);const Ou=7680;class ur{constructor(n,o,h,m,_,b){this.test=n,this.ref=o,this.mask=h,this.fail=m,this.depthFail=_,this.pass=b}}ur.disabled=new ur({func:519,mask:0},0,0,Ou,Ou,Ou);class rr{constructor(n,o,h){this.enable=n,this.mode=o,this.frontFace=h}}let Za;function fl(y,n,o,h,m,_,b){const A=y.context,C=A.gl,P=y.useProgram("collisionBox"),L=[];let F=0,V=0;for(let se=0;se<h.length;se++){const ye=h[se],Ce=n.getTile(ye),Ee=Ce.getBucket(o);if(!Ee)continue;let De=ye.posMatrix;m[0]===0&&m[1]===0||(De=y.translatePosMatrix(ye.posMatrix,Ce,m,_));const Ne=b?Ee.textCollisionBox:Ee.iconCollisionBox,Be=Ee.collisionCircleArray;if(Be.length>0){const He=c.F(),ot=De;c.aP(He,Ee.placementInvProjMatrix,y.transform.glCoordMatrix),c.aP(He,He,Ee.placementViewportMatrix),L.push({circleArray:Be,circleOffset:V,transform:ot,invTransform:He,coord:ye}),F+=Be.length/4,V=F}Ne&&P.draw(A,C.LINES,Ht.disabled,ur.disabled,y.colorModeForRenderPass(),rr.disabled,Fh(De,y.transform,Ce),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye),o.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,null,y.transform.zoom,null,null,Ne.collisionVertexBuffer)}if(!b||!L.length)return;const J=y.useProgram("collisionCircle"),Q=new c.aQ;Q.resize(4*F),Q._trim();let ne=0;for(const se of L)for(let ye=0;ye<se.circleArray.length/4;ye++){const Ce=4*ye,Ee=se.circleArray[Ce+0],De=se.circleArray[Ce+1],Ne=se.circleArray[Ce+2],Be=se.circleArray[Ce+3];Q.emplace(ne++,Ee,De,Ne,Be,0),Q.emplace(ne++,Ee,De,Ne,Be,1),Q.emplace(ne++,Ee,De,Ne,Be,2),Q.emplace(ne++,Ee,De,Ne,Be,3)}(!Za||Za.length<2*F)&&(Za=function(se){const ye=2*se,Ce=new c.aS;Ce.resize(ye),Ce._trim();for(let Ee=0;Ee<ye;Ee++){const De=6*Ee;Ce.uint16[De+0]=4*Ee+0,Ce.uint16[De+1]=4*Ee+1,Ce.uint16[De+2]=4*Ee+2,Ce.uint16[De+3]=4*Ee+2,Ce.uint16[De+4]=4*Ee+3,Ce.uint16[De+5]=4*Ee+0}return Ce}(F));const K=A.createIndexBuffer(Za,!0),fe=A.createVertexBuffer(Q,c.aR.members,!0);for(const se of L){const ye={u_matrix:se.transform,u_inv_matrix:se.invTransform,u_camera_to_center_distance:(Se=y.transform).cameraToCenterDistance,u_viewport_size:[Se.width,Se.height]};J.draw(A,C.TRIANGLES,Ht.disabled,ur.disabled,y.colorModeForRenderPass(),rr.disabled,ye,y.style.map.terrain&&y.style.map.terrain.getTerrainData(se.coord),o.id,fe,K,c.$.simpleSegment(0,2*se.circleOffset,se.circleArray.length,se.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Se;fe.destroy(),K.destroy()}rr.disabled=new rr(!1,1029,2305),rr.backCCW=new rr(!0,1029,2305);const Nu=c.an(new Float32Array(16));function Kh(y,n,o,h,m,_){const{horizontalAlign:b,verticalAlign:A}=c.at(y);return new c.P((-(b-.5)*n/m+h[0])*_,(-(A-.5)*o/m+h[1])*_)}function pl(y,n,o,h,m,_,b,A,C,P,L){const F=y.text.placedSymbolArray,V=y.text.dynamicLayoutVertexArray,J=y.icon.dynamicLayoutVertexArray,Q={};V.clear();for(let ne=0;ne<F.length;ne++){const K=F.get(ne),fe=K.hidden||!K.crossTileID||y.allowVerticalPlacement&&!K.placedOrientation?null:h[K.crossTileID];if(fe){const Se=new c.P(K.anchorX,K.anchorY),se=Fr(Se,o?b:_,L),ye=te(m.cameraToCenterDistance,se.signedDistanceFromCamera);let Ce=c.ai(y.textSizeData,C,K)*ye/c.ao;o&&(Ce*=y.tilePixelRatio/A);const{width:Ee,height:De,anchor:Ne,textOffset:Be,textBoxScale:He}=fe,ot=Kh(Ne,Ee,De,Be,He,Ce),vt=o?Fr(Se.add(ot),_,L).point:se.point.add(n?ot.rotate(-m.angle):ot),Je=y.allowVerticalPlacement&&K.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let yt=0;yt<K.numGlyphs;yt++)c.aj(V,vt,Je);P&&K.associatedIconIndex>=0&&(Q[K.associatedIconIndex]={shiftedAnchor:vt,angle:Je})}else Re(K.numGlyphs,V)}if(P){J.clear();const ne=y.icon.placedSymbolArray;for(let K=0;K<ne.length;K++){const fe=ne.get(K);if(fe.hidden)Re(fe.numGlyphs,J);else{const Se=Q[K];if(Se)for(let se=0;se<fe.numGlyphs;se++)c.aj(J,Se.shiftedAnchor,Se.angle);else Re(fe.numGlyphs,J)}}y.icon.dynamicLayoutVertexBuffer.updateData(J)}y.text.dynamicLayoutVertexBuffer.updateData(V)}function ml(y,n,o){return o.iconsInText&&n?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function gl(y,n,o,h,m,_,b,A,C,P,L,F){const V=y.context,J=V.gl,Q=y.transform,ne=A==="map",K=C==="map",fe=A!=="viewport"&&o.layout.get("symbol-placement")!=="point",Se=ne&&!K&&!fe,se=!o.layout.get("symbol-sort-key").isConstant();let ye=!1;const Ce=y.depthModeForSublayer(0,Ht.ReadOnly),Ee=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[];for(const Ne of h){const Be=n.getTile(Ne),He=Be.getBucket(o);if(!He)continue;const ot=m?He.text:He.icon;if(!ot||!ot.segments.get().length||!ot.hasVisibleVertices)continue;const vt=ot.programConfigurations.get(o.id),Je=m||He.sdfIcons,yt=m?He.textSizeData:He.iconSizeData,ut=K||Q.pitch!==0,hr=y.useProgram(ml(Je,m,He),vt),Bt=c.ag(yt,Q.zoom),Rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne);let Ot,Vr,er,zn,dn=[0,0],br=null;if(m)Vr=Be.glyphAtlasTexture,er=J.LINEAR,Ot=Be.glyphAtlasTexture.size,He.iconsInText&&(dn=Be.imageAtlasTexture.size,br=Be.imageAtlasTexture,zn=ut||y.options.rotating||y.options.zooming||yt.kind==="composite"||yt.kind==="camera"?J.LINEAR:J.NEAREST);else{const dr=o.layout.get("icon-size").constantOr(0)!==1||He.iconsNeedLinear;Vr=Be.imageAtlasTexture,er=Je||y.options.rotating||y.options.zooming||dr||ut?J.LINEAR:J.NEAREST,Ot=Be.imageAtlasTexture.size}const bn=St(Be,1,y.transform.zoom),Sn=Tt(Ne.posMatrix,K,ne,y.transform,bn),bi=la(Ne.posMatrix,K,ne,y.transform,bn),Ra=Ee&&He.hasTextData(),Cs=o.layout.get("icon-text-fit")!=="none"&&Ra&&He.hasIconData();if(fe){const dr=y.style.map.terrain?(fn,tn)=>y.style.map.terrain.getElevation(Ne,fn,tn):null,en=o.layout.get("text-rotation-alignment")==="map";$(He,Ne.posMatrix,y,m,Sn,bi,K,P,en,dr)}const Ts=y.translatePosMatrix(Ne.posMatrix,Be,_,b),Da=fe||m&&Ee||Cs?Nu:Sn,Qr=y.translatePosMatrix(bi,Be,_,b,!0),jr=Je&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Sr;Sr=Je?He.iconsInText?ho(yt.kind,Bt,Se,K,y,Ts,Da,Qr,Ot,dn):co(yt.kind,Bt,Se,K,y,Ts,Da,Qr,m,Ot,!0):uo(yt.kind,Bt,Se,K,y,Ts,Da,Qr,m,Ot);const Fn={program:hr,buffers:ot,uniformValues:Sr,atlasTexture:Vr,atlasTextureIcon:br,atlasInterpolation:er,atlasInterpolationIcon:zn,isSDF:Je,hasHalo:jr};if(se&&He.canOverlap){ye=!0;const dr=ot.segments.get();for(const en of dr)De.push({segments:new c.$([en]),sortKey:en.sortKey,state:Fn,terrainData:Rt})}else De.push({segments:ot.segments,sortKey:0,state:Fn,terrainData:Rt})}ye&&De.sort((Ne,Be)=>Ne.sortKey-Be.sortKey);for(const Ne of De){const Be=Ne.state;if(V.activeTexture.set(J.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,J.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(V.activeTexture.set(J.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),Be.isSDF){const He=Be.uniformValues;Be.hasHalo&&(He.u_is_halo=1,Yh(Be.buffers,Ne.segments,o,y,Be.program,Ce,L,F,He,Ne.terrainData)),He.u_is_halo=0}Yh(Be.buffers,Ne.segments,o,y,Be.program,Ce,L,F,Be.uniformValues,Ne.terrainData)}}function Yh(y,n,o,h,m,_,b,A,C,P){const L=h.context;m.draw(L,L.gl.TRIANGLES,_,b,A,rr.disabled,C,P,o.id,y.layoutVertexBuffer,y.indexBuffer,n,o.paint,h.transform.zoom,y.programConfigurations.get(o.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function yl(y,n,o,h,m){if(!o||!h||!h.imageAtlas)return;const _=h.imageAtlas.patternPositions;let b=_[o.to.toString()],A=_[o.from.toString()];if(!b&&A&&(b=A),!A&&b&&(A=b),!b||!A){const C=m.getPaintProperty(n);b=_[C],A=_[C]}b&&A&&y.setConstantPatternPositions(b,A)}function Xh(y,n,o,h,m,_,b){const A=y.context.gl,C="fill-pattern",P=o.paint.get(C),L=P&&P.constantOr(1),F=o.getCrossfadeParameters();let V,J,Q,ne,K;b?(J=L&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=A.LINES):(J=L?"fillPattern":"fill",V=A.TRIANGLES);const fe=P.constantOr(null);for(const Se of h){const se=n.getTile(Se);if(L&&!se.patternsLoaded())continue;const ye=se.getBucket(o);if(!ye)continue;const Ce=ye.programConfigurations.get(o.id),Ee=y.useProgram(J,Ce),De=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Se);L&&(y.context.activeTexture.set(A.TEXTURE0),se.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Ce.updatePaintBuffers(F)),yl(Ce,C,fe,se,o);const Ne=De?Se:null,Be=y.translatePosMatrix(Ne?Ne.posMatrix:Se.posMatrix,se,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(b){ne=ye.indexBuffer2,K=ye.segments2;const He=[A.drawingBufferWidth,A.drawingBufferHeight];Q=J==="fillOutlinePattern"&&L?zh(Be,y,F,se,He):Ap(Be,He)}else ne=ye.indexBuffer,K=ye.segments,Q=L?tl(Be,y,F,se):Lh(Be);Ee.draw(y.context,V,m,y.stencilModeForClipping(Se),_,rr.disabled,Q,De,o.id,ye.layoutVertexBuffer,ne,K,o.paint,y.transform.zoom,Ce)}}function _l(y,n,o,h,m,_,b){const A=y.context,C=A.gl,P="fill-extrusion-pattern",L=o.paint.get(P),F=L.constantOr(1),V=o.getCrossfadeParameters(),J=o.paint.get("fill-extrusion-opacity"),Q=L.constantOr(null);for(const ne of h){const K=n.getTile(ne),fe=K.getBucket(o);if(!fe)continue;const Se=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ne),se=fe.programConfigurations.get(o.id),ye=y.useProgram(F?"fillExtrusionPattern":"fillExtrusion",se);F&&(y.context.activeTexture.set(C.TEXTURE0),K.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),se.updatePaintBuffers(V)),yl(se,P,Q,K,o);const Ce=y.translatePosMatrix(ne.posMatrix,K,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Ee=o.paint.get("fill-extrusion-vertical-gradient"),De=F?Ep(Ce,y,Ee,J,ne,V,K):so(Ce,y,Ee,J);ye.draw(A,A.gl.TRIANGLES,m,_,b,rr.backCCW,De,Se,o.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,o.paint,y.transform.zoom,se,y.style.map.terrain&&fe.centroidVertexBuffer)}}function vl(y,n,o,h,m,_,b){const A=y.context,C=A.gl,P=o.fbo;if(!P)return;const L=y.useProgram("hillshade"),F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(n);A.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,P.colorAttachment.get()),L.draw(A,C.TRIANGLES,m,_,b,rr.disabled,((V,J,Q,ne)=>{const K=Q.paint.get("hillshade-shadow-color"),fe=Q.paint.get("hillshade-highlight-color"),Se=Q.paint.get("hillshade-accent-color");let se=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=V.transform.angle);const ye=!V.options.moving;return{u_matrix:ne?ne.posMatrix:V.transform.calculatePosMatrix(J.tileID.toUnwrapped(),ye),u_image:0,u_latrange:Nh(0,J.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),se],u_shadow:K,u_highlight:fe,u_accent:Se}})(y,o,h,F?n:null),F,h.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function $u(y,n,o,h,m,_){const b=y.context,A=b.gl,C=n.dem;if(C&&C.data){const P=C.dim,L=C.stride,F=C.getPixels();if(b.activeTexture.set(A.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||y.getTileTexture(L),n.demTexture){const J=n.demTexture;J.update(F,{premultiply:!1}),J.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else n.demTexture=new Dt(b,F,A.RGBA,{premultiply:!1}),n.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);b.activeTexture.set(A.TEXTURE0);let V=n.fbo;if(!V){const J=new Dt(b,{width:P,height:P,data:null},A.RGBA);J.bind(A.LINEAR,A.CLAMP_TO_EDGE),V=n.fbo=b.createFramebuffer(P,P,!0,!1),V.colorAttachment.set(J.texture)}b.bindFramebuffer.set(V.framebuffer),b.viewport.set([0,0,P,P]),y.useProgram("hillshadePrepare").draw(b,A.TRIANGLES,h,m,_,rr.disabled,((J,Q)=>{const ne=Q.stride,K=c.F();return c.aN(K,0,c.W,-c.W,0,0,1),c.H(K,K,[0,-c.W,0]),{u_matrix:K,u_image:1,u_dimension:[ne,ne],u_zoom:J.overscaledZ,u_unpack:Q.getUnpackVector()}})(n.tileID,C),null,o.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Jh(y,n,o,h,m,_){const b=h.paint.get("raster-fade-duration");if(!_&&b>0){const A=R.now(),C=(A-y.timeAdded)/b,P=n?(A-n.timeAdded)/b:-1,L=o.getSource(),F=m.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),V=!n||Math.abs(n.tileID.overscaledZ-F)>Math.abs(y.tileID.overscaledZ-F),J=V&&y.refreshedUponExpiration?1:c.ac(V?C:1-P,0,1);return y.refreshedUponExpiration&&C>=1&&(y.refreshedUponExpiration=!1),n?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}const Qh=new c.aO(1,0,0,1),xl=new c.aO(0,1,0,1),Uu=new c.aO(0,0,1,1),Op=new c.aO(1,0,1,1),ed=new c.aO(0,1,1,1);function xr(y,n,o,h){Dn(y,0,n+o/2,y.transform.width,o,h)}function Pa(y,n,o,h){Dn(y,n-o/2,0,o,y.transform.height,h)}function Dn(y,n,o,h,m,_){const b=y.context,A=b.gl;A.enable(A.SCISSOR_TEST),A.scissor(n*y.pixelRatio,o*y.pixelRatio,h*y.pixelRatio,m*y.pixelRatio),b.clear({color:_}),A.disable(A.SCISSOR_TEST)}function Vu(y,n,o){const h=y.context,m=h.gl,_=o.posMatrix,b=y.useProgram("debug"),A=Ht.disabled,C=ur.disabled,P=y.colorModeForRenderPass(),L="$debug",F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(o);h.activeTexture.set(m.TEXTURE0);const V=n.getTileByID(o.key).latestRawTileData,J=Math.floor((V&&V.byteLength||0)/1024),Q=n.getTile(o).tileSize,ne=512/Math.min(Q,512)*(o.overscaledZ/y.transform.zoom)*.5;let K=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(K+=` => ${o.overscaledZ}`),function(fe,Se){fe.initDebugOverlayCanvas();const se=fe.debugOverlayCanvas,ye=fe.context.gl,Ce=fe.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,se.width,se.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(Se,5,5),Ce.strokeText(Se,5,5),fe.debugOverlayTexture.update(se),fe.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}(y,`${K} ${J}kB`),b.draw(h,m.TRIANGLES,A,C,$r.alphaBlended,rr.disabled,Bh(_,c.aO.transparent,ne),null,L,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),b.draw(h,m.LINE_STRIP,A,C,P,rr.disabled,Bh(_,c.aO.red),F,L,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function wl(y,n,o){const h=y.context,m=h.gl,_=y.colorModeForRenderPass(),b=new Ht(m.LEQUAL,Ht.ReadWrite,y.depthRangeFor3D),A=y.useProgram("terrain"),C=n.getTerrainMesh();h.bindFramebuffer.set(null),h.viewport.set([0,0,y.width,y.height]);for(const P of o){const L=y.renderToTexture.getTexture(P),F=n.getTerrainData(P.tileID);h.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,L.texture);const V={u_matrix:y.transform.calculatePosMatrix(P.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(y.transform.zoom)};A.draw(h,m.TRIANGLES,b,ur.disabled,_,rr.backCCW,V,F,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}class td{constructor(n,o){this.context=new Bp(n),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.F(),renderTime:0},this.setup(),this.numSublayers=yr.maxUnderzooming+yr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ta}resize(n,o,h){if(this.width=Math.floor(n*h),this.height=Math.floor(o*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const n=this.context,o=new c.aV;o.emplaceBack(0,0),o.emplaceBack(c.W,0),o.emplaceBack(0,c.W),o.emplaceBack(c.W,c.W),this.tileExtentBuffer=n.createVertexBuffer(o,Jo.members),this.tileExtentSegments=c.$.simpleSegment(0,0,4,2);const h=new c.aV;h.emplaceBack(0,0),h.emplaceBack(c.W,0),h.emplaceBack(0,c.W),h.emplaceBack(c.W,c.W),this.debugBuffer=n.createVertexBuffer(h,Jo.members),this.debugSegments=c.$.simpleSegment(0,0,4,5);const m=new c.Z;m.emplaceBack(0,0,0,0),m.emplaceBack(c.W,0,c.W,0),m.emplaceBack(0,c.W,0,c.W),m.emplaceBack(c.W,c.W,c.W,c.W),this.rasterBoundsBuffer=n.createVertexBuffer(m,$e.members),this.rasterBoundsSegments=c.$.simpleSegment(0,0,4,2);const _=new c.aV;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,Jo.members),this.viewportSegments=c.$.simpleSegment(0,0,4,2);const b=new c.aW;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(b);const A=new c.aX;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(A);const C=this.context.gl;this.stencilClearMode=new ur({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){const n=this.context,o=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=c.F();c.aN(h,0,this.width,this.height,0,0,1),c.J(h,h,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,o.TRIANGLES,Ht.disabled,this.stencilClearMode,$r.disabled,rr.disabled,rl(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,o){if(this.currentStencilSource===n.source||!n.isTileClipped()||!o||!o.length)return;this.currentStencilSource=n.source;const h=this.context,m=h.gl;this.nextStencilID+o.length>256&&this.clearStencil(),h.setColorMode($r.disabled),h.setDepthMode(Ht.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of o){const A=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(b);_.draw(h,m.TRIANGLES,Ht.disabled,new ur({func:m.ALWAYS,mask:0},A,255,m.KEEP,m.KEEP,m.REPLACE),$r.disabled,rr.disabled,rl(b.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,o=this.context.gl;return new ur({func:o.NOTEQUAL,mask:255},n,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(n){const o=this.context.gl;return new ur({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(n){const o=this.context.gl,h=n.sort((b,A)=>A.overscaledZ-b.overscaledZ),m=h[h.length-1].overscaledZ,_=h[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const b={};for(let A=0;A<_;A++)b[A+m]=new ur({func:o.GEQUAL,mask:255},A+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=_,[b,h]}return[{[m]:ur.disabled},h]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new $r([n.CONSTANT_COLOR,n.ONE],new c.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$r.unblended:$r.alphaBlended}depthModeForSublayer(n,o,h){if(!this.opaquePassEnabledForLayer())return Ht.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Ht(h||this.context.gl.LEQUAL,o,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,o){this.style=n,this.options=o,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(R.now()),this.imageManager.beginFrame();const h=this.style._order,m=this.style.sourceCaches,_={},b={},A={};for(const C in m){const P=m[C];P.used&&P.prepare(this.context),_[C]=P.getVisibleCoordinates(),b[C]=_[C].slice().reverse(),A[C]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<h.length;C++)if(this.style._layers[h[C]].is3D()){this.opaquePassCutoff=C;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const C=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.aY(this.terrainFacilitator.matrix,this.transform.projMatrix)||C.length)&&(c.aZ(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(P,L){const F=P.context,V=F.gl,J=$r.unblended,Q=new Ht(V.LEQUAL,Ht.ReadWrite,[0,1]),ne=L.getTerrainMesh(),K=L.sourceCache.getRenderableTiles(),fe=P.useProgram("terrainDepth");F.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),F.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),F.clear({color:c.aO.transparent,depth:1});for(const Se of K){const se=L.getTerrainData(Se.tileID),ye={u_matrix:P.transform.calculatePosMatrix(Se.tileID.toUnwrapped()),u_ele_delta:L.getMeshFrameDelta(P.transform.zoom)};fe.draw(F,V.TRIANGLES,Q,ur.disabled,J,rr.backCCW,ye,se,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments)}F.bindFramebuffer.set(null),F.viewport.set([0,0,P.width,P.height])}(this,this.style.map.terrain),function(P,L){const F=P.context,V=F.gl,J=$r.unblended,Q=new Ht(V.LEQUAL,Ht.ReadWrite,[0,1]),ne=L.getTerrainMesh(),K=L.getCoordsTexture(),fe=L.sourceCache.getRenderableTiles(),Se=P.useProgram("terrainCoords");F.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),F.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),F.clear({color:c.aO.transparent,depth:1}),L.coordsIndex=[];for(const se of fe){const ye=L.getTerrainData(se.tileID);F.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,K.texture);const Ce={u_matrix:P.transform.calculatePosMatrix(se.tileID.toUnwrapped()),u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(P.transform.zoom)};Se.draw(F,V.TRIANGLES,Q,ur.disabled,J,rr.backCCW,Ce,ye,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments),L.coordsIndex.push(se.tileID.key)}F.bindFramebuffer.set(null),F.viewport.set([0,0,P.width,P.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const C of h){const P=this.style._layers[C];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;const L=b[P.source];(P.type==="custom"||L.length)&&this.renderLayer(this,m[P.source],P,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?c.aO.black:c.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[h[this.currentLayer]],P=m[C.source],L=_[C.source];this._renderTileClippingMasks(C,L),this.renderLayer(this,P,C,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const C=this.style._layers[h[this.currentLayer]],P=m[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;const L=(C.type==="symbol"?A:b)[C.source];this._renderTileClippingMasks(C,_[C.source]),this.renderLayer(this,P,C,L)}if(this.options.showTileBoundaries){const C=function(P,L){let F=null;const V=Object.values(P._layers).flatMap(K=>K.source&&!K.isHidden(L)?[P.sourceCaches[K.source]]:[]),J=V.filter(K=>K.getSource().type==="vector"),Q=V.filter(K=>K.getSource().type!=="vector"),ne=K=>{(!F||F.getSource().maxzoom<K.getSource().maxzoom)&&(F=K)};return J.forEach(K=>ne(K)),F||Q.forEach(K=>ne(K)),F}(this.style,this.transform.zoom);C&&function(P,L,F){for(let V=0;V<F.length;V++)Vu(P,L,F[V])}(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const P=C.transform.padding;xr(C,C.transform.height-(P.top||0),3,Qh),xr(C,P.bottom||0,3,xl),Pa(C,P.left||0,3,Uu),Pa(C,C.transform.width-(P.right||0),3,Op);const L=C.transform.centerPoint;(function(F,V,J,Q){Dn(F,V-1,J-10,2,20,Q),Dn(F,V-10,J-1,20,2,Q)})(C,L.x,C.transform.height-L.y,ed)}(this),this.context.setDefault()}renderLayer(n,o,h,m){if(!h.isHidden(this.transform.zoom)&&(h.type==="background"||h.type==="custom"||(m||[]).length))switch(this.id=h.id,h.type){case"symbol":(function(_,b,A,C,P){if(_.renderPass!=="translucent")return;const L=ur.disabled,F=_.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(V,J,Q,ne,K,fe,Se){const se=J.transform,ye=K==="map",Ce=fe==="map";for(const Ee of V){const De=ne.getTile(Ee),Ne=De.getBucket(Q);if(!Ne||!Ne.text||!Ne.text.segments.get().length)continue;const Be=c.ag(Ne.textSizeData,se.zoom),He=St(De,1,J.transform.zoom),ot=Tt(Ee.posMatrix,Ce,ye,J.transform,He),vt=Q.layout.get("icon-text-fit")!=="none"&&Ne.hasIconData();if(Be){const Je=Math.pow(2,se.zoom-De.tileID.overscaledZ);pl(Ne,ye,Ce,Se,se,ot,Ee.posMatrix,Je,Be,vt,J.style.map.terrain?(yt,ut)=>J.style.map.terrain.getElevation(Ee,yt,ut):null)}}}(C,_,A,b,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),P),A.paint.get("icon-opacity").constantOr(1)!==0&&gl(_,b,A,C,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),L,F),A.paint.get("text-opacity").constantOr(1)!==0&&gl(_,b,A,C,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),L,F),b.map.showCollisionBoxes&&(fl(_,b,A,C,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),fl(_,b,A,C,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(n,o,h,m,this.style.placement.variableOffsets);break;case"circle":(function(_,b,A,C){if(_.renderPass!=="translucent")return;const P=A.paint.get("circle-opacity"),L=A.paint.get("circle-stroke-width"),F=A.paint.get("circle-stroke-opacity"),V=!A.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(L.constantOr(1)===0||F.constantOr(1)===0))return;const J=_.context,Q=J.gl,ne=_.depthModeForSublayer(0,Ht.ReadOnly),K=ur.disabled,fe=_.colorModeForRenderPass(),Se=[];for(let se=0;se<C.length;se++){const ye=C[se],Ce=b.getTile(ye),Ee=Ce.getBucket(A);if(!Ee)continue;const De=Ee.programConfigurations.get(A.id),Ne=_.useProgram("circle",De),Be=Ee.layoutVertexBuffer,He=Ee.indexBuffer,ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye),vt={programConfiguration:De,program:Ne,layoutVertexBuffer:Be,indexBuffer:He,uniformValues:Cp(_,ye,Ce,A),terrainData:ot};if(V){const Je=Ee.segments.get();for(const yt of Je)Se.push({segments:new c.$([yt]),sortKey:yt.sortKey,state:vt})}else Se.push({segments:Ee.segments,sortKey:0,state:vt})}V&&Se.sort((se,ye)=>se.sortKey-ye.sortKey);for(const se of Se){const{programConfiguration:ye,program:Ce,layoutVertexBuffer:Ee,indexBuffer:De,uniformValues:Ne,terrainData:Be}=se.state;Ce.draw(J,Q.TRIANGLES,ne,K,fe,rr.disabled,Ne,Be,A.id,Ee,De,se.segments,A.paint,_.transform.zoom,ye)}})(n,o,h,m);break;case"heatmap":(function(_,b,A,C){if(A.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const P=_.context,L=P.gl,F=ur.disabled,V=new $r([L.ONE,L.ONE],c.aO.transparent,[!0,!0,!0,!0]);(function(J,Q,ne){const K=J.gl;J.activeTexture.set(K.TEXTURE1),J.viewport.set([0,0,Q.width/4,Q.height/4]);let fe=ne.heatmapFbo;if(fe)K.bindTexture(K.TEXTURE_2D,fe.colorAttachment.get()),J.bindFramebuffer.set(fe.framebuffer);else{const Se=K.createTexture();K.bindTexture(K.TEXTURE_2D,Se),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),fe=ne.heatmapFbo=J.createFramebuffer(Q.width/4,Q.height/4,!1,!1),function(se,ye,Ce,Ee){var De,Ne;const Be=se.gl,He=(De=se.HALF_FLOAT)!==null&&De!==void 0?De:Be.UNSIGNED_BYTE,ot=(Ne=se.RGBA16F)!==null&&Ne!==void 0?Ne:Be.RGBA;Be.texImage2D(Be.TEXTURE_2D,0,ot,ye.width/4,ye.height/4,0,Be.RGBA,He,null),Ee.colorAttachment.set(Ce)}(J,Q,Se,fe)}})(P,_,A),P.clear({color:c.aO.transparent});for(let J=0;J<C.length;J++){const Q=C[J];if(b.hasRenderableParent(Q))continue;const ne=b.getTile(Q),K=ne.getBucket(A);if(!K)continue;const fe=K.programConfigurations.get(A.id),Se=_.useProgram("heatmap",fe),{zoom:se}=_.transform;Se.draw(P,L.TRIANGLES,Ht.disabled,F,V,rr.disabled,Oh(Q.posMatrix,ne,se,A.paint.get("heatmap-intensity")),null,A.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,A.paint,_.transform.zoom,fe)}P.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(P,L){const F=P.context,V=F.gl,J=L.heatmapFbo;if(!J)return;F.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,J.colorAttachment.get()),F.activeTexture.set(V.TEXTURE1);let Q=L.colorRampTexture;Q||(Q=L.colorRampTexture=new Dt(F,L.colorRamp,V.RGBA)),Q.bind(V.LINEAR,V.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(F,V.TRIANGLES,Ht.disabled,ur.disabled,P.colorModeForRenderPass(),rr.disabled,((ne,K,fe,Se)=>{const se=c.F();c.aN(se,0,ne.width,ne.height,0,0,1);const ye=ne.context.gl;return{u_matrix:se,u_world:[ye.drawingBufferWidth,ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:K.paint.get("heatmap-opacity")}})(P,L),null,L.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,L.paint,P.transform.zoom)}(_,A))})(n,o,h,m);break;case"line":(function(_,b,A,C){if(_.renderPass!=="translucent")return;const P=A.paint.get("line-opacity"),L=A.paint.get("line-width");if(P.constantOr(1)===0||L.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,Ht.ReadOnly),V=_.colorModeForRenderPass(),J=A.paint.get("line-dasharray"),Q=A.paint.get("line-pattern"),ne=Q.constantOr(1),K=A.paint.get("line-gradient"),fe=A.getCrossfadeParameters(),Se=ne?"linePattern":J?"lineSDF":K?"lineGradient":"line",se=_.context,ye=se.gl;let Ce=!0;for(const Ee of C){const De=b.getTile(Ee);if(ne&&!De.patternsLoaded())continue;const Ne=De.getBucket(A);if(!Ne)continue;const Be=Ne.programConfigurations.get(A.id),He=_.context.program.get(),ot=_.useProgram(Se,Be),vt=Ce||ot.program!==He,Je=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ee),yt=Q.constantOr(null);if(yt&&De.imageAtlas){const Bt=De.imageAtlas,Rt=Bt.patternPositions[yt.to.toString()],Ot=Bt.patternPositions[yt.from.toString()];Rt&&Ot&&Be.setConstantPatternPositions(Rt,Ot)}const ut=Je?Ee:null,hr=ne?Ua(_,De,A,fe,ut):J?il(_,De,A,J,fe,ut):K?$h(_,De,A,Ne.lineClipsArray.length,ut):nl(_,De,A,ut);if(ne)se.activeTexture.set(ye.TEXTURE0),De.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Be.updatePaintBuffers(fe);else if(J&&(vt||_.lineAtlas.dirty))se.activeTexture.set(ye.TEXTURE0),_.lineAtlas.bind(se);else if(K){const Bt=Ne.gradients[A.id];let Rt=Bt.texture;if(A.gradientVersion!==Bt.version){let Ot=256;if(A.stepInterpolant){const Vr=b.getSource().maxzoom,er=Ee.canonical.z===Vr?Math.ceil(1<<_.transform.maxZoom-Ee.canonical.z):1;Ot=c.ac(c.aT(Ne.maxLineLength/c.W*1024*er),256,se.maxTextureSize)}Bt.gradient=c.aU({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Ot,image:Bt.gradient||void 0,clips:Ne.lineClipsArray}),Bt.texture?Bt.texture.update(Bt.gradient):Bt.texture=new Dt(se,Bt.gradient,ye.RGBA),Bt.version=A.gradientVersion,Rt=Bt.texture}se.activeTexture.set(ye.TEXTURE0),Rt.bind(A.stepInterpolant?ye.NEAREST:ye.LINEAR,ye.CLAMP_TO_EDGE)}ot.draw(se,ye.TRIANGLES,F,_.stencilModeForClipping(Ee),V,rr.disabled,hr,Je,A.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,A.paint,_.transform.zoom,Be,Ne.layoutVertexBuffer2),Ce=!1}})(n,o,h,m);break;case"fill":(function(_,b,A,C){const P=A.paint.get("fill-color"),L=A.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),V=A.paint.get("fill-pattern"),J=_.opaquePassEnabledForLayer()&&!V.constantOr(1)&&P.constantOr(c.aO.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===J){const Q=_.depthModeForSublayer(1,_.renderPass==="opaque"?Ht.ReadWrite:Ht.ReadOnly);Xh(_,b,A,C,Q,F,!1)}if(_.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Q=_.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Ht.ReadOnly);Xh(_,b,A,C,Q,F,!0)}})(n,o,h,m);break;case"fill-extrusion":(function(_,b,A,C){const P=A.paint.get("fill-extrusion-opacity");if(P!==0&&_.renderPass==="translucent"){const L=new Ht(_.context.gl.LEQUAL,Ht.ReadWrite,_.depthRangeFor3D);if(P!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))_l(_,b,A,C,L,ur.disabled,$r.disabled),_l(_,b,A,C,L,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const F=_.colorModeForRenderPass();_l(_,b,A,C,L,ur.disabled,F)}}})(n,o,h,m);break;case"hillshade":(function(_,b,A,C){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const P=_.context,L=_.depthModeForSublayer(0,Ht.ReadOnly),F=_.colorModeForRenderPass(),[V,J]=_.renderPass==="translucent"?_.stencilConfigForOverlap(C):[{},C];for(const Q of J){const ne=b.getTile(Q);ne.needsHillshadePrepare!==void 0&&ne.needsHillshadePrepare&&_.renderPass==="offscreen"?$u(_,ne,A,L,ur.disabled,F):_.renderPass==="translucent"&&vl(_,Q,ne,A,L,V[Q.overscaledZ],F)}P.viewport.set([0,0,_.width,_.height])})(n,o,h,m);break;case"raster":(function(_,b,A,C){if(_.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!C.length)return;const P=_.context,L=P.gl,F=b.getSource(),V=_.useProgram("raster"),J=_.colorModeForRenderPass(),[Q,ne]=F instanceof Ve?[{},C]:_.stencilConfigForOverlap(C),K=ne[ne.length-1].overscaledZ,fe=!_.options.moving;for(const Se of ne){const se=_.depthModeForSublayer(Se.overscaledZ-K,A.paint.get("raster-opacity")===1?Ht.ReadWrite:Ht.ReadOnly,L.LESS),ye=b.getTile(Se);ye.registerFadeDuration(A.paint.get("raster-fade-duration"));const Ce=b.findLoadedParent(Se,0),Ee=Jh(ye,Ce,b,A,_.transform,_.style.map.terrain);let De,Ne;const Be=A.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;P.activeTexture.set(L.TEXTURE0),ye.texture.bind(Be,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(L.TEXTURE1),Ce?(Ce.texture.bind(Be,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Ce.tileID.overscaledZ-ye.tileID.overscaledZ),Ne=[ye.tileID.canonical.x*De%1,ye.tileID.canonical.y*De%1]):ye.texture.bind(Be,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Se),ot=He?Se:null,vt=ot?ot.posMatrix:_.transform.calculatePosMatrix(Se.toUnwrapped(),fe),Je=al(vt,Ne||[0,0],De||1,Ee,A);F instanceof Ve?V.draw(P,L.TRIANGLES,se,ur.disabled,J,rr.disabled,Je,He,A.id,F.boundsBuffer,_.quadTriangleIndexBuffer,F.boundsSegments):V.draw(P,L.TRIANGLES,se,Q[Se.overscaledZ],J,rr.disabled,Je,He,A.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(n,o,h,m);break;case"background":(function(_,b,A,C){const P=A.paint.get("background-color"),L=A.paint.get("background-opacity");if(L===0)return;const F=_.context,V=F.gl,J=_.transform,Q=J.tileSize,ne=A.paint.get("background-pattern");if(_.isPatternMissing(ne))return;const K=!ne&&P.a===1&&L===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==K)return;const fe=ur.disabled,Se=_.depthModeForSublayer(0,K==="opaque"?Ht.ReadWrite:Ht.ReadOnly),se=_.colorModeForRenderPass(),ye=_.useProgram(ne?"backgroundPattern":"background"),Ce=C||J.coveringTiles({tileSize:Q,terrain:_.style.map.terrain});ne&&(F.activeTexture.set(V.TEXTURE0),_.imageManager.bind(_.context));const Ee=A.getCrossfadeParameters();for(const De of Ce){const Ne=C?De.posMatrix:_.transform.calculatePosMatrix(De.toUnwrapped()),Be=ne?Ip(Ne,L,_,ne,{tileID:De,tileSize:Q},Ee):Tp(Ne,L,P),He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De);ye.draw(F,V.TRIANGLES,Se,fe,se,rr.disabled,Be,He,A.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(n,0,h,m);break;case"custom":(function(_,b,A){const C=_.context,P=A.implementation;if(_.renderPass==="offscreen"){const L=P.prerender;L&&(_.setCustomLayerDefaults(),C.setColorMode(_.colorModeForRenderPass()),L.call(P,C.gl,_.transform.customLayerMatrix()),C.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),C.setColorMode(_.colorModeForRenderPass()),C.setStencilMode(ur.disabled);const L=P.renderingMode==="3d"?new Ht(_.context.gl.LEQUAL,Ht.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Ht.ReadOnly);C.setDepthMode(L),P.render(C.gl,_.transform.customLayerMatrix()),C.setDirty(),_.setBaseState(),C.bindFramebuffer.set(null)}})(n,0,h)}}translatePosMatrix(n,o,h,m,_){if(!h[0]&&!h[1])return n;const b=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(b){const P=Math.sin(b),L=Math.cos(b);h=[h[0]*L-h[1]*P,h[0]*P+h[1]*L]}const A=[_?h[0]:St(o,h[0],this.transform.zoom),_?h[1]:St(o,h[1],this.transform.zoom),0],C=new Float32Array(16);return c.H(C,n,A),C}saveTileTexture(n){const o=this._tileTextures[n.size[0]];o?o.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const o=this._tileTextures[n];return o&&o.length>0?o.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const o=this.imageManager.getPattern(n.from.toString()),h=this.imageManager.getPattern(n.to.toString());return!o||!h}useProgram(n,o){this.cache=this.cache||{};const h=n+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new Ia(this.context,ao[n],o,Uh[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Dt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:o}=this.context.gl;return this.width!==n||this.height!==o}}class Ma{constructor(n,o){this.points=n,this.planes=o}static fromInvProjectionMatrix(n,o,h){const m=Math.pow(2,h),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const C=1/(A=c.af([],A,n))[3]/o*m;return c.a_(A,A,[C,C,1/A[3],C])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const C=function(V,J){var Q=J[0],ne=J[1],K=J[2],fe=Q*Q+ne*ne+K*K;return fe>0&&(fe=1/Math.sqrt(fe)),V[0]=J[0]*fe,V[1]=J[1]*fe,V[2]=J[2]*fe,V}([],function(V,J,Q){var ne=J[0],K=J[1],fe=J[2],Se=Q[0],se=Q[1],ye=Q[2];return V[0]=K*ye-fe*se,V[1]=fe*Se-ne*ye,V[2]=ne*se-K*Se,V}([],at([],_[A[0]],_[A[1]]),at([],_[A[2]],_[A[1]]))),P=-((L=C)[0]*(F=_[A[1]])[0]+L[1]*F[1]+L[2]*F[2]);var L,F;return C.concat(P)});return new Ma(_,b)}}class ka{constructor(n,o){this.min=n,this.max=o,this.center=function(h,m,_){return h[0]=.5*m[0],h[1]=.5*m[1],h[2]=.5*m[2],h}([],function(h,m,_){return h[0]=m[0]+_[0],h[1]=m[1]+_[1],h[2]=m[2]+_[2],h}([],this.min,this.max))}quadrant(n){const o=[n%2==0,n<2],h=Te(this.min),m=Te(this.max);for(let _=0;_<o.length;_++)h[_]=o[_]?this.min[_]:this.center[_],m[_]=o[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new ka(h,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let m=0;m<n.planes.length;m++){const _=n.planes[m];let b=0;for(let A=0;A<o.length;A++)c.a$(_,o[A])>=0&&b++;if(b===0)return 0;b!==o.length&&(h=!1)}if(h)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let A=0;A<n.points.length;A++){const C=n.points[A][m]-this.min[m];_=Math.min(_,C),b=Math.max(b,C)}if(b<0||_>this.max[m]-this.min[m])return 0}return 1}}class ws{constructor(n=0,o=0,h=0,m=0){if(isNaN(n)||n<0||isNaN(o)||o<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=o,this.left=h,this.right=m}interpolate(n,o,h){return o.top!=null&&n.top!=null&&(this.top=c.z.number(n.top,o.top,h)),o.bottom!=null&&n.bottom!=null&&(this.bottom=c.z.number(n.bottom,o.bottom,h)),o.left!=null&&n.left!=null&&(this.left=c.z.number(n.left,o.left,h)),o.right!=null&&n.right!=null&&(this.right=c.z.number(n.right,o.right,h)),this}getCenter(n,o){const h=c.ac((this.left+n-this.right)/2,0,n),m=c.ac((this.top+o-this.bottom)/2,0,o);return new c.P(h,m)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new ws(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class bl{constructor(n,o,h,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=n||0,this._maxZoom=o||22,this._minPitch=h??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ws,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new bl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const o=-c.b0(n,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=function(){var h=new c.A(4);return c.A!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,m,_){var b=m[0],A=m[1],C=m[2],P=m[3],L=Math.sin(_),F=Math.cos(_);h[0]=b*F+C*L,h[1]=A*F+P*L,h[2]=b*-L+C*F,h[3]=A*-L+P*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const o=c.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const o=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,o,h){this._unmodified=!1,this._edgeInsets.interpolate(n,o,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const o=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(n){const o=[new c.b1(0,n)];if(this._renderWorldCopies){const h=this.pointCoordinate(new c.P(0,0)),m=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),b=this.pointCoordinate(new c.P(0,this.height)),A=Math.floor(Math.min(h.x,m.x,_.x,b.x)),C=Math.floor(Math.max(h.x,m.x,_.x,b.x)),P=1;for(let L=A-P;L<=C+P;L++)L!==0&&o.push(new c.b1(L,n))}return o}coveringTiles(n){var o,h;let m=this.coveringZoomLevel(n);const _=m;if(n.minzoom!==void 0&&m<n.minzoom)return[];n.maxzoom!==void 0&&m>n.maxzoom&&(m=n.maxzoom);const b=this.pointCoordinate(this.getCameraPoint()),A=c.Y.fromLngLat(this.center),C=Math.pow(2,m),P=[C*b.x,C*b.y,0],L=[C*A.x,C*A.y,0],F=Ma.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let V=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(V=m);const J=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Q=se=>({aabb:new ka([se*C,0,0],[(se+1)*C,C,0]),zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),ne=[],K=[],fe=m,Se=n.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let se=1;se<=3;se++)ne.push(Q(-se)),ne.push(Q(se));for(ne.push(Q(0));ne.length>0;){const se=ne.pop(),ye=se.x,Ce=se.y;let Ee=se.fullyVisible;if(!Ee){const ot=se.aabb.intersects(F);if(ot===0)continue;Ee=ot===2}const De=n.terrain?P:L,Ne=se.aabb.distanceX(De),Be=se.aabb.distanceY(De),He=Math.max(Math.abs(Ne),Math.abs(Be));if(se.zoom===fe||He>J+(1<<fe-se.zoom)-2&&se.zoom>=V){const ot=fe-se.zoom,vt=P[0]-.5-(ye<<ot),Je=P[1]-.5-(Ce<<ot);K.push({tileID:new c.Q(se.zoom===fe?Se:se.zoom,se.wrap,se.zoom,ye,Ce),distanceSq:rt([L[0]-.5-ye,L[1]-.5-Ce]),tileDistanceToCamera:Math.sqrt(vt*vt+Je*Je)})}else for(let ot=0;ot<4;ot++){const vt=(ye<<1)+ot%2,Je=(Ce<<1)+(ot>>1),yt=se.zoom+1;let ut=se.aabb.quadrant(ot);if(n.terrain){const hr=new c.Q(yt,se.wrap,yt,vt,Je),Bt=n.terrain.getMinMaxElevation(hr),Rt=(o=Bt.minElevation)!==null&&o!==void 0?o:this.elevation,Ot=(h=Bt.maxElevation)!==null&&h!==void 0?h:this.elevation;ut=new ka([ut.min[0],ut.min[1],Rt],[ut.max[0],ut.max[1],Ot])}ne.push({aabb:ut,zoom:yt,x:vt,y:Je,wrap:se.wrap,fullyVisible:Ee})}}return K.sort((se,ye)=>se.distanceSq-ye.distanceSq).map(se=>se.tileID)}resize(n,o){this.width=n,this.height=o,this.pixelsToGLUnits=[2/n,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const o=c.ac(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.N(n.lng)*this.worldSize,c.O(o)*this.worldSize)}unproject(n){return new c.Y(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const o=this.pointLocation(this.centerPoint,n),h=n.getElevationForLngLatZoom(o,this.tileZoom);if(!(this.elevation-h))return;const m=this.getCameraPosition(),_=c.Y.fromLngLat(m.lngLat,m.altitude),b=c.Y.fromLngLat(o,h),A=_.x-b.x,C=_.y-b.y,P=_.z-b.z,L=Math.sqrt(A*A+C*C+P*P),F=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=h,this._center=o,this.zoom=F}setLocationAtPoint(n,o){const h=this.pointCoordinate(o),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),b=new c.Y(_.x-(h.x-m.x),_.y-(h.y-m.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,o){return o?this.coordinatePoint(this.locationCoordinate(n),o.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,o){return this.coordinateLocation(this.pointCoordinate(n,o))}locationCoordinate(n){return c.Y.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,o){if(o){const V=o.pointCoordinate(n);if(V!=null)return V}const h=[n.x,n.y,0,1],m=[n.x,n.y,1,1];c.af(h,h,this.pixelMatrixInverse),c.af(m,m,this.pixelMatrixInverse);const _=h[3],b=m[3],A=h[1]/_,C=m[1]/b,P=h[2]/_,L=m[2]/b,F=P===L?0:(0-P)/(L-P);return new c.Y(c.z.number(h[0]/_,m[0]/b,F)/this.worldSize,c.z.number(A,C,F)/this.worldSize)}coordinatePoint(n,o=0,h=this.pixelMatrix){const m=[n.x*this.worldSize,n.y*this.worldSize,o,1];return c.af(m,m,h),new c.P(m[0]/m[3],m[1]/m[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new gr().extend(this.pointLocation(new c.P(0,n))).extend(this.pointLocation(new c.P(this.width,n))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new gr([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,o=!1){const h=n.key,m=o?this._alignedPosMatrixCache:this._posMatrixCache;if(m[h])return m[h];const _=n.canonical,b=this.worldSize/this.zoomScale(_.z),A=_.x+Math.pow(2,_.z)*n.wrap,C=c.an(new Float64Array(16));return c.H(C,C,[A*b,_.y*b,0]),c.J(C,C,[b/c.W,b/c.W,1]),c.K(C,o?this.alignedProjMatrix:this.projMatrix,C),m[h]=new Float32Array(C),m[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,o,h,m,_=-90,b=90,A=-180,C=180;const P=this.size,L=this._unmodified;if(this.latRange){const J=this.latRange;_=c.O(J[1])*this.worldSize,b=c.O(J[0])*this.worldSize,n=b-_<P.y?P.y/(b-_):0}if(this.lngRange){const J=this.lngRange;A=c.b0(c.N(J[0])*this.worldSize,0,this.worldSize),C=c.b0(c.N(J[1])*this.worldSize,0,this.worldSize),C<A&&(C+=this.worldSize),o=C-A<P.x?P.x/(C-A):0}const F=this.point,V=Math.max(o||0,n||0);if(V)return this.center=this.unproject(new c.P(o?(C+A)/2:F.x,n?(b+_)/2:F.y)),this.zoom+=this.scaleZoom(V),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const J=F.y,Q=P.y/2;J-Q<_&&(m=_+Q),J+Q>b&&(m=b-Q)}if(this.lngRange){const J=(A+C)/2,Q=c.b0(F.x,J-this.worldSize/2,J+this.worldSize/2),ne=P.x/2;Q-ne<A&&(h=A+ne),Q+ne>C&&(h=C-ne)}h===void 0&&m===void 0||(this.center=this.unproject(new c.P(h!==void 0?h:F.x,m!==void 0?m:F.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,o=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b2(1,this.center.lat)*this.worldSize;let m=c.an(new Float64Array(16));c.J(m,m,[this.width/2,-this.height/2,1]),c.H(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=c.an(new Float64Array(16)),c.J(m,m,[1,-1,1]),c.H(m,m,[-1,-1,0]),c.J(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),b=Math.min(this.elevation,this.minElevationForCurrentTile),A=_-b*this._pixelPerMeter/Math.cos(this._pitch),C=b<0?A:_,P=Math.PI/2+this._pitch,L=this._fov*(.5+n.y/this.height),F=Math.sin(L)*C/Math.sin(c.ac(Math.PI-P-L,.01,Math.PI-.01)),V=this.getHorizon(),J=2*Math.atan(V/this.cameraToCenterDistance)*(.5+n.y/(2*V)),Q=Math.sin(J)*C/Math.sin(c.ac(Math.PI-P-J,.01,Math.PI-.01)),ne=Math.min(F,Q),K=1.01*(Math.cos(Math.PI/2-this._pitch)*ne+C),fe=this.height/50;m=new Float64Array(16),c.b3(m,this._fov,this.width/this.height,fe,K),m[8]=2*-n.x/this.width,m[9]=2*n.y/this.height,c.J(m,m,[1,-1,1]),c.H(m,m,[0,0,-this.cameraToCenterDistance]),c.b4(m,m,this._pitch),c.ad(m,m,this.angle),c.H(m,m,[-o,-h,0]),this.mercatorMatrix=c.J([],m,[this.worldSize,this.worldSize,this.worldSize]),c.J(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.K(new Float64Array(16),this.labelPlaneMatrix,m),c.H(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=c.ar([],m),this.pixelMatrix3D=c.K(new Float64Array(16),this.labelPlaneMatrix,m);const Se=this.width%2/2,se=this.height%2/2,ye=Math.cos(this.angle),Ce=Math.sin(this.angle),Ee=o-Math.round(o)+ye*Se+Ce*se,De=h-Math.round(h)+ye*se+Ce*Se,Ne=new Float64Array(m);if(c.H(Ne,Ne,[Ee>.5?Ee-1:Ee,De>.5?De-1:De,0]),this.alignedProjMatrix=Ne,m=c.ar(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.P(0,0)),o=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,n))}getCameraQueryGeometry(n){const o=this.getCameraPoint();if(n.length===1)return[n[0],o];{let h=o.x,m=o.y,_=o.x,b=o.y;for(const A of n)h=Math.min(h,A.x),m=Math.min(m,A.y),_=Math.max(_,A.x),b=Math.max(b,A.y);return[new c.P(h,m),new c.P(_,m),new c.P(_,b),new c.P(h,b),new c.P(h,m)]}}lngLatToCameraDepth(n,o){const h=this.locationCoordinate(n),m=[h.x*this.worldSize,h.y*this.worldSize,o,1];return c.af(m,m,this.projMatrix),m[2]/m[3]}}function ju(y,n){let o,h=!1,m=null,_=null;const b=()=>{m=null,h&&(y.apply(_,o),m=setTimeout(b,n),h=!1)};return(...A)=>(h=!0,_=this,o=A,m||b(),m)}class Zu{constructor(n){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(h=m)}),(h&&h[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}},this._updateHash=ju(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const o=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),b=Math.round(o.lng*_)/_,A=Math.round(o.lat*_)/_,C=this._map.getBearing(),P=this._map.getPitch();let L="";if(L+=n?`/${b}/${A}/${h}`:`${h}/${A}/${b}`,(C||P)&&(L+="/"+Math.round(10*C)/10),P&&(L+=`/${Math.round(P)}`),this._hashName){const F=this._hashName;let V=!1;const J=window.location.hash.slice(1).split("&").map(Q=>{const ne=Q.split("=")[0];return ne===F?(V=!0,`${ne}=${L}`):Q}).filter(Q=>Q);return V||J.push(`${F}=${L}`),`#${J.join("&")}`}return`#${L}`}}const po={linearity:.3,easing:c.b5(0,0,.3,1)},rd=c.e({deceleration:2500,maxSpeed:1400},po),Ha=c.e({deceleration:20,maxSpeed:1400},po),nd=c.e({deceleration:1e3,maxSpeed:360},po),id=c.e({deceleration:1e3,maxSpeed:90},po);class ad{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:R.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,o=R.now();for(;n.length>0&&o-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)o.zoom+=_.zoomDelta||0,o.bearing+=_.bearingDelta||0,o.pitch+=_.pitchDelta||0,_.panDelta&&o.pan._add(_.panDelta),_.around&&(o.around=_.around),_.pinchAround&&(o.pinchAround=_.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(o.pan.mag()){const _=go(o.pan.mag(),h,c.e({},rd,n||{}));m.offset=o.pan.mult(_.amount/o.pan.mag()),m.center=this._map.transform.center,mo(m,_)}if(o.zoom){const _=go(o.zoom,h,Ha);m.zoom=this._map.transform.zoom+_.amount,mo(m,_)}if(o.bearing){const _=go(o.bearing,h,nd);m.bearing=this._map.transform.bearing+c.ac(_.amount,-179,179),mo(m,_)}if(o.pitch){const _=go(o.pitch,h,id);m.pitch=this._map.transform.pitch+_.amount,mo(m,_)}if(m.zoom||m.bearing){const _=o.pinchAround===void 0?o.around:o.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(m,{noMoveStart:!0})}}function mo(y,n){(!y.duration||y.duration<n.duration)&&(y.duration=n.duration,y.easing=n.easing)}function go(y,n,o){const{maxSpeed:h,linearity:m,deceleration:_}=o,b=c.ac(y*m/(n/1e3),-h,h),A=Math.abs(b)/(_*m);return{easing:o.easing,duration:1e3*A,amount:b*(A/2)}}class Hn extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,o,h,m={}){const _=z.mousePos(o.getCanvas(),h),b=o.unproject(_);super(n,c.e({point:_,lngLat:b,originalEvent:h},m)),this._defaultPrevented=!1,this.target=o}}class bs extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,o,h){const m=n==="touchend"?h.changedTouches:h.touches,_=z.touchPos(o.getCanvasContainer(),m),b=_.map(C=>o.unproject(C)),A=_.reduce((C,P,L,F)=>C.add(P.div(F.length)),new c.P(0,0));super(n,{points:_,point:A,lngLats:b,lngLat:o.unproject(A),originalEvent:h}),this._defaultPrevented=!1}}class Ga extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,o,h){super(n,{originalEvent:h}),this._defaultPrevented=!1}}class sd{constructor(n,o){this._map=n,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Ga(n.type,this._map,n))}mousedown(n,o){return this._mousedownPos=o,this._firePreventable(new Hn(n.type,this._map,n))}mouseup(n){this._map.fire(new Hn(n.type,this._map,n))}click(n,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Hn(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Hn(n.type,this._map,n))}mouseover(n){this._map.fire(new Hn(n.type,this._map,n))}mouseout(n){this._map.fire(new Hn(n.type,this._map,n))}touchstart(n){return this._firePreventable(new bs(n.type,this._map,n))}touchmove(n){this._map.fire(new bs(n.type,this._map,n))}touchend(n){this._map.fire(new bs(n.type,this._map,n))}touchcancel(n){this._map.fire(new bs(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Di{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Hn(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Hn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Hn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gn{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(c.P.convert(n),this._map.terrain)}}class Hu{constructor(n,o){this._map=n,this._tr=new Gn(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,o){this.isEnabled()&&n.shiftKey&&n.button===0&&(z.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(n,o){if(!this._active)return;const h=o;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const _=Math.min(m.x,h.x),b=Math.max(m.x,h.x),A=Math.min(m.y,h.y),C=Math.max(m.y,h.y);z.setTransform(this._box,`translate(${_}px,${A}px)`),this._box.style.width=b-_+"px",this._box.style.height=C-A+"px"}mouseupWindow(n,o){if(!this._active||n.button!==0)return;const h=this._startPos,m=o;if(this.reset(),z.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:n})),{cameraAnimation:_=>_.fitScreenCoordinates(h,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,o){return this._map.fire(new c.k(n,{originalEvent:o}))}}function wi(y,n){if(y.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${n.length}`);const o={};for(let h=0;h<y.length;h++)o[y[h].identifier]=n[h];return o}class yo{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,o,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const _=new c.P(0,0);for(const b of m)_._add(b);return _.div(m.length)}(o),this.touches=wi(h,o)))}touchmove(n,o,h){if(this.aborted||!this.centroid)return;const m=wi(h,o);for(const _ in this.touches){const b=m[_];(!b||b.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(n,o,h){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Gu{constructor(n){this.singleTap=new yo(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,o,h){this.singleTap.touchstart(n,o,h)}touchmove(n,o,h){this.singleTap.touchmove(n,o,h)}touchend(n,o,h){const m=this.singleTap.touchend(n,o,h);if(m){const _=n.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(m)<30;if(_&&b||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Np{constructor(n){this._tr=new Gn(n),this._zoomIn=new Gu({numTouches:1,numTaps:2}),this._zoomOut=new Gu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,o,h){this._zoomIn.touchstart(n,o,h),this._zoomOut.touchstart(n,o,h)}touchmove(n,o,h){this._zoomIn.touchmove(n,o,h),this._zoomOut.touchmove(n,o,h)}touchend(n,o,h){const m=this._zoomIn.touchend(n,o,h),_=this._zoomOut.touchend(n,o,h),b=this._tr;return m?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(m)},{originalEvent:n})}):_?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(_)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _o{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const o=this._moveFunction(...n);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(n,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,o){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const m=o.length?o[0]:o;return!this._moved&&m.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(h,m))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&z.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const od={0:1,2:2};class qa{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const o=z.mouseButton(n);this._eventButton=o}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(o,h){const m=od[h];return o.buttons===void 0||(o.buttons&m)!==m}(n,this._eventButton)}isValidEndEvent(n){return z.mouseButton(n)===this._eventButton}}class ua{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const st=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(n){n.preventDefault()}},qu=({enable:y,clickTolerance:n,bearingDegreesPerPixelMoved:o=.8})=>{const h=new qa({checkCorrectEvent:m=>z.mouseButton(m)===0&&m.ctrlKey||z.mouseButton(m)===2});return new _o({clickTolerance:n,move:(m,_)=>({bearingDelta:(_.x-m.x)*o}),moveStateManager:h,enable:y,assignEvents:st})},Ss=({enable:y,clickTolerance:n,pitchDegreesPerPixelMoved:o=-.5})=>{const h=new qa({checkCorrectEvent:m=>z.mouseButton(m)===0&&m.ctrlKey||z.mouseButton(m)===2});return new _o({clickTolerance:n,move:(m,_)=>({pitchDelta:(_.y-m.y)*o}),moveStateManager:h,enable:y,assignEvents:st})};class vo{constructor(n,o){this._clickTolerance=n.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(n,o,h){return this._calculateTransform(n,o,h)}touchmove(n,o,h){if(this._active&&!(h.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,o,h)}touchend(n,o,h){this._calculateTransform(n,o,h),this._active&&h.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,o,h){h.length>0&&(this._active=!0);const m=wi(h,o),_=new c.P(0,0),b=new c.P(0,0);let A=0;for(const P in m){const L=m[P],F=this._touches[P];F&&(_._add(L),b._add(L.sub(F)),A++,m[P]=L)}if(this._touches=m,A<this.minTouchs()||!b.mag())return;const C=b.div(A);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(A),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,o,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([o[0],o[1]]))}touchmove(n,o,h){if(!this._firstTwoTouches)return;n.preventDefault();const[m,_]=this._firstTwoTouches,b=tt(h,o,m),A=tt(h,o,_);if(!b||!A)return;const C=this._aroundCenter?null:b.add(A).div(2);return this._move([b,A],C,n)}touchend(n,o,h){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,b=tt(h,o,m),A=tt(h,o,_);b&&A||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function tt(y,n,o){for(let h=0;h<y.length;h++)if(y[h].identifier===o)return n[h]}function El(y,n){return Math.log(y/n)/Math.LN2}class ld extends Sl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,o){const h=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(El(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:El(this._distance,h),pinchAround:o}}}function ud(y,n){return 180*y.angleWith(n)/Math.PI}class Al extends Sl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,o,h){const m=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ud(this._vector,m),pinchAround:o}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const o=25/(Math.PI*this._minDiameter)*360,h=ud(n,this._startVector);return Math.abs(h)<o}}function Cl(y){return Math.abs(y.y)>Math.abs(y.x)}class Wu extends Sl{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,o,h){super.touchstart(n,o,h),this._currentTouchCount=h.length}_start(n){this._lastPoints=n,Cl(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,o,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=n[0].sub(this._lastPoints[0]),_=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,h.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(n,o,h){if(this._valid!==void 0)return this._valid;const m=n.mag()>=2,_=o.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const b=n.y>0==o.y>0;return Cl(n)&&Cl(o)&&b}}const $p={panStep:100,bearingStep:15,pitchStep:10};class cd{constructor(n){this._tr=new Gn(n);const o=$p;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let o=0,h=0,m=0,_=0,b=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?h=-1:(n.preventDefault(),_=-1);break;case 39:n.shiftKey?h=1:(n.preventDefault(),_=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),b=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:A=>{const C=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Wa,zoom:o?Math.round(C.zoom)+o*(n.shiftKey?2:1):C.zoom,bearing:C.bearing+h*this._bearingStep,pitch:C.pitch+m*this._pitchStep,offset:[-_*this._panStep,-b*this._panStep],center:C.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wa(y){return y*(2-y)}const cr=4.000244140625;class xo{constructor(n,o){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=n,this._tr=new Gn(n),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let o=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const h=R.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,o!==0&&o%cr==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(m*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),n.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=n,this._delta-=o,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=z.mousePos(this._map.getCanvas(),n),h=this._tr;this._around=o.y>h.transform.height/2-h.transform.getHorizon()?c.M.convert(this._aroundCenter?h.center:h.unproject(o)):c.M.convert(h.center),this._aroundPoint=h.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>cr?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&C!==0&&(C=1/C);const P=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(P*C))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,h=this._startZoom,m=this._easing;let _,b=!1;if(this._type==="wheel"&&h&&m){const A=Math.min((R.now()-this._lastWheelEventTime)/200,1),C=m(A);_=c.z.number(h,o,C),A<1?this._frameId||(this._frameId=!0):b=!0}else _=o,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:_-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let o=c.b6;if(this._prevEase){const h=this._prevEase,m=(R.now()-h.start)/h.duration,_=h.easing(m+.01)-h.easing(m),b=.27/Math.sqrt(_*_+1e-4)*.01,A=Math.sqrt(.0729-b*b);o=c.b5(b,A,.25,1)}return this._prevEase={start:R.now(),duration:n,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Tl{constructor(n,o){this._clickZoom=n,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hd{constructor(n){this._tr=new Gn(n),this.reset()}reset(){this._active=!1}dblclick(n,o){return n.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dd{constructor(){this._tap=new Gu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,o,h){if(!this._swipePoint)if(this._tapTime){const m=o[0],_=n.timeStamp-this._tapTime<500,b=this._tapPoint.dist(m)<30;_&&b?h.length>0&&(this._swipePoint=m,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(n,o,h)}touchmove(n,o,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=o[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,o,h)}touchend(n,o,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const m=this._tap.touchend(n,o,h);m&&(this._tapTime=n.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ku{constructor(n,o,h){this._el=n,this._mousePan=o,this._touchPan=h}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fd{constructor(n,o,h){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=o,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Li{constructor(n,o,h,m){this._el=n,this._touchZoom=o,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class wo{constructor(n,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",n);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=o,this._container.appendChild(m);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=h,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(n){this._onCooperativeGesture(n.touches.length===1)}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey])}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ht=y=>y.zoom||y.drag||y.pitch||y.rotate;class xt extends c.k{}function Es(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Yu{constructor(n,o){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=m.type==="renderFrame"?void 0:m,A={needsRenderFrame:!1},C={},P={},L=m.touches,F=L?this._getMapTouches(L):void 0,V=F?z.touchPos(this._map.getCanvas(),F):z.mousePos(this._map.getCanvas(),m);for(const{handlerName:ne,handler:K,allowed:fe}of this._handlers){if(!K.isEnabled())continue;let Se;this._blockedByActive(P,fe,ne)?K.reset():K[_||m.type]&&(Se=K[_||m.type](m,V,F),this.mergeHandlerResult(A,C,Se,ne,b),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()),(Se||K.isActive())&&(P[ne]=K)}const J={};for(const ne in this._previousActiveHandlers)P[ne]||(J[ne]=b);this._previousActiveHandlers=P,(Object.keys(J).length||Es(A))&&(this._changes.push([A,C,J]),this._triggerRenderFrame()),(Object.keys(P).length||Es(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Q}=A;Q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Q(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ad(n),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,b]of this._listeners)z.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[n,o,h]of this._listeners)z.removeEventListener(n,o,n===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(n){const o=this._map,h=o.getCanvasContainer();this._add("mapEvent",new sd(o,n));const m=o.boxZoom=new Hu(o,n);this._add("boxZoom",m),n.interactive&&n.boxZoom&&m.enable();const _=o.cooperativeGestures=new wo(o,n.cooperativeGestures);this._add("cooperativeGestures",_),n.cooperativeGestures&&_.enable();const b=new Np(o),A=new hd(o);o.doubleClickZoom=new Tl(A,b),this._add("tapZoom",b),this._add("clickZoom",A),n.interactive&&n.doubleClickZoom&&o.doubleClickZoom.enable();const C=new dd;this._add("tapDragZoom",C);const P=o.touchPitch=new Wu(o);this._add("touchPitch",P),n.interactive&&n.touchPitch&&o.touchPitch.enable(n.touchPitch);const L=qu(n),F=Ss(n);o.dragRotate=new fd(n,L,F),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),n.interactive&&n.dragRotate&&o.dragRotate.enable();const V=(({enable:Se,clickTolerance:se})=>{const ye=new qa({checkCorrectEvent:Ce=>z.mouseButton(Ce)===0&&!Ce.ctrlKey});return new _o({clickTolerance:se,move:(Ce,Ee)=>({around:Ee,panDelta:Ee.sub(Ce)}),activateOnStart:!0,moveStateManager:ye,enable:Se,assignEvents:st})})(n),J=new vo(n,o);o.dragPan=new Ku(h,V,J),this._add("mousePan",V),this._add("touchPan",J,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&o.dragPan.enable(n.dragPan);const Q=new Al,ne=new ld;o.touchZoomRotate=new Li(h,ne,Q,C),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&o.touchZoomRotate.enable(n.touchZoomRotate);const K=o.scrollZoom=new xo(o,()=>this._triggerRenderFrame());this._add("scrollZoom",K,["mousePan"]),n.interactive&&n.scrollZoom&&o.scrollZoom.enable(n.scrollZoom);const fe=o.keyboard=new cd(o);this._add("keyboard",fe),n.interactive&&n.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new Di(o))}_add(n,o,h){this._handlers.push({handlerName:n,handler:o,allowed:h}),this._handlersById[n]=o}stop(n){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ht(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,o,h){for(const m in n)if(m!==h&&(!o||o.indexOf(m)<0))return!0;return!1}_getMapTouches(n){const o=[];for(const h of n)this._el.contains(h.target)&&o.push(h);return o}mergeHandlerResult(n,o,h,m,_){if(!h)return;c.e(n,h);const b={handlerName:m,originalEvent:h.originalEvent||_};h.zoomDelta!==void 0&&(o.zoom=b),h.panDelta!==void 0&&(o.drag=b),h.pitchDelta!==void 0&&(o.pitch=b),h.bearingDelta!==void 0&&(o.rotate=b)}_applyChanges(){const n={},o={},h={};for(const[m,_,b]of this._changes)m.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(m.panDelta)),m.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(n.around=m.around),m.pinchAround!==void 0&&(n.pinchAround=m.pinchAround),m.noInertia&&(n.noInertia=m.noInertia),c.e(o,_),c.e(h,b);this._updateMapTransform(n,o,h),this._changes=[]}_updateMapTransform(n,o,h){const m=this._map,_=m._getTransformForUpdate(),b=m.terrain;if(!(Es(n)||b&&this._terrainMovement))return this._fireEvents(o,h,!0);let{panDelta:A,zoomDelta:C,bearingDelta:P,pitchDelta:L,around:F,pinchAround:V}=n;V!==void 0&&(F=V),m._stop(!0),F=F||m.transform.centerPoint;const J=_.pointLocation(A?F.sub(A):F);P&&(_.bearing+=P),L&&(_.pitch+=L),C&&(_.zoom+=C),b?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(A)):_.setLocationAtPoint(J,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(J,F),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(J,F),m._applyUpdatedTransform(_),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(o,h,!0)}_fireEvents(n,o,h){const m=ht(this._eventsInProgress),_=ht(n),b={};for(const L in n){const{originalEvent:F}=n[L];this._eventsInProgress[L]||(b[`${L}start`]=F),this._eventsInProgress[L]=n[L]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const L in b)this._fireEvent(L,b[L]);_&&this._fireEvent("move",_.originalEvent);for(const L in n){const{originalEvent:F}=n[L];this._fireEvent(L,F)}const A={};let C;for(const L in this._eventsInProgress){const{handlerName:F,originalEvent:V}=this._eventsInProgress[L];this._handlersById[F].isActive()||(delete this._eventsInProgress[L],C=o[F]||V,A[`${L}end`]=C)}for(const L in A)this._fireEvent(L,A[L]);const P=ht(this._eventsInProgress);if(h&&(m||_)&&!P){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=V=>V!==0&&-this._bearingSnap<V&&V<this._bearingSnap;!L||!L.essential&&R.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:C})),F(this._map.getBearing())&&this._map.resetNorth()):(F(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(n,o){this._map.fire(new c.k(n,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new xt("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Xu extends c.E{constructor(n,o){super(),this._renderFrameCallback=()=>{const h=Math.min((R.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=o.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.M(this.transform.center.lng,this.transform.center.lat)}setCenter(n,o){return this.jumpTo({center:n},o)}panBy(n,o,h){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},o),h)}panTo(n,o,h){return this.easeTo(c.e({center:n},o),h)}getZoom(){return this.transform.zoom}setZoom(n,o){return this.jumpTo({zoom:n},o),this}zoomTo(n,o,h){return this.easeTo(c.e({zoom:n},o),h)}zoomIn(n,o){return this.zoomTo(this.getZoom()+1,n,o),this}zoomOut(n,o){return this.zoomTo(this.getZoom()-1,n,o),this}getBearing(){return this.transform.bearing}setBearing(n,o){return this.jumpTo({bearing:n},o),this}getPadding(){return this.transform.padding}setPadding(n,o){return this.jumpTo({padding:n},o),this}rotateTo(n,o,h){return this.easeTo(c.e({bearing:n},o),h)}resetNorth(n,o){return this.rotateTo(0,c.e({duration:1e3},n),o),this}resetNorthPitch(n,o){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},n),o),this}snapToNorth(n,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,o):this}getPitch(){return this.transform.pitch}setPitch(n,o){return this.jumpTo({pitch:n},o),this}cameraForBounds(n,o){n=gr.convert(n);const h=o&&o.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),h,o)}_cameraForBoxAndBearing(n,o,h,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ot=m.padding;m.padding={top:ot,bottom:ot,right:ot,left:ot}}m.padding=c.e(_,m.padding);const b=this.transform,A=b.padding,C=new gr(n,o),P=b.project(C.getNorthWest()),L=b.project(C.getNorthEast()),F=b.project(C.getSouthEast()),V=b.project(C.getSouthWest()),J=c.b7(-h),Q=P.rotate(J),ne=L.rotate(J),K=F.rotate(J),fe=V.rotate(J),Se=new c.P(Math.max(Q.x,ne.x,fe.x,K.x),Math.max(Q.y,ne.y,fe.y,K.y)),se=new c.P(Math.min(Q.x,ne.x,fe.x,K.x),Math.min(Q.y,ne.y,fe.y,K.y)),ye=Se.sub(se),Ce=(b.width-(A.left+A.right+m.padding.left+m.padding.right))/ye.x,Ee=(b.height-(A.top+A.bottom+m.padding.top+m.padding.bottom))/ye.y;if(Ee<0||Ce<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const De=Math.min(b.scaleZoom(b.scale*Math.min(Ce,Ee)),m.maxZoom),Ne=c.P.convert(m.offset),Be=new c.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(c.b7(h)),He=Ne.add(Be).mult(b.scale/b.zoomScale(De));return{center:b.unproject(P.add(F).div(2).sub(He)),zoom:De,bearing:h}}fitBounds(n,o,h){return this._fitInternal(this.cameraForBounds(n,o),o,h)}fitScreenCoordinates(n,o,h,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(n)),this.transform.pointLocation(c.P.convert(o)),h,m),m,_)}_fitInternal(n,o,h){return n?(delete(o=c.e(n,o)).padding,o.linear?this.easeTo(o,h):this.flyTo(o,h)):this}jumpTo(n,o){this.stop();const h=this._getTransformForUpdate();let m=!1,_=!1,b=!1;return"zoom"in n&&h.zoom!==+n.zoom&&(m=!0,h.zoom=+n.zoom),n.center!==void 0&&(h.center=c.M.convert(n.center)),"bearing"in n&&h.bearing!==+n.bearing&&(_=!0,h.bearing=+n.bearing),"pitch"in n&&h.pitch!==+n.pitch&&(b=!0,h.pitch=+n.pitch),n.padding==null||h.isPaddingEqual(n.padding)||(h.padding=n.padding),this._applyUpdatedTransform(h),this.fire(new c.k("movestart",o)).fire(new c.k("move",o)),m&&this.fire(new c.k("zoomstart",o)).fire(new c.k("zoom",o)).fire(new c.k("zoomend",o)),_&&this.fire(new c.k("rotatestart",o)).fire(new c.k("rotate",o)).fire(new c.k("rotateend",o)),b&&this.fire(new c.k("pitchstart",o)).fire(new c.k("pitch",o)).fire(new c.k("pitchend",o)),this.fire(new c.k("moveend",o))}calculateCameraOptionsFromTo(n,o,h,m=0){const _=c.Y.fromLngLat(n,o),b=c.Y.fromLngLat(h,m),A=b.x-_.x,C=b.y-_.y,P=b.z-_.z,L=Math.hypot(A,C,P);if(L===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(A,C),V=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),J=180*Math.atan2(A,-C)/Math.PI;let Q=180*Math.acos(F/L)/Math.PI;return Q=P<0?90-Q:90+Q,{center:b.toLngLat(),zoom:V,pitch:Q,bearing:J}}easeTo(n,o){this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.b6},n)).animate===!1||!n.essential&&R.prefersReducedMotion)&&(n.duration=0);const h=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),b=this.getPitch(),A=this.getPadding(),C="zoom"in n?+n.zoom:m,P="bearing"in n?this._normalizeBearing(n.bearing,_):_,L="pitch"in n?+n.pitch:b,F="padding"in n?n.padding:h.padding,V=c.P.convert(n.offset);let J=h.centerPoint.add(V);const Q=h.pointLocation(J),ne=c.M.convert(n.center||Q);this._normalizeCenter(ne);const K=h.project(Q),fe=h.project(ne).sub(K),Se=h.zoomScale(C-m);let se,ye;n.around&&(se=c.M.convert(n.around),ye=h.locationPoint(se));const Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||C!==m,this._rotating=this._rotating||_!==P,this._pitching=this._pitching||L!==b,this._padding=!h.isPaddingEqual(F),this._easeId=n.easeId,this._prepareEase(o,n.noMoveStart,Ce),this.terrain&&this._prepareElevation(ne),this._ease(Ee=>{if(this._zooming&&(h.zoom=c.z.number(m,C,Ee)),this._rotating&&(h.bearing=c.z.number(_,P,Ee)),this._pitching&&(h.pitch=c.z.number(b,L,Ee)),this._padding&&(h.interpolatePadding(A,F,Ee),J=h.centerPoint.add(V)),this.terrain&&!n.freezeElevation&&this._updateElevation(Ee),se)h.setLocationAtPoint(se,ye);else{const De=h.zoomScale(h.zoom-m),Ne=C>m?Math.min(2,Se):Math.max(.5,Se),Be=Math.pow(Ne,1-Ee),He=h.unproject(K.add(fe.mult(Ee*Be)).mult(De));h.setLocationAtPoint(h.renderWorldCopies?He.wrap():He,J)}this._applyUpdatedTransform(h),this._fireMoveEvents(o)},Ee=>{this.terrain&&this._finalizeElevation(),this._afterEase(o,Ee)},n),this}_prepareEase(n,o,h={}){this._moving=!0,o||h.moving||this.fire(new c.k("movestart",n)),this._zooming&&!h.zooming&&this.fire(new c.k("zoomstart",n)),this._rotating&&!h.rotating&&this.fire(new c.k("rotatestart",n)),this._pitching&&!h.pitching&&this.fire(new c.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&o!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(h-(o-(h*n+this._elevationStart))/(1-n)),this._elevationTarget=o}this.transform.elevation=c.z.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const o=n.clone(),{center:h,zoom:m,pitch:_,bearing:b,elevation:A}=this.transformCameraUpdate(o);h&&(o.center=h),m!==void 0&&(o.zoom=m),_!==void 0&&(o.pitch=_),b!==void 0&&(o.bearing=b),A!==void 0&&(o.elevation=A),this.transform.apply(o)}_fireMoveEvents(n){this.fire(new c.k("move",n)),this._zooming&&this.fire(new c.k("zoom",n)),this._rotating&&this.fire(new c.k("rotate",n)),this._pitching&&this.fire(new c.k("pitch",n))}_afterEase(n,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const h=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new c.k("zoomend",n)),m&&this.fire(new c.k("rotateend",n)),_&&this.fire(new c.k("pitchend",n)),this.fire(new c.k("moveend",n))}flyTo(n,o){if(!n.essential&&R.prefersReducedMotion){const ut=c.L(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ut,o)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b6},n);const h=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),b=this.getPitch(),A=this.getPadding(),C="zoom"in n?c.ac(+n.zoom,h.minZoom,h.maxZoom):m,P="bearing"in n?this._normalizeBearing(n.bearing,_):_,L="pitch"in n?+n.pitch:b,F="padding"in n?n.padding:h.padding,V=h.zoomScale(C-m),J=c.P.convert(n.offset);let Q=h.centerPoint.add(J);const ne=h.pointLocation(Q),K=c.M.convert(n.center||ne);this._normalizeCenter(K);const fe=h.project(ne),Se=h.project(K).sub(fe);let se=n.curve;const ye=Math.max(h.width,h.height),Ce=ye/V,Ee=Se.mag();if("minZoom"in n){const ut=c.ac(Math.min(n.minZoom,m,C),h.minZoom,h.maxZoom),hr=ye/h.zoomScale(ut-m);se=Math.sqrt(hr/Ee*2)}const De=se*se;function Ne(ut){const hr=(Ce*Ce-ye*ye+(ut?-1:1)*De*De*Ee*Ee)/(2*(ut?Ce:ye)*De*Ee);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Be(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function He(ut){return(Math.exp(ut)+Math.exp(-ut))/2}const ot=Ne(!1);let vt=function(ut){return He(ot)/He(ot+se*ut)},Je=function(ut){return ye*((He(ot)*(Be(hr=ot+se*ut)/He(hr))-Be(ot))/De)/Ee;var hr},yt=(Ne(!0)-ot)/se;if(Math.abs(Ee)<1e-6||!isFinite(yt)){if(Math.abs(ye-Ce)<1e-6)return this.easeTo(n,o);const ut=Ce<ye?-1:1;yt=Math.abs(Math.log(Ce/ye))/se,Je=function(){return 0},vt=function(hr){return Math.exp(ut*se*hr)}}return n.duration="duration"in n?+n.duration:1e3*yt/("screenSpeed"in n?+n.screenSpeed/se:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=_!==P,this._pitching=L!==b,this._padding=!h.isPaddingEqual(F),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(K),this._ease(ut=>{const hr=ut*yt,Bt=1/vt(hr);h.zoom=ut===1?C:m+h.scaleZoom(Bt),this._rotating&&(h.bearing=c.z.number(_,P,ut)),this._pitching&&(h.pitch=c.z.number(b,L,ut)),this._padding&&(h.interpolatePadding(A,F,ut),Q=h.centerPoint.add(J)),this.terrain&&!n.freezeElevation&&this._updateElevation(ut);const Rt=ut===1?K:h.unproject(fe.add(Se.mult(Je(hr))).mult(Bt));h.setLocationAtPoint(h.renderWorldCopies?Rt.wrap():Rt,Q),this._applyUpdatedTransform(h),this._fireMoveEvents(o)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(o)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,o)}if(!n){const h=this.handlers;h&&h.stop(!1)}return this}_ease(n,o,h){h.animate===!1||h.duration===0?(n(1),o()):(this._easeStart=R.now(),this._easeOptions=h,this._onEaseFrame=n,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,o){n=c.b0(n,-180,180);const h=Math.abs(n-o);return Math.abs(n-360-o)<h&&(n-=360),Math.abs(n+360-o)<h&&(n+=360),n}_normalizeCenter(n){const o=this.transform;if(!o.renderWorldCopies||o.lngRange)return;const h=n.lng-o.center.lng;n.lng+=h>180?-360:h<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(c.M.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Ln={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ju{constructor(n=Ln){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,o){const h=this._map._getUIString(`AttributionControl.${o}`);n.title=h,n.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const o=this._map.style.sourceCaches;for(const m in o){const _=o[m];if(_.used||_.usedForTerrain){const b=_.getSource();b.attribution&&n.indexOf(b.attribution)<0&&n.push(b.attribution)}}n=n.filter(m=>String(m).trim()),n.sort((m,_)=>m.length-_.length),n=n.filter((m,_)=>{for(let b=_+1;b<n.length;b++)if(n[b].indexOf(m)>=0)return!1;return!0});const h=n.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,n.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class zi{constructor(n={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const o=z.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Up{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const o=++this._id;return this._queue.push({callback:n,id:o,cancelled:!1}),o}remove(n){const o=this._currentlyRunning,h=o?this._queue.concat(o):this._queue;for(const m of h)if(m.id===n)return void(m.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const h of o)if(!h.cancelled&&(h.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var bo=c.X([{name:"a_pos3d",type:"Int16",components:3}]);class wr extends c.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,o){this.sourceCache.update(n,o),this._renderableTilesKeys=[];const h={};for(const m of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))h[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),c.aN(m.posMatrix,0,c.W,0,c.W,0,1),this._tiles[m.key]=new zr(m,this.tileSize));for(const m in this._tiles)h[m]||delete this._tiles[m]}freeRtt(n){for(const o in this._tiles){const h=this._tiles[o];(!n||h.tileID.equals(n)||h.tileID.isChildOf(n)||n.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const o={};for(const h of this._renderableTilesKeys){const m=this._tiles[h].tileID;if(m.canonical.equals(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16),c.aN(_.posMatrix,0,c.W,0,c.W,0,1),o[h]=_}else if(m.canonical.isChildOf(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const b=m.canonical.z-n.canonical.z,A=m.canonical.x-(m.canonical.x>>b<<b),C=m.canonical.y-(m.canonical.y>>b<<b),P=c.W>>b;c.aN(_.posMatrix,0,P,0,P,0,1),c.H(_.posMatrix,_.posMatrix,[-A*P,-C*P,0]),o[h]=_}else if(n.canonical.isChildOf(m.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const b=n.canonical.z-m.canonical.z,A=n.canonical.x-(n.canonical.x>>b<<b),C=n.canonical.y-(n.canonical.y>>b<<b),P=c.W>>b;c.aN(_.posMatrix,0,c.W,0,c.W,0,1),c.H(_.posMatrix,_.posMatrix,[A*P,C*P,0]),c.J(_.posMatrix,_.posMatrix,[1/2**b,1/2**b,0]),o[h]=_}}return o}getSourceTile(n,o){const h=this.sourceCache._source;let m=n.overscaledZ-this.deltaZoom;if(m>h.maxzoom&&(m=h.maxzoom),m<h.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!_||!_.dem)&&o)for(;m>=h.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(n.scaledTo(m--).key);return _}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(o=>o.timeAdded>=n)}}class Ur{constructor(n,o,h){this.painter=n,this.sourceCache=new wr(o),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,o,h,m=c.W){var _;if(!(o>=0&&o<m&&h>=0&&h<m))return 0;const b=this.getTerrainData(n),A=(_=b.tile)===null||_===void 0?void 0:_.dem;if(!A)return 0;const C=function(Q,ne,K){var fe=ne[0],Se=ne[1];return Q[0]=K[0]*fe+K[4]*Se+K[12],Q[1]=K[1]*fe+K[5]*Se+K[13],Q}([],[o/m*c.W,h/m*c.W],b.u_terrain_matrix),P=[C[0]*A.dim,C[1]*A.dim],L=Math.floor(P[0]),F=Math.floor(P[1]),V=P[0]-L,J=P[1]-F;return A.get(L,F)*(1-V)*(1-J)+A.get(L+1,F)*V*(1-J)+A.get(L,F+1)*(1-V)*J+A.get(L+1,F+1)*V*J}getElevationForLngLatZoom(n,o){const{tileID:h,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(n,o);return this.getElevation(h,m%c.W,_%c.W,c.W)}getElevation(n,o,h,m=c.W){return this.getDEMElevation(n,o,h,m)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const m=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Dt(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Dt(m,new c.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const o=this.sourceCache.getSourceTile(n,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const m=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new Dt(m,o.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),o.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const h=o&&o+o.tileID.key+n.key;if(h&&!this._demMatrixCache[h]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=n.canonical.z-o.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=m?_=n.canonical.z-m:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=n.canonical.x-(n.canonical.x>>_<<_),A=n.canonical.y-(n.canonical.y>>_<<_),C=c.b8(new Float64Array(16),[1/(c.W<<_),1/(c.W<<_),0]);c.H(C,C,[b*c.W,A*c.W,0]),this._demMatrixCache[n.key]={matrix:C,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(n){const o=this.painter,h=o.width/devicePixelRatio,m=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Dt(o.context,{width:h,height:m,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Dt(o.context,{width:h,height:m,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(h,m,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,m))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,b=0;_<this._coordsTextureSize;_++)for(let A=0;A<this._coordsTextureSize;A++,b+=4)o[b+0]=255&A,o[b+1]=255&_,o[b+2]=A>>8<<4|_>>8,o[b+3]=0;const h=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),m=new Dt(n,h,n.gl.RGBA,{premultiply:!1});return m.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(n){const o=new Uint8Array(4),h=this.painter.context,m=h.gl;h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null);const _=o[0]+(o[2]>>4<<8),b=o[1]+((15&o[2])<<8),A=this.coordsIndex[255-o[3]],C=A&&this.sourceCache.getTileByID(A);if(!C)return null;const P=this._coordsTextureSize,L=(1<<C.tileID.canonical.z)*P;return new c.Y((C.tileID.canonical.x*P+_)/L+C.tileID.wrap,(C.tileID.canonical.y*P+b)/L,this.getElevation(C.tileID,_,b,P))}depthAtPoint(n){const o=new Uint8Array(4),h=this.painter.context,m=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,o),h.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,o=new c.b9,h=new c.aX,m=this.meshSize,_=c.W/m,b=m*m;for(let F=0;F<=m;F++)for(let V=0;V<=m;V++)o.emplaceBack(V*_,F*_,0);for(let F=0;F<b;F+=m+1)for(let V=0;V<m;V++)h.emplaceBack(V+F,m+V+F+1,m+V+F+2),h.emplaceBack(V+F,m+V+F+2,V+F+1);const A=o.length,C=A+2*(m+1);for(const F of[0,1])for(let V=0;V<=m;V++)for(const J of[0,1])o.emplaceBack(V*_,F*c.W,J);for(let F=0;F<2*m;F+=2)h.emplaceBack(C+F,C+F+1,C+F+3),h.emplaceBack(C+F,C+F+3,C+F+2),h.emplaceBack(A+F,A+F+3,A+F+1),h.emplaceBack(A+F,A+F+2,A+F+3);const P=o.length,L=P+2*(m+1);for(const F of[0,1])for(let V=0;V<=m;V++)for(const J of[0,1])o.emplaceBack(F*c.W,V*_,J);for(let F=0;F<2*m;F+=2)h.emplaceBack(P+F,P+F+1,P+F+3),h.emplaceBack(P+F,P+F+3,P+F+2),h.emplaceBack(L+F,L+F+3,L+F+1),h.emplaceBack(L+F,L+F+2,L+F+3);return this._mesh={indexBuffer:n.createIndexBuffer(h),vertexBuffer:n.createVertexBuffer(o,bo.members),segments:c.$.simpleSegment(0,0,o.length,h.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*c.ba/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,o){var h;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(n,o);return(h=this.getMinMaxElevation(m).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(n){const o=this.getTerrainData(n).tile,h={minElevation:null,maxElevation:null};return o&&o.dem&&(h.minElevation=o.dem.min*this.exaggeration,h.maxElevation=o.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(n,o){const h=c.Y.fromLngLat(n.wrap()),m=(1<<o)*c.W,_=h.x*m,b=h.y*m,A=Math.floor(_/c.W),C=Math.floor(b/c.W);return{tileID:new c.Q(o,0,o,A,C),mercatorX:_,mercatorY:b}}}class pd{constructor(n,o,h){this._context=n,this._size=o,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new Dt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(h.texture),{id:n,fbo:o,texture:h,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>n.id!==o),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const Xi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Il{constructor(n,o){this.painter=n,this.terrain=o,this.pool=new pd(n.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(h=>!n._layers[h].isHidden(o)),this._coordsDescendingInv={};for(const h in n.sourceCaches){this._coordsDescendingInv[h]={};const m=n.sourceCaches[h].getVisibleCoordinates();for(const _ of m){const b=this.terrain.sourceCache.getTerrainCoords(_);for(const A in b)this._coordsDescendingInv[h][A]||(this._coordsDescendingInv[h][A]=[]),this._coordsDescendingInv[h][A].push(b[A])}}this._coordsDescendingInvStr={};for(const h of n._order){const m=n._layers[h],_=m.source;if(Xi[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const b in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][b]=this._coordsDescendingInv[_][b].map(A=>A.key).sort().join()}}for(const h of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][h.tileID.key];_&&_!==h.rttCoords[m]&&(h.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const o=n.type,h=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(Xi[o]&&(this._prevType&&Xi[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(n.id),!m))return!0;if(Xi[this._prevType]||Xi[o]&&m){this._prevType=o;const _=this._stacks.length-1,b=this._stacks[_]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(wl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[_]){const P=this.pool.getObjectForId(A.rtt[_].id);if(P.stamp===A.rtt[_].stamp){this.pool.useObject(P);continue}}const C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),A.rtt[_]={id:C.id,stamp:C.stamp},h.context.bindFramebuffer.set(C.fbo.framebuffer),h.context.clear({color:c.aO.transparent,stencil:0}),h.currentStencilSource=void 0;for(let P=0;P<b.length;P++){const L=h.style._layers[b[P]],F=L.source?this._coordsDescendingInv[L.source][A.tileID.key]:[A.tileID];h.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),h._renderTileClippingMasks(L,F),h.renderLayer(h,h.style.sourceCaches[L.source],L,F),L.source&&(A.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][A.tileID.key])}}return wl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Xi[o]}return!1}}const Qu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ec=S,tc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Ln,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},As=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},rc={showCompass:!0,showZoom:!0,visualizePitch:!1};class nc{constructor(n,o,h=!1){this.mousedown=b=>{this.startMouse(c.e({},b,{ctrlKey:!0,preventDefault:()=>b.preventDefault()}),z.mousePos(this.element,b)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.moveMouse(b,z.mousePos(this.element,b))},this.mouseup=b=>{this.mouseRotate.dragEnd(b),this.mousePitch&&this.mousePitch.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,b.targetTouches)[0],this.startTouch(b,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,b.targetTouches)[0],this.moveTouch(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=n.dragRotate._mouseRotate.getClickTolerance(),_=n.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=qu({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:b,clickTolerance:A,bearingDegreesPerPixelMoved:C=.8})=>{const P=new ua;return new _o({clickTolerance:A,move:(L,F)=>({bearingDelta:(F.x-L.x)*C}),moveStateManager:P,enable:b,assignEvents:As})})({clickTolerance:m,enable:!0}),this.map=n,h&&(this.mousePitch=Ss({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:b,clickTolerance:A,pitchDegreesPerPixelMoved:C=-.5})=>{const P=new ua;return new _o({clickTolerance:A,move:(L,F)=>({pitchDelta:(F.y-L.y)*C}),moveStateManager:P,enable:b,assignEvents:As})})({clickTolerance:_,enable:!0})),z.addEventListener(o,"mousedown",this.mousedown),z.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(o,"touchcancel",this.reset)}startMouse(n,o){this.mouseRotate.dragStart(n,o),this.mousePitch&&this.mousePitch.dragStart(n,o),z.disableDrag()}startTouch(n,o){this.touchRotate.dragStart(n,o),this.touchPitch&&this.touchPitch.dragStart(n,o),z.disableDrag()}moveMouse(n,o){const h=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(n,o)||{};if(m&&h.setBearing(h.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(n,o)||{};_&&h.setPitch(h.getPitch()+_)}}moveTouch(n,o){const h=this.map,{bearingDelta:m}=this.touchRotate.dragMove(n,o)||{};if(m&&h.setBearing(h.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(n,o)||{};_&&h.setPitch(h.getPitch()+_)}}off(){const n=this.element;z.removeEventListener(n,"mousedown",this.mousedown),z.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let ca;function Pl(y,n,o){if(y=new c.M(y.lng,y.lat),n){const h=new c.M(y.lng-360,y.lat),m=new c.M(y.lng+360,y.lat),_=o.locationPoint(y).distSqr(n);o.locationPoint(h).distSqr(n)<_?y=h:o.locationPoint(m).distSqr(n)<_&&(y=m)}for(;Math.abs(y.lng-o.center.lng)>180;){const h=o.locationPoint(y);if(h.x>=0&&h.y>=0&&h.x<=o.width&&h.y<=o.height)break;y.lng>o.center.lng?y.lng-=360:y.lng+=360}return y}const So={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ml(y,n,o){const h=y.classList;for(const m in So)h.remove(`maplibregl-${o}-anchor-${m}`);h.add(`maplibregl-${o}-anchor-${n}`)}class Eo extends c.E{constructor(n){if(super(),this._onKeyPress=o=>{const h=o.code,m=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=o=>{const h=o.originalEvent.target,m=this._element;this._popup&&(h===m||m.contains(h))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!h)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Pl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${So[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._updateOpacity(o&&o.type==="moveend")},this._onMove=o=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div"),this._element.setAttribute("aria-label","Map marker");const o=z.createNS("http://www.w3.org/2000/svg","svg"),h=41,m=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${h}px`),o.setAttributeNS(null,"width",`${m}px`),o.setAttributeNS(null,"viewBox",`0 0 ${m} ${h}`);const _=z.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const b=z.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const A=z.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const fe of C){const Se=z.createNS("http://www.w3.org/2000/svg","ellipse");Se.setAttributeNS(null,"opacity","0.04"),Se.setAttributeNS(null,"cx","10.5"),Se.setAttributeNS(null,"cy","5.80029008"),Se.setAttributeNS(null,"rx",fe.rx),Se.setAttributeNS(null,"ry",fe.ry),A.appendChild(Se)}const P=z.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);const L=z.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(L);const F=z.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const V=z.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(V);const J=z.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const Q=z.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ne=z.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#000000"),ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962");const K=z.createNS("http://www.w3.org/2000/svg","circle");K.setAttributeNS(null,"fill","#FFFFFF"),K.setAttributeNS(null,"cx","5.5"),K.setAttributeNS(null,"cy","5.5"),K.setAttributeNS(null,"r","5.4999962"),Q.appendChild(ne),Q.appendChild(K),b.appendChild(A),b.appendChild(P),b.appendChild(F),b.appendChild(J),b.appendChild(Q),o.appendChild(b),o.setAttributeNS(null,"height",h*this._scale+"px"),o.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(o),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),Ml(this._element,this._anchor,"marker"),n&&n.className)for(const o of n.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.M.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const m=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_updateOpacity(n=!1){if(!this._map.terrain)return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const o=this._map,h=o.terrain.depthAtPoint(this._pos),m=o.terrain.getElevationForLngLatZoom(this._lngLat,o.transform.tileZoom);if(o.transform.lngLatToCameraDepth(this._lngLat,m)-h<.006)return void(this._element.style.opacity=this._opacity);const _=-this._offset.y/o.transform._pixelPerMeter,b=Math.sin(o.getPitch()*Math.PI/180)*_,A=o.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),C=o.transform.lngLatToCameraDepth(this._lngLat,m+b);this._element.style.opacity=C-A>.006?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,o){return n===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const ic={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ka=0,Ya=!1;const ac={maxWidth:100,unit:"metric"};function Ao(y,n,o){const h=o&&o.maxWidth||100,m=y._container.clientHeight/2,_=y.unproject([0,m]),b=y.unproject([h,m]),A=_.distanceTo(b);if(o&&o.unit==="imperial"){const C=3.2808*A;C>5280?Xa(n,h,C/5280,y._getUIString("ScaleControl.Miles")):Xa(n,h,C,y._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Xa(n,h,A/1852,y._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Xa(n,h,A/1e3,y._getUIString("ScaleControl.Kilometers")):Xa(n,h,A,y._getUIString("ScaleControl.Meters"))}function Xa(y,n,o,h){const m=function(_){const b=Math.pow(10,`${Math.floor(_)}`.length-1);let A=_/b;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(C){const P=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*P)/P}(A),b*A}(o);y.style.width=n*(m/o)+"px",y.innerHTML=`${m}&nbsp;${h}`}const sc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},oc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kl(y){if(y){if(typeof y=="number"){const n=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-y),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const n=c.P.convert(y);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return kl(new c.P(0,0))}const lc=S;p.AJAXError=c.bd,p.Evented=c.E,p.LngLat=c.M,p.MercatorCoordinate=c.Y,p.Point=c.P,p.addProtocol=c.be,p.config=c.a,p.removeProtocol=c.bf,p.AttributionControl=Ju,p.BoxZoomHandler=Hu,p.CanvasSource=_t,p.CooperativeGesturesHandler=wo,p.DoubleClickZoomHandler=Tl,p.DragPanHandler=Ku,p.DragRotateHandler=fd,p.EdgeInsets=ws,p.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=ve,p.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const o=new c.M(n.coords.longitude,n.coords.latitude),h=n.coords.accuracy,m=this._map.getBearing(),_=c.e({bearing:m},this.options.fitBoundsOptions),b=gr.fromLngLat(o,h);this._map.fitBounds(b,_,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const o=new c.M(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Ya)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Eo({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Eo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},ic,y)}onAdd(y){return this._map=y,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(n=!1){return c._(this,void 0,void 0,function*(){if(ca!==void 0&&!n)return ca;if(window.navigator.permissions===void 0)return ca=!!window.navigator.geolocation,ca;try{ca=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ca=!!window.navigator.geolocation}return ca})}().then(n=>this._setupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ka=0,Ya=!1}_isOutOfMapMaxBounds(y){const n=this._map.getMaxBounds(),o=y.coords;return n&&(o.longitude<n.getWest()||o.longitude>n.getEast()||o.latitude<n.getSouth()||o.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),n=y.getSouthEast(),o=y.getNorthEast(),h=n.distanceTo(o),m=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ka--,Ya=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ka++,Ka>1?(y={maximumAge:6e5,timeout:0},Ya=!0):(y=this.options.positionOptions,Ya=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.Hash=Zu,p.ImageSource=Ve,p.KeyboardHandler=cd,p.LngLatBounds=gr,p.LogoControl=zi,p.Map=class extends Xu{constructor(y){if(c.bb.mark(c.bc.create),(y=c.e({},tc,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new bl(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=n=>{n.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:n}))},this._contextRestored=n=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:n}))},this._onMapScroll=n=>{if(n.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Up,this._controls=[],this._mapId=c.a3(),this._locale=c.e({},Qu,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new be(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let n=!1;const o=ju(h=>{this._trackResize&&!this._removed&&this.resize(h)._update()},50);this._resizeObserver=new ResizeObserver(h=>{n?o(h):n=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Yu(this,y),this._hash=y.hash&&new Zu(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ju(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new zi,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",n=>{this._update(n.dataType==="style"),this.fire(new c.k(`${n.dataType}data`,n))}),this.on("dataloading",n=>{this.fire(new c.k(`${n.dataType}dataloading`,n))}),this.on("dataabort",n=>{this.fire(new c.k("sourcedataabort",n))})}_getMapId(){return this._mapId}addControl(y,n){if(n===void 0&&(n=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=y.onAdd(this);this._controls.push(y);const h=this._controlPositions[n];return n.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(y);return n>-1&&this._controls.splice(n,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,n,o,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,n,o,h)}resize(y){var n;const o=this._containerDimensions(),h=o[0],m=o[1],_=this._getClampedPixelRatio(h,m);if(this._resizeCanvas(h,m,_),this.painter.resize(h,m,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const C=this._getClampedPixelRatio(h,m);this._resizeCanvas(h,m,C),this.painter.resize(h,m,C)}this.transform.resize(h,m),(n=this._requestedCameraState)===null||n===void 0||n.resize(h,m);const b=!this._moving;return b&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),b&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,n){const{0:o,1:h}=this._maxCanvasSize,m=this.getPixelRatio(),_=y*m,b=n*m;return Math.min(_>o?o/_:1,b>h?h/b:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(gr.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(c.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,n,o){if(y==="mouseenter"||y==="mouseover"){let h=!1;return{layer:n,listener:o,delegates:{mousemove:_=>{const b=this.getLayer(n)?this.queryRenderedFeatures(_.point,{layers:[n]}):[];b.length?h||(h=!0,o.call(this,new Hn(y,this,_.originalEvent,{features:b}))):h=!1},mouseout:()=>{h=!1}}}}if(y==="mouseleave"||y==="mouseout"){let h=!1;return{layer:n,listener:o,delegates:{mousemove:b=>{(this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[]).length?h=!0:h&&(h=!1,o.call(this,new Hn(y,this,b.originalEvent)))},mouseout:b=>{h&&(h=!1,o.call(this,new Hn(y,this,b.originalEvent)))}}}}{const h=m=>{const _=this.getLayer(n)?this.queryRenderedFeatures(m.point,{layers:[n]}):[];_.length&&(m.features=_,o.call(this,m),delete m.features)};return{layer:n,listener:o,delegates:{[y]:h}}}}on(y,n,o){if(o===void 0)return super.on(y,n);const h=this._createDelegatedListener(y,n,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(h);for(const m in h.delegates)this.on(m,h.delegates[m]);return this}once(y,n,o){if(o===void 0)return super.once(y,n);const h=this._createDelegatedListener(y,n,o);for(const m in h.delegates)this.once(m,h.delegates[m]);return this}off(y,n,o){return o===void 0?super.off(y,n):(this._delegatedListeners&&this._delegatedListeners[y]&&(h=>{const m=this._delegatedListeners[y];for(let _=0;_<m.length;_++){const b=m[_];if(b.layer===n&&b.listener===o){for(const A in b.delegates)this.off(A,b.delegates[A]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,n){if(!this.style)return[];let o;const h=y instanceof c.P||Array.isArray(y),m=h?y:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(h?{}:y)||{},m instanceof c.P||typeof m[0]=="number")o=[c.P.convert(m)];else{const _=c.P.convert(m[0]),b=c.P.convert(m[1]);o=[_,new c.P(b.x,_.y),b,new c.P(_.x,b.y),_]}return this.style.queryRenderedFeatures(o,n,this.transform)}querySourceFeatures(y,n){return this.style.querySourceFeatures(y,n)}setStyle(y,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(y,n))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const n=this._locale[y];if(n==null)throw new Error(`Missing UI string '${y}'`);return n}_updateStyle(y,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,n));const o=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new ni(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,n,o):this.style.loadJSON(y,n,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ni(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,n){if(typeof y=="string"){const o=this._requestManager.transformRequest(y,re.Style);c.h(o,new AbortController).then(h=>{this._updateDiff(h.data,n)}).catch(h=>{h&&this.fire(new c.j(h))})}else typeof y=="object"&&this._updateDiff(y,n)}_updateDiff(y,n){try{this.style.setState(y,n)&&this._update(!0)}catch(o){c.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(y,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,n){return this._lazyInitEmptyStyle(),this.style.addSource(y,n),this._update(!0)}isSourceLoaded(y){const n=this.style&&this.style.sourceCaches[y];if(n!==void 0)return n.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const n=this.style.sourceCaches[y.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&n.reload();for(const o in this.style._layers){const h=this.style._layers[o];h.type==="hillshade"&&h.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ur(this.painter,n,y),this.painter.renderToTexture=new Il(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,n;return(n=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const n in y){const o=y[n]._tiles;for(const h in o){const m=o[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,n,o={}){const{pixelRatio:h=1,sdf:m=!1,stretchX:_,stretchY:b,content:A}=o;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:C,height:P,data:L}=n,F=n;return this.style.addImage(y,{data:new c.R({width:C,height:P},new Uint8Array(L)),pixelRatio:h,stretchX:_,stretchY:b,content:A,sdf:m,version:0,userImage:F}),F.onAdd&&F.onAdd(this,y),this}}{const{width:C,height:P,data:L}=R.getImageData(n);this.style.addImage(y,{data:new c.R({width:C,height:P},L),pixelRatio:h,stretchX:_,stretchY:b,content:A,sdf:m,version:0})}}updateImage(y,n){const o=this.style.getImage(y);if(!o)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=n instanceof HTMLImageElement||c.b(n)?R.getImageData(n):n,{width:m,height:_,data:b}=h;if(m===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==o.data.width||_!==o.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(n instanceof HTMLImageElement||c.b(n));return o.data.replace(b,A),this.style.updateImage(y,o),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return H.getImage(this._requestManager.transformRequest(y,re.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,n){return this._lazyInitEmptyStyle(),this.style.addLayer(y,n),this._update(!0)}moveLayer(y,n){return this.style.moveLayer(y,n),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,n,o){return this.style.setLayerZoomRange(y,n,o),this._update(!0)}setFilter(y,n,o={}){return this.style.setFilter(y,n,o),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,n,o,h={}){return this.style.setPaintProperty(y,n,o,h),this._update(!0)}getPaintProperty(y,n){return this.style.getPaintProperty(y,n)}setLayoutProperty(y,n,o,h={}){return this.style.setLayoutProperty(y,n,o,h),this._update(!0)}getLayoutProperty(y,n){return this.style.getLayoutProperty(y,n)}setGlyphs(y,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,n,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,n,o,h=>{h||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,n,o=>{o||this._update(!0)}),this}setLight(y,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,n){return this.style.setFeatureState(y,n),this._update()}removeFeatureState(y,n){return this.style.removeFeatureState(y,n),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,n=0;return this._container&&(y=this._container.clientWidth||400,n=this._container.clientHeight||300),[y,n]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const n=this._canvasContainer=z.create("div","maplibregl-canvas-container",y);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),h=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],h);const m=this._controlContainer=z.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=z.create("div",`maplibregl-ctrl-${b} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,n,o){this._canvas.width=Math.floor(o*y),this._canvas.height=Math.floor(o*n),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{n={requestedAttributes:y},h&&(n.statusMessage=h.statusMessage,n.type=h.type)},{once:!0});const o=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!o){const h="Failed to initialize WebGL";throw n?(n.message=h,new Error(JSON.stringify(n))):new Error(h)}this.painter=new td(o,this.transform),ue.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=R.now();this.style.zoomHistory.update(m,_);const b=new c.a8(m,{now:_,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=b.crossFadingFactor();A===1&&A===this._crossFadingFactor||(o=!0,this._crossFadingFactor=A),this.style.update(b)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bb.mark(c.bc.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,c.bb.mark(c.bc.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bb.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then(y=>{c.bb.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return ec}getCameraTargetElevation(){return this.transform.elevation}},p.MapMouseEvent=Hn,p.MapTouchEvent=bs,p.MapWheelEvent=Ga,p.Marker=Eo,p.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const n=this._map.getZoom(),o=n===this._map.getMaxZoom(),h=n===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,o)=>{const h=this._map._getUIString(`NavigationControl.${o}`);n.title=h,n.setAttribute("aria-label",h)},this.options=c.e({},rc,y),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,n){const o=z.create("button",y,this._container);return o.type="button",o.addEventListener("click",n),o}},p.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const b of this.options.className.split(" "))this._container.classList.add(b);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pl(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!n)return;const o=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);let h=this.options.anchor;const m=kl(this.options.offset);if(!h){const b=this._container.offsetWidth,A=this._container.offsetHeight;let C;C=o.y+m.bottom.y<A?["top"]:o.y>this._map.transform.height-A?["bottom"]:[],o.x<b/2?C.push("left"):o.x>this._map.transform.width-b/2&&C.push("right"),h=C.length===0?"bottom":C.join("-")}const _=o.add(m[h]).round();z.setTransform(this._container,`${So[h]} translate(${_.x}px,${_.y}px)`),Ml(this._container,h,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(sc),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.M.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const n=document.createDocumentFragment(),o=document.createElement("body");let h;for(o.innerHTML=y;h=o.firstChild,h;)n.appendChild(h);return this.setDOMContent(n)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(oc);y&&y.focus()}},p.RasterDEMTileSource=de,p.RasterTileSource=oe,p.ScaleControl=class{constructor(y){this._onMove=()=>{Ao(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Ao(this._map,this._container,this.options)},this.options=c.e({},ac,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=xo,p.Style=ni,p.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=Wu,p.TwoFingersTouchRotateHandler=Al,p.TwoFingersTouchZoomHandler=ld,p.TwoFingersTouchZoomRotateHandler=Li,p.VectorTileSource=Ie,p.VideoSource=qe,p.addSourceType=(y,n)=>c._(void 0,void 0,void 0,function*(){if($t(y))throw new Error(`A source type called "${y}" already exists.`);((o,h)=>{kt[o]=h})(y,n)}),p.clearPrewarmedResources=function(){const y=Rr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Pt),Rr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return je().getRTLTextPluginStatus()},p.getVersion=function(){return lc},p.getWorkerCount=function(){return Nt.workerCount},p.getWorkerUrl=function(){return c.a.WORKER_URL},p.importScriptInWorkers=function(y){return ri().broadcast("importScript",y)},p.prewarm=function(){Mn().acquire(Pt)},p.setMaxParallelImageRequests=function(y){c.a.MAX_PARALLEL_IMAGE_REQUESTS=y},p.setRTLTextPlugin=function(y,n){return je().setRTLTextPlugin(y,n)},p.setWorkerCount=function(y){Nt.workerCount=y},p.setWorkerUrl=function(y){c.a.WORKER_URL=y}});var g=s;return g})})($S);var VS=$S.exports;const jS=s0(VS),Zk=Vw({__proto__:null,default:jS},[VS]),Hk="https://api.maptiler.com/maps/streets/style.json?key=ZFtcxc8UpIJArb56xQlZ";function Gk({location:e}){const[t,s]=Ae.useState({latitude:e.lat,longitude:e.lng,zoom:14,bearing:0,pitch:0});return Y.jsx(Vk,{...t,width:"100%",height:"100%",mapStyle:Hk,mapLib:jS,onViewportChange:u=>s(u),children:Y.jsx(jk,{longitude:e.lng,latitude:e.lat,color:"red"})})}function qk(){const[e,t]=Ae.useState(""),[s,u]=Ae.useState(""),[d,g]=Ae.useState(""),[p,c]=Ae.useState(""),[S,I]=Ae.useState(!1),[k,R]=Ae.useState(!1),[z,ue]=Ae.useState(null),[ie,q]=Ae.useState(""),[ae,G]=Ae.useState([]),[N,H]=Ae.useState(!1),[re,be]=Ae.useState(!1),Pe=Ae.useRef(null),Te=Ae.useRef(null),Oe=Ae.useRef(null),at=[{title:"Suspicious Activity Detected",carID:"CAR123",description:"Unauthorized access attempt detected.",owner:{name:"John Doe",phoneNumber:"+20123456789",address:"123 Main St, Cairo"},plateNumber:"123",letters:["ا","ب","ج"],location:{lat:30.0444,lng:31.2357}},{title:"Warning: Blocked Vehicle",carID:"CAR456",description:"This vehicle has been blocked due to illegal parking.",owner:{name:"Jane Doe",phoneNumber:"+20234567890",address:"456 Elm St, Cairo"},plateNumber:"456",letters:["د","ه","و"],location:{lat:29.9765,lng:31.1313}}],rt=[{id:1,type:"accident",location:"Nasr City",time:"2024-07-01 14:00",status:"solved"},{id:2,type:"breakdown",location:"Maadi",time:"2024-07-02 10:30",status:"pending"},{id:3,type:"false alarm",location:"Zamalek",time:"2024-07-03 09:15",status:"false alarm"}];Ae.useEffect(()=>{Pe.current.focus()},[]),Ae.useEffect(()=>{re&&(Et(),be(!1))},[re,e,s,d,p]);const Et=()=>{const Pt=at.find(Nt=>Nt.plateNumber===e&&Nt.letters[0]===s&&Nt.letters[1]===d&&Nt.letters[2]===p);Pt?(ue(Pt),q("")):(ue(null),q("There is no car with this plate connected to our system. Please make sure that the plate numbers and letters are correct."))},Dt=()=>{I(!1)},Gt=()=>{ue(Pt=>({...Pt,status:Pt.status==="blocked"?"active":"blocked"}))},nr=()=>{I(!0)},or=Pt=>{const Nt=Pt.target.value;u(Nt),Nt&&Nt.length===1&&Te.current.focus()},ir=Pt=>{const Nt=Pt.target.value;g(Nt),Nt?Nt.length===1&&Oe.current.focus():Pe.current.focus()},xn=Pt=>{const Nt=Pt.target.value;c(Nt),Nt||Te.current.focus()},et=Pt=>{Pt.key==="Enter"&&Et()};Ae.useEffect(()=>{G(at)},[]);const bt=()=>{H(Pt=>!Pt)},wt=Pt=>{t(Pt.plateNumber),u(Pt.letters[0]),g(Pt.letters[1]),c(Pt.letters[2]),be(!0),H(!1)},Lt=()=>{R(!0)},jt=()=>{R(!1)};return Y.jsxs("div",{className:"flex h-screen w-screen relative",children:[Y.jsx(Eh,{}),Y.jsxs("div",{className:"absolute top-4 right-4 text-blue-800",children:[Y.jsx($k,{className:"text-4xl cursor-pointer",onClick:bt}),ae.length>0&&Y.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white rounded-full px-2 py-0.5 text-xs transform translate-x-2 -translate-y-2",children:ae.length}),N&&Y.jsx("div",{className:"absolute right-0 mt-2 bg-white shadow-lg rounded-md w-64",children:Y.jsx("ul",{children:ae.map((Pt,Nt)=>Y.jsx("li",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer",onClick:()=>wt(Pt),children:Pt.title},Nt))})})]}),Y.jsxs("div",{className:"w-full p-4",children:[Y.jsx("div",{className:"flex flex-grow items-center justify-center",children:Y.jsxs("div",{className:"bg-blue-700 flex flex-col justify-start items-center rounded-md p-4 max-w-lg w-full h-auto mt-4 text-white",children:[Y.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter Car License Plate"}),Y.jsxs("div",{className:"w-full flex flex-col",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Y.jsx("input",{type:"text",className:"p-2 rounded-md text-black w-1/2",placeholder:"Enter plate number",value:e,onChange:Pt=>t(Pt.target.value),onKeyDown:et}),Y.jsx("input",{type:"text",className:"p-2 rounded-md text-black w-10 ml-2",placeholder:"ل",ref:Pe,value:s,onChange:or,onKeyDown:et}),Y.jsx("input",{type:"text",className:"p-2 rounded-md text-black w-10 ml-2",placeholder:"ق",ref:Te,value:d,onChange:ir,onKeyDown:et}),Y.jsx("input",{type:"text",className:"p-2 rounded-md text-black w-10 ml-2",placeholder:"ه",ref:Oe,value:p,onChange:xn,onKeyDown:et})]}),Y.jsx("button",{className:"bg-blue-500 text-white p-2 rounded-md",onClick:Et,children:"Search"}),ie&&Y.jsx("div",{className:"bg-red-200 text-red-800 p-2 rounded-md mt-2",children:ie}),z&&Y.jsxs("div",{className:"bg-gray-200 text-gray-800 p-2 rounded-md mt-2",children:[Y.jsx("h3",{className:"text-lg font-bold mb-2",children:z.title}),Y.jsx("p",{className:"mb-2",children:z.description}),Y.jsxs("p",{className:"mb-2",children:["Name: ",z.owner.name]}),Y.jsxs("p",{className:"mb-2",children:["Phone: ",z.owner.phoneNumber]}),Y.jsxs("p",{className:"mb-2",children:["Address: ",z.owner.address]}),Y.jsxs("p",{className:"mb-2",children:["Car ID: ",z.carID]}),Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("span",{children:"Status:"}),Y.jsx("span",{className:`${z.status==="blocked"?"text-red-500":"text-green-500"} font-bold ml-2`,children:z.status==="blocked"?"Blocked":"Active"})]}),Y.jsxs("div",{className:"flex justify-between mt-4",children:[Y.jsx("button",{className:`${z.status==="blocked"?"bg-green-500":"bg-red-500"} text-white p-2 rounded-md`,onClick:Gt,children:z.status==="blocked"?"Unblock User":"Block User"}),Y.jsx("button",{className:"bg-blue-500 text-white p-2 rounded-md",onClick:nr,children:"Show All Reports"})]}),Y.jsx("div",{className:"flex justify-between mt-4",children:Y.jsx("button",{className:"bg-blue-500 text-white p-2 rounded-md",onClick:Lt,children:"Live Location"})})]})]})]})}),S&&Y.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center z-50",children:Y.jsxs("div",{className:"bg-white rounded-md p-4 w-full max-w-lg",children:[Y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reports"}),Y.jsx("ul",{children:rt.map(Pt=>Y.jsx("li",{className:"mb-2",children:Y.jsxs("div",{className:"flex justify-between",children:[Y.jsxs("span",{children:[Pt.type," in ",Pt.location," at ",Pt.time]}),Y.jsx("span",{children:Pt.status})]})},Pt.id))}),Y.jsx("button",{className:"bg-blue-500 text-white p-2 rounded-md mt-4",onClick:Dt,children:"Close"})]})}),k&&Y.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center z-50",children:Y.jsxs("div",{className:"bg-white rounded-md p-4 w-full max-w-lg",children:[Y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Live Location"}),z&&z.location&&Y.jsx("div",{className:"w-full h-64",children:Y.jsx(Gk,{location:z.location})}),Y.jsx("button",{className:"bg-blue-500 text-white p-2 rounded-md mt-4",onClick:jt,children:"Close"})]})})]})]})}function Wk(){const[e,t]=Ae.useState("add"),[s,u]=Ae.useState(""),[d,g]=Ae.useState(""),[p,c]=Ae.useState(""),[S,I]=Ae.useState(""),[k,R]=Ae.useState("all"),[z,ue]=Ae.useState([{id:1,type:"accident",region:"Cairo",city:"Nasr City",road:"Abbas El Akkad St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1},{id:2,type:"accident",region:"Giza",city:"6th of October",road:"El Mehwar St",solved:!1}]),ie=()=>{t("add")},q=()=>{t("list")},ae=re=>{const be=z.map(Pe=>Pe.id===re?{...Pe,solved:!0}:Pe);ue(be)},G=re=>{const be=z.filter(Pe=>Pe.id!==re);ue(be)},N=re=>{re.preventDefault();const be={id:z.length+1,type:"accident",region:s,city:d,road:p,solved:!1};ue([...z,be]),u(""),g(""),c(""),I(""),t("list")},H=z.filter(re=>k==="solved"?re.solved:k==="unsolved"?!re.solved:!0);return Y.jsxs("div",{className:"flex h-screen w-screen",children:[Y.jsx(Eh,{}),Y.jsxs("div",{className:"flex flex-col w-full p-4 bg-[#FFF]",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Y.jsx("button",{className:`py-2 px-6 rounded-md ${e==="add"?"bg-blue-500 text-white":"bg-[#1A2342] text-gray-200 hover:bg-blue-500 hover:text-white"} border border-[#101A33]`,onClick:ie,children:"Add New Obstacle"}),Y.jsx("button",{className:`py-2 px-6 rounded-md ${e==="list"?"bg-blue-500 text-white":"bg-[#1A2342] text-gray-200 hover:bg-blue-500 hover:text-white"} border border-[#101A33]`,onClick:q,children:"View All Obstacles"})]}),Y.jsxs("div",{className:"flex flex-grow items-center justify-center",children:[e==="add"&&Y.jsxs("div",{className:"bg-blue-700 flex flex-col justify-center items-center rounded-md p-4 max-w-lg w-full h-[500px] mt-4",children:[Y.jsx("h2",{className:"text-white text-lg font-bold mb-4",children:"Add New Obstacle"}),Y.jsxs("form",{className:"w-full",onSubmit:N,children:[Y.jsxs("div",{className:"mb-4",children:[Y.jsx("label",{className:"block text-white mb-1",htmlFor:"region",children:"Region"}),Y.jsxs("select",{id:"region",className:"w-full p-2 rounded-md bg-white text-black",value:s,onChange:re=>u(re.target.value),children:[Y.jsx("option",{value:"",children:"Select a region"}),Y.jsx("option",{value:"Cairo",children:"Cairo"}),Y.jsx("option",{value:"Giza",children:"Giza"}),Y.jsx("option",{value:"Alexandria",children:"Alexandria"}),Y.jsx("option",{value:"Aswan",children:"Aswan"}),Y.jsx("option",{value:"Luxor",children:"Luxor"})]})]}),Y.jsxs("div",{className:"mb-4",children:[Y.jsx("label",{className:"block text-white mb-1",htmlFor:"city",children:"City"}),Y.jsxs("select",{id:"city",className:"w-full p-2 rounded-md bg-white text-black",value:d,onChange:re=>g(re.target.value),children:[Y.jsx("option",{value:"",children:"Select a city"}),Y.jsx("option",{value:"Nasr City",children:"Nasr City"}),Y.jsx("option",{value:"Maadi",children:"Maadi"}),Y.jsx("option",{value:"Heliopolis",children:"Heliopolis"}),Y.jsx("option",{value:"6th of October",children:"6th of October"}),Y.jsx("option",{value:"Zamalek",children:"Zamalek"})]})]}),Y.jsxs("div",{className:"mb-4",children:[Y.jsx("label",{className:"block text-white mb-1",htmlFor:"road",children:"Road"}),Y.jsx("input",{id:"road",type:"text",className:"w-full p-2 rounded-md bg-white text-black",value:p,onChange:re=>c(re.target.value),placeholder:"Enter road name"})]}),Y.jsxs("div",{className:"mb-4",children:[Y.jsx("label",{className:"block text-white mb-1",htmlFor:"locationInfo",children:"Additional Info"}),Y.jsx("input",{id:"locationInfo",type:"text",className:"w-full p-2 rounded-md bg-white text-black",value:S,onChange:re=>I(re.target.value),placeholder:"Enter additional information"})]}),Y.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 w-full",children:"Submit"})]})]}),e==="list"&&Y.jsxs("div",{className:"bg-blue-700 flex flex-col rounded-md p-4 max-w-4xl w-full mt-4 overflow-y-auto h-[calc(100vh-150px)]",children:[Y.jsx("h2",{className:"text-white text-lg font-bold mb-2",children:"View All Obstacles"}),Y.jsxs("div",{className:"flex gap-2 mb-4",children:[Y.jsx("button",{className:`py-2 px-4 rounded-md ${k==="all"?"bg-green-500 text-white":"bg-gray-500 text-white hover:bg-green-500"}`,onClick:()=>R("all"),children:"All"}),Y.jsx("button",{className:`py-2 px-4 rounded-md ${k==="solved"?"bg-green-500 text-white":"bg-gray-500 text-white hover:bg-green-500"}`,onClick:()=>R("solved"),children:"Solved"}),Y.jsx("button",{className:`py-2 px-4 rounded-md ${k==="unsolved"?"bg-green-500 text-white":"bg-gray-500 text-white hover:bg-green-500"}`,onClick:()=>R("unsolved"),children:"Unsolved"})]}),Y.jsxs("table",{className:"w-full text-white",children:[Y.jsx("thead",{children:Y.jsxs("tr",{className:"border-b-2 border-gray-300",children:[Y.jsx("th",{className:"px-4 py-2 font-bold",children:"Type"}),Y.jsx("th",{className:"px-4 py-2 font-bold",children:"Region"}),Y.jsx("th",{className:"px-4 py-2 font-bold",children:"City"}),Y.jsx("th",{className:"px-4 py-2 font-bold",children:"Road"}),Y.jsx("th",{className:"px-4 py-2 font-bold",children:"Status"}),Y.jsx("th",{className:"px-4 py-2 font-bold",children:"Actions"})]})}),Y.jsx("tbody",{children:H.map(re=>Y.jsxs("tr",{className:"border-b border-gray-300 hover:bg-blue-600 transition duration-200",children:[Y.jsx("td",{className:"px-4 py-2",children:re.type}),Y.jsx("td",{className:"px-4 py-2",children:re.region}),Y.jsx("td",{className:"px-4 py-2",children:re.city}),Y.jsx("td",{className:"px-4 py-2",children:re.road}),Y.jsx("td",{className:"px-4 py-2",children:re.solved?Y.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-md",children:"Solved"}):Y.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-md",children:"Unsolved"})}),Y.jsxs("td",{className:"px-4 py-2 flex gap-2",children:[re.solved?Y.jsx("button",{className:"bg-gray-500 text-white py-1 px-3 rounded-md cursor-not-allowed",disabled:!0,children:"Solved"}):Y.jsx("button",{className:"bg-green-500 text-white py-1 px-3 rounded-md hover:bg-green-600",onClick:()=>ae(re.id),children:"Solve"}),Y.jsx("button",{className:"bg-red-500 text-white py-1 px-3 rounded-md hover:bg-red-600",onClick:()=>G(re.id),children:"Delete"})]})]},re.id))})]})]})]})]})]})}var yy={exports:{}},_y={exports:{}},vy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;function s(d){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s(d)}function u(d){var g=typeof d=="string"||d instanceof String;if(!g){var p=s(d);throw d===null?p="null":p==="object"&&(p=d.constructor.name),new TypeError("Expected a string but received a ".concat(p))}}e.exports=t.default,e.exports.default=t.default})(vy,vy.exports);var Xe=vy.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g),g=Date.parse(g),isNaN(g)?null:new Date(g)}e.exports=t.default,e.exports.default=t.default})(_y,_y.exports);var fv=_y.exports,xy={exports:{}},Au={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.farsiLocales=Pr.englishLocales=Pr.dotDecimal=Pr.decimal=Pr.commaDecimal=Pr.bengaliLocales=Pr.arabicLocales=Pr.alphanumeric=Pr.alpha=void 0;var Pi=Pr.alpha={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ώ]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fa-IR":/^[ابپتثجچحخدذرزژسشصضطظعغفقکگلمنوهی]+$/i,"fi-FI":/^[A-ZÅÄÖ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"ja-JP":/^[ぁ-んァ-ヶｦ-ﾟ一-龠ー・。、]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"kk-KZ":/^[А-ЯЁ\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๐\s]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"vi-VN":/^[A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,"ko-KR":/^[ㄱ-ㅎㅏ-ㅣ가-힣]*$/,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[א-ת]+$/,fa:/^['آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی']+$/i,bn:/^['ঀঁংঃঅআইঈউঊঋঌএঐওঔকখগঘঙচছজঝঞটঠডঢণতথদধনপফবভমযরলশষসহ়ঽািীুূৃৄেৈোৌ্ৎৗড়ঢ়য়ৠৡৢৣৰৱ৲৳৴৵৶৷৸৹৺৻']+$/,eo:/^[ABCĈD-GĜHĤIJĴK-PRSŜTUŬVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},Mi=Pr.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZÇƏĞİıÖŞÜ]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fi-FI":/^[0-9A-ZÅÄÖ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"ja-JP":/^[0-9０-９ぁ-んァ-ヶｦ-ﾟ一-龠ー・。、]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÄÇÉÊËÍÏÕÓÔÖÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"kk-KZ":/^[0-9А-ЯЁ\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"th-TH":/^[ก-๙\s]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ko-KR":/^[0-9ㄱ-ㅎㅏ-ㅣ가-힣]*$/,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,"vi-VN":/^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴĐÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/,he:/^[0-9א-ת]+$/,fa:/^['0-9آاءأؤئبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهةی۱۲۳۴۵۶۷۸۹۰']+$/i,bn:/^['ঀঁংঃঅআইঈউঊঋঌএঐওঔকখগঘঙচছজঝঞটঠডঢণতথদধনপফবভমযরলশষসহ়ঽািীুূৃৄেৈোৌ্ৎৗড়ঢ়য়ৠৡৢৣ০১২৩৪৫৬৭৮৯ৰৱ৲৳৴৵৶৷৸৹৺৻']+$/,eo:/^[0-9ABCĈD-GĜHĤIJĴK-PRSŜTUŬVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/},di=Pr.decimal={"en-US":".",ar:"٫"},Rw=Pr.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"];for(var rf,sg=0;sg<Rw.length;sg++)rf="en-".concat(Rw[sg]),Pi[rf]=Pi["en-US"],Mi[rf]=Mi["en-US"],di[rf]=di["en-US"];var Dw=Pr.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];for(var nf,og=0;og<Dw.length;og++)nf="ar-".concat(Dw[og]),Pi[nf]=Pi.ar,Mi[nf]=Mi.ar,di[nf]=di.ar;var Lw=Pr.farsiLocales=["IR","AF"];for(var lg,ug=0;ug<Lw.length;ug++)lg="fa-".concat(Lw[ug]),Mi[lg]=Mi.fa,di[lg]=di.ar;var zw=Pr.bengaliLocales=["BD","IN"];for(var af,cg=0;cg<zw.length;cg++)af="bn-".concat(zw[cg]),Pi[af]=Pi.bn,Mi[af]=Mi.bn,di[af]=di["en-US"];var Fw=Pr.dotDecimal=["ar-EG","ar-LB","ar-LY"],Bw=Pr.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"];for(var hg=0;hg<Fw.length;hg++)di[Fw[hg]]=di["en-US"];for(var dg=0;dg<Bw.length;dg++)di[Bw[dg]]=",";Pi["fr-CA"]=Pi["fr-FR"];Mi["fr-CA"]=Mi["fr-FR"];Pi["pt-BR"]=Pi["pt-PT"];Mi["pt-BR"]=Mi["pt-PT"];di["pt-BR"]=di["pt-PT"];Pi["pl-Pl"]=Pi["pl-PL"];Mi["pl-Pl"]=Mi["pl-PL"];di["pl-Pl"]=di["pl-PL"];Pi["fa-AF"]=Pi.fa;Object.defineProperty(Au,"__esModule",{value:!0});Au.default=Xk;Au.locales=void 0;var Kk=Yk(Xe),ZS=Pr;function Yk(e){return e&&e.__esModule?e:{default:e}}function Xk(e,t){(0,Kk.default)(e),t=t||{};var s=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?ZS.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(e===""||e==="."||e===","||e==="-"||e==="+")return!1;var u=parseFloat(e.replace(",","."));return s.test(e)&&(!t.hasOwnProperty("min")||u>=t.min)&&(!t.hasOwnProperty("max")||u<=t.max)&&(!t.hasOwnProperty("lt")||u<t.lt)&&(!t.hasOwnProperty("gt")||u>t.gt)}Au.locales=Object.keys(ZS.decimal);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Au);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g)?parseFloat(g):NaN}e.exports=t.default,e.exports.default=t.default})(xy,xy.exports);var HS=xy.exports,wy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){return(0,s.default)(g),parseInt(g,p||10)}e.exports=t.default,e.exports.default=t.default})(wy,wy.exports);var Jk=wy.exports,by={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){return(0,s.default)(g),p?g==="1"||/^true$/i.test(g):g!=="0"&&!/^false$/i.test(g)&&g!==""}e.exports=t.default,e.exports.default=t.default})(by,by.exports);var Qk=by.exports,Sy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){return(0,s.default)(g),g===p}e.exports=t.default,e.exports.default=t.default})(Sy,Sy.exports);var eR=Sy.exports,Ey={exports:{}},Ay={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;function s(d){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s(d)}function u(d){return s(d)==="object"&&d!==null?typeof d.toString=="function"?d=d.toString():d="[object Object]":(d===null||typeof d>"u"||isNaN(d)&&!d.length)&&(d=""),String(d)}e.exports=t.default,e.exports.default=t.default})(Ay,Ay.exports);var GS=Ay.exports,Cy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;function s(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;for(var g in d)typeof u[g]>"u"&&(u[g]=d[g]);return u}e.exports=t.default,e.exports.default=t.default})(Cy,Cy.exports);var mi=Cy.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=g(Xe),u=g(GS),d=g(mi);function g(S){return S&&S.__esModule?S:{default:S}}var p={ignoreCase:!1,minOccurrences:1};function c(S,I,k){return(0,s.default)(S),k=(0,d.default)(k,p),k.ignoreCase?S.toLowerCase().split((0,u.default)(I).toLowerCase()).length>k.minOccurrences:S.split((0,u.default)(I)).length>k.minOccurrences}e.exports=t.default,e.exports.default=t.default})(Ey,Ey.exports);var tR=Ey.exports,Ty={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p,c){return(0,s.default)(g),Object.prototype.toString.call(p)!=="[object RegExp]"&&(p=new RegExp(p,c)),!!g.match(p)}e.exports=t.default,e.exports.default=t.default})(Ty,Ty.exports);var rR=Ty.exports,Iy={exports:{}},Py={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}function d(p){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},d(p)}function g(p,c){(0,s.default)(p);var S,I;d(c)==="object"?(S=c.min||0,I=c.max):(S=arguments[1],I=arguments[2]);var k=encodeURI(p).split(/%..|./).length-1;return k>=S&&(typeof I>"u"||k<=I)}e.exports=t.default,e.exports.default=t.default})(Py,Py.exports);var qS=Py.exports,My={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=d(mi);function d(c){return c&&c.__esModule?c:{default:c}}var g={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function p(c,S){(0,s.default)(c),S=(0,u.default)(S,g),S.allow_trailing_dot&&c[c.length-1]==="."&&(c=c.substring(0,c.length-1)),S.allow_wildcard===!0&&c.indexOf("*.")===0&&(c=c.substring(2));var I=c.split("."),k=I[I.length-1];return S.require_tld&&(I.length<2||!S.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(k)||/\s/.test(k))||!S.allow_numeric_tld&&/^\d+$/.test(k)?!1:I.every(function(R){return!(R.length>63&&!S.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(R)||/[\uff01-\uff5e]/.test(R)||/^-|-$/.test(R)||!S.allow_underscores&&/_/.test(R))})}e.exports=t.default,e.exports.default=t.default})(My,My.exports);var pv=My.exports,ky={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=I;var s=u(Xe);function u(k){return k&&k.__esModule?k:{default:k}}var d="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",g="(".concat(d,"[.]){3}").concat(d),p=new RegExp("^".concat(g,"$")),c="(?:[0-9a-fA-F]{1,4})",S=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(g,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(g,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(g,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(g,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(g,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(g,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(g,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function I(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,s.default)(k),R=String(R),R?R==="4"?p.test(k):R==="6"?S.test(k):!1:I(k,4)||I(k,6)}e.exports=t.default,e.exports.default=t.default})(ky,ky.exports);var Sp=ky.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=G;var s=c(Xe),u=c(qS),d=c(pv),g=c(Sp),p=c(mi);function c(N){return N&&N.__esModule?N:{default:N}}var S={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},I=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,k=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,R=/^[a-z\d]+$/,z=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,ue=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,ie=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,q=254;function ae(N){var H=N.replace(/^"(.+)"$/,"$1");if(!H.trim())return!1;var re=/[\.";<>]/.test(H);if(re){if(H===N)return!1;var be=H.split('"').length===H.split('\\"').length;if(!be)return!1}return!0}function G(N,H){if((0,s.default)(N),H=(0,p.default)(H,S),H.require_display_name||H.allow_display_name){var re=N.match(I);if(re){var be=re[1];if(N=N.replace(be,"").replace(/(^<|>$)/g,""),be.endsWith(" ")&&(be=be.slice(0,-1)),!ae(be))return!1}else if(H.require_display_name)return!1}if(!H.ignore_max_length&&N.length>q)return!1;var Pe=N.split("@"),Te=Pe.pop(),Oe=Te.toLowerCase();if(H.host_blacklist.includes(Oe)||H.host_whitelist.length>0&&!H.host_whitelist.includes(Oe))return!1;var at=Pe.join("@");if(H.domain_specific_validation&&(Oe==="gmail.com"||Oe==="googlemail.com")){at=at.toLowerCase();var rt=at.split("+")[0];if(!(0,u.default)(rt.replace(/\./g,""),{min:6,max:30}))return!1;for(var Et=rt.split("."),Dt=0;Dt<Et.length;Dt++)if(!R.test(Et[Dt]))return!1}if(H.ignore_max_length===!1&&(!(0,u.default)(at,{max:64})||!(0,u.default)(Te,{max:254})))return!1;if(!(0,d.default)(Te,{require_tld:H.require_tld,ignore_max_length:H.ignore_max_length,allow_underscores:H.allow_underscores})){if(!H.allow_ip_domain)return!1;if(!(0,g.default)(Te)){if(!Te.startsWith("[")||!Te.endsWith("]"))return!1;var Gt=Te.slice(1,-1);if(Gt.length===0||!(0,g.default)(Gt))return!1}}if(at[0]==='"')return at=at.slice(1,at.length-1),H.allow_utf8_local_part?ie.test(at):z.test(at);for(var nr=H.allow_utf8_local_part?ue:k,or=at.split("."),ir=0;ir<or.length;ir++)if(!nr.test(or[ir]))return!1;return!(H.blacklisted_chars&&at.search(new RegExp("[".concat(H.blacklisted_chars,"]+"),"g"))!==-1)}e.exports=t.default,e.exports.default=t.default})(Iy,Iy.exports);var WS=Iy.exports,Ry={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=G;var s=p(Xe),u=p(pv),d=p(Sp),g=p(mi);function p(N){return N&&N.__esModule?N:{default:N}}function c(N,H){return z(N)||R(N,H)||I(N,H)||S()}function S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(N,H){if(N){if(typeof N=="string")return k(N,H);var re=Object.prototype.toString.call(N).slice(8,-1);if(re==="Object"&&N.constructor&&(re=N.constructor.name),re==="Map"||re==="Set")return Array.from(N);if(re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return k(N,H)}}function k(N,H){(H==null||H>N.length)&&(H=N.length);for(var re=0,be=new Array(H);re<H;re++)be[re]=N[re];return be}function R(N,H){var re=N==null?null:typeof Symbol<"u"&&N[Symbol.iterator]||N["@@iterator"];if(re!=null){var be,Pe,Te,Oe,at=[],rt=!0,Et=!1;try{if(Te=(re=re.call(N)).next,H===0){if(Object(re)!==re)return;rt=!1}else for(;!(rt=(be=Te.call(re)).done)&&(at.push(be.value),at.length!==H);rt=!0);}catch(Dt){Et=!0,Pe=Dt}finally{try{if(!rt&&re.return!=null&&(Oe=re.return(),Object(Oe)!==Oe))return}finally{if(Et)throw Pe}}return at}}function z(N){if(Array.isArray(N))return N}var ue={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},ie=/^\[([^\]]+)\](?::([0-9]+))?$/;function q(N){return Object.prototype.toString.call(N)==="[object RegExp]"}function ae(N,H){for(var re=0;re<H.length;re++){var be=H[re];if(N===be||q(be)&&be.test(N))return!0}return!1}function G(N,H){if((0,s.default)(N),!N||/[\s<>]/.test(N)||N.indexOf("mailto:")===0||(H=(0,g.default)(H,ue),H.validate_length&&N.length>=2083)||!H.allow_fragments&&N.includes("#")||!H.allow_query_components&&(N.includes("?")||N.includes("&")))return!1;var re,be,Pe,Te,Oe,at,rt,Et;if(rt=N.split("#"),N=rt.shift(),rt=N.split("?"),N=rt.shift(),rt=N.split("://"),rt.length>1){if(re=rt.shift().toLowerCase(),H.require_valid_protocol&&H.protocols.indexOf(re)===-1)return!1}else{if(H.require_protocol)return!1;if(N.slice(0,2)==="//"){if(!H.allow_protocol_relative_urls)return!1;rt[0]=N.slice(2)}}if(N=rt.join("://"),N==="")return!1;if(rt=N.split("/"),N=rt.shift(),N===""&&!H.require_host)return!0;if(rt=N.split("@"),rt.length>1){if(H.disallow_auth||rt[0]===""||(be=rt.shift(),be.indexOf(":")>=0&&be.split(":").length>2))return!1;var Dt=be.split(":"),Gt=c(Dt,2),nr=Gt[0],or=Gt[1];if(nr===""&&or==="")return!1}Te=rt.join("@"),at=null,Et=null;var ir=Te.match(ie);if(ir?(Pe="",Et=ir[1],at=ir[2]||null):(rt=Te.split(":"),Pe=rt.shift(),rt.length&&(at=rt.join(":"))),at!==null&&at.length>0){if(Oe=parseInt(at,10),!/^[0-9]+$/.test(at)||Oe<=0||Oe>65535)return!1}else if(H.require_port)return!1;return H.host_whitelist?ae(Pe,H.host_whitelist):Pe===""&&!H.require_host?!0:!(!(0,d.default)(Pe)&&!(0,u.default)(Pe,H)&&(!Et||!(0,d.default)(Et,6))||(Pe=Pe||Et,H.host_blacklist&&ae(Pe,H.host_blacklist)))}e.exports=t.default,e.exports.default=t.default})(Ry,Ry.exports);var nR=Ry.exports,Dy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=k;var s=u(Xe);function u(R){return R&&R.__esModule?R:{default:R}}var d=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,g=/^([0-9a-fA-F]){12}$/,p=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,c=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,S=/^([0-9a-fA-F]){16}$/,I=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;function k(R,z){return(0,s.default)(R),z!=null&&z.eui&&(z.eui=String(z.eui)),z!=null&&z.no_colons||z!=null&&z.no_separators?z.eui==="48"?g.test(R):z.eui==="64"?S.test(R):g.test(R)||S.test(R):(z==null?void 0:z.eui)==="48"?d.test(R)||p.test(R):(z==null?void 0:z.eui)==="64"?c.test(R)||I.test(R):k(R,{eui:"48"})||k(R,{eui:"64"})}e.exports=t.default,e.exports.default=t.default})(Dy,Dy.exports);var iR=Dy.exports,Ly={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var s=d(Xe),u=d(Sp);function d(I){return I&&I.__esModule?I:{default:I}}var g=/^\d{1,3}$/,p=32,c=128;function S(I){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(0,s.default)(I);var R=I.split("/");if(R.length!==2||!g.test(R[1])||R[1].length>1&&R[1].startsWith("0"))return!1;var z=(0,u.default)(R[0],k);if(!z)return!1;var ue=null;switch(String(k)){case"4":ue=p;break;case"6":ue=c;break;default:ue=(0,u.default)(R[0],"6")?c:p}return R[1]<=ue&&R[1]>=0}e.exports=t.default,e.exports.default=t.default})(Ly,Ly.exports);var aR=Ly.exports,zy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=ie;var s=u(mi);function u(q){return q&&q.__esModule?q:{default:q}}function d(q,ae){return c(q)||p(q,ae)||I(q,ae)||g()}function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(q,ae){var G=q==null?null:typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(G!=null){var N,H,re,be,Pe=[],Te=!0,Oe=!1;try{if(re=(G=G.call(q)).next,ae===0){if(Object(G)!==G)return;Te=!1}else for(;!(Te=(N=re.call(G)).done)&&(Pe.push(N.value),Pe.length!==ae);Te=!0);}catch(at){Oe=!0,H=at}finally{try{if(!Te&&G.return!=null&&(be=G.return(),Object(be)!==be))return}finally{if(Oe)throw H}}return Pe}}function c(q){if(Array.isArray(q))return q}function S(q,ae){var G=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!G){if(Array.isArray(q)||(G=I(q))||ae&&q&&typeof q.length=="number"){G&&(q=G);var N=0,H=function(){};return{s:H,n:function(){return N>=q.length?{done:!0}:{done:!1,value:q[N++]}},e:function(Oe){throw Oe},f:H}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,be=!1,Pe;return{s:function(){G=G.call(q)},n:function(){var Oe=G.next();return re=Oe.done,Oe},e:function(Oe){be=!0,Pe=Oe},f:function(){try{!re&&G.return!=null&&G.return()}finally{if(be)throw Pe}}}}function I(q,ae){if(q){if(typeof q=="string")return k(q,ae);var G=Object.prototype.toString.call(q).slice(8,-1);if(G==="Object"&&q.constructor&&(G=q.constructor.name),G==="Map"||G==="Set")return Array.from(q);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return k(q,ae)}}function k(q,ae){(ae==null||ae>q.length)&&(ae=q.length);for(var G=0,N=new Array(ae);G<ae;G++)N[G]=q[G];return N}var R={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function z(q){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(q)}function ue(q,ae){for(var G=[],N=Math.min(q.length,ae.length),H=0;H<N;H++)G.push([q[H],ae[H]]);return G}function ie(q,ae){if(typeof ae=="string"?ae=(0,s.default)({format:ae},R):ae=(0,s.default)(ae,R),typeof q=="string"&&z(ae.format)){var G=ae.delimiters.find(function(or){return ae.format.indexOf(or)!==-1}),N=ae.strictMode?G:ae.delimiters.find(function(or){return q.indexOf(or)!==-1}),H=ue(q.split(N),ae.format.toLowerCase().split(G)),re={},be=S(H),Pe;try{for(be.s();!(Pe=be.n()).done;){var Te=d(Pe.value,2),Oe=Te[0],at=Te[1];if(Oe.length!==at.length)return!1;re[at.charAt(0)]=Oe}}catch(or){be.e(or)}finally{be.f()}var rt=re.y;if(rt.startsWith("-"))return!1;if(re.y.length===2){var Et=parseInt(re.y,10);if(isNaN(Et))return!1;var Dt=new Date().getFullYear()%100;Et<Dt?rt="20".concat(re.y):rt="19".concat(re.y)}var Gt=re.m;re.m.length===1&&(Gt="0".concat(re.m));var nr=re.d;return re.d.length===1&&(nr="0".concat(re.d)),new Date("".concat(rt,"-").concat(Gt,"-").concat(nr,"T00:00:00.000Z")).getUTCDate()===+re.d}return ae.strictMode?!1:Object.prototype.toString.call(q)==="[object Date]"&&isFinite(q)}e.exports=t.default,e.exports.default=t.default})(zy,zy.exports);var KS=zy.exports,Fy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=u(mi);function u(c){return c&&c.__esModule?c:{default:c}}var d={hourFormat:"hour24",mode:"default"},g={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/}};function p(c,S){return S=(0,s.default)(S,d),typeof c!="string"?!1:g[S.hourFormat][S.mode].test(c)}e.exports=t.default,e.exports.default=t.default})(Fy,Fy.exports);var sR=Fy.exports,By={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=u(Xe);function u(S){return S&&S.__esModule?S:{default:S}}var d={loose:!1},g=["true","false","1","0"],p=[].concat(g,["yes","no"]);function c(S){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;return(0,s.default)(S),I.loose?p.includes(S.toLowerCase()):g.includes(S)}e.exports=t.default,e.exports.default=t.default})(By,By.exports);var oR=By.exports,Oy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=N;var s=u(Xe);function u(H){return H&&H.__esModule?H:{default:H}}var d="([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",g="(([a-zA-Z]{2,3}(-".concat(d,")?)|([a-zA-Z]{5,8}))"),p="([A-Za-z]{4})",c="([A-Za-z]{2}|\\d{3})",S="([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",I="(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])",k="(".concat(I,"(-[A-Za-z0-9]{2,8})+)"),R="(x(-[A-Za-z0-9]{1,8})+)",z="((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))",ue="((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",ie="(".concat(z,"|").concat(ue,")"),q="(-|_)",ae="".concat(g,"(").concat(q).concat(p,")?(").concat(q).concat(c,")?(").concat(q).concat(S,")*(").concat(q).concat(k,")*(").concat(q).concat(R,")?"),G=new RegExp("(^".concat(R,"$)|(^").concat(ie,"$)|(^").concat(ae,"$)"));function N(H){return(0,s.default)(H),G.test(H)}e.exports=t.default,e.exports.default=t.default})(Oy,Oy.exports);var lR=Oy.exports,Ny={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;function g(p){if((0,s.default)(p),!d.test(p))return!1;for(var c=0,S=0;S<p.length;S++)S%3===0?c+=p[S]*3:S%3===1?c+=p[S]*7:c+=p[S]*1;return c%10===0}e.exports=t.default,e.exports.default=t.default})(Ny,Ny.exports);var uR=Ny.exports,Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.default=dR;Ch.locales=void 0;var cR=hR(Xe),$y=Pr;function hR(e){return e&&e.__esModule?e:{default:e}}function dR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,cR.default)(e);var u=e,d=s.ignore;if(d)if(d instanceof RegExp)u=u.replace(d,"");else if(typeof d=="string")u=u.replace(new RegExp("[".concat(d.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(t in $y.alpha)return $y.alpha[t].test(u);throw new Error("Invalid locale '".concat(t,"'"))}Ch.locales=Object.keys($y.alpha);var Th={};Object.defineProperty(Th,"__esModule",{value:!0});Th.default=mR;Th.locales=void 0;var fR=pR(Xe),Uy=Pr;function pR(e){return e&&e.__esModule?e:{default:e}}function mR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,fR.default)(e);var u=e,d=s.ignore;if(d)if(d instanceof RegExp)u=u.replace(d,"");else if(typeof d=="string")u=u.replace(new RegExp("[".concat(d.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(t in Uy.alphanumeric)return Uy.alphanumeric[t].test(u);throw new Error("Invalid locale '".concat(t,"'"))}Th.locales=Object.keys(Uy.alphanumeric);var Vy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=Pr;function d(c){return c&&c.__esModule?c:{default:c}}var g=/^[0-9]+$/;function p(c,S){return(0,s.default)(c),S&&S.no_symbols?g.test(c):new RegExp("^[+-]?([0-9]*[".concat((S||{}).locale?u.decimal[S.locale]:".","])?[0-9]+$")).test(c)}e.exports=t.default,e.exports.default=t.default})(Vy,Vy.exports);var gR=Vy.exports,jy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/,ZA:/^[TAMD]\d{8}$/};function g(p,c){(0,s.default)(p);var S=p.replace(/\s/g,"").toUpperCase();return c.toUpperCase()in d&&d[c].test(S)}e.exports=t.default,e.exports.default=t.default})(jy,jy.exports);var yR=jy.exports,Zy={exports:{}},Hy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=u(Xe);function u(c){return c&&c.__esModule?c:{default:c}}var d=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,g=/^[-+]?[0-9]+$/;function p(c,S){(0,s.default)(c),S=S||{};var I=S.allow_leading_zeroes===!1?d:g,k=!S.hasOwnProperty("min")||c>=S.min,R=!S.hasOwnProperty("max")||c<=S.max,z=!S.hasOwnProperty("lt")||c<S.lt,ue=!S.hasOwnProperty("gt")||c>S.gt;return I.test(c)&&k&&R&&z&&ue}e.exports=t.default,e.exports.default=t.default})(Hy,Hy.exports);var mv=Hy.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(mv);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g,{allow_leading_zeroes:!1,min:0,max:65535})}e.exports=t.default,e.exports.default=t.default})(Zy,Zy.exports);var _R=Zy.exports,Gy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g),g===g.toLowerCase()}e.exports=t.default,e.exports.default=t.default})(Gy,Gy.exports);var vR=Gy.exports,qy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g),g===g.toUpperCase()}e.exports=t.default,e.exports.default=t.default})(qy,qy.exports);var xR=qy.exports,Wy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=u(Xe);function u(c){return c&&c.__esModule?c:{default:c}}var d=/^[0-9]{15}$/,g=/^\d{2}-\d{6}-\d{6}-\d{1}$/;function p(c,S){(0,s.default)(c),S=S||{};var I=d;if(S.allow_hyphens&&(I=g),!I.test(c))return!1;c=c.replace(/-/g,"");for(var k=0,R=2,z=14,ue=0;ue<z;ue++){var ie=c.substring(z-ue-1,z-ue),q=parseInt(ie,10)*R;q>=10?k+=q%10+1:k+=q,R===1?R+=1:R-=1}var ae=(10-k%10)%10;return ae===parseInt(c.substring(14,15),10)}e.exports=t.default,e.exports.default=t.default})(Wy,Wy.exports);var wR=Wy.exports,Ky={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^[\x00-\x7F]+$/;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(Ky,Ky.exports);var bR=Ky.exports,Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.default=CR;Cu.fullWidth=void 0;var SR=ER(Xe);function ER(e){return e&&e.__esModule?e:{default:e}}var AR=Cu.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function CR(e){return(0,SR.default)(e),AR.test(e)}var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.default=MR;Tu.halfWidth=void 0;var TR=IR(Xe);function IR(e){return e&&e.__esModule?e:{default:e}}var PR=Tu.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function MR(e){return(0,TR.default)(e),PR.test(e)}var Yy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=g(Xe),u=Cu,d=Tu;function g(c){return c&&c.__esModule?c:{default:c}}function p(c){return(0,s.default)(c),u.fullWidth.test(c)&&d.halfWidth.test(c)}e.exports=t.default,e.exports.default=t.default})(Yy,Yy.exports);var kR=Yy.exports,Xy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/[^\x00-\x7F]/;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(Xy,Xy.exports);var RR=Xy.exports,Jy={exports:{}},Qy={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;function s(u,d){var g=u.join("");return new RegExp(g,d)}e.exports=t.default,e.exports.default=t.default})(Qy,Qy.exports);var DR=Qy.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=d(DR);function d(c){return c&&c.__esModule?c:{default:c}}var g=(0,u.default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");function p(c){return(0,s.default)(c),g.test(c)}e.exports=t.default,e.exports.default=t.default})(Jy,Jy.exports);var LR=Jy.exports,e_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(e_,e_.exports);var zR=e_.exports,t_={exports:{}},r_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(d,g){return d.some(function(p){return g===p})};t.default=s,e.exports=t.default,e.exports.default=t.default})(r_,r_.exports);var FR=r_.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=k;var s=p(mi),u=p(Xe),d=p(FR),g=Pr;function p(R){return R&&R.__esModule?R:{default:R}}function c(R){var z=new RegExp("^[-+]?([0-9]+)?(\\".concat(g.decimal[R.locale],"[0-9]{").concat(R.decimal_digits,"})").concat(R.force_decimal?"":"?","$"));return z}var S={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},I=["","-","+"];function k(R,z){if((0,u.default)(R),z=(0,s.default)(z,S),z.locale in g.decimal)return!(0,d.default)(I,R.replace(/ /g,""))&&c(z).test(R);throw new Error("Invalid locale '".concat(z.locale,"'"))}e.exports=t.default,e.exports.default=t.default})(t_,t_.exports);var BR=t_.exports,n_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^(0x|0h)?[0-9A-F]+$/i;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(n_,n_.exports);var YS=n_.exports,i_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^(0o)?[0-7]+$/i;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(i_,i_.exports);var OR=i_.exports,a_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=d(Xe),u=d(HS);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,c){return(0,s.default)(p),(0,u.default)(p)%parseInt(c,10)===0}e.exports=t.default,e.exports.default=t.default})(a_,a_.exports);var NR=a_.exports,s_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(s_,s_.exports);var $R=s_.exports,o_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var s=u(Xe);function u(I){return I&&I.__esModule?I:{default:I}}var d=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,g=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,p=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,c=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/;function S(I){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,s.default)(I),k?d.test(I)||g.test(I)||p.test(I)||c.test(I):d.test(I)||g.test(I)}e.exports=t.default,e.exports.default=t.default})(o_,o_.exports);var UR=o_.exports,l_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=u(Xe);function u(c){return c&&c.__esModule?c:{default:c}}var d=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,g=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;function p(c){(0,s.default)(c);var S=c.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/ig,"$1");return S.indexOf(",")!==-1?d.test(S):g.test(S)}e.exports=t.default,e.exports.default=t.default})(l_,l_.exports);var VR=l_.exports,u_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(u_,u_.exports);var jR=u_.exports,Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.default=KR;Ih.locales=void 0;var ZR=HR(Xe);function HR(e){return e&&e.__esModule?e:{default:e}}var Jf={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function GR(e){var t=e.filter(function(s){return!(s in Jf)});return!(t.length>0)}function qR(e,t){var s=e.replace(/[\s\-]+/gi,"").toUpperCase(),u=s.slice(0,2).toUpperCase(),d=u in Jf;if(t.whitelist){if(!GR(t.whitelist))return!1;var g=t.whitelist.includes(u);if(!g)return!1}if(t.blacklist){var p=t.blacklist.includes(u);if(p)return!1}return d&&Jf[u].test(s)}function WR(e){var t=e.replace(/[^A-Z0-9]+/gi,"").toUpperCase(),s=t.slice(4)+t.slice(0,4),u=s.replace(/[A-Z]/g,function(g){return g.charCodeAt(0)-55}),d=u.match(/\d{1,7}/g).reduce(function(g,p){return Number(g+p)%97},"");return d===1}function KR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,ZR.default)(e),qR(e,t)&&WR(e)}Ih.locales=Object.keys(Jf);var c_={exports:{}},Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.CountryCodes=void 0;Iu.default=JR;var YR=XR(Xe);function XR(e){return e&&e.__esModule?e:{default:e}}var XS=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function JR(e){return(0,YR.default)(e),XS.has(e.toUpperCase())}Iu.CountryCodes=XS;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=Iu;function d(c){return c&&c.__esModule?c:{default:c}}var g=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;function p(c){(0,s.default)(c);var S=c.slice(4,6).toUpperCase();return!u.CountryCodes.has(S)&&S!=="XK"?!1:g.test(c)}e.exports=t.default,e.exports.default=t.default})(c_,c_.exports);var QR=c_.exports,h_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^[a-f0-9]{32}$/;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(h_,h_.exports);var eD=h_.exports,d_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};function g(p,c){(0,s.default)(p);var S=new RegExp("^[a-fA-F0-9]{".concat(d[c],"}$"));return S.test(p)}e.exports=t.default,e.exports.default=t.default})(d_,d_.exports);var tD=d_.exports,f_={exports:{}},p_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var s=d(Xe),u=d(mi);function d(I){return I&&I.__esModule?I:{default:I}}var g=/[^A-Z0-9+\/=]/i,p=/^[A-Z0-9_\-]*$/i,c={urlSafe:!1};function S(I,k){(0,s.default)(I),k=(0,u.default)(k,c);var R=I.length;if(k.urlSafe)return p.test(I);if(R%4!==0||g.test(I))return!1;var z=I.indexOf("=");return z===-1||z===R-1||z===R-2&&I[R-1]==="="}e.exports=t.default,e.exports.default=t.default})(p_,p_.exports);var JS=p_.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=d(Xe),u=d(JS);function d(p){return p&&p.__esModule?p:{default:p}}function g(p){(0,s.default)(p);var c=p.split("."),S=c.length;return S!==3?!1:c.reduce(function(I,k){return I&&(0,u.default)(k,{urlSafe:!0})},!0)}e.exports=t.default,e.exports.default=t.default})(f_,f_.exports);var rD=f_.exports,m_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=d(Xe),u=d(mi);function d(S){return S&&S.__esModule?S:{default:S}}function g(S){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},g(S)}var p={allow_primitives:!1};function c(S,I){(0,s.default)(S);try{I=(0,u.default)(I,p);var k=[];I.allow_primitives&&(k=[null,!1,!0]);var R=JSON.parse(S);return k.includes(R)||!!R&&g(R)==="object"}catch{}return!1}e.exports=t.default,e.exports.default=t.default})(m_,m_.exports);var nD=m_.exports,g_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=d(mi);function d(c){return c&&c.__esModule?c:{default:c}}var g={ignore_whitespace:!1};function p(c,S){return(0,s.default)(c),S=(0,u.default)(S,g),(S.ignore_whitespace?c.trim().length:c.length)===0}e.exports=t.default,e.exports.default=t.default})(g_,g_.exports);var iD=g_.exports,y_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}function d(p){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},d(p)}function g(p,c){(0,s.default)(p);var S,I;d(c)==="object"?(S=c.min||0,I=c.max):(S=arguments[1]||0,I=arguments[2]);var k=p.match(/(\uFE0F|\uFE0E)/g)||[],R=p.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],z=p.length-k.length-R.length;return z>=S&&(typeof I>"u"||z<=I)}e.exports=t.default,e.exports.default=t.default})(y_,y_.exports);var aD=y_.exports,__={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function g(p,c){(0,s.default)(p);var S=d[[void 0,null].includes(c)?"all":c];return!!S&&S.test(p)}e.exports=t.default,e.exports.default=t.default})(__,__.exports);var sD=__.exports,v_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=d(Xe),u=d(YS);function d(p){return p&&p.__esModule?p:{default:p}}function g(p){return(0,s.default)(p),(0,u.default)(p)&&p.length===24}e.exports=t.default,e.exports.default=t.default})(v_,v_.exports);var oD=v_.exports,x_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(fv);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){var c=(p==null?void 0:p.comparisonDate)||p||Date().toString(),S=(0,s.default)(c),I=(0,s.default)(g);return!!(I&&S&&I>S)}e.exports=t.default,e.exports.default=t.default})(x_,x_.exports);var lD=x_.exports,w_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=d(Xe),u=d(fv);function d(p){return p&&p.__esModule?p:{default:p}}function g(p){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:String(new Date);(0,s.default)(p);var S=(0,u.default)(c),I=(0,u.default)(p);return!!(I&&S&&I<S)}e.exports=t.default,e.exports.default=t.default})(w_,w_.exports);var uD=w_.exports,b_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=d(GS);function d(c){return c&&c.__esModule?c:{default:c}}function g(c){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},g(c)}function p(c,S){(0,s.default)(c);var I;if(Object.prototype.toString.call(S)==="[object Array]"){var k=[];for(I in S)({}).hasOwnProperty.call(S,I)&&(k[I]=(0,u.default)(S[I]));return k.indexOf(c)>=0}else{if(g(S)==="object")return S.hasOwnProperty(c);if(S&&typeof S.indexOf=="function")return S.indexOf(c)>=0}return!1}e.exports=t.default,e.exports.default=t.default})(b_,b_.exports);var cD=b_.exports,S_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){(0,s.default)(g);for(var p=g.replace(/[- ]+/g,""),c=0,S,I,k,R=p.length-1;R>=0;R--)S=p.substring(R,R+1),I=parseInt(S,10),k?(I*=2,I>=10?c+=I%10+1:c+=I):c+=I,k=!k;return!!(c%10===0&&p)}e.exports=t.default,e.exports.default=t.default})(S_,S_.exports);var QS=S_.exports,E_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=d(Xe),u=d(QS);function d(S){return S&&S.__esModule?S:{default:S}}var g={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},p=function(){var S=[];for(var I in g)g.hasOwnProperty(I)&&S.push(g[I]);return S}();function c(S){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,s.default)(S);var k=I.provider,R=S.replace(/[- ]+/g,"");if(k&&k.toLowerCase()in g){if(!g[k.toLowerCase()].test(R))return!1}else{if(k&&!(k.toLowerCase()in g))throw new Error("".concat(k," is not a valid credit card provider."));if(!p.some(function(z){return z.test(R)}))return!1}return(0,u.default)(S)}e.exports=t.default,e.exports.default=t.default})(E_,E_.exports);var hD=E_.exports,A_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=d(Xe),u=d(mv);function d(c){return c&&c.__esModule?c:{default:c}}var g={PL:function(S){(0,s.default)(S);var I={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(S!=null&&S.length===11&&(0,u.default)(S,{allow_leading_zeroes:!0})){var k=S.split("").slice(0,-1),R=k.reduce(function(ie,q,ae){return ie+Number(q)*I[ae+1]},0),z=R%10,ue=Number(S.charAt(S.length-1));if(z===0&&ue===0||ue===10-z)return!0}return!1},ES:function(S){(0,s.default)(S);var I=/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/,k={X:0,Y:1,Z:2},R=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"],z=S.trim().toUpperCase();if(!I.test(z))return!1;var ue=z.slice(0,-1).replace(/[X,Y,Z]/g,function(ie){return k[ie]});return z.endsWith(R[ue%23])},FI:function(S){if((0,s.default)(S),S.length!==11||!S.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;var I="0123456789ABCDEFHJKLMNPRSTUVWXY",k=parseInt(S.slice(0,6),10)*1e3+parseInt(S.slice(7,10),10),R=k%31,z=I[R];return z===S.slice(10,11)},IN:function(S){var I=/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/,k=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],R=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],z=S.trim();if(!I.test(z))return!1;var ue=0,ie=z.replace(/\s/g,"").split("").map(Number).reverse();return ie.forEach(function(q,ae){ue=k[ue][R[ae%8][q]]}),ue===0},IR:function(S){if(!S.match(/^\d{10}$/)||(S="0000".concat(S).slice(S.length-6),parseInt(S.slice(3,9),10)===0))return!1;for(var I=parseInt(S.slice(9,10),10),k=0,R=0;R<9;R++)k+=parseInt(S.slice(R,R+1),10)*(10-R);return k%=11,k<2&&I===k||k>=2&&I===11-k},IT:function(S){return S.length!==9||S==="CA00000AA"?!1:S.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1},NO:function(S){var I=S.trim();if(isNaN(Number(I))||I.length!==11||I==="00000000000")return!1;var k=I.split("").map(Number),R=(11-(3*k[0]+7*k[1]+6*k[2]+1*k[3]+8*k[4]+9*k[5]+4*k[6]+5*k[7]+2*k[8])%11)%11,z=(11-(5*k[0]+4*k[1]+3*k[2]+2*k[3]+7*k[4]+6*k[5]+5*k[6]+4*k[7]+3*k[8]+2*R)%11)%11;return!(R!==k[9]||z!==k[10])},TH:function(S){if(!S.match(/^[1-8]\d{12}$/))return!1;for(var I=0,k=0;k<12;k++)I+=parseInt(S[k],10)*(13-k);return S[12]===((11-I%11)%10).toString()},LK:function(S){var I=/^[1-9]\d{8}[vx]$/i,k=/^[1-9]\d{11}$/i;return S.length===10&&I.test(S)?!0:!!(S.length===12&&k.test(S))},"he-IL":function(S){var I=/^\d{9}$/,k=S.trim();if(!I.test(k))return!1;for(var R=k,z=0,ue,ie=0;ie<R.length;ie++)ue=Number(R[ie])*(ie%2+1),z+=ue>9?ue-9:ue;return z%10===0},"ar-LY":function(S){var I=/^(1|2)\d{11}$/,k=S.trim();return!!I.test(k)},"ar-TN":function(S){var I=/^\d{8}$/,k=S.trim();return!!I.test(k)},"zh-CN":function(S){var I=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],k=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],R=["1","0","X","9","8","7","6","5","4","3","2"],z=function(re){return I.includes(re)},ue=function(re){var be=parseInt(re.substring(0,4),10),Pe=parseInt(re.substring(4,6),10),Te=parseInt(re.substring(6),10),Oe=new Date(be,Pe-1,Te);return Oe>new Date?!1:Oe.getFullYear()===be&&Oe.getMonth()===Pe-1&&Oe.getDate()===Te},ie=function(re){for(var be=re.substring(0,17),Pe=0,Te=0;Te<17;Te++)Pe+=parseInt(be.charAt(Te),10)*parseInt(k[Te],10);var Oe=Pe%11;return R[Oe]},q=function(re){return ie(re)===re.charAt(17).toUpperCase()},ae=function(re){var be=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(re);if(!be)return!1;var Pe=re.substring(0,2);if(be=z(Pe),!be)return!1;var Te="19".concat(re.substring(6,12));return be=ue(Te),!!be},G=function(re){var be=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(re);if(!be)return!1;var Pe=re.substring(0,2);if(be=z(Pe),!be)return!1;var Te=re.substring(6,14);return be=ue(Te),be?q(re):!1},N=function(re){var be=/^\d{15}|(\d{17}(\d|x|X))$/.test(re);return be?re.length===15?ae(re):G(re):!1};return N(S)},"zh-HK":function(S){S=S.trim();var I=/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/,k=/^[0-9]$/;if(S=S.toUpperCase(),!I.test(S))return!1;S=S.replace(/\[|\]|\(|\)/g,""),S.length===8&&(S="3".concat(S));for(var R=0,z=0;z<=7;z++){var ue=void 0;k.test(S[z])?ue=S[z]:ue=(S[z].charCodeAt(0)-55)%11,R+=ue*(9-z)}R%=11;var ie;return R===0?ie="0":R===1?ie="A":ie=String(11-R),ie===S[S.length-1]},"zh-TW":function(S){var I={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},k=S.trim().toUpperCase();return/^[A-Z][0-9]{9}$/.test(k)?Array.from(k).reduce(function(R,z,ue){if(ue===0){var ie=I[z];return ie%10*9+Math.floor(ie/10)}return ue===9?(10-R%10-Number(z))%10===0:R+Number(z)*(9-ue)},0):!1}};function p(c,S){if((0,s.default)(c),S in g)return g[S](c);if(S==="any"){for(var I in g)if(g.hasOwnProperty(I)){var k=g[I];if(k(c))return!0}return!1}throw new Error("Invalid locale '".concat(S,"'"))}e.exports=t.default,e.exports.default=t.default})(A_,A_.exports);var dD=A_.exports,C_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=I;var s=u(Xe);function u(k){return k&&k.__esModule?k:{default:k}}var d=8,g=14,p=/^(\d{8}|\d{13}|\d{14})$/;function c(k,R){return k===d||k===g?R%2===0?3:1:R%2===0?1:3}function S(k){var R=k.slice(0,-1).split("").map(function(ue,ie){return Number(ue)*c(k.length,ie)}).reduce(function(ue,ie){return ue+ie},0),z=10-R%10;return z<10?z:0}function I(k){(0,s.default)(k);var R=Number(k.slice(-1));return p.test(k)&&R===S(k)}e.exports=t.default,e.exports.default=t.default})(C_,C_.exports);var fD=C_.exports,T_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;function g(p){if((0,s.default)(p),!d.test(p))return!1;for(var c=!0,S=0,I=p.length-2;I>=0;I--)if(p[I]>="A"&&p[I]<="Z")for(var k=p[I].charCodeAt(0)-55,R=k%10,z=Math.trunc(k/10),ue=0,ie=[R,z];ue<ie.length;ue++){var q=ie[ue];c?q>=5?S+=1+(q-5)*2:S+=q*2:S+=q,c=!c}else{var ae=p[I].charCodeAt(0)-48;c?ae>=5?S+=1+(ae-5)*2:S+=ae*2:S+=ae,c=!c}var G=Math.trunc((S+9)/10)*10-S;return+p[p.length-1]===G}e.exports=t.default,e.exports.default=t.default})(T_,T_.exports);var pD=T_.exports,I_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=u(Xe);function u(S){return S&&S.__esModule?S:{default:S}}var d=/^(?:[0-9]{9}X|[0-9]{10})$/,g=/^(?:[0-9]{13})$/,p=[1,3];function c(S,I){(0,s.default)(S);var k=String((I==null?void 0:I.version)||I);if(!(I!=null&&I.version||I))return c(S,{version:10})||c(S,{version:13});var R=S.replace(/[\s-]+/g,""),z=0;if(k==="10"){if(!d.test(R))return!1;for(var ue=0;ue<k-1;ue++)z+=(ue+1)*R.charAt(ue);if(R.charAt(9)==="X"?z+=10*10:z+=10*R.charAt(9),z%11===0)return!0}else if(k==="13"){if(!g.test(R))return!1;for(var ie=0;ie<12;ie++)z+=p[ie%2]*R.charAt(ie);if(R.charAt(12)-(10-z%10)%10===0)return!0}return!1}e.exports=t.default,e.exports.default=t.default})(I_,I_.exports);var mD=I_.exports,P_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d="^\\d{4}-?\\d{3}[\\dX]$";function g(p){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,s.default)(p);var S=d;if(S=c.require_hyphen?S.replace("?",""):S,S=c.case_sensitive?new RegExp(S):new RegExp(S,"i"),!S.test(p))return!1;for(var I=p.replace("-","").toUpperCase(),k=0,R=0;R<I.length;R++){var z=I[R];k+=(z==="X"?10:+z)*(8-R)}return k%11===0}e.exports=t.default,e.exports.default=t.default})(P_,P_.exports);var gD=P_.exports,M_={exports:{}},Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.iso7064Check=yD;Wo.luhnCheck=_D;Wo.reverseMultiplyAndSum=vD;Wo.verhoeffCheck=xD;function yD(e){for(var t=10,s=0;s<e.length-1;s++)t=(parseInt(e[s],10)+t)%10===0?10*2%11:(parseInt(e[s],10)+t)%10*2%11;return t=t===1?0:11-t,t===parseInt(e[10],10)}function _D(e){for(var t=0,s=!1,u=e.length-1;u>=0;u--){if(s){var d=parseInt(e[u],10)*2;d>9?t+=d.toString().split("").map(function(g){return parseInt(g,10)}).reduce(function(g,p){return g+p},0):t+=d}else t+=parseInt(e[u],10);s=!s}return t%10===0}function vD(e,t){for(var s=0,u=0;u<e.length;u++)s+=e[u]*(t-u);return s}function xD(e){for(var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],s=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],u=e.split("").reverse().join(""),d=0,g=0;g<u.length;g++)d=t[d][s[g%8][parseInt(u[g],10)]];return d===0}(function(e,t){function s(oe){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},s(oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=Ie;var u=S(Xe),d=c(Wo),g=S(KS);function p(oe){if(typeof WeakMap!="function")return null;var de=new WeakMap,ve=new WeakMap;return(p=function(Ve){return Ve?ve:de})(oe)}function c(oe,de){if(!de&&oe&&oe.__esModule)return oe;if(oe===null||s(oe)!="object"&&typeof oe!="function")return{default:oe};var ve=p(de);if(ve&&ve.has(oe))return ve.get(oe);var $e={__proto__:null},Ve=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var qe in oe)if(qe!=="default"&&{}.hasOwnProperty.call(oe,qe)){var _t=Ve?Object.getOwnPropertyDescriptor(oe,qe):null;_t&&(_t.get||_t.set)?Object.defineProperty($e,qe,_t):$e[qe]=oe[qe]}return $e.default=oe,ve&&ve.set(oe,$e),$e}function S(oe){return oe&&oe.__esModule?oe:{default:oe}}function I(oe){return ue(oe)||z(oe)||R(oe)||k()}function k(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(oe,de){if(oe){if(typeof oe=="string")return ie(oe,de);var ve=Object.prototype.toString.call(oe).slice(8,-1);if(ve==="Object"&&oe.constructor&&(ve=oe.constructor.name),ve==="Map"||ve==="Set")return Array.from(oe);if(ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve))return ie(oe,de)}}function z(oe){if(typeof Symbol<"u"&&oe[Symbol.iterator]!=null||oe["@@iterator"]!=null)return Array.from(oe)}function ue(oe){if(Array.isArray(oe))return ie(oe)}function ie(oe,de){(de==null||de>oe.length)&&(de=oe.length);for(var ve=0,$e=new Array(de);ve<de;ve++)$e[ve]=oe[ve];return $e}function q(oe){var de=oe.slice(0,2),ve=parseInt(oe.slice(2,4),10);ve>40?(ve-=40,de="20".concat(de)):ve>20?(ve-=20,de="18".concat(de)):de="19".concat(de),ve<10&&(ve="0".concat(ve));var $e="".concat(de,"/").concat(ve,"/").concat(oe.slice(4,6));if(!(0,g.default)($e,"YYYY/MM/DD"))return!1;for(var Ve=oe.split("").map(function($t){return parseInt($t,10)}),qe=[2,4,8,5,10,9,7,3,6],_t=0,kt=0;kt<qe.length;kt++)_t+=Ve[kt]*qe[kt];return _t=_t%11===10?0:_t%11,_t===Ve[9]}function ae(oe){var de=oe.split(""),ve=de.filter(function(Ve,qe){return qe%2}).map(function(Ve){return Number(Ve)*2}).join("").split(""),$e=de.filter(function(Ve,qe){return!(qe%2)}).concat(ve).map(function(Ve){return Number(Ve)}).reduce(function(Ve,qe){return Ve+qe});return $e%10===0}function G(oe){oe=oe.replace(/\W/,"");var de=parseInt(oe.slice(0,2),10);if(oe.length===10)de<54?de="20".concat(de):de="19".concat(de);else{if(oe.slice(6)==="000")return!1;if(de<54)de="19".concat(de);else return!1}de.length===3&&(de=[de.slice(0,2),"0",de.slice(2)].join(""));var ve=parseInt(oe.slice(2,4),10);if(ve>50&&(ve-=50),ve>20){if(parseInt(de,10)<2004)return!1;ve-=20}ve<10&&(ve="0".concat(ve));var $e="".concat(de,"/").concat(ve,"/").concat(oe.slice(4,6));if(!(0,g.default)($e,"YYYY/MM/DD"))return!1;if(oe.length===10&&parseInt(oe,10)%11!==0){var Ve=parseInt(oe.slice(0,9),10)%11;if(parseInt(de,10)<1986&&Ve===10){if(parseInt(oe.slice(9),10)!==0)return!1}else return!1}return!0}function N(oe){return d.luhnCheck(oe)}function H(oe){for(var de=oe.split("").map(function($t){return parseInt($t,10)}),ve=[],$e=0;$e<de.length-1;$e++){ve.push("");for(var Ve=0;Ve<de.length-1;Ve++)de[$e]===de[Ve]&&(ve[$e]+=Ve)}if(ve=ve.filter(function($t){return $t.length>1}),ve.length!==2&&ve.length!==3)return!1;if(ve[0].length===3){for(var qe=ve[0].split("").map(function($t){return parseInt($t,10)}),_t=0,kt=0;kt<qe.length-1;kt++)qe[kt]+1===qe[kt+1]&&(_t+=1);if(_t===2)return!1}return d.iso7064Check(oe)}function re(oe){oe=oe.replace(/\W/,"");var de=parseInt(oe.slice(4,6),10),ve=oe.slice(6,7);switch(ve){case"0":case"1":case"2":case"3":de="19".concat(de);break;case"4":case"9":de<37?de="20".concat(de):de="19".concat(de);break;default:if(de<37)de="20".concat(de);else if(de>58)de="18".concat(de);else return!1;break}de.length===3&&(de=[de.slice(0,2),"0",de.slice(2)].join(""));var $e="".concat(de,"/").concat(oe.slice(2,4),"/").concat(oe.slice(0,2));if(!(0,g.default)($e,"YYYY/MM/DD"))return!1;for(var Ve=oe.split("").map(function($t){return parseInt($t,10)}),qe=0,_t=4,kt=0;kt<9;kt++)qe+=Ve[kt]*_t,_t-=1,_t===1&&(_t=7);return qe%=11,qe===1?!1:qe===0?Ve[9]===0:Ve[9]===11-qe}function be(oe){for(var de=oe.slice(0,8).split("").map(function(qe){return parseInt(qe,10)}),ve=0,$e=1;$e<de.length;$e+=2)ve+=de[$e];for(var Ve=0;Ve<de.length;Ve+=2)de[Ve]<2?ve+=1-de[Ve]:(ve+=2*(de[Ve]-2)+5,de[Ve]>4&&(ve+=2));return String.fromCharCode(ve%26+65)===oe.charAt(8)}function Pe(oe){for(var de=oe.split("").map(function(Ve){return parseInt(Ve,10)}),ve=0,$e=0;$e<8;$e++)ve+=de[$e]*Math.pow(2,8-$e);return ve%11%10===de[8]}function Te(oe){var de=d.reverseMultiplyAndSum(oe.split("").slice(0,7).map(function(ve){return parseInt(ve,10)}),8);return oe.length===9&&oe[8]!=="W"&&(de+=(oe[8].charCodeAt(0)-64)*9),de%=23,de===0?oe[7].toUpperCase()==="W":oe[7].toUpperCase()===String.fromCharCode(64+de)}var Oe={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function at(){var oe=[];for(var de in Oe)Oe.hasOwnProperty(de)&&oe.push.apply(oe,I(Oe[de]));return oe}function rt(oe){return at().indexOf(oe.slice(0,2))!==-1}function Et(oe){for(var de=0,ve=oe.split(""),$e=parseInt(ve.pop(),10),Ve=0;Ve<ve.length;Ve++)de+=ve[9-Ve]*(2+Ve%6);var qe=11-de%11;return qe===11?qe=0:qe===10&&(qe=9),$e===qe}function Dt(oe){var de=oe.toUpperCase().split("");if(isNaN(parseInt(de[0],10))&&de.length>1){var ve=0;switch(de[0]){case"Y":ve=1;break;case"Z":ve=2;break}de.splice(0,1,ve)}else for(;de.length<9;)de.unshift(0);var $e=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"];de=de.join("");var Ve=parseInt(de.slice(0,8),10)%23;return de[8]===$e[Ve]}function Gt(oe){var de=oe.slice(1,3),ve=oe.slice(0,1);switch(ve){case"1":case"2":de="18".concat(de);break;case"3":case"4":de="19".concat(de);break;default:de="20".concat(de);break}var $e="".concat(de,"/").concat(oe.slice(3,5),"/").concat(oe.slice(5,7));if(!(0,g.default)($e,"YYYY/MM/DD"))return!1;for(var Ve=oe.split("").map(function(Qt){return parseInt(Qt,10)}),qe=0,_t=1,kt=0;kt<10;kt++)qe+=Ve[kt]*_t,_t+=1,_t===10&&(_t=1);if(qe%11===10){qe=0,_t=3;for(var $t=0;$t<10;$t++)qe+=Ve[$t]*_t,_t+=1,_t===10&&(_t=1);if(qe%11===10)return Ve[10]===0}return qe%11===Ve[10]}function nr(oe){var de=oe.slice(4,6),ve=oe.slice(6,7);switch(ve){case"+":de="18".concat(de);break;case"-":de="19".concat(de);break;default:de="20".concat(de);break}var $e="".concat(de,"/").concat(oe.slice(2,4),"/").concat(oe.slice(0,2));if(!(0,g.default)($e,"YYYY/MM/DD"))return!1;var Ve=parseInt(oe.slice(0,6)+oe.slice(7,10),10)%31;if(Ve<10)return Ve===parseInt(oe.slice(10),10);Ve-=10;var qe=["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return qe[Ve]===oe.slice(10)}function or(oe){if(oe.slice(2,4)!=="00"||oe.slice(4,6)!=="00"){var de="".concat(oe.slice(0,2),"/").concat(oe.slice(2,4),"/").concat(oe.slice(4,6));if(!(0,g.default)(de,"YY/MM/DD"))return!1}var ve=97-parseInt(oe.slice(0,9),10)%97,$e=parseInt(oe.slice(9,11),10);return!(ve!==$e&&(ve=97-parseInt("2".concat(oe.slice(0,9)),10)%97,ve!==$e))}function ir(oe){oe=oe.replace(/\s/g,"");var de=parseInt(oe.slice(0,10),10)%511,ve=parseInt(oe.slice(10,13),10);return de===ve}function xn(oe){var de="".concat(oe.slice(0,4),"/").concat(oe.slice(4,6),"/").concat(oe.slice(6,8));return!(0,g.default)(de,"YYYY/MM/DD")||!d.luhnCheck(oe.slice(0,12))?!1:d.verhoeffCheck("".concat(oe.slice(0,11)).concat(oe[12]))}function et(oe){return d.iso7064Check(oe)}function bt(oe){for(var de=oe.split("").map(function(Ve){return parseInt(Ve,10)}),ve=8,$e=1;$e<9;$e++)ve+=de[$e]*($e+1);return ve%11===de[9]}function wt(oe){for(var de=!1,ve=!1,$e=0;$e<3;$e++)if(!de&&/[AEIOU]/.test(oe[$e]))de=!0;else if(!ve&&de&&oe[$e]==="X")ve=!0;else if($e>0&&(de&&!ve&&!/[AEIOU]/.test(oe[$e])||ve&&!/X/.test(oe[$e])))return!1;return!0}function Lt(oe){var de=oe.toUpperCase().split("");if(!wt(de.slice(0,3))||!wt(de.slice(3,6)))return!1;for(var ve=[6,7,9,10,12,13,14],$e={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},Ve=0,qe=ve;Ve<qe.length;Ve++){var _t=qe[Ve];de[_t]in $e&&de.splice(_t,1,$e[de[_t]])}var kt={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},$t=kt[de[8]],Qt=parseInt(de[9]+de[10],10);Qt>40&&(Qt-=40),Qt<10&&(Qt="0".concat(Qt));var kn="".concat(de[6]).concat(de[7],"/").concat($t,"/").concat(Qt);if(!(0,g.default)(kn,"YY/MM/DD"))return!1;for(var je=0,zr=1;zr<de.length-1;zr+=2){var Jr=parseInt(de[zr],10);isNaN(Jr)&&(Jr=de[zr].charCodeAt(0)-65),je+=Jr}for(var ki={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},yr=0;yr<de.length-1;yr+=2){var Ge=0;if(de[yr]in ki)Ge=ki[de[yr]];else{var At=parseInt(de[yr],10);Ge=2*At+1,At>4&&(Ge+=2)}je+=Ge}return String.fromCharCode(65+je%26)===de[15]}function jt(oe){oe=oe.replace(/\W/,"");var de=oe.slice(0,2);if(de!=="32"){var ve=oe.slice(2,4);if(ve!=="00"){var $e=oe.slice(4,6);switch(oe[6]){case"0":$e="18".concat($e);break;case"1":$e="19".concat($e);break;default:$e="20".concat($e);break}var Ve="".concat($e,"/").concat(oe.slice(2,4),"/").concat(de);if(!(0,g.default)(Ve,"YYYY/MM/DD"))return!1}for(var qe=1101,_t=[1,6,3,7,9,10,5,8,4,2],kt=0;kt<oe.length-1;kt++)qe-=parseInt(oe[kt],10)*_t[kt];return parseInt(oe[10],10)===qe%11}return!0}function Pt(oe){if(oe.length!==9){for(var de=oe.toUpperCase().split("");de.length<8;)de.unshift(0);switch(oe[7]){case"A":case"P":if(parseInt(de[6],10)===0)return!1;break;default:{var ve=parseInt(de.join("").slice(0,5),10);if(ve>32e3)return!1;var $e=parseInt(de.join("").slice(5,7),10);if(ve===$e)return!1}}}return!0}function Nt(oe){return d.reverseMultiplyAndSum(oe.split("").slice(0,8).map(function(de){return parseInt(de,10)}),9)%11===parseInt(oe[8],10)}function Pn(oe){if(oe.length===10){for(var de=[6,5,7,2,3,4,5,6,7],ve=0,$e=0;$e<de.length;$e++)ve+=parseInt(oe[$e],10)*de[$e];return ve%=11,ve===10?!1:ve===parseInt(oe[9],10)}var Ve=oe.slice(0,2),qe=parseInt(oe.slice(2,4),10);qe>80?(Ve="18".concat(Ve),qe-=80):qe>60?(Ve="22".concat(Ve),qe-=60):qe>40?(Ve="21".concat(Ve),qe-=40):qe>20?(Ve="20".concat(Ve),qe-=20):Ve="19".concat(Ve),qe<10&&(qe="0".concat(qe));var _t="".concat(Ve,"/").concat(qe,"/").concat(oe.slice(4,6));if(!(0,g.default)(_t,"YYYY/MM/DD"))return!1;for(var kt=0,$t=1,Qt=0;Qt<oe.length-1;Qt++)kt+=parseInt(oe[Qt],10)*$t%10,$t+=2,$t>10?$t=1:$t===5&&($t+=2);return kt=10-kt%10,kt===parseInt(oe[10],10)}function Rr(oe){if(oe.length===11){var de,ve;if(de=0,oe==="11111111111"||oe==="22222222222"||oe==="33333333333"||oe==="44444444444"||oe==="55555555555"||oe==="66666666666"||oe==="77777777777"||oe==="88888888888"||oe==="99999999999"||oe==="00000000000")return!1;for(var $e=1;$e<=9;$e++)de+=parseInt(oe.substring($e-1,$e),10)*(11-$e);if(ve=de*10%11,ve===10&&(ve=0),ve!==parseInt(oe.substring(9,10),10))return!1;de=0;for(var Ve=1;Ve<=10;Ve++)de+=parseInt(oe.substring(Ve-1,Ve),10)*(12-Ve);return ve=de*10%11,ve===10&&(ve=0),ve===parseInt(oe.substring(10,11),10)}if(oe==="00000000000000"||oe==="11111111111111"||oe==="22222222222222"||oe==="33333333333333"||oe==="44444444444444"||oe==="55555555555555"||oe==="66666666666666"||oe==="77777777777777"||oe==="88888888888888"||oe==="99999999999999")return!1;for(var qe=oe.length-2,_t=oe.substring(0,qe),kt=oe.substring(qe),$t=0,Qt=qe-7,kn=qe;kn>=1;kn--)$t+=_t.charAt(qe-kn)*Qt,Qt-=1,Qt<2&&(Qt=9);var je=$t%11<2?0:11-$t%11;if(je!==parseInt(kt.charAt(0),10))return!1;qe+=1,_t=oe.substring(0,qe),$t=0,Qt=qe-7;for(var zr=qe;zr>=1;zr--)$t+=_t.charAt(qe-zr)*Qt,Qt-=1,Qt<2&&(Qt=9);return je=$t%11<2?0:11-$t%11,je===parseInt(kt.charAt(1),10)}function Wr(oe){var de=11-d.reverseMultiplyAndSum(oe.split("").slice(0,8).map(function(ve){return parseInt(ve,10)}),9)%11;return de>9?parseInt(oe[8],10)===0:de===parseInt(oe[8],10)}function Mn(oe){if(oe.slice(0,4)!=="9000"){var de=oe.slice(1,3);switch(oe[0]){case"1":case"2":de="19".concat(de);break;case"3":case"4":de="18".concat(de);break;case"5":case"6":de="20".concat(de);break}var ve="".concat(de,"/").concat(oe.slice(3,5),"/").concat(oe.slice(5,7));if(ve.length===8){if(!(0,g.default)(ve,"YY/MM/DD"))return!1}else if(!(0,g.default)(ve,"YYYY/MM/DD"))return!1;for(var $e=oe.split("").map(function(kt){return parseInt(kt,10)}),Ve=[2,7,9,1,4,6,3,5,8,2,7,9],qe=0,_t=0;_t<Ve.length;_t++)qe+=$e[_t]*Ve[_t];return qe%11===10?$e[12]===1:$e[12]===qe%11}return!0}function qi(oe){if(oe.length===9){if(oe=oe.replace(/\W/,""),oe.slice(6)==="000")return!1;var de=parseInt(oe.slice(0,2),10);if(de>53)return!1;de<10?de="190".concat(de):de="19".concat(de);var ve=parseInt(oe.slice(2,4),10);ve>50&&(ve-=50),ve<10&&(ve="0".concat(ve));var $e="".concat(de,"/").concat(ve,"/").concat(oe.slice(4,6));if(!(0,g.default)($e,"YYYY/MM/DD"))return!1}return!0}function ri(oe){var de=11-d.reverseMultiplyAndSum(oe.split("").slice(0,7).map(function(ve){return parseInt(ve,10)}),8)%11;return de===10?parseInt(oe[7],10)===0:de===parseInt(oe[7],10)}function Ca(oe){var de=oe.slice(0);oe.length>11&&(de=de.slice(2));var ve="",$e=de.slice(2,4),Ve=parseInt(de.slice(4,6),10);if(oe.length>11)ve=oe.slice(0,4);else if(ve=oe.slice(0,2),oe.length===11&&Ve<60){var qe=new Date().getFullYear().toString(),_t=parseInt(qe.slice(0,2),10);if(qe=parseInt(qe,10),oe[6]==="-")parseInt("".concat(_t).concat(ve),10)>qe?ve="".concat(_t-1).concat(ve):ve="".concat(_t).concat(ve);else if(ve="".concat(_t-1).concat(ve),qe-parseInt(ve,10)<100)return!1}Ve>60&&(Ve-=60),Ve<10&&(Ve="0".concat(Ve));var kt="".concat(ve,"/").concat($e,"/").concat(Ve);if(kt.length===8){if(!(0,g.default)(kt,"YY/MM/DD"))return!1}else if(!(0,g.default)(kt,"YYYY/MM/DD"))return!1;return d.luhnCheck(oe.replace(/\W/,""))}function gi(oe){for(var de=oe.split("").map(function(qe){return parseInt(qe,10)}),ve=[-1,5,7,9,4,6,10,5,7],$e=0,Ve=0;Ve<ve.length;Ve++)$e+=de[Ve]*ve[Ve];return $e%11===10?de[9]===0:de[9]===$e%11}var Dr={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};Dr["lb-LU"]=Dr["fr-LU"],Dr["lt-LT"]=Dr["et-EE"],Dr["nl-BE"]=Dr["fr-BE"],Dr["fr-CA"]=Dr["en-CA"];var Lr={"bg-BG":q,"cs-CZ":G,"de-AT":N,"de-DE":H,"dk-DK":re,"el-CY":be,"el-GR":Pe,"en-CA":ae,"en-IE":Te,"en-US":rt,"es-AR":Et,"es-ES":Dt,"et-EE":Gt,"fi-FI":nr,"fr-BE":or,"fr-FR":ir,"fr-LU":xn,"hr-HR":et,"hu-HU":bt,"it-IT":Lt,"lv-LV":jt,"mt-MT":Pt,"nl-NL":Nt,"pl-PL":Pn,"pt-BR":Rr,"pt-PT":Wr,"ro-RO":Mn,"sk-SK":qi,"sl-SI":ri,"sv-SE":Ca,"uk-UA":gi};Lr["lb-LU"]=Lr["fr-LU"],Lr["lt-LT"]=Lr["et-EE"],Lr["nl-BE"]=Lr["fr-BE"],Lr["fr-CA"]=Lr["en-CA"];var gr=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,Zn={"de-AT":gr,"de-DE":/[\/\\]/g,"fr-BE":gr};Zn["nl-BE"]=Zn["fr-BE"];function Ie(oe){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US";(0,u.default)(oe);var ve=oe.slice(0);if(de in Dr)return de in Zn&&(ve=ve.replace(Zn[de],"")),Dr[de].test(ve)?de in Lr?Lr[de](ve):!0:!1;throw new Error("Invalid locale '".concat(de,"'"))}e.exports=t.default,e.exports.default=t.default})(M_,M_.exports);var wD=M_.exports,Ph={};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.default=ED;Ph.locales=void 0;var bD=SD(Xe);function SD(e){return e&&e.__esModule?e:{default:e}}var Mr={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};Mr["en-CA"]=Mr["en-US"];Mr["fr-CA"]=Mr["en-CA"];Mr["fr-BE"]=Mr["nl-BE"];Mr["zh-HK"]=Mr["en-HK"];Mr["zh-MO"]=Mr["en-MO"];Mr["ga-IE"]=Mr["en-IE"];Mr["fr-CH"]=Mr["de-CH"];Mr["it-CH"]=Mr["fr-CH"];function ED(e,t,s){if((0,bD.default)(e),s&&s.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some(function(g){if(Mr.hasOwnProperty(g)){var p=Mr[g];if(p.test(e))return!0}return!1});if(t in Mr)return Mr[t].test(e);if(!t||t==="any"){for(var u in Mr)if(Mr.hasOwnProperty(u)){var d=Mr[u];if(d.test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))}Ph.locales=Object.keys(Mr);var k_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^(0x)[0-9a-f]{40}$/i;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(k_,k_.exports);var AD=k_.exports,R_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=d(mi),u=d(Xe);function d(S){return S&&S.__esModule?S:{default:S}}function g(S){var I="\\d{".concat(S.digits_after_decimal[0],"}");S.digits_after_decimal.forEach(function(N,H){H!==0&&(I="".concat(I,"|\\d{").concat(N,"}"))});var k="(".concat(S.symbol.replace(/\W/,function(N){return"\\".concat(N)}),")").concat(S.require_symbol?"":"?"),R="-?",z="[1-9]\\d*",ue="[1-9]\\d{0,2}(\\".concat(S.thousands_separator,"\\d{3})*"),ie=["0",z,ue],q="(".concat(ie.join("|"),")?"),ae="(\\".concat(S.decimal_separator,"(").concat(I,"))").concat(S.require_decimal?"":"?"),G=q+(S.allow_decimal||S.require_decimal?ae:"");return S.allow_negatives&&!S.parens_for_negatives&&(S.negative_sign_after_digits?G+=R:S.negative_sign_before_digits&&(G=R+G)),S.allow_negative_sign_placeholder?G="( (?!\\-))?".concat(G):S.allow_space_after_symbol?G=" ?".concat(G):S.allow_space_after_digits&&(G+="( (?!$))?"),S.symbol_after_digits?G+=k:G=k+G,S.allow_negatives&&(S.parens_for_negatives?G="(\\(".concat(G,"\\)|").concat(G,")"):S.negative_sign_before_digits||S.negative_sign_after_digits||(G=R+G)),new RegExp("^(?!-? )(?=.*\\d)".concat(G,"$"))}var p={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};function c(S,I){return(0,u.default)(S),I=(0,s.default)(I,p),g(I).test(S)}e.exports=t.default,e.exports.default=t.default})(R_,R_.exports);var CD=R_.exports,D_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var s=u(Xe);function u(c){return c&&c.__esModule?c:{default:c}}var d=/^(bc1)[a-z0-9]{25,39}$/,g=/^(1|3)[A-HJ-NP-Za-km-z1-9]{25,39}$/;function p(c){return(0,s.default)(c),d.test(c)||g.test(c)}e.exports=t.default,e.exports.default=t.default})(D_,D_.exports);var TD=D_.exports,Mh={};Object.defineProperty(Mh,"__esModule",{value:!0});Mh.isFreightContainerID=void 0;Mh.isISO6346=eE;var ID=PD(Xe);function PD(e){return e&&e.__esModule?e:{default:e}}var MD=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,kD=/^[0-9]$/;function eE(e){if((0,ID.default)(e),e=e.toUpperCase(),!MD.test(e))return!1;if(e.length===11){for(var t=0,s=0;s<e.length-1;s++)if(kD.test(e[s]))t+=e[s]*Math.pow(2,s);else{var u=void 0,d=e.charCodeAt(s)-55;d<11?u=d:d>=11&&d<=20?u=12+d%11:d>=21&&d<=30?u=23+d%21:u=34+d%31,t+=u*Math.pow(2,s)}var g=t%11;return Number(e[e.length-1])===g}return!0}Mh.isFreightContainerID=eE;var L_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);function g(p){return(0,s.default)(p),d.has(p)}e.exports=t.default,e.exports.default=t.default})(L_,L_.exports);var RD=L_.exports,z_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=u(Xe);function u(S){return S&&S.__esModule?S:{default:S}}var d=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,g=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,p=function(I){var k=I.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(k){var R=Number(k[1]),z=Number(k[2]);return R%4===0&&R%100!==0||R%400===0?z<=366:z<=365}var ue=I.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),ie=ue[1],q=ue[2],ae=ue[3],G=q&&"0".concat(q).slice(-2),N=ae&&"0".concat(ae).slice(-2),H=new Date("".concat(ie,"-").concat(G||"01","-").concat(N||"01"));return q&&ae?H.getUTCFullYear()===ie&&H.getUTCMonth()+1===q&&H.getUTCDate()===ae:!0};function c(S){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,s.default)(S);var k=I.strictSeparator?g.test(S):d.test(S);return k&&I.strict?p(S):k}e.exports=t.default,e.exports.default=t.default})(z_,z_.exports);var DD=z_.exports,F_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=G;var s=u(Xe);function u(N){return N&&N.__esModule?N:{default:N}}var d=/[0-9]{4}/,g=/(0[1-9]|1[0-2])/,p=/([12]\d|0[1-9]|3[01])/,c=/([01][0-9]|2[0-3])/,S=/[0-5][0-9]/,I=/([0-5][0-9]|60)/,k=/(\.[0-9]+)?/,R=new RegExp("[-+]".concat(c.source,":").concat(S.source)),z=new RegExp("([zZ]|".concat(R.source,")")),ue=new RegExp("".concat(c.source,":").concat(S.source,":").concat(I.source).concat(k.source)),ie=new RegExp("".concat(d.source,"-").concat(g.source,"-").concat(p.source)),q=new RegExp("".concat(ue.source).concat(z.source)),ae=new RegExp("^".concat(ie.source,"[ tT]").concat(q.source,"$"));function G(N){return(0,s.default)(N),ae.test(N)}e.exports=t.default,e.exports.default=t.default})(F_,F_.exports);var LD=F_.exports,B_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);function g(p){return(0,s.default)(p),d.has(p.toUpperCase())}e.exports=t.default,e.exports.default=t.default})(B_,B_.exports);var zD=B_.exports,kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.CurrencyCodes=void 0;kh.default=OD;var FD=BD(Xe);function BD(e){return e&&e.__esModule?e:{default:e}}var tE=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);function OD(e){return(0,FD.default)(e),tE.has(e.toUpperCase())}kh.CurrencyCodes=tE;var O_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var s=d(Xe),u=d(mi);function d(I){return I&&I.__esModule?I:{default:I}}var g=/^[A-Z2-7]+=*$/,p=/^[A-HJKMNP-TV-Z0-9]+$/,c={crockford:!1};function S(I,k){if((0,s.default)(I),k=(0,u.default)(k,c),k.crockford)return p.test(I);var R=I.length;return!!(R%8===0&&g.test(I))}e.exports=t.default,e.exports.default=t.default})(O_,O_.exports);var ND=O_.exports,N_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^[A-HJ-NP-Za-km-z1-9]*$/;function g(p){return(0,s.default)(p),!!d.test(p)}e.exports=t.default,e.exports.default=t.default})(N_,N_.exports);var $D=N_.exports,$_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=u(Xe);function u(S){return S&&S.__esModule?S:{default:S}}var d=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,g=/^[a-z\-]+=[a-z0-9\-]+$/i,p=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;function c(S){(0,s.default)(S);var I=S.split(",");if(I.length<2)return!1;var k=I.shift().trim().split(";"),R=k.shift();if(R.slice(0,5)!=="data:")return!1;var z=R.slice(5);if(z!==""&&!d.test(z))return!1;for(var ue=0;ue<k.length;ue++)if(!(ue===k.length-1&&k[ue].toLowerCase()==="base64")&&!g.test(k[ue]))return!1;for(var ie=0;ie<I.length;ie++)if(!p.test(I[ie]))return!1;return!0}e.exports=t.default,e.exports.default=t.default})($_,$_.exports);var UD=$_.exports,U_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function g(p){return(0,s.default)(p),p.indexOf("magnet:?")!==0?!1:d.test(p)}e.exports=t.default,e.exports.default=t.default})(U_,U_.exports);var VD=U_.exports,V_={exports:{}},j_={exports:{}},Z_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){if((0,s.default)(g),p){var c=new RegExp("[".concat(p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return g.replace(c,"")}for(var S=g.length-1;/\s/.test(g.charAt(S));)S-=1;return g.slice(0,S+1)}e.exports=t.default,e.exports.default=t.default})(Z_,Z_.exports);var rE=Z_.exports,H_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){(0,s.default)(g);var c=p?new RegExp("^[".concat(p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return g.replace(c,"")}e.exports=t.default,e.exports.default=t.default})(H_,H_.exports);var nE=H_.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=d(rE),u=d(nE);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,c){return(0,s.default)((0,u.default)(p,c),c)}e.exports=t.default,e.exports.default=t.default})(j_,j_.exports);var iE=j_.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=ie;var s=g(iE),u=g(WS),d=g(Xe);function g(q){return q&&q.__esModule?q:{default:q}}function p(q,ae){return I(q)||S(q,ae)||R(q,ae)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(q,ae){var G=q==null?null:typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(G!=null){var N,H,re,be,Pe=[],Te=!0,Oe=!1;try{if(re=(G=G.call(q)).next,ae===0){if(Object(G)!==G)return;Te=!1}else for(;!(Te=(N=re.call(G)).done)&&(Pe.push(N.value),Pe.length!==ae);Te=!0);}catch(at){Oe=!0,H=at}finally{try{if(!Te&&G.return!=null&&(be=G.return(),Object(be)!==be))return}finally{if(Oe)throw H}}return Pe}}function I(q){if(Array.isArray(q))return q}function k(q,ae){var G=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!G){if(Array.isArray(q)||(G=R(q))||ae&&q&&typeof q.length=="number"){G&&(q=G);var N=0,H=function(){};return{s:H,n:function(){return N>=q.length?{done:!0}:{done:!1,value:q[N++]}},e:function(Oe){throw Oe},f:H}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,be=!1,Pe;return{s:function(){G=G.call(q)},n:function(){var Oe=G.next();return re=Oe.done,Oe},e:function(Oe){be=!0,Pe=Oe},f:function(){try{!re&&G.return!=null&&G.return()}finally{if(be)throw Pe}}}}function R(q,ae){if(q){if(typeof q=="string")return z(q,ae);var G=Object.prototype.toString.call(q).slice(8,-1);if(G==="Object"&&q.constructor&&(G=q.constructor.name),G==="Map"||G==="Set")return Array.from(q);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return z(q,ae)}}function z(q,ae){(ae==null||ae>q.length)&&(ae=q.length);for(var G=0,N=new Array(ae);G<ae;G++)N[G]=q[G];return N}function ue(q){var ae=new Set(["subject","body","cc","bcc"]),G={cc:"",bcc:""},N=!1,H=q.split("&");if(H.length>4)return!1;var re=k(H),be;try{for(re.s();!(be=re.n()).done;){var Pe=be.value,Te=Pe.split("="),Oe=p(Te,2),at=Oe[0],rt=Oe[1];if(at&&!ae.has(at)){N=!0;break}rt&&(at==="cc"||at==="bcc")&&(G[at]=rt),at&&ae.delete(at)}}catch(Et){re.e(Et)}finally{re.f()}return N?!1:G}function ie(q,ae){if((0,d.default)(q),q.indexOf("mailto:")!==0)return!1;var G=q.replace("mailto:","").split("?"),N=p(G,2),H=N[0],re=N[1],be=re===void 0?"":re;if(!H&&!be)return!0;var Pe=ue(be);return Pe?"".concat(H,",").concat(Pe.cc,",").concat(Pe.bcc).split(",").every(function(Te){return Te=(0,s.default)(Te," "),Te?(0,u.default)(Te,ae):!0}):!1}e.exports=t.default,e.exports.default=t.default})(V_,V_.exports);var jD=V_.exports,G_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var s=u(Xe);function u(S){return S&&S.__esModule?S:{default:S}}var d=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,g=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,p=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;function c(S){return(0,s.default)(S),d.test(S)||g.test(S)||p.test(S)}e.exports=t.default,e.exports.default=t.default})(G_,G_.exports);var ZD=G_.exports,q_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=k;var s=d(Xe),u=d(mi);function d(R){return R&&R.__esModule?R:{default:R}}var g=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,p=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,c=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,S=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,I={checkDMS:!1};function k(R,z){if((0,s.default)(R),z=(0,u.default)(z,I),!R.includes(","))return!1;var ue=R.split(",");return ue[0].startsWith("(")&&!ue[1].endsWith(")")||ue[1].endsWith(")")&&!ue[0].startsWith("(")?!1:z.checkDMS?c.test(ue[0])&&S.test(ue[1]):g.test(ue[0])&&p.test(ue[1])}e.exports=t.default,e.exports.default=t.default})(q_,q_.exports);var HD=q_.exports,Rh={};Object.defineProperty(Rh,"__esModule",{value:!0});Rh.default=WD;Rh.locales=void 0;var GD=qD(Xe);function qD(e){return e&&e.__esModule?e:{default:e}}var Ow=/^\d{3}$/,$i=/^\d{4}$/,ui=/^\d{5}$/,fg=/^\d{6}$/,Hl={AD:/^AD\d{3}$/,AT:$i,AU:$i,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BE:$i,BG:$i,BR:/^\d{5}-\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:$i,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CZ:/^\d{3}\s?\d{2}$/,DE:ui,DK:$i,DO:ui,DZ:ui,EE:ui,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:ui,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:$i,ID:ui,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:Ow,IT:ui,JP:/^\d{3}\-\d{4}$/,KE:ui,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:$i,LV:/^LV\-\d{4}$/,LK:ui,MG:Ow,MX:ui,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:ui,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:$i,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:$i,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:fg,RU:fg,SA:ui,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:fg,SI:$i,SK:/^\d{3}\s?\d{2}$/,TH:ui,TN:$i,TW:/^\d{3}(\d{2})?$/,UA:ui,US:/^\d{5}(-\d{4})?$/,ZA:$i,ZM:ui};Rh.locales=Object.keys(Hl);function WD(e,t){if((0,GD.default)(e),t in Hl)return Hl[t].test(e);if(t==="any"){for(var s in Hl)if(Hl.hasOwnProperty(s)){var u=Hl[s];if(u.test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))}var W_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g),g.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}e.exports=t.default,e.exports.default=t.default})(W_,W_.exports);var KD=W_.exports,K_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return(0,s.default)(g),g.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")}e.exports=t.default,e.exports.default=t.default})(K_,K_.exports);var YD=K_.exports,Y_={exports:{}},X_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){return(0,s.default)(g),g.replace(new RegExp("[".concat(p,"]+"),"g"),"")}e.exports=t.default,e.exports.default=t.default})(X_,X_.exports);var aE=X_.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=d(Xe),u=d(aE);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,c){(0,s.default)(p);var S=c?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,u.default)(p,S)}e.exports=t.default,e.exports.default=t.default})(Y_,Y_.exports);var XD=Y_.exports,J_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){return(0,s.default)(g),g.replace(new RegExp("[^".concat(p,"]+"),"g"),"")}e.exports=t.default,e.exports.default=t.default})(J_,J_.exports);var JD=J_.exports,Q_={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var s=u(Xe);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,p){(0,s.default)(g);for(var c=g.length-1;c>=0;c--)if(p.indexOf(g[c])===-1)return!1;return!0}e.exports=t.default,e.exports.default=t.default})(Q_,Q_.exports);var QD=Q_.exports,e0={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=k;var s=u(mi);function u(R){return R&&R.__esModule?R:{default:R}}var d={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},g=["icloud.com","me.com"],p=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],c=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],S=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function I(R){return R.length>1?R:""}function k(R,z){z=(0,s.default)(z,d);var ue=R.split("@"),ie=ue.pop(),q=ue.join("@"),ae=[q,ie];if(ae[1]=ae[1].toLowerCase(),ae[1]==="gmail.com"||ae[1]==="googlemail.com"){if(z.gmail_remove_subaddress&&(ae[0]=ae[0].split("+")[0]),z.gmail_remove_dots&&(ae[0]=ae[0].replace(/\.+/g,I)),!ae[0].length)return!1;(z.all_lowercase||z.gmail_lowercase)&&(ae[0]=ae[0].toLowerCase()),ae[1]=z.gmail_convert_googlemaildotcom?"gmail.com":ae[1]}else if(g.indexOf(ae[1])>=0){if(z.icloud_remove_subaddress&&(ae[0]=ae[0].split("+")[0]),!ae[0].length)return!1;(z.all_lowercase||z.icloud_lowercase)&&(ae[0]=ae[0].toLowerCase())}else if(p.indexOf(ae[1])>=0){if(z.outlookdotcom_remove_subaddress&&(ae[0]=ae[0].split("+")[0]),!ae[0].length)return!1;(z.all_lowercase||z.outlookdotcom_lowercase)&&(ae[0]=ae[0].toLowerCase())}else if(c.indexOf(ae[1])>=0){if(z.yahoo_remove_subaddress){var G=ae[0].split("-");ae[0]=G.length>1?G.slice(0,-1).join("-"):G[0]}if(!ae[0].length)return!1;(z.all_lowercase||z.yahoo_lowercase)&&(ae[0]=ae[0].toLowerCase())}else S.indexOf(ae[1])>=0?((z.all_lowercase||z.yandex_lowercase)&&(ae[0]=ae[0].toLowerCase()),ae[1]="yandex.ru"):z.all_lowercase&&(ae[0]=ae[0].toLowerCase());return ae.join("@")}e.exports=t.default,e.exports.default=t.default})(e0,e0.exports);var eL=e0.exports,t0={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;function g(p){return(0,s.default)(p),d.test(p)}e.exports=t.default,e.exports.default=t.default})(t0,t0.exports);var tL=t0.exports,r0={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var s=u(Xe);function u(p){return p&&p.__esModule?p:{default:p}}var d={"cs-CZ":function(c){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(c)},"de-DE":function(c){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|AÖ|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|BÖ|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|FÜ|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|GÖ|GP|GR|GS|GT|GÜ|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|LÖ|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|MÜ|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|NÖ|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|TÜ|ÜB|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|WÜ|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BÜD|BUL|BÜR|BÜS|BÜZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DÜW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FLÖ|FOR|FRG|FRI|FRW|FTL|FÜS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HMÜ|HOG|HOH|HOL|HOM|HOR|HÖS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JÜL|KEH|KEL|KEM|KIB|KLE|KLZ|KÖN|KÖT|KÖZ|KRU|KÜN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LÖB|LOS|LRO|LSZ|LÜN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MÜB|MÜR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|ÖHR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PLÖ|PRÜ|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RÜD|RÜG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SLÜ|SLZ|SMÜ|SOB|SOG|SOK|SÖM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SÜW|SWA|SZB|TBB|TDO|TET|TIR|TÖL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WÜM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(c)},"de-LI":function(c){return/^FL[- ]?\d{1,5}[UZ]?$/.test(c)},"en-IN":function(c){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(c)},"es-AR":function(c){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(c)},"fi-FI":function(c){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(c)},"hu-HU":function(c){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(c)},"pt-BR":function(c){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(c)},"pt-PT":function(c){return/^([A-Z]{2}|[0-9]{2})[ -·]?([A-Z]{2}|[0-9]{2})[ -·]?([A-Z]{2}|[0-9]{2})$/.test(c)},"sq-AL":function(c){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(c)},"sv-SE":function(c){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-ZÅÄÖ ]{2,7}$)/.test(c.trim())},"en-PK":function(c){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(c.trim())}};function g(p,c){if((0,s.default)(p),c in d)return d[c](p);if(c==="any"){for(var S in d){var I=d[S];if(I(p))return!0}return!1}throw new Error("Invalid locale '".concat(c,"'"))}e.exports=t.default,e.exports.default=t.default})(r0,r0.exports);var rL=r0.exports,n0={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=ue;var s=d(mi),u=d(Xe);function d(ie){return ie&&ie.__esModule?ie:{default:ie}}var g=/^[A-Z]$/,p=/^[a-z]$/,c=/^[0-9]$/,S=/^[-#!$@£%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,I={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function k(ie){var q={};return Array.from(ie).forEach(function(ae){var G=q[ae];G?q[ae]+=1:q[ae]=1}),q}function R(ie){var q=k(ie),ae={length:ie.length,uniqueChars:Object.keys(q).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(q).forEach(function(G){g.test(G)?ae.uppercaseCount+=q[G]:p.test(G)?ae.lowercaseCount+=q[G]:c.test(G)?ae.numberCount+=q[G]:S.test(G)&&(ae.symbolCount+=q[G])}),ae}function z(ie,q){var ae=0;return ae+=ie.uniqueChars*q.pointsPerUnique,ae+=(ie.length-ie.uniqueChars)*q.pointsPerRepeat,ie.lowercaseCount>0&&(ae+=q.pointsForContainingLower),ie.uppercaseCount>0&&(ae+=q.pointsForContainingUpper),ie.numberCount>0&&(ae+=q.pointsForContainingNumber),ie.symbolCount>0&&(ae+=q.pointsForContainingSymbol),ae}function ue(ie){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;(0,u.default)(ie);var ae=R(ie);return q=(0,s.default)(q||{},I),q.returnScore?z(ae,q):ae.length>=q.minLength&&ae.lowercaseCount>=q.minLowercase&&ae.uppercaseCount>=q.minUppercase&&ae.numberCount>=q.minNumbers&&ae.symbolCount>=q.minSymbols}e.exports=t.default,e.exports.default=t.default})(n0,n0.exports);var nL=n0.exports,Dh={};function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}Object.defineProperty(Dh,"__esModule",{value:!0});Dh.default=cL;Dh.vatMatchers=void 0;var Nw=sL(Xe),iL=aL(Wo);function sE(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,s=new WeakMap;return(sE=function(d){return d?s:t})(e)}function aL(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||i0(e)!="object"&&typeof e!="function")return{default:e};var s=sE(t);if(s&&s.has(e))return s.get(e);var u={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&{}.hasOwnProperty.call(e,g)){var p=d?Object.getOwnPropertyDescriptor(e,g):null;p&&(p.get||p.set)?Object.defineProperty(u,g,p):u[g]=e[g]}return u.default=e,s&&s.set(e,u),u}function sL(e){return e&&e.__esModule?e:{default:e}}var oL=function(t){var s=t.match(/^(AU)?(\d{11})$/);if(!s)return!1;var u=[10,1,3,5,7,9,11,13,15,17,19];t=t.replace(/^AU/,"");for(var d=(parseInt(t.slice(0,1),10)-1).toString()+t.slice(1),g=0,p=0;p<11;p++)g+=u[p]*d.charAt(p);return g!==0&&g%89===0},lL=function(t){var s=function(d){var g=d.pop(),p=[5,4,3,2,7,6,5,4],c=(11-d.reduce(function(S,I,k){return S+I*p[k]},0)%11)%11;return g===c};return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(t)&&s(t.match(/\d/g).map(function(u){return+u}))},uL=function(t){var s=t.match(/^(PT)?(\d{9})$/);if(!s)return!1;var u=s[2],d=11-iL.reverseMultiplyAndSum(u.split("").slice(0,8).map(function(g){return parseInt(g,10)}),9)%11;return d>9?parseInt(u[8],10)===0:d===parseInt(u[8],10)},$w=Dh.vatMatchers={AT:function(t){return/^(AT)?U\d{8}$/.test(t)},BE:function(t){return/^(BE)?\d{10}$/.test(t)},BG:function(t){return/^(BG)?\d{9,10}$/.test(t)},HR:function(t){return/^(HR)?\d{11}$/.test(t)},CY:function(t){return/^(CY)?\w{9}$/.test(t)},CZ:function(t){return/^(CZ)?\d{8,10}$/.test(t)},DK:function(t){return/^(DK)?\d{8}$/.test(t)},EE:function(t){return/^(EE)?\d{9}$/.test(t)},FI:function(t){return/^(FI)?\d{8}$/.test(t)},FR:function(t){return/^(FR)?\w{2}\d{9}$/.test(t)},DE:function(t){return/^(DE)?\d{9}$/.test(t)},EL:function(t){return/^(EL)?\d{9}$/.test(t)},HU:function(t){return/^(HU)?\d{8}$/.test(t)},IE:function(t){return/^(IE)?\d{7}\w{1}(W)?$/.test(t)},IT:function(t){return/^(IT)?\d{11}$/.test(t)},LV:function(t){return/^(LV)?\d{11}$/.test(t)},LT:function(t){return/^(LT)?\d{9,12}$/.test(t)},LU:function(t){return/^(LU)?\d{8}$/.test(t)},MT:function(t){return/^(MT)?\d{8}$/.test(t)},NL:function(t){return/^(NL)?\d{9}B\d{2}$/.test(t)},PL:function(t){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(t)},PT:uL,RO:function(t){return/^(RO)?\d{2,10}$/.test(t)},SK:function(t){return/^(SK)?\d{10}$/.test(t)},SI:function(t){return/^(SI)?\d{8}$/.test(t)},ES:function(t){return/^(ES)?\w\d{7}[A-Z]$/.test(t)},SE:function(t){return/^(SE)?\d{12}$/.test(t)},AL:function(t){return/^(AL)?\w{9}[A-Z]$/.test(t)},MK:function(t){return/^(MK)?\d{13}$/.test(t)},AU:oL,BY:function(t){return/^(УНП )?\d{9}$/.test(t)},CA:function(t){return/^(CA)?\d{9}$/.test(t)},IS:function(t){return/^(IS)?\d{5,6}$/.test(t)},IN:function(t){return/^(IN)?\d{15}$/.test(t)},ID:function(t){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(t)},IL:function(t){return/^(IL)?\d{9}$/.test(t)},KZ:function(t){return/^(KZ)?\d{12}$/.test(t)},NZ:function(t){return/^(NZ)?\d{9}$/.test(t)},NG:function(t){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(t)},NO:function(t){return/^(NO)?\d{9}MVA$/.test(t)},PH:function(t){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(t)},RU:function(t){return/^(RU)?(\d{10}|\d{12})$/.test(t)},SM:function(t){return/^(SM)?\d{5}$/.test(t)},SA:function(t){return/^(SA)?\d{15}$/.test(t)},RS:function(t){return/^(RS)?\d{9}$/.test(t)},CH:lL,TR:function(t){return/^(TR)?\d{10}$/.test(t)},UA:function(t){return/^(UA)?\d{12}$/.test(t)},GB:function(t){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(t)},UZ:function(t){return/^(UZ)?\d{9}$/.test(t)},AR:function(t){return/^(AR)?\d{11}$/.test(t)},BO:function(t){return/^(BO)?\d{7}$/.test(t)},BR:function(t){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(t)},CL:function(t){return/^(CL)?\d{8}-\d{1}$/.test(t)},CO:function(t){return/^(CO)?\d{10}$/.test(t)},CR:function(t){return/^(CR)?\d{9,12}$/.test(t)},EC:function(t){return/^(EC)?\d{13}$/.test(t)},SV:function(t){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(t)},GT:function(t){return/^(GT)?\d{7}-\d{1}$/.test(t)},HN:function(t){return/^(HN)?$/.test(t)},MX:function(t){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(t)},NI:function(t){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(t)},PA:function(t){return/^(PA)?$/.test(t)},PY:function(t){return/^(PY)?\d{6,8}-\d{1}$/.test(t)},PE:function(t){return/^(PE)?\d{11}$/.test(t)},DO:function(t){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(t)},UY:function(t){return/^(UY)?\d{12}$/.test(t)},VE:function(t){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(t)}};function cL(e,t){if((0,Nw.default)(e),(0,Nw.default)(t),t in $w)return $w[t](e);throw new Error("Invalid country code: '".concat(t,"'"))}(function(e,t){function s(lr){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(zt){return typeof zt}:function(zt){return zt&&typeof Symbol=="function"&&zt.constructor===Symbol&&zt!==Symbol.prototype?"symbol":typeof zt},s(lr)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=Ue(fv),d=Ue(HS),g=Ue(Jk),p=Ue(Qk),c=Ue(eR),S=Ue(tR),I=Ue(rR),k=Ue(WS),R=Ue(nR),z=Ue(iR),ue=Ue(Sp),ie=Ue(aR),q=Ue(pv),ae=Ue(KS),G=Ue(sR),N=Ue(oR),H=Ue(lR),re=Ue(uR),be=Or(Ch),Pe=Or(Th),Te=Ue(gR),Oe=Ue(yR),at=Ue(_R),rt=Ue(vR),Et=Ue(xR),Dt=Ue(wR),Gt=Ue(bR),nr=Ue(Cu),or=Ue(Tu),ir=Ue(kR),xn=Ue(RR),et=Ue(LR),bt=Ue(zR),wt=Ue(mv),Lt=Or(Au),jt=Ue(BR),Pt=Ue(YS),Nt=Ue(OR),Pn=Ue(NR),Rr=Ue($R),Wr=Ue(UR),Mn=Ue(VR),qi=Ue(jR),ri=Or(Ih),Ca=Ue(QR),gi=Ue(eD),Dr=Ue(tD),Lr=Ue(rD),gr=Ue(nD),Zn=Ue(iD),Ie=Ue(aD),oe=Ue(qS),de=Ue(sD),ve=Ue(oD),$e=Ue(lD),Ve=Ue(uD),qe=Ue(cD),_t=Ue(QS),kt=Ue(hD),$t=Ue(dD),Qt=Ue(fD),kn=Ue(pD),je=Ue(mD),zr=Ue(gD),Jr=Ue(wD),ki=Or(Ph),yr=Ue(AD),Ge=Ue(CD),At=Ue(TD),Ct=Mh,Cr=Ue(RD),yi=Ue(DD),Tt=Ue(LD),la=Ue(Iu),Fr=Ue(zD),te=Ue(kh),B=Ue(ND),$=Ue($D),Z=Ue(JS),X=Ue(UD),pe=Ue(VD),me=Ue(jD),_e=Ue(ZD),ce=Ue(HD),we=Or(Rh),ze=Ue(nE),Me=Ue(rE),Re=Ue(iE),ft=Ue(KD),mt=Ue(YD),It=Ue(XD),St=Ue(JD),Ut=Ue(aE),Yt=Ue(QD),ar=Ue(eL),Tr=Ue(tL),Mt=Ue(rL),pr=Ue(nL),Br=Ue(Dh);function hn(lr){if(typeof WeakMap!="function")return null;var zt=new WeakMap,Ri=new WeakMap;return(hn=function(gn){return gn?Ri:zt})(lr)}function Or(lr,zt){if(!zt&&lr&&lr.__esModule)return lr;if(lr===null||s(lr)!="object"&&typeof lr!="function")return{default:lr};var Ri=hn(zt);if(Ri&&Ri.has(lr))return Ri.get(lr);var Wi={__proto__:null},gn=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nr in lr)if(Nr!=="default"&&{}.hasOwnProperty.call(lr,Nr)){var Ki=gn?Object.getOwnPropertyDescriptor(lr,Nr):null;Ki&&(Ki.get||Ki.set)?Object.defineProperty(Wi,Nr,Ki):Wi[Nr]=lr[Nr]}return Wi.default=lr,Ri&&Ri.set(lr,Wi),Wi}function Ue(lr){return lr&&lr.__esModule?lr:{default:lr}}var _i="13.12.0",Ko={version:_i,toDate:u.default,toFloat:d.default,toInt:g.default,toBoolean:p.default,equals:c.default,contains:S.default,matches:I.default,isEmail:k.default,isURL:R.default,isMACAddress:z.default,isIP:ue.default,isIPRange:ie.default,isFQDN:q.default,isBoolean:N.default,isIBAN:ri.default,isBIC:Ca.default,isAbaRouting:re.default,isAlpha:be.default,isAlphaLocales:be.locales,isAlphanumeric:Pe.default,isAlphanumericLocales:Pe.locales,isNumeric:Te.default,isPassportNumber:Oe.default,isPort:at.default,isLowercase:rt.default,isUppercase:Et.default,isAscii:Gt.default,isFullWidth:nr.default,isHalfWidth:or.default,isVariableWidth:ir.default,isMultibyte:xn.default,isSemVer:et.default,isSurrogatePair:bt.default,isInt:wt.default,isIMEI:Dt.default,isFloat:Lt.default,isFloatLocales:Lt.locales,isDecimal:jt.default,isHexadecimal:Pt.default,isOctal:Nt.default,isDivisibleBy:Pn.default,isHexColor:Rr.default,isRgbColor:Wr.default,isHSL:Mn.default,isISRC:qi.default,isMD5:gi.default,isHash:Dr.default,isJWT:Lr.default,isJSON:gr.default,isEmpty:Zn.default,isLength:Ie.default,isLocale:H.default,isByteLength:oe.default,isUUID:de.default,isMongoId:ve.default,isAfter:$e.default,isBefore:Ve.default,isIn:qe.default,isLuhnNumber:_t.default,isCreditCard:kt.default,isIdentityCard:$t.default,isEAN:Qt.default,isISIN:kn.default,isISBN:je.default,isISSN:zr.default,isMobilePhone:ki.default,isMobilePhoneLocales:ki.locales,isPostalCode:we.default,isPostalCodeLocales:we.locales,isEthereumAddress:yr.default,isCurrency:Ge.default,isBtcAddress:At.default,isISO6346:Ct.isISO6346,isFreightContainerID:Ct.isFreightContainerID,isISO6391:Cr.default,isISO8601:yi.default,isRFC3339:Tt.default,isISO31661Alpha2:la.default,isISO31661Alpha3:Fr.default,isISO4217:te.default,isBase32:B.default,isBase58:$.default,isBase64:Z.default,isDataURI:X.default,isMagnetURI:pe.default,isMailtoURI:me.default,isMimeType:_e.default,isLatLong:ce.default,ltrim:ze.default,rtrim:Me.default,trim:Re.default,escape:ft.default,unescape:mt.default,stripLow:It.default,whitelist:St.default,blacklist:Ut.default,isWhitelisted:Yt.default,normalizeEmail:ar.default,toString,isSlug:Tr.default,isStrongPassword:pr.default,isTaxID:Jr.default,isDate:ae.default,isTime:G.default,isLicensePlate:Mt.default,isVAT:Br.default,ibanLocales:ri.locales};t.default=Ko,e.exports=t.default,e.exports.default=t.default})(yy,yy.exports);var hL=yy.exports;const dL=s0(hL),fL=()=>{const e=bu(),[t,s]=Ae.useState(""),[u,d]=Ae.useState(""),[g,p]=Ae.useState(""),c=async I=>{if(I.preventDefault(),d(""),!dL.isEmail(t)){d("Please enter a valid email address");return}try{const R=(await cn.post("https://aros-server-new.onrender.com/admin/login",{email:t,password:g})).data.data;console.log(R),localStorage.setItem("token",R.token),e("/home")}catch(k){k.response&&k.response.data&&k.response.data.message?d(k.response.data.message):d("An unknown error occurred. Please try again")}},S=()=>{alert("Please check your mail for the password reset link.")};return Y.jsx("div",{className:"bg-cover bg-center w-screen h-screen flex items-center justify-center",style:{backgroundImage:'url("../background.jpg")'},children:Y.jsx("div",{className:"w-full max-w-sm rounded-lg overflow-hidden p-2 shadow-lg backdrop-blur-3xl",children:Y.jsxs("div",{className:"bg-transparent opacity-0.5 rounded-lg p-10",children:[Y.jsx("div",{className:"flex justify-center items-center mb-6",children:Y.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-full mr-2"})}),Y.jsxs("form",{onSubmit:c,children:[Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"email",name:"email",id:"email",value:t,onChange:I=>s(I.target.value),placeholder:"Email",className:"w-full placeholder-white bg-transparent border-b border-gray-400 text-white py-2 px-1 focus:border-indigo-500 focus:outline-none input-field",required:!0})}),Y.jsxs("div",{className:"mb-4",children:[Y.jsx("input",{type:"password",name:"password",id:"password",value:g,onChange:I=>p(I.target.value),placeholder:"Password",className:"w-full placeholder-white bg-transparent border-b border-gray-400 text-white py-2 px-1 focus:border-indigo-500 focus:outline-none input-field",required:!0}),Y.jsx("button",{type:"button",onClick:S,className:"text-sm text-gray-300 hover:text-white mt-1 focus:outline-none",children:"Forgot Password?"})]}),u&&Y.jsx("p",{className:"text-red-500 text-xs italic box-border m-2",children:u}),Y.jsx("div",{className:"mt-6",children:Y.jsx("button",{type:"submit",style:{backdropFilter:"blur(2px)",transition:"background-color 0.5s ease"},className:"w-full py-3 px-6 border border-white rounded-md shadow-sm text-white bg-transparent hover:bg-indigo-500 hover:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Login"})})]})]})})})};function pL(){const e=bu();return Ae.useEffect(()=>{e("/home")},[e]),Y.jsxs("div",{children:[Y.jsx("h1",{children:"404 - Not Found"}),Y.jsx("p",{children:"Redirecting to the home page..."})]})}function mL(){const[e,t]=Ae.useState(!1),[s,u]=Ae.useState(!1),[d,g]=Ae.useState(!1),[p,c]=Ae.useState(!1),[S,I]=Ae.useState([]),[k,R]=Ae.useState([]),z=()=>{t(!0),u(!1)},ue=()=>{u(!0),t(!1)},ie=N=>{N.preventDefault();const H={id:k.length+1,name:N.target.name.value,email:N.target.email.value,phone:N.target.phone.value};R([...k,H]),t(!1)},q=N=>{N.preventDefault();const H={id:S.length+1,name:N.target.name.value,phone:N.target.phone.value,address:N.target.address.value,licensePlate:N.target.licensePlate.value,carId:N.target.carId.value};I([...S,H]),u(!1)},ae=()=>Y.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-75 flex items-center justify-center z-50",children:Y.jsxs("div",{className:"bg-white p-6 rounded-md max-w-3xl w-full",children:[Y.jsx("h2",{className:"text-2xl mb-4 text-center",children:"User Data"}),Y.jsxs("table",{className:"w-full table-auto",children:[Y.jsx("thead",{children:Y.jsxs("tr",{className:"bg-gray-200",children:[Y.jsx("th",{className:"border px-4 py-2",children:"ID"}),Y.jsx("th",{className:"border px-4 py-2",children:"Name"}),Y.jsx("th",{className:"border px-4 py-2",children:"Phone"}),Y.jsx("th",{className:"border px-4 py-2",children:"Address"}),Y.jsx("th",{className:"border px-4 py-2",children:"License Plate"}),Y.jsx("th",{className:"border px-4 py-2",children:"Car ID"})]})}),Y.jsx("tbody",{children:S.map(N=>Y.jsxs("tr",{className:"text-center",children:[Y.jsx("td",{className:"border px-4 py-2",children:N.id}),Y.jsx("td",{className:"border px-4 py-2",children:N.name}),Y.jsx("td",{className:"border px-4 py-2",children:N.phone}),Y.jsx("td",{className:"border px-4 py-2",children:N.address}),Y.jsx("td",{className:"border px-4 py-2",children:N.licensePlate}),Y.jsx("td",{className:"border px-4 py-2",children:N.carId})]},N.id))})]}),Y.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white px-4 py-2 rounded mt-4",onClick:()=>g(!1),children:"Close"})]})}),G=()=>Y.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-75 flex items-center justify-center z-50",children:Y.jsxs("div",{className:"bg-white p-6 rounded-md max-w-3xl w-full",children:[Y.jsx("h2",{className:"text-2xl mb-2 text-center",children:"Admin Data"}),Y.jsxs("table",{className:"w-full table-auto",children:[Y.jsx("thead",{children:Y.jsxs("tr",{className:"bg-gray-200",children:[Y.jsx("th",{className:"border px-4 py-2",children:"ID"}),Y.jsx("th",{className:"border px-4 py-2",children:"Name"}),Y.jsx("th",{className:"border px-4 py-2",children:"Email"}),Y.jsx("th",{className:"border px-4 py-2",children:"Phone"})]})}),Y.jsx("tbody",{children:k.map(N=>Y.jsxs("tr",{className:"text-center",children:[Y.jsx("td",{className:"border px-4 py-2",children:N.id}),Y.jsx("td",{className:"border px-4 py-2",children:N.name}),Y.jsx("td",{className:"border px-4 py-2",children:N.email}),Y.jsx("td",{className:"border px-4 py-2",children:N.phone})]},N.id))})]}),Y.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded mt-4",onClick:()=>c(!1),children:"Close"})]})});return Y.jsxs("div",{className:"flex h-screen w-screen",children:[Y.jsx(Eh,{}),Y.jsxs("div",{className:"w-full p-6",children:[Y.jsx("div",{className:"flex flex-grow items-center justify-center",children:Y.jsx("div",{className:"flex justify-start items-center rounded-md p-6 max-w-lg w-full h-full text-white",children:Y.jsxs("div",{className:"flex space-x-4",children:[Y.jsx("button",{className:`bg-gray-800 text-white px-6 py-2 rounded-lg ${s?"bg-green-500":""}`,onClick:ue,children:"Register New User"}),Y.jsx("button",{className:`bg-gray-800 text-white px-6 py-2 rounded-lg ${e?"bg-red-600":""}`,onClick:z,children:"Register New Admin"}),Y.jsx("button",{className:"bg-blue-800 text-white px-6 py-2 rounded-lg",onClick:()=>g(!0),children:"Show All Users"}),Y.jsx("button",{className:"bg-blue-800 text-white px-6 py-2 rounded-lg",onClick:()=>c(!0),children:"Show All Admins"})]})})}),e&&Y.jsx("div",{className:"flex justify-center items-center",children:Y.jsxs("div",{className:"bg-white text-black p-6 mt-2 rounded-md max-w-xl w-full shadow-lg",children:[Y.jsx("h2",{className:"text-2xl mb-4 text-center",children:"Admin Registration"}),Y.jsxs("form",{onSubmit:ie,children:[Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"name",placeholder:"Full Name",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"email",name:"email",placeholder:"Email",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"password",name:"password",placeholder:"Password",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"text-center",children:Y.jsx("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white px-6 py-3 rounded-lg",children:"Add Admin"})})]})]})}),s&&Y.jsx("div",{className:"flex justify-center items-center",children:Y.jsxs("div",{className:"bg-white text-black p-6 mt-10 rounded-md max-w-xl w-full shadow-lg",children:[Y.jsx("h2",{className:"text-2xl mb-4 text-center",children:"User Registration"}),Y.jsxs("form",{onSubmit:q,children:[Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"name",placeholder:"Full Name",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"phone",placeholder:"Phone Number",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"address",placeholder:"Address",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"licensePlate",placeholder:"License Plate",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"mb-4",children:Y.jsx("input",{type:"text",name:"carId",placeholder:"Car ID",className:"bg-gray-100 text-center text-black px-4 py-3 rounded-lg w-full"})}),Y.jsx("div",{className:"text-center",children:Y.jsx("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white px-6 py-3 rounded-lg",children:"Add User"})})]})]})}),d&&Y.jsx(ae,{}),p&&Y.jsx(G,{})]})]})}function gL(){return Y.jsxs(av,{children:[Y.jsx(ea,{path:"/",element:Y.jsx(fL,{})}),Y.jsx(ea,{path:"/home",element:Y.jsx(Pk,{})}),Y.jsx(ea,{path:"/heat-map",element:Y.jsx(Mk,{})}),Y.jsx(ea,{path:"/user-tracking",element:Y.jsx(kk,{})}),Y.jsx(ea,{path:"/admin-management",element:Y.jsx(qk,{})}),Y.jsx(ea,{path:"/add-obstacle",element:Y.jsx(Wk,{})}),Y.jsx(ea,{path:"/add-new-member",element:Y.jsx(mL,{})}),Y.jsx(ea,{path:"*",element:Y.jsx(pL,{})})]})}var a0={},Uw=tv;a0.createRoot=Uw.createRoot,a0.hydrateRoot=Uw.hydrateRoot;a0.createRoot(document.getElementById("root")).render(Y.jsx(vP,{children:Y.jsx("div",{className:"flex w-screen h-screen",children:Y.jsx(gL,{})})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
